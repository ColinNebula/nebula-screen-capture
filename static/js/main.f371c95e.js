/*! For license information please see main.f371c95e.js.LICENSE.txt */
(()=>{"use strict";var e={85:(e,t,n)=>{var a=n(340),s=n(950),r=n(119);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(o(e)!==e)throw Error(i(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),y=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var M=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var z=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var E=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=E&&e[E]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case S:return"Suspense";case N:return"SuspenseList";case M:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case y:return e.displayName||"Context";case j:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var L=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},B=[],I=-1;function O(e){return{current:e}}function V(e){0>I||(e.current=B[I],B[I]=null,I--)}function H(e,t){I++,B[I]=e.current,e.current=t}var U,_,q=O(null),W=O(null),Q=O(null),G=O(null);function K(e,t){switch(H(Q,t),H(W,e),H(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=xu(t=vu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(q),H(q,e)}function $(){V(q),V(W),V(Q)}function Y(e){null!==e.memoizedState&&H(G,e);var t=q.current,n=xu(t,e.type);t!==n&&(H(W,e),H(q,n))}function X(e){W.current===e&&(V(q),V(W)),G.current===e&&(V(G),dh._currentValue=F)}function J(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||"",_=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+U+e+_}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var a=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){a=r}e.call(n.prototype)}}else{try{throw Error()}catch(i){a=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(l){if(l&&a&&"string"===typeof l.stack)return[l.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),i=r[0],l=r[1];if(i&&l){var o=i.split("\n"),c=l.split("\n");for(s=a=0;a<o.length&&!o[a].includes("DetermineComponentFrameRoot");)a++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(a===o.length||s===c.length)for(a=o.length-1,s=c.length-1;1<=a&&0<=s&&o[a]!==c[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==c[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==c[s]){var d="\n"+o[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=a&&0<=s);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(a){return"\nError generating stack: "+a.message+"\n"+a.stack}}var ae=Object.prototype.hasOwnProperty,se=a.unstable_scheduleCallback,re=a.unstable_cancelCallback,ie=a.unstable_shouldYield,le=a.unstable_requestPaint,oe=a.unstable_now,ce=a.unstable_getCurrentPriorityLevel,de=a.unstable_ImmediatePriority,ue=a.unstable_UserBlockingPriority,he=a.unstable_NormalPriority,me=a.unstable_LowPriority,pe=a.unstable_IdlePriority,fe=a.log,ge=a.unstable_setDisableYieldValue,ve=null,xe=null;function be(e){if("function"===typeof fe&&ge(e),xe&&"function"===typeof xe.setStrictMode)try{xe.setStrictMode(ve,e)}catch(t){}}var je=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ye(e)/we|0)|0},ye=Math.log,we=Math.LN2;var Se=256,Ne=262144,ke=4194304;function Ce(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Me(e,t,n){var a=e.pendingLanes;if(0===a)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=134217727&a;return 0!==l?0!==(a=l&~r)?s=Ce(a):0!==(i&=l)?s=Ce(i):n||0!==(n=l&~e)&&(s=Ce(n)):0!==(l=a&~r)?s=Ce(l):0!==i?s=Ce(i):n||0!==(n=a&~e)&&(s=Ce(n)),0===s?0:0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(n=t&-t)||32===r&&0!==(4194048&n))?t:s}function ze(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ee(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=ke;return 0===(62914560&(ke<<=1))&&(ke=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Le(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-je(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|261930&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-je(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}function Ae(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Fe(n))&(e.suspendedLanes|t))?0:n}function Fe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Be(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ie(){var e=A.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function Oe(e,t){var n=A.p;try{return A.p=e,t()}finally{A.p=n}}var Ve=Math.random().toString(36).slice(2),He="__reactFiber$"+Ve,Ue="__reactProps$"+Ve,_e="__reactContainer$"+Ve,qe="__reactEvents$"+Ve,We="__reactListeners$"+Ve,Qe="__reactHandles$"+Ve,Ge="__reactResources$"+Ve,Ke="__reactMarker$"+Ve;function $e(e){delete e[He],delete e[Ue],delete e[qe],delete e[We],delete e[Qe]}function Ye(e){var t=e[He];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_e]||n[He]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Fu(e);null!==e;){if(n=e[He])return n;e=Fu(e)}return t}n=(e=n).parentNode}return null}function Xe(e){if(e=e[He]||e[_e]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ke]=!0}var tt=new Set,nt={};function at(e,t){st(e,t),st(e+"Capture",t)}function st(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},lt={};function ot(e,t,n){if(s=t,ae.call(lt,s)||!ae.call(it,s)&&(rt.test(s)?lt[s]=!0:(it[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function dt(e,t,n,a){if(null===a)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+a)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof a&&"function"===typeof a.get&&"function"===typeof a.set){var s=a.get,r=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=ht(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function xt(e,t,n,a,s,r,i,l){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?jt(e,i,ut(t)):null!=n?jt(e,i,ut(n)):null!=a&&e.removeAttribute("value"),null==s&&null!=r&&(e.defaultChecked=!!r),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.name=""+ut(l):e.removeAttribute("name")}function bt(e,t,n,a,s,r,i,l){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=n){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return void mt(e);n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}a="function"!==typeof(a=null!=a?a:s)&&"symbol"!==typeof a&&!!a,e.checked=l?e.checked:!!a,e.defaultChecked=!!a,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i),mt(e)}function jt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yt(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(a&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(i(92));if(L(a)){if(1<a.length)throw Error(i(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a),mt(e)}function Nt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var a=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Mt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var s in t)a=t[s],t.hasOwnProperty(s)&&n[s]!==a&&Ct(e,s,a)}else for(var r in t)t.hasOwnProperty(r)&&Ct(e,r,t[r])}function zt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Lt=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var At=null,Ft=null;function Bt(e){var t=Xe(e);if(t&&(e=t.stateNode)){var n=e[Ue]||null;e:switch(e=t.stateNode,t.type){case"input":if(xt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=a[Ue]||null;if(!s)throw Error(i(90));xt(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&pt(a)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&yt(e,!!n.multiple,t,!1)}}}var It=!1;function Ot(e,t,n){if(It)return e(t,n);It=!0;try{return e(t)}finally{if(It=!1,(null!==At||null!==Ft)&&(Zc(),At&&(t=At,e=Ft,Ft=At=null,Bt(t),e)))for(t=0;t<e.length;t++)Bt(e[t])}}function Vt(e,t){var n=e.stateNode;if(null===n)return null;var a=n[Ue]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ht=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ht)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch(Xh){Ut=!1}var qt=null,Wt=null,Qt=null;function Gt(){if(Qt)return Qt;var e,t,n=Wt,a=n.length,s="value"in qt?qt.value:qt.textContent,r=s.length;for(e=0;e<a&&n[e]===s[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===s[r-t];t++);return Qt=s.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function $t(){return!0}function Yt(){return!1}function Xt(e){function t(t,n,a,s,r){for(var i in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?$t:Yt,this.isPropagationStopped=Yt,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=$t)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=$t)},persist:function(){},isPersistent:$t}),t}var Jt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Xt(tn),an=m({},tn,{view:0,detail:0}),sn=Xt(an),rn=m({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Jt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Jt=0,en=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),ln=Xt(rn),on=Xt(m({},rn,{dataTransfer:0})),cn=Xt(m({},an,{relatedTarget:0})),dn=Xt(m({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Xt(m({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Xt(m({},tn,{data:0})),mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function vn(){return gn}var xn=Xt(m({},an,{key:function(e){if(e.key){var t=mn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Xt(m({},rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=Xt(m({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),yn=Xt(m({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Xt(m({},rn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Xt(m({},tn,{newState:0,oldState:0})),Nn=[9,13,27,32],kn=Ht&&"CompositionEvent"in window,Cn=null;Ht&&"documentMode"in document&&(Cn=document.documentMode);var Mn=Ht&&"TextEvent"in window&&!Cn,zn=Ht&&(!kn||Cn&&8<Cn&&11>=Cn),En=String.fromCharCode(32),Tn=!1;function Pn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function An(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Fn(e,t,n,a){At?Ft?Ft.push(a):Ft=[a]:At=a,0<(t=au(t,"onChange")).length&&(n=new nn("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Bn=null,In=null;function On(e){$d(e,0)}function Vn(e){if(pt(Je(e)))return e}function Hn(e,t){if("change"===e)return t}var Un=!1;if(Ht){var _n;if(Ht){var qn="oninput"in document;if(!qn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),qn="function"===typeof Wn.oninput}_n=qn}else _n=!1;Un=_n&&(!document.documentMode||9<document.documentMode)}function Qn(){Bn&&(Bn.detachEvent("onpropertychange",Gn),In=Bn=null)}function Gn(e){if("value"===e.propertyName&&Vn(In)){var t=[];Fn(t,In,e,Dt(e)),Ot(On,t)}}function Kn(e,t,n){"focusin"===e?(Qn(),In=n,(Bn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&Qn()}function $n(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(In)}function Yn(e,t){if("click"===e)return Vn(t)}function Xn(e,t){if("input"===e||"change"===e)return Vn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!ae.call(t,s)||!Jn(e[s],t[s]))return!1}return!0}function ea(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ta(e,t){var n,a=ea(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ea(a)}}function na(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?na(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function aa(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ra=Ht&&"documentMode"in document&&11>=document.documentMode,ia=null,la=null,oa=null,ca=!1;function da(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ca||null==ia||ia!==ft(a)||("selectionStart"in(a=ia)&&sa(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},oa&&Zn(oa,a)||(oa=a,0<(a=au(la,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ia)))}function ua(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ha={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionrun:ua("Transition","TransitionRun"),transitionstart:ua("Transition","TransitionStart"),transitioncancel:ua("Transition","TransitionCancel"),transitionend:ua("Transition","TransitionEnd")},ma={},pa={};function fa(e){if(ma[e])return ma[e];if(!ha[e])return e;var t,n=ha[e];for(t in n)if(n.hasOwnProperty(t)&&t in pa)return ma[e]=n[t];return e}Ht&&(pa=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);var ga=fa("animationend"),va=fa("animationiteration"),xa=fa("animationstart"),ba=fa("transitionrun"),ja=fa("transitionstart"),ya=fa("transitioncancel"),wa=fa("transitionend"),Sa=new Map,Na="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ka(e,t){Sa.set(e,t),at(t,[e])}Na.push("scrollEnd");var Ca="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ma=[],za=0,Ea=0;function Ta(){for(var e=za,t=Ea=za=0;t<e;){var n=Ma[t];Ma[t++]=null;var a=Ma[t];Ma[t++]=null;var s=Ma[t];Ma[t++]=null;var r=Ma[t];if(Ma[t++]=null,null!==a&&null!==s){var i=a.pending;null===i?s.next=s:(s.next=i.next,i.next=s),a.pending=s}0!==r&&Da(n,s,r)}}function Pa(e,t,n,a){Ma[za++]=e,Ma[za++]=t,Ma[za++]=n,Ma[za++]=a,Ea|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Ra(e,t,n,a){return Pa(e,t,n,a),Aa(e)}function La(e,t){return Pa(e,null,null,t),Aa(e)}function Da(e,t,n){e.lanes|=n;var a=e.alternate;null!==a&&(a.lanes|=n);for(var s=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(a=r.alternate)&&(a.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(s=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,s&&null!==t&&(s=31-je(n),null===(a=(e=r.hiddenUpdates)[s])?e[s]=[t]:a.push(t),t.lane=536870912|n),r):null}function Aa(e){if(50<qc)throw qc=0,Wc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Fa={};function Ba(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(e,t,n,a){return new Ba(e,t,n,a)}function Oa(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Va(e,t){var n=e.alternate;return null===n?((n=Ia(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ha(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ua(e,t,n,a,s,r){var l=0;if(a=e,"function"===typeof e)Oa(e)&&(l=1);else if("string"===typeof e)l=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case M:return(e=Ia(31,n,t,s)).elementType=M,e.lanes=r,e;case v:return _a(n.children,s,r,t);case x:l=8,s|=24;break;case b:return(e=Ia(12,n,t,2|s)).elementType=b,e.lanes=r,e;case S:return(e=Ia(13,n,t,s)).elementType=S,e.lanes=r,e;case N:return(e=Ia(19,n,t,s)).elementType=N,e.lanes=r,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:l=10;break e;case j:l=9;break e;case w:l=11;break e;case k:l=14;break e;case C:l=16,a=null;break e}l=29,n=Error(i(130,null===e?"null":typeof e,"")),a=null}return(t=Ia(l,n,t,s)).elementType=e,t.type=a,t.lanes=r,t}function _a(e,t,n,a){return(e=Ia(7,e,a,t)).lanes=n,e}function qa(e,t,n){return(e=Ia(6,e,null,t)).lanes=n,e}function Wa(e){var t=Ia(18,null,null,0);return t.stateNode=e,t}function Qa(e,t,n){return(t=Ia(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ga=new WeakMap;function Ka(e,t){if("object"===typeof e&&null!==e){var n=Ga.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Ga.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var $a=[],Ya=0,Xa=null,Ja=0,Za=[],es=0,ts=null,ns=1,as="";function ss(e,t){$a[Ya++]=Ja,$a[Ya++]=Xa,Xa=e,Ja=t}function rs(e,t,n){Za[es++]=ns,Za[es++]=as,Za[es++]=ts,ts=e;var a=ns;e=as;var s=32-je(a)-1;a&=~(1<<s),n+=1;var r=32-je(t)+s;if(30<r){var i=s-s%5;r=(a&(1<<i)-1).toString(32),a>>=i,s-=i,ns=1<<32-je(t)+s|n<<s|a,as=r+e}else ns=1<<r|n<<s|a,as=e}function is(e){null!==e.return&&(ss(e,1),rs(e,1,0))}function ls(e){for(;e===Xa;)Xa=$a[--Ya],$a[Ya]=null,Ja=$a[--Ya],$a[Ya]=null;for(;e===ts;)ts=Za[--es],Za[es]=null,as=Za[--es],Za[es]=null,ns=Za[--es],Za[es]=null}function os(e,t){Za[es++]=ns,Za[es++]=as,Za[es++]=ts,ns=t.id,as=t.overflow,ts=e}var cs=null,ds=null,us=!1,hs=null,ms=!1,ps=Error(i(519));function fs(e){throw ys(Ka(Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ps}function gs(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[He]=e,t[Ue]=a,n){case"dialog":Yd("cancel",t),Yd("close",t);break;case"iframe":case"object":case"embed":Yd("load",t);break;case"video":case"audio":for(n=0;n<Gd.length;n++)Yd(Gd[n],t);break;case"source":Yd("error",t);break;case"img":case"image":case"link":Yd("error",t),Yd("load",t);break;case"details":Yd("toggle",t);break;case"input":Yd("invalid",t),bt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Yd("invalid",t);break;case"textarea":Yd("invalid",t),St(t,a.value,a.defaultValue,a.children)}"string"!==typeof(n=a.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===a.suppressHydrationWarning||cu(t.textContent,n)?(null!=a.popover&&(Yd("beforetoggle",t),Yd("toggle",t)),null!=a.onScroll&&Yd("scroll",t),null!=a.onScrollEnd&&Yd("scrollend",t),null!=a.onClick&&(t.onclick=Rt),t=!0):t=!1,t||fs(e,!0)}function vs(e){for(cs=e.return;cs;)switch(cs.tag){case 5:case 31:case 13:return void(ms=!1);case 27:case 3:return void(ms=!0);default:cs=cs.return}}function xs(e){if(e!==cs)return!1;if(!us)return vs(e),us=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bu(e.type,e.memoizedProps)),t=!t),t&&ds&&fs(e),vs(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ds=Au(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ds=Au(e)}else 27===n?(n=ds,Cu(e.type)?(e=Du,Du=null,ds=e):ds=n):ds=cs?Lu(e.stateNode.nextSibling):null;return!0}function bs(){ds=cs=null,us=!1}function js(){var e=hs;return null!==e&&(null===Tc?Tc=e:Tc.push.apply(Tc,e),hs=null),e}function ys(e){null===hs?hs=[e]:hs.push(e)}var ws=O(null),Ss=null,Ns=null;function ks(e,t,n){H(ws,t._currentValue),t._currentValue=n}function Cs(e){e._currentValue=ws.current,V(ws)}function Ms(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function zs(e,t,n,a){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var r=s.dependencies;if(null!==r){var l=s.child;r=r.firstContext;e:for(;null!==r;){var o=r;r=s;for(var c=0;c<t.length;c++)if(o.context===t[c]){r.lanes|=n,null!==(o=r.alternate)&&(o.lanes|=n),Ms(r.return,n,e),a||(l=null);break e}r=o.next}}else if(18===s.tag){if(null===(l=s.return))throw Error(i(341));l.lanes|=n,null!==(r=l.alternate)&&(r.lanes|=n),Ms(l,n,e),l=null}else l=s.child;if(null!==l)l.return=s;else for(l=s;null!==l;){if(l===e){l=null;break}if(null!==(s=l.sibling)){s.return=l.return,l=s;break}l=l.return}s=l}}function Es(e,t,n,a){e=null;for(var s=t,r=!1;null!==s;){if(!r)if(0!==(524288&s.flags))r=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var l=s.alternate;if(null===l)throw Error(i(387));if(null!==(l=l.memoizedProps)){var o=s.type;Jn(s.pendingProps.value,l.value)||(null!==e?e.push(o):e=[o])}}else if(s===G.current){if(null===(l=s.alternate))throw Error(i(387));l.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(dh):e=[dh])}s=s.return}null!==e&&zs(t,e,n,a),t.flags|=262144}function Ts(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ps(e){Ss=e,Ns=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Rs(e){return Ds(Ss,e)}function Ls(e,t){return null===Ss&&Ps(e),Ds(e,t)}function Ds(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ns){if(null===e)throw Error(i(308));Ns=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ns=Ns.next=t;return n}var As="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Fs=a.unstable_scheduleCallback,Bs=a.unstable_NormalPriority,Is={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Os(){return{controller:new As,data:new Map,refCount:0}}function Vs(e){e.refCount--,0===e.refCount&&Fs(Bs,function(){e.controller.abort()})}var Hs=null,Us=0,_s=0,qs=null;function Ws(){if(0===--Us&&null!==Hs){null!==qs&&(qs.status="fulfilled");var e=Hs;Hs=null,_s=0,qs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Qs=D.S;D.S=function(e,t){Lc=oe(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Hs){var n=Hs=[];Us=0,_s=Ud(),qs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Us++,t.then(Ws,Ws)}(0,t),null!==Qs&&Qs(e,t)};var Gs=O(null);function Ks(){var e=Gs.current;return null!==e?e:pc.pooledCache}function $s(e,t){H(Gs,null===t?Gs.current:t.pool)}function Ys(){var e=Ks();return null===e?null:{parent:Is._currentValue,pool:e}}var Xs=Error(i(460)),Js=Error(i(474)),Zs=Error(i(542)),er={then:function(){}};function tr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function nr(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Rt,Rt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ir(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ir(e=t.reason),e}throw sr=t,Xs}}function ar(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw sr=t,Xs;throw t}}var sr=null;function rr(){if(null===sr)throw Error(i(459));var e=sr;return sr=null,e}function ir(e){if(e===Xs||e===Zs)throw Error(i(483))}var lr=null,or=0;function cr(e){var t=or;return or+=1,null===lr&&(lr=[]),nr(lr,e,t)}function dr(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ur(e,t){if(t.$$typeof===p)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hr(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Va(e,t)).index=0,e.sibling=null,e}function r(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=67108866,n):a:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,n,a){return null===t||6!==t.tag?((t=qa(n,e.mode,a)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,a){var r=n.type;return r===v?u(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===C&&ar(r)===t.type)?(dr(t=s(t,n.props),n),t.return=e,t):(dr(t=Ua(n.type,n.key,n.props,null,e.mode,a),n),t.return=e,t)}function d(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Qa(n,e.mode,a)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,a,r){return null===t||7!==t.tag?((t=_a(n,e.mode,a,r)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qa(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return dr(n=Ua(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Qa(t,e.mode,n)).return=e,t;case C:return h(e,t=ar(t),n)}if(L(t)||T(t))return(t=_a(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,cr(t),n);if(t.$$typeof===y)return h(e,Ls(e,t),n);ur(e,t)}return null}function m(e,t,n,a){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:o(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===s?c(e,t,n,a):null;case g:return n.key===s?d(e,t,n,a):null;case C:return m(e,t,n=ar(n),a)}if(L(n)||T(n))return null!==s?null:u(e,t,n,a,null);if("function"===typeof n.then)return m(e,t,cr(n),a);if(n.$$typeof===y)return m(e,t,Ls(e,n),a);ur(e,n)}return null}function p(e,t,n,a,s){if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return o(t,e=e.get(n)||null,""+a,s);if("object"===typeof a&&null!==a){switch(a.$$typeof){case f:return c(t,e=e.get(null===a.key?n:a.key)||null,a,s);case g:return d(t,e=e.get(null===a.key?n:a.key)||null,a,s);case C:return p(e,t,n,a=ar(a),s)}if(L(a)||T(a))return u(t,e=e.get(n)||null,a,s,null);if("function"===typeof a.then)return p(e,t,n,cr(a),s);if(a.$$typeof===y)return p(e,t,n,Ls(t,a),s);ur(t,a)}return null}function x(o,c,d,u){if("object"===typeof d&&null!==d&&d.type===v&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case f:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===v){if(7===c.tag){n(o,c.sibling),(u=s(c,d.props.children)).return=o,o=u;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===C&&ar(b)===c.type){n(o,c.sibling),dr(u=s(c,d.props),d),u.return=o,o=u;break e}n(o,c);break}t(o,c),c=c.sibling}d.type===v?((u=_a(d.props.children,o.mode,u,d.key)).return=o,o=u):(dr(u=Ua(d.type,d.key,d.props,null,o.mode,u),d),u.return=o,o=u)}return l(o);case g:e:{for(b=d.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(o,c.sibling),(u=s(c,d.children||[])).return=o,o=u;break e}n(o,c);break}t(o,c),c=c.sibling}(u=Qa(d,o.mode,u)).return=o,o=u}return l(o);case C:return x(o,c,d=ar(d),u)}if(L(d))return function(s,i,l,o){for(var c=null,d=null,u=i,f=i=0,g=null;null!==u&&f<l.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=m(s,u,l[f],o);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(s,u),i=r(v,i,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===l.length)return n(s,u),us&&ss(s,f),c;if(null===u){for(;f<l.length;f++)null!==(u=h(s,l[f],o))&&(i=r(u,i,f),null===d?c=u:d.sibling=u,d=u);return us&&ss(s,f),c}for(u=a(u);f<l.length;f++)null!==(g=p(u,s,f,l[f],o))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),i=r(g,i,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(s,e)}),us&&ss(s,f),c}(o,c,d,u);if(T(d)){if("function"!==typeof(b=T(d)))throw Error(i(150));return function(s,l,o,c){if(null==o)throw Error(i(151));for(var d=null,u=null,f=l,g=l=0,v=null,x=o.next();null!==f&&!x.done;g++,x=o.next()){f.index>g?(v=f,f=null):v=f.sibling;var b=m(s,f,x.value,c);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(s,f),l=r(b,l,g),null===u?d=b:u.sibling=b,u=b,f=v}if(x.done)return n(s,f),us&&ss(s,g),d;if(null===f){for(;!x.done;g++,x=o.next())null!==(x=h(s,x.value,c))&&(l=r(x,l,g),null===u?d=x:u.sibling=x,u=x);return us&&ss(s,g),d}for(f=a(f);!x.done;g++,x=o.next())null!==(x=p(f,s,g,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?g:x.key),l=r(x,l,g),null===u?d=x:u.sibling=x,u=x);return e&&f.forEach(function(e){return t(s,e)}),us&&ss(s,g),d}(o,c,d=b.call(d),u)}if("function"===typeof d.then)return x(o,c,cr(d),u);if(d.$$typeof===y)return x(o,c,Ls(o,d),u);ur(o,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(n(o,c.sibling),(u=s(c,d)).return=o,o=u):(n(o,c),(u=qa(d,o.mode,u)).return=o,o=u),l(o)):n(o,c)}return function(e,t,n,a){try{or=0;var s=x(e,t,n,a);return lr=null,s}catch(i){if(i===Xs||i===Zs)throw i;var r=Ia(29,i,null,e.mode);return r.lanes=a,r.return=e,r}}}var mr=hr(!0),pr=hr(!1),fr=!1;function gr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function br(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&mc)){var s=a.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),a.pending=t,t=Aa(e),Da(e,null,n),t}return Pa(e,a,t,n),Aa(e)}function jr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,De(e,n)}}function yr(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?s=r=i:r=r.next=i,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var wr=!1;function Sr(){if(wr){if(null!==qs)throw qs}}function Nr(e,t,n,a){wr=!1;var s=e.updateQueue;fr=!1;var r=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?r=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==r){var u=s.baseState;for(i=0,d=c=o=null,l=r;;){var h=-536870913&l.lane,p=h!==l.lane;if(p?(gc&h)===h:(a&h)===h){0!==h&&h===_s&&(wr=!0),null!==d&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var f=e,g=l;h=t;var v=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(v,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(v,u,h):f)||void 0===h)break e;u=m({},u,h);break e;case 2:fr=!0}}null!==(h=l.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[h]:p.push(h))}else p={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=p,o=u):d=d.next=p,i|=h;if(null===(l=l.next)){if(null===(l=s.shared.pending))break;l=(p=l).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===d&&(o=u),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null===r&&(s.shared.lanes=0),Nc|=i,e.lanes=i,e.memoizedState=u}}function kr(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function Cr(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)kr(n[e],t)}var Mr=O(null),zr=O(0);function Er(e,t){H(zr,e=wc),H(Mr,t),wc=e|t.baseLanes}function Tr(){H(zr,wc),H(Mr,Mr.current)}function Pr(){wc=zr.current,V(Mr),V(zr)}var Rr=O(null),Lr=null;function Dr(e){var t=e.alternate;H(Or,1&Or.current),H(Rr,e),null===Lr&&(null===t||null!==Mr.current||null!==t.memoizedState)&&(Lr=e)}function Ar(e){H(Or,Or.current),H(Rr,e),null===Lr&&(Lr=e)}function Fr(e){22===e.tag?(H(Or,Or.current),H(Rr,e),null===Lr&&(Lr=e)):Br()}function Br(){H(Or,Or.current),H(Rr,Rr.current)}function Ir(e){V(Rr),Lr===e&&(Lr=null),V(Or)}var Or=O(0);function Vr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pu(n)||Ru(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hr=0,Ur=null,_r=null,qr=null,Wr=!1,Qr=!1,Gr=!1,Kr=0,$r=0,Yr=null,Xr=0;function Jr(){throw Error(i(321))}function Zr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function ei(e,t,n,a,s,r){return Hr=r,Ur=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?fl:gl,Gr=!1,r=n(a,s),Gr=!1,Qr&&(r=ni(t,n,a,s)),ti(e),r}function ti(e){D.H=pl;var t=null!==_r&&null!==_r.next;if(Hr=0,qr=_r=Ur=null,Wr=!1,$r=0,Yr=null,t)throw Error(i(300));null===e||Rl||null!==(e=e.dependencies)&&Ts(e)&&(Rl=!0)}function ni(e,t,n,a){Ur=e;var s=0;do{if(Qr&&(Yr=null),$r=0,Qr=!1,25<=s)throw Error(i(301));if(s+=1,qr=_r=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}D.H=vl,r=t(n,a)}while(Qr);return r}function ai(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?ci(t):t,e=e.useState()[0],(null!==_r?_r.memoizedState:null)!==e&&(Ur.flags|=1024),t}function si(){var e=0!==Kr;return Kr=0,e}function ri(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ii(e){if(Wr){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Wr=!1}Hr=0,qr=_r=Ur=null,Qr=!1,$r=Kr=0,Yr=null}function li(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===qr?Ur.memoizedState=qr=e:qr=qr.next=e,qr}function oi(){if(null===_r){var e=Ur.alternate;e=null!==e?e.memoizedState:null}else e=_r.next;var t=null===qr?Ur.memoizedState:qr.next;if(null!==t)qr=t,_r=e;else{if(null===e){if(null===Ur.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(_r=e).memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},null===qr?Ur.memoizedState=qr=e:qr=qr.next=e}return qr}function ci(e){var t=$r;return $r+=1,null===Yr&&(Yr=[]),e=nr(Yr,e,t),t=Ur,null===(null===qr?t.memoizedState:qr.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?fl:gl),e}function di(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ci(e);if(e.$$typeof===y)return Rs(e)}throw Error(i(438,String(e)))}function ui(e){var t=null,n=Ur.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var a=Ur.alternate;null!==a&&(null!==(a=a.updateQueue)&&(null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ur.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=z;return t.index++,n}function hi(e,t){return"function"===typeof t?t(e):t}function mi(e){return pi(oi(),_r,e)}function pi(e,t,n){var a=e.queue;if(null===a)throw Error(i(311));a.lastRenderedReducer=n;var s=e.baseQueue,r=a.pending;if(null!==r){if(null!==s){var l=s.next;s.next=r.next,r.next=l}t.baseQueue=s=r,a.pending=null}if(r=e.baseState,null===s)e.memoizedState=r;else{var o=l=null,c=null,d=t=s.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(gc&h)===h:(Hr&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===_s&&(u=!0);else{if((Hr&m)===m){d=d.next,m===_s&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=h,l=r):c=c.next=h,Ur.lanes|=m,Nc|=m}h=d.action,Gr&&n(r,h),r=d.hasEagerState?d.eagerState:n(r,h)}else m={lane:h,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=m,l=r):c=c.next=m,Ur.lanes|=h,Nc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?l=r:c.next=o,!Jn(r,e.memoizedState)&&(Rl=!0,u&&null!==(n=qs)))throw n;e.memoizedState=r,e.baseState=l,e.baseQueue=c,a.lastRenderedState=r}return null===s&&(a.lanes=0),[e.memoizedState,a.dispatch]}function fi(e){var t=oi(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,r=t.memoizedState;if(null!==s){n.pending=null;var l=s=s.next;do{r=e(r,l.action),l=l.next}while(l!==s);Jn(r,t.memoizedState)||(Rl=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,a]}function gi(e,t,n){var a=Ur,s=oi(),r=us;if(r){if(void 0===n)throw Error(i(407));n=n()}else n=t();var l=!Jn((_r||s).memoizedState,n);if(l&&(s.memoizedState=n,Rl=!0),s=s.queue,Hi(bi.bind(null,a,s,e),[e]),s.getSnapshot!==t||l||null!==qr&&1&qr.memoizedState.tag){if(a.flags|=2048,Fi(9,{destroy:void 0},xi.bind(null,a,s,n,t),null),null===pc)throw Error(i(349));r||0!==(127&Hr)||vi(a,t,n)}return n}function vi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ur.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ur.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xi(e,t,n,a){t.value=n,t.getSnapshot=a,ji(t)&&yi(e)}function bi(e,t,n){return n(function(){ji(t)&&yi(e)})}function ji(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(a){return!0}}function yi(e){var t=La(e,2);null!==t&&Kc(t,e,2)}function wi(e){var t=li();if("function"===typeof e){var n=e;if(e=n(),Gr){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:e},t}function Si(e,t,n,a){return e.baseState=n,pi(e,_r,"function"===typeof a?a:hi)}function Ni(e,t,n,a,s){if(ul(e))throw Error(i(485));if(null!==(e=t.action)){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==D.T?n(!0):r.isTransition=!1,a(r),null===(n=t.pending)?(r.next=t.pending=r,ki(t,r)):(r.next=n.next,t.pending=n.next=r)}}function ki(e,t){var n=t.action,a=t.payload,s=e.state;if(t.isTransition){var r=D.T,i={};D.T=i;try{var l=n(s,a),o=D.S;null!==o&&o(i,l),Ci(e,t,l)}catch(c){zi(e,t,c)}finally{null!==r&&null!==i.types&&(r.types=i.types),D.T=r}}else try{Ci(e,t,r=n(s,a))}catch(d){zi(e,t,d)}}function Ci(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Mi(e,t,n)},function(n){return zi(e,t,n)}):Mi(e,t,n)}function Mi(e,t,n){t.status="fulfilled",t.value=n,Ei(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ki(e,n)))}function zi(e,t,n){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=n,Ei(t),t=t.next}while(t!==a)}e.action=null}function Ei(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ti(e,t){return t}function Pi(e,t){if(us){var n=pc.formState;if(null!==n){e:{var a=Ur;if(us){if(ds){t:{for(var s=ds,r=ms;8!==s.nodeType;){if(!r){s=null;break t}if(null===(s=Lu(s.nextSibling))){s=null;break t}}s="F!"===(r=s.data)||"F"===r?s:null}if(s){ds=Lu(s.nextSibling),a="F!"===s.data;break e}}fs(a)}a=!1}a&&(t=n[0])}}return(n=li()).memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:t},n.queue=a,n=ol.bind(null,Ur,a),a.dispatch=n,a=wi(!1),r=dl.bind(null,Ur,!1,a.queue),s={state:t,dispatch:null,action:e,pending:null},(a=li()).queue=s,n=Ni.bind(null,Ur,s,r,n),s.dispatch=n,a.memoizedState=e,[t,n,!1]}function Ri(e){return Li(oi(),_r,e)}function Li(e,t,n){if(t=pi(e,t,Ti)[0],e=mi(hi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var a=ci(t)}catch(i){if(i===Xs)throw Zs;throw i}else a=t;var s=(t=oi()).queue,r=s.dispatch;return n!==t.memoizedState&&(Ur.flags|=2048,Fi(9,{destroy:void 0},Di.bind(null,s,n),null)),[a,r,e]}function Di(e,t){e.action=t}function Ai(e){var t=oi(),n=_r;if(null!==n)return Li(t,n,e);oi(),t=t.memoizedState;var a=(n=oi()).queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Fi(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},null===(t=Ur.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ur.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Bi(){return oi().memoizedState}function Ii(e,t,n,a){var s=li();Ur.flags|=e,s.memoizedState=Fi(1|t,{destroy:void 0},n,void 0===a?null:a)}function Oi(e,t,n,a){var s=oi();a=void 0===a?null:a;var r=s.memoizedState.inst;null!==_r&&null!==a&&Zr(a,_r.memoizedState.deps)?s.memoizedState=Fi(t,r,n,a):(Ur.flags|=e,s.memoizedState=Fi(1|t,r,n,a))}function Vi(e,t){Ii(8390656,8,e,t)}function Hi(e,t){Oi(2048,8,e,t)}function Ui(e){var t=oi().memoizedState;return function(e){Ur.flags|=4;var t=Ur.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ur.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&mc))throw Error(i(440));return t.impl.apply(void 0,arguments)}}function _i(e,t){return Oi(4,2,e,t)}function qi(e,t){return Oi(4,4,e,t)}function Wi(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Qi(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Oi(4,4,Wi.bind(null,t,e),n)}function Gi(){}function Ki(e,t){var n=oi();t=void 0===t?null:t;var a=n.memoizedState;return null!==t&&Zr(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function $i(e,t){var n=oi();t=void 0===t?null:t;var a=n.memoizedState;if(null!==t&&Zr(t,a[1]))return a[0];if(a=e(),Gr){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[a,t],a}function Yi(e,t,n){return void 0===n||0!==(1073741824&Hr)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Gc(),Ur.lanes|=e,Nc|=e,n)}function Xi(e,t,n,a){return Jn(n,t)?n:null!==Mr.current?(e=Yi(e,n,a),Jn(e,t)||(Rl=!0),e):0===(42&Hr)||0!==(1073741824&Hr)&&0===(261930&gc)?(Rl=!0,e.memoizedState=n):(e=Gc(),Ur.lanes|=e,Nc|=e,t)}function Ji(e,t,n,a,s){var r=A.p;A.p=0!==r&&8>r?r:8;var i=D.T,l={};D.T=l,dl(e,!1,t,n);try{var o=s(),c=D.S;if(null!==c&&c(l,o),null!==o&&"object"===typeof o&&"function"===typeof o.then)cl(e,t,function(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(a.status="rejected",a.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),a}(o,a),Qc());else cl(e,t,a,Qc())}catch(d){cl(e,t,{then:function(){},status:"rejected",reason:d},Qc())}finally{A.p=r,null!==i&&null!==l.types&&(i.types=l.types),D.T=i}}function Zi(){}function el(e,t,n,a){if(5!==e.tag)throw Error(i(476));var s=tl(e).queue;Ji(e,s,t,F,null===n?Zi:function(){return nl(e),n(a)})}function tl(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:F},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function nl(e){var t=tl(e);null===t.next&&(t=e.alternate.memoizedState),cl(e,t.next.queue,{},Qc())}function al(){return Rs(dh)}function sl(){return oi().memoizedState}function rl(){return oi().memoizedState}function il(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Qc(),a=br(t,e=xr(n),n);return null!==a&&(Kc(a,t,n),jr(a,t,n)),t={cache:Os()},void(e.payload=t)}t=t.return}}function ll(e,t,n){var a=Qc();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ul(e)?hl(t,n):null!==(n=Ra(e,t,n,a))&&(Kc(n,e,a),ml(n,t,a))}function ol(e,t,n){cl(e,t,n,Qc())}function cl(e,t,n,a){var s={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ul(e))hl(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=r(i,n);if(s.hasEagerState=!0,s.eagerState=l,Jn(l,i))return Pa(e,t,s,0),null===pc&&Ta(),!1}catch(o){}if(null!==(n=Ra(e,t,s,a)))return Kc(n,e,a),ml(n,t,a),!0}return!1}function dl(e,t,n,a){if(a={lane:2,revertLane:Ud(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ul(e)){if(t)throw Error(i(479))}else null!==(t=Ra(e,n,a,2))&&Kc(t,e,2)}function ul(e){var t=e.alternate;return e===Ur||null!==t&&t===Ur}function hl(e,t){Qr=Wr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ml(e,t,n){if(0!==(4194048&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,De(e,n)}}var pl={readContext:Rs,use:di,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useLayoutEffect:Jr,useInsertionEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useDeferredValue:Jr,useTransition:Jr,useSyncExternalStore:Jr,useId:Jr,useHostTransitionStatus:Jr,useFormState:Jr,useActionState:Jr,useOptimistic:Jr,useMemoCache:Jr,useCacheRefresh:Jr};pl.useEffectEvent=Jr;var fl={readContext:Rs,use:di,useCallback:function(e,t){return li().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Vi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4194308,4,Wi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){Ii(4,2,e,t)},useMemo:function(e,t){var n=li();t=void 0===t?null:t;var a=e();if(Gr){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=li();if(void 0!==n){var s=n(t);if(Gr){be(!0);try{n(t)}finally{be(!1)}}}else s=t;return a.memoizedState=a.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=ll.bind(null,Ur,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},li().memoizedState=e},useState:function(e){var t=(e=wi(e)).queue,n=ol.bind(null,Ur,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Gi,useDeferredValue:function(e,t){return Yi(li(),e,t)},useTransition:function(){var e=wi(!1);return e=Ji.bind(null,Ur,e.queue,!0,!1),li().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Ur,s=li();if(us){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===pc)throw Error(i(349));0!==(127&gc)||vi(a,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,Vi(bi.bind(null,a,r,e),[e]),a.flags|=2048,Fi(9,{destroy:void 0},xi.bind(null,a,r,n,t),null),n},useId:function(){var e=li(),t=pc.identifierPrefix;if(us){var n=as;t="_"+t+"R_"+(n=(ns&~(1<<32-je(ns)-1)).toString(32)+n),0<(n=Kr++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Xr++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:al,useFormState:Pi,useActionState:Pi,useOptimistic:function(e){var t=li();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=dl.bind(null,Ur,!0,n),n.dispatch=t,[e,t]},useMemoCache:ui,useCacheRefresh:function(){return li().memoizedState=il.bind(null,Ur)},useEffectEvent:function(e){var t=li(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&mc))throw Error(i(440));return n.impl.apply(void 0,arguments)}}},gl={readContext:Rs,use:di,useCallback:Ki,useContext:Rs,useEffect:Hi,useImperativeHandle:Qi,useInsertionEffect:_i,useLayoutEffect:qi,useMemo:$i,useReducer:mi,useRef:Bi,useState:function(){return mi(hi)},useDebugValue:Gi,useDeferredValue:function(e,t){return Xi(oi(),_r.memoizedState,e,t)},useTransition:function(){var e=mi(hi)[0],t=oi().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:gi,useId:sl,useHostTransitionStatus:al,useFormState:Ri,useActionState:Ri,useOptimistic:function(e,t){return Si(oi(),0,e,t)},useMemoCache:ui,useCacheRefresh:rl};gl.useEffectEvent=Ui;var vl={readContext:Rs,use:di,useCallback:Ki,useContext:Rs,useEffect:Hi,useImperativeHandle:Qi,useInsertionEffect:_i,useLayoutEffect:qi,useMemo:$i,useReducer:fi,useRef:Bi,useState:function(){return fi(hi)},useDebugValue:Gi,useDeferredValue:function(e,t){var n=oi();return null===_r?Yi(n,e,t):Xi(n,_r.memoizedState,e,t)},useTransition:function(){var e=fi(hi)[0],t=oi().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:gi,useId:sl,useHostTransitionStatus:al,useFormState:Ai,useActionState:Ai,useOptimistic:function(e,t){var n=oi();return null!==_r?Si(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ui,useCacheRefresh:rl};function xl(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:m({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vl.useEffectEvent=Ui;var bl={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Qc(),s=xr(a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=br(e,s,a))&&(Kc(t,e,a),jr(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Qc(),s=xr(a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=br(e,s,a))&&(Kc(t,e,a),jr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qc(),a=xr(n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=br(e,a,n))&&(Kc(t,e,n),jr(t,e,n))}};function jl(e,t,n,a,s,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,a)||!Zn(s,r))}function yl(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&bl.enqueueReplaceState(t,t.state,null)}function wl(e,t){var n=t;if("ref"in t)for(var a in n={},t)"ref"!==a&&(n[a]=t[a]);if(e=e.defaultProps)for(var s in n===t&&(n=m({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function Sl(e){Ca(e)}function Nl(e){console.error(e)}function kl(e){Ca(e)}function Cl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ml(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function zl(e,t,n){return(n=xr(n)).tag=3,n.payload={element:null},n.callback=function(){Cl(e,t)},n}function El(e){return(e=xr(e)).tag=3,e}function Tl(e,t,n,a){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var r=a.value;e.payload=function(){return s(r)},e.callback=function(){Ml(t,n,a)}}var i=n.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){Ml(t,n,a),"function"!==typeof s&&(null===Fc?Fc=new Set([this]):Fc.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}var Pl=Error(i(461)),Rl=!1;function Ll(e,t,n,a){t.child=null===e?pr(t,null,n,a):mr(t,e.child,n,a)}function Dl(e,t,n,a,s){n=n.render;var r=t.ref;if("ref"in a){var i={};for(var l in a)"ref"!==l&&(i[l]=a[l])}else i=a;return Ps(t),a=ei(e,t,n,i,r,s),l=si(),null===e||Rl?(us&&l&&is(t),t.flags|=1,Ll(e,t,a,s),t.child):(ri(e,t,s),ao(e,t,s))}function Al(e,t,n,a,s){if(null===e){var r=n.type;return"function"!==typeof r||Oa(r)||void 0!==r.defaultProps||null!==n.compare?((e=Ua(n.type,null,a,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Fl(e,t,r,a,s))}if(r=e.child,!so(e,s)){var i=r.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(i,a)&&e.ref===t.ref)return ao(e,t,s)}return t.flags|=1,(e=Va(r,a)).ref=t.ref,e.return=t,t.child=e}function Fl(e,t,n,a,s){if(null!==e){var r=e.memoizedProps;if(Zn(r,a)&&e.ref===t.ref){if(Rl=!1,t.pendingProps=a=r,!so(e,s))return t.lanes=e.lanes,ao(e,t,s);0!==(131072&e.flags)&&(Rl=!0)}}return _l(e,t,n,a,s)}function Bl(e,t,n,a){var s=a.children,r=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===a.mode){if(0!==(128&t.flags)){if(r=null!==r?r.baseLanes|n:n,null!==e){for(a=t.child=e.child,s=0;null!==a;)s=s|a.lanes|a.childLanes,a=a.sibling;a=s&~r}else a=0,t.child=null;return Ol(e,t,r,n,a)}if(0===(536870912&n))return a=t.lanes=536870912,Ol(e,t,null!==r?r.baseLanes|n:n,n,a);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$s(0,null!==r?r.cachePool:null),null!==r?Er(t,r):Tr(),Fr(t)}else null!==r?($s(0,r.cachePool),Er(t,r),Br(),t.memoizedState=null):(null!==e&&$s(0,null),Tr(),Br());return Ll(e,t,s,n),t.child}function Il(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ol(e,t,n,a,s){var r=Ks();return r=null===r?null:{parent:Is._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&$s(0,null),Tr(),Fr(t),null!==e&&Es(e,t,a,!0),t.childLanes=s,null}function Vl(e,t){return(t=Jl({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Hl(e,t,n){return mr(t,e.child,null,n),(e=Vl(t,t.pendingProps)).flags|=2,Ir(t),t.memoizedState=null,e}function Ul(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function _l(e,t,n,a,s){return Ps(t),n=ei(e,t,n,a,void 0,s),a=si(),null===e||Rl?(us&&a&&is(t),t.flags|=1,Ll(e,t,n,s),t.child):(ri(e,t,s),ao(e,t,s))}function ql(e,t,n,a,s,r){return Ps(t),t.updateQueue=null,n=ni(t,a,n,s),ti(e),a=si(),null===e||Rl?(us&&a&&is(t),t.flags|=1,Ll(e,t,n,r),t.child):(ri(e,t,r),ao(e,t,r))}function Wl(e,t,n,a,s){if(Ps(t),null===t.stateNode){var r=Fa,i=n.contextType;"object"===typeof i&&null!==i&&(r=Rs(i)),r=new n(a,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=bl,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=a,r.state=t.memoizedState,r.refs={},gr(t),i=n.contextType,r.context="object"===typeof i&&null!==i?Rs(i):Fa,r.state=t.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(xl(t,n,i,a),r.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(i=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),i!==r.state&&bl.enqueueReplaceState(r,r.state,null),Nr(t,a,r,s),Sr(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){r=t.stateNode;var l=t.memoizedProps,o=wl(n,l);r.props=o;var c=r.context,d=n.contextType;i=Fa,"object"===typeof d&&null!==d&&(i=Rs(d));var u=n.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate,l=t.pendingProps!==l,d||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(l||c!==i)&&yl(t,r,a,i),fr=!1;var h=t.memoizedState;r.state=h,Nr(t,a,r,s),Sr(),c=t.memoizedState,l||h!==c||fr?("function"===typeof u&&(xl(t,n,u,a),c=t.memoizedState),(o=fr||jl(t,n,o,a,h,c,i))?(d||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),r.props=a,r.state=c,r.context=i,a=o):("function"===typeof r.componentDidMount&&(t.flags|=4194308),a=!1)}else{r=t.stateNode,vr(e,t),d=wl(n,i=t.memoizedProps),r.props=d,u=t.pendingProps,h=r.context,c=n.contextType,o=Fa,"object"===typeof c&&null!==c&&(o=Rs(c)),(c="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(i!==u||h!==o)&&yl(t,r,a,o),fr=!1,h=t.memoizedState,r.state=h,Nr(t,a,r,s),Sr();var m=t.memoizedState;i!==u||h!==m||fr||null!==e&&null!==e.dependencies&&Ts(e.dependencies)?("function"===typeof l&&(xl(t,n,l,a),m=t.memoizedState),(d=fr||jl(t,n,d,a,h,m,o)||null!==e&&null!==e.dependencies&&Ts(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(a,m,o),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(a,m,o)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),r.props=a,r.state=m,r.context=o,a=d):("function"!==typeof r.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return r=a,Ul(e,t),a=0!==(128&t.flags),r||a?(r=t.stateNode,n=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&a?(t.child=mr(t,e.child,null,s),t.child=mr(t,null,n,s)):Ll(e,t,n,s),t.memoizedState=r.state,e=t.child):e=ao(e,t,s),e}function Ql(e,t,n,a){return bs(),t.flags|=256,Ll(e,t,n,a),t.child}var Gl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kl(e){return{baseLanes:e,cachePool:Ys()}}function $l(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Mc),e}function Yl(e,t,n){var a,s=t.pendingProps,r=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&Or.current)),a&&(r=!0,t.flags&=-129),a=0!==(32&t.flags),t.flags&=-33,null===e){if(us){if(r?Dr(t):Br(),(e=ds)?null!==(e=null!==(e=Tu(e,ms))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:as}:null,retryLane:536870912,hydrationErrors:null},(n=Wa(e)).return=t,t.child=n,cs=t,ds=null):e=null,null===e)throw fs(t);return Ru(e)?t.lanes=32:t.lanes=536870912,null}var o=s.children;return s=s.fallback,r?(Br(),o=Jl({mode:"hidden",children:o},r=t.mode),s=_a(s,r,n,null),o.return=t,s.return=t,o.sibling=s,t.child=o,(s=t.child).memoizedState=Kl(n),s.childLanes=$l(e,a,n),t.memoizedState=Gl,Il(null,s)):(Dr(t),Xl(t,o))}var c=e.memoizedState;if(null!==c&&null!==(o=c.dehydrated)){if(l)256&t.flags?(Dr(t),t.flags&=-257,t=Zl(e,t,n)):null!==t.memoizedState?(Br(),t.child=e.child,t.flags|=128,t=null):(Br(),o=s.fallback,r=t.mode,s=Jl({mode:"visible",children:s.children},r),(o=_a(o,r,n,null)).flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,mr(t,e.child,null,n),(s=t.child).memoizedState=Kl(n),s.childLanes=$l(e,a,n),t.memoizedState=Gl,t=Il(null,s));else if(Dr(t),Ru(o)){if(a=o.nextSibling&&o.nextSibling.dataset)var d=a.dgst;a=d,(s=Error(i(419))).stack="",s.digest=a,ys({value:s,source:null,stack:null}),t=Zl(e,t,n)}else if(Rl||Es(e,t,n,!1),a=0!==(n&e.childLanes),Rl||a){if(null!==(a=pc)&&(0!==(s=Ae(a,n))&&s!==c.retryLane))throw c.retryLane=s,La(e,s),Kc(a,e,s),Pl;Pu(o)||id(),t=Zl(e,t,n)}else Pu(o)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ds=Lu(o.nextSibling),cs=t,us=!0,hs=null,ms=!1,null!==e&&os(t,e),(t=Xl(t,s.children)).flags|=4096);return t}return r?(Br(),o=s.fallback,r=t.mode,d=(c=e.child).sibling,(s=Va(c,{mode:"hidden",children:s.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?o=Va(d,o):(o=_a(o,r,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,Il(null,s),s=t.child,null===(o=e.child.memoizedState)?o=Kl(n):(null!==(r=o.cachePool)?(c=Is._currentValue,r=r.parent!==c?{parent:c,pool:c}:r):r=Ys(),o={baseLanes:o.baseLanes|n,cachePool:r}),s.memoizedState=o,s.childLanes=$l(e,a,n),t.memoizedState=Gl,Il(e.child,s)):(Dr(t),e=(n=e.child).sibling,(n=Va(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Xl(e,t){return(t=Jl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Jl(e,t){return(e=Ia(22,e,null,t)).lanes=0,e}function Zl(e,t,n){return mr(t,e.child,null,n),(e=Xl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function eo(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Ms(e.return,t,n)}function to(e,t,n,a,s,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s,treeForkCount:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=s,i.treeForkCount=r)}function no(e,t,n){var a=t.pendingProps,s=a.revealOrder,r=a.tail;a=a.children;var i=Or.current,l=0!==(2&i);if(l?(i=1&i|2,t.flags|=128):i&=1,H(Or,i),Ll(e,t,a,n),a=us?Ja:0,!l&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&eo(e,n,t);else if(19===e.tag)eo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Vr(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),to(t,!1,s,n,r,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Vr(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}to(t,!0,n,null,r,a);break;case"together":to(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function ao(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Es(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Va(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Va(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function so(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ts(e))}function ro(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Rl=!0;else{if(!so(e,n)&&0===(128&t.flags))return Rl=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),ks(0,Is,e.memoizedState.cache),bs();break;case 27:case 5:Y(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:ks(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ar(t),null;break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(Dr(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Yl(e,t,n):(Dr(t),null!==(e=ao(e,t,n))?e.sibling:null);Dr(t);break;case 19:var s=0!==(128&e.flags);if((a=0!==(n&t.childLanes))||(Es(e,t,n,!1),a=0!==(n&t.childLanes)),s){if(a)return no(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),H(Or,Or.current),a)break;return null;case 22:return t.lanes=0,Bl(e,t,n,t.pendingProps);case 24:ks(0,Is,e.memoizedState.cache)}return ao(e,t,n)}(e,t,n);Rl=0!==(131072&e.flags)}else Rl=!1,us&&0!==(1048576&t.flags)&&rs(t,Ja,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=ar(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var s=e.$$typeof;if(s===w){t.tag=11,t=Dl(null,t,e,a,n);break e}if(s===k){t.tag=14,t=Al(null,t,e,a,n);break e}}throw t=R(e)||e,Error(i(306,t,""))}Oa(e)?(a=wl(e,a),t.tag=1,t=Wl(null,t,e,a,n)):(t.tag=0,t=_l(null,t,e,a,n))}return t;case 0:return _l(e,t,t.type,t.pendingProps,n);case 1:return Wl(e,t,a=t.type,s=wl(a,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(i(387));a=t.pendingProps;var r=t.memoizedState;s=r.element,vr(e,t),Nr(t,a,null,n);var l=t.memoizedState;if(a=l.cache,ks(0,Is,a),a!==r.cache&&zs(t,[Is],n,!0),Sr(),a=l.element,r.isDehydrated){if(r={element:a,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Ql(e,t,a,n);break e}if(a!==s){ys(s=Ka(Error(i(424)),t)),t=Ql(e,t,a,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ds=Lu(e.firstChild),cs=t,us=!0,hs=null,ms=!0,n=pr(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bs(),a===s){t=ao(e,t,n);break e}Ll(e,t,a,n)}t=t.child}return t;case 26:return Ul(e,t),null===e?(n=Wu(t.type,null,t.pendingProps,null))?t.memoizedState=n:us||(n=t.type,e=t.pendingProps,(a=gu(Q.current).createElement(n))[He]=t,a[Ue]=e,hu(a,n,e),et(a),t.stateNode=a):t.memoizedState=Wu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&us&&(a=t.stateNode=Bu(t.type,t.pendingProps,Q.current),cs=t,ms=!0,s=ds,Cu(t.type)?(Du=s,ds=Lu(a.firstChild)):ds=s),Ll(e,t,t.pendingProps.children,n),Ul(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&us&&((s=a=ds)&&(null!==(a=function(e,t,n,a){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[Ke])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===r)return e}if(null===(e=Lu(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,ms))?(t.stateNode=a,cs=t,ds=Lu(a.firstChild),ms=!1,s=!0):s=!1),s||fs(t)),Y(t),s=t.type,r=t.pendingProps,l=null!==e?e.memoizedProps:null,a=r.children,bu(s,r)?a=null:null!==l&&bu(s,l)&&(t.flags|=32),null!==t.memoizedState&&(s=ei(e,t,ai,null,null,n),dh._currentValue=s),Ul(e,t),Ll(e,t,a,n),t.child;case 6:return null===e&&us&&((e=n=ds)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Lu(e.nextSibling)))return null}return e}(n,t.pendingProps,ms))?(t.stateNode=n,cs=t,ds=null,e=!0):e=!1),e||fs(t)),null;case 13:return Yl(e,t,n);case 4:return K(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=mr(t,null,a,n):Ll(e,t,a,n),t.child;case 11:return Dl(e,t,t.type,t.pendingProps,n);case 7:return Ll(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ll(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,ks(0,t.type,a.value),Ll(e,t,a.children,n),t.child;case 9:return s=t.type._context,a=t.pendingProps.children,Ps(t),a=a(s=Rs(s)),t.flags|=1,Ll(e,t,a,n),t.child;case 14:return Al(e,t,t.type,t.pendingProps,n);case 15:return Fl(e,t,t.type,t.pendingProps,n);case 19:return no(e,t,n);case 31:return function(e,t,n){var a=t.pendingProps,s=0!==(128&t.flags);if(t.flags&=-129,null===e){if(us){if("hidden"===a.mode)return e=Vl(t,a),t.lanes=536870912,Il(null,e);if(Ar(t),(e=ds)?null!==(e=null!==(e=Tu(e,ms))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:as}:null,retryLane:536870912,hydrationErrors:null},(n=Wa(e)).return=t,t.child=n,cs=t,ds=null):e=null,null===e)throw fs(t);return t.lanes=536870912,null}return Vl(t,a)}var r=e.memoizedState;if(null!==r){var l=r.dehydrated;if(Ar(t),s)if(256&t.flags)t.flags&=-257,t=Hl(e,t,n);else{if(null===t.memoizedState)throw Error(i(558));t.child=e.child,t.flags|=128,t=null}else if(Rl||Es(e,t,n,!1),s=0!==(n&e.childLanes),Rl||s){if(null!==(a=pc)&&0!==(l=Ae(a,n))&&l!==r.retryLane)throw r.retryLane=l,La(e,l),Kc(a,e,l),Pl;id(),t=Hl(e,t,n)}else e=r.treeContext,ds=Lu(l.nextSibling),cs=t,us=!0,hs=null,ms=!1,null!==e&&os(t,e),(t=Vl(t,a)).flags|=4096;return t}return(e=Va(e.child,{mode:a.mode,children:a.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Bl(e,t,n,t.pendingProps);case 24:return Ps(t),a=Rs(Is),null===e?(null===(s=Ks())&&(s=pc,r=Os(),s.pooledCache=r,r.refCount++,null!==r&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:a,cache:s},gr(t),ks(0,Is,s)):(0!==(e.lanes&n)&&(vr(e,t),Nr(t,null,null,n),Sr()),s=e.memoizedState,r=t.memoizedState,s.parent!==a?(s={parent:a,cache:a},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),ks(0,Is,a)):(a=r.cache,ks(0,Is,a),a!==s.cache&&zs(t,[Is],n,!0))),Ll(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function io(e){e.flags|=4}function lo(e,t,n,a,s){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!ad())throw sr=er,Js;e.flags|=8192}}else e.flags&=-16777217}function oo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!sh(t)){if(!ad())throw sr=er,Js;e.flags|=8192}}function co(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Te():536870912,e.lanes|=t,zc|=t)}function uo(e,t){if(!us)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=65011712&s.subtreeFlags,a|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function mo(e,t,n){var a=t.pendingProps;switch(ls(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ho(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Cs(Is),$(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(xs(t)?io(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,js())),ho(t),null;case 26:var s=t.type,r=t.memoizedState;return null===e?(io(t),null!==r?(ho(t),oo(t,r)):(ho(t),lo(t,s,0,0,n))):r?r!==e.memoizedState?(io(t),ho(t),oo(t,r)):(ho(t),t.flags&=-16777217):((e=e.memoizedProps)!==a&&io(t),ho(t),lo(t,s,0,0,n)),null;case 27:if(X(t),n=Q.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&io(t);else{if(!a){if(null===t.stateNode)throw Error(i(166));return ho(t),null}e=q.current,xs(t)?gs(t):(e=Bu(s,a,n),t.stateNode=e,io(t))}return ho(t),null;case 5:if(X(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&io(t);else{if(!a){if(null===t.stateNode)throw Error(i(166));return ho(t),null}if(r=q.current,xs(t))gs(t);else{var l=gu(Q.current);switch(r){case 1:r=l.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:r=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":r=l.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":r=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(r=l.createElement("div")).innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r="string"===typeof a.is?l.createElement("select",{is:a.is}):l.createElement("select"),a.multiple?r.multiple=!0:a.size&&(r.size=a.size);break;default:r="string"===typeof a.is?l.createElement(s,{is:a.is}):l.createElement(s)}}r[He]=t,r[Ue]=a;e:for(l=t.child;null!==l;){if(5===l.tag||6===l.tag)r.appendChild(l.stateNode);else if(4!==l.tag&&27!==l.tag&&null!==l.child){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;null===l.sibling;){if(null===l.return||l.return===t)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}t.stateNode=r;e:switch(hu(r,s,a),s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&io(t)}}return ho(t),lo(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&io(t);else{if("string"!==typeof a&&null===t.stateNode)throw Error(i(166));if(e=Q.current,xs(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(s=cs))switch(s.tag){case 27:case 5:a=s.memoizedProps}e[He]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||cu(e.nodeValue,n)))||fs(t,!0)}else(e=gu(e).createTextNode(a))[He]=t,t.stateNode=e}return ho(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(a=xs(t),null!==n){if(null===e){if(!a)throw Error(i(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(557));e[He]=t}else bs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ho(t),e=!1}else n=js(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Ir(t),t):(Ir(t),null);if(0!==(128&t.flags))throw Error(i(558))}return ho(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=xs(t),null!==a&&null!==a.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[He]=t}else bs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ho(t),s=!1}else s=js(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(Ir(t),t):(Ir(t),null)}return Ir(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==a,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(s=a.alternate.memoizedState.cachePool.pool),r=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(r=a.memoizedState.cachePool.pool),r!==s&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),co(t,t.updateQueue),ho(t),null);case 4:return $(),null===e&&Zd(t.stateNode.containerInfo),ho(t),null;case 10:return Cs(t.type),ho(t),null;case 19:if(V(Or),null===(a=t.memoizedState))return ho(t),null;if(s=0!==(128&t.flags),null===(r=a.rendering))if(s)uo(a,!1);else{if(0!==Sc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=Vr(e))){for(t.flags|=128,uo(a,!1),e=r.updateQueue,t.updateQueue=e,co(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ha(n,e),n=n.sibling;return H(Or,1&Or.current|2),us&&ss(t,a.treeForkCount),t.child}e=e.sibling}null!==a.tail&&oe()>Dc&&(t.flags|=128,s=!0,uo(a,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=Vr(r))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,co(t,e),uo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!r.alternate&&!us)return ho(t),null}else 2*oe()-a.renderingStartTime>Dc&&536870912!==n&&(t.flags|=128,s=!0,uo(a,!1),t.lanes=4194304);a.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=a.last)?e.sibling=r:t.child=r,a.last=r)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=oe(),e.sibling=null,n=Or.current,H(Or,s?1&n|2:1&n),us&&ss(t,a.treeForkCount),e):(ho(t),null);case 22:case 23:return Ir(t),Pr(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?0!==(536870912&n)&&0===(128&t.flags)&&(ho(t),6&t.subtreeFlags&&(t.flags|=8192)):ho(t),null!==(n=t.updateQueue)&&co(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&V(Gs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Cs(Is),ho(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function po(e,t){switch(ls(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Cs(Is),$(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 31:if(null!==t.memoizedState){if(Ir(t),null===t.alternate)throw Error(i(340));bs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ir(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));bs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(Or),null;case 4:return $(),null;case 10:return Cs(t.type),null;case 22:case 23:return Ir(t),Pr(),null!==e&&V(Gs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Cs(Is),null;default:return null}}function fo(e,t){switch(ls(t),t.tag){case 3:Cs(Is),$();break;case 26:case 27:case 5:X(t);break;case 4:$();break;case 31:null!==t.memoizedState&&Ir(t);break;case 13:Ir(t);break;case 19:V(Or);break;case 10:Cs(t.type);break;case 22:case 23:Ir(t),Pr(),null!==e&&V(Gs);break;case 24:Cs(Is)}}function go(e,t){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var s=a.next;n=s;do{if((n.tag&e)===e){a=void 0;var r=n.create,i=n.inst;a=r(),i.destroy=a}n=n.next}while(n!==s)}}catch(l){Sd(t,t.return,l)}}function vo(e,t,n){try{var a=t.updateQueue,s=null!==a?a.lastEffect:null;if(null!==s){var r=s.next;a=r;do{if((a.tag&e)===e){var i=a.inst,l=i.destroy;if(void 0!==l){i.destroy=void 0,s=t;var o=n,c=l;try{c()}catch(d){Sd(s,o,d)}}}a=a.next}while(a!==r)}}catch(d){Sd(t,t.return,d)}}function xo(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Cr(t,n)}catch(a){Sd(e,e.return,a)}}}function bo(e,t,n){n.props=wl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Sd(e,t,a)}}function jo(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"===typeof n?e.refCleanup=n(a):n.current=a}}catch(s){Sd(e,t,s)}}function yo(e,t){var n=e.ref,a=e.refCleanup;if(null!==n)if("function"===typeof a)try{a()}catch(s){Sd(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(r){Sd(e,t,r)}else n.current=null}function wo(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(s){Sd(e,e.return,s)}}function So(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,l=null,o=null,c=null,d=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:a.hasOwnProperty(p)||du(e,t,p,null,a,h)}}for(var m in a){var p=a[m];if(h=n[m],a.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":r=p;break;case"name":s=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":l=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:p!==h&&du(e,t,m,p,a,h)}}return void xt(e,l,o,c,d,u,r,s);case"select":for(r in p=l=o=m=null,n)if(c=n[r],n.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":p=c;default:a.hasOwnProperty(r)||du(e,t,r,null,a,c)}for(s in a)if(r=a[s],c=n[s],a.hasOwnProperty(s)&&(null!=r||null!=c))switch(s){case"value":m=r;break;case"defaultValue":o=r;break;case"multiple":l=r;default:r!==c&&du(e,t,s,r,a,c)}return t=o,n=l,a=p,void(null!=m?yt(e,!!n,m,!1):!!a!==!!n&&(null!=t?yt(e,!!n,t,!0):yt(e,!!n,n?[]:"",!1)));case"textarea":for(o in p=m=null,n)if(s=n[o],n.hasOwnProperty(o)&&null!=s&&!a.hasOwnProperty(o))switch(o){case"value":case"children":break;default:du(e,t,o,null,a,s)}for(l in a)if(s=a[l],r=n[l],a.hasOwnProperty(l)&&(null!=s||null!=r))switch(l){case"value":m=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(i(91));break;default:s!==r&&du(e,t,l,s,a,r)}return void wt(e,m,p);case"option":for(var f in n)if(m=n[f],n.hasOwnProperty(f)&&null!=m&&!a.hasOwnProperty(f))if("selected"===f)e.selected=!1;else du(e,t,f,null,a,m);for(c in a)if(m=a[c],p=n[c],a.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else du(e,t,c,m,a,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!a.hasOwnProperty(g)&&du(e,t,g,null,a,m);for(d in a)if(m=a[d],p=n[d],a.hasOwnProperty(d)&&m!==p&&(null!=m||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(i(137,t));break;default:du(e,t,d,m,a,p)}return;default:if(zt(t)){for(var v in n)m=n[v],n.hasOwnProperty(v)&&void 0!==m&&!a.hasOwnProperty(v)&&uu(e,t,v,void 0,a,m);for(u in a)m=a[u],p=n[u],!a.hasOwnProperty(u)||m===p||void 0===m&&void 0===p||uu(e,t,u,m,a,p);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&null!=m&&!a.hasOwnProperty(x)&&du(e,t,x,null,a,m);for(h in a)m=a[h],p=n[h],!a.hasOwnProperty(h)||m===p||null==m&&null==p||du(e,t,h,m,a,p)}(a,e.type,n,t),a[Ue]=t}catch(s){Sd(e,e.return,s)}}function No(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cu(e.type)||4===e.tag}function ko(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||No(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Co(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rt));else if(4!==a&&(27===a&&Cu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Co(e,t,n),e=e.sibling;null!==e;)Co(e,t,n),e=e.sibling}function Mo(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&(27===a&&Cu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Mo(e,t,n),e=e.sibling;null!==e;)Mo(e,t,n),e=e.sibling}function zo(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);hu(t,a,n),t[He]=e,t[Ue]=n}catch(r){Sd(e,e.return,r)}}var Eo=!1,To=!1,Po=!1,Ro="function"===typeof WeakSet?WeakSet:Set,Lo=null;function Do(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Ko(e,n),4&a&&go(5,n);break;case 1:if(Ko(e,n),4&a)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){Sd(n,n.return,i)}else{var s=wl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){Sd(n,n.return,l)}}64&a&&xo(n),512&a&&jo(n,n.return);break;case 3:if(Ko(e,n),64&a&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Cr(e,t)}catch(i){Sd(n,n.return,i)}}break;case 27:null===t&&4&a&&zo(n);case 26:case 5:Ko(e,n),null===t&&4&a&&wo(n),512&a&&jo(n,n.return);break;case 12:Ko(e,n);break;case 31:Ko(e,n),4&a&&Vo(e,n);break;case 13:Ko(e,n),4&a&&Ho(e,n),64&a&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}(e,n=Md.bind(null,n))));break;case 22:if(!(a=null!==n.memoizedState||Eo)){t=null!==t&&null!==t.memoizedState||To,s=Eo;var r=To;Eo=a,(To=t)&&!r?Yo(e,n,0!==(8772&n.subtreeFlags)):Ko(e,n),Eo=s,To=r}break;case 30:break;default:Ko(e,n)}}function Ao(e){var t=e.alternate;null!==t&&(e.alternate=null,Ao(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&$e(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fo=null,Bo=!1;function Io(e,t,n){for(n=n.child;null!==n;)Oo(e,t,n),n=n.sibling}function Oo(e,t,n){if(xe&&"function"===typeof xe.onCommitFiberUnmount)try{xe.onCommitFiberUnmount(ve,n)}catch(r){}switch(n.tag){case 26:To||yo(n,t),Io(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:To||yo(n,t);var a=Fo,s=Bo;Cu(n.type)&&(Fo=n.stateNode,Bo=!1),Io(e,t,n),Iu(n.stateNode),Fo=a,Bo=s;break;case 5:To||yo(n,t);case 6:if(a=Fo,s=Bo,Fo=null,Io(e,t,n),Bo=s,null!==(Fo=a))if(Bo)try{(9===Fo.nodeType?Fo.body:"HTML"===Fo.nodeName?Fo.ownerDocument.body:Fo).removeChild(n.stateNode)}catch(i){Sd(n,t,i)}else try{Fo.removeChild(n.stateNode)}catch(i){Sd(n,t,i)}break;case 18:null!==Fo&&(Bo?(Mu(9===(e=Fo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),qh(e)):Mu(Fo,n.stateNode));break;case 4:a=Fo,s=Bo,Fo=n.stateNode.containerInfo,Bo=!0,Io(e,t,n),Fo=a,Bo=s;break;case 0:case 11:case 14:case 15:vo(2,n,t),To||vo(4,n,t),Io(e,t,n);break;case 1:To||(yo(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount&&bo(n,t,a)),Io(e,t,n);break;case 21:Io(e,t,n);break;case 22:To=(a=To)||null!==n.memoizedState,Io(e,t,n),To=a;break;default:Io(e,t,n)}}function Vo(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{qh(e)}catch(n){Sd(t,t.return,n)}}}function Ho(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{qh(e)}catch(n){Sd(t,t.return,n)}}function Uo(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ro),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ro),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var a=zd.bind(null,e,t);t.then(a,a)}})}function _o(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var s=n[a],r=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 27:if(Cu(o.type)){Fo=o.stateNode,Bo=!1;break e}break;case 5:Fo=o.stateNode,Bo=!1;break e;case 3:case 4:Fo=o.stateNode.containerInfo,Bo=!0;break e}o=o.return}if(null===Fo)throw Error(i(160));Oo(r,l,s),Fo=null,Bo=!1,null!==(r=s.alternate)&&(r.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wo(t,e),t=t.sibling}var qo=null;function Wo(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_o(t,e),Qo(e),4&a&&(vo(3,e,e.return),go(3,e),vo(5,e,e.return));break;case 1:_o(t,e),Qo(e),512&a&&(To||null===n||yo(n,n.return)),64&a&&Eo&&(null!==(e=e.updateQueue)&&(null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a))));break;case 26:var s=qo;if(_o(t,e),Qo(e),512&a&&(To||null===n||yo(n,n.return)),4&a){var r=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(a){case"title":(!(r=s.getElementsByTagName("title")[0])||r[Ke]||r[He]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=s.createElement(a),s.head.insertBefore(r,s.querySelector("head > title"))),hu(r,a,n),r[He]=e,et(r),a=r;break e;case"link":var l=nh("link","href",s).get(a+(n.href||""));if(l)for(var o=0;o<l.length;o++)if((r=l[o]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&r.getAttribute("rel")===(null==n.rel?null:n.rel)&&r.getAttribute("title")===(null==n.title?null:n.title)&&r.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){l.splice(o,1);break t}hu(r=s.createElement(a),a,n),s.head.appendChild(r);break;case"meta":if(l=nh("meta","content",s).get(a+(n.content||"")))for(o=0;o<l.length;o++)if((r=l[o]).getAttribute("content")===(null==n.content?null:""+n.content)&&r.getAttribute("name")===(null==n.name?null:n.name)&&r.getAttribute("property")===(null==n.property?null:n.property)&&r.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&r.getAttribute("charset")===(null==n.charSet?null:n.charSet)){l.splice(o,1);break t}hu(r=s.createElement(a),a,n),s.head.appendChild(r);break;default:throw Error(i(468,a))}r[He]=e,et(r),a=r}e.stateNode=a}else ah(s,e.type,e.stateNode);else e.stateNode=Xu(s,a,e.memoizedProps);else r!==a?(null===r?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):r.count--,null===a?ah(s,e.type,e.stateNode):Xu(s,a,e.memoizedProps)):null===a&&null!==e.stateNode&&So(e,e.memoizedProps,n.memoizedProps)}break;case 27:_o(t,e),Qo(e),512&a&&(To||null===n||yo(n,n.return)),null!==n&&4&a&&So(e,e.memoizedProps,n.memoizedProps);break;case 5:if(_o(t,e),Qo(e),512&a&&(To||null===n||yo(n,n.return)),32&e.flags){s=e.stateNode;try{Nt(s,"")}catch(f){Sd(e,e.return,f)}}4&a&&null!=e.stateNode&&So(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&a&&(Po=!0);break;case 6:if(_o(t,e),Qo(e),4&a){if(null===e.stateNode)throw Error(i(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(f){Sd(e,e.return,f)}}break;case 3:if(th=null,s=qo,qo=Hu(t.containerInfo),_o(t,e),qo=s,Qo(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{qh(t.containerInfo)}catch(f){Sd(e,e.return,f)}Po&&(Po=!1,Go(e));break;case 4:a=qo,qo=Hu(e.stateNode.containerInfo),_o(t,e),Qo(e),qo=a;break;case 12:default:_o(t,e),Qo(e);break;case 31:case 19:_o(t,e),Qo(e),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Uo(e,a)));break;case 13:_o(t,e),Qo(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Rc=oe()),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Uo(e,a)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=Eo,u=To;if(Eo=d||s,To=u||c,_o(t,e),To=u,Eo=d,Qo(e),8192&a)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||Eo||To||$o(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(r=c.stateNode,s)"function"===typeof(l=r.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{o=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;o.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(f){Sd(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(f){Sd(c,c.return,f)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;s?zu(p,!0):zu(c.stateNode,!1)}catch(f){Sd(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&(null!==(a=e.updateQueue)&&(null!==(n=a.retryQueue)&&(a.retryQueue=null,Uo(e,n))));case 30:case 21:}}function Qo(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(No(a)){n=a;break}a=a.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var s=n.stateNode;Mo(e,ko(e),s);break;case 5:var r=n.stateNode;32&n.flags&&(Nt(r,""),n.flags&=-33),Mo(e,ko(e),r);break;case 3:case 4:var l=n.stateNode.containerInfo;Co(e,ko(e),l);break;default:throw Error(i(161))}}catch(o){Sd(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Go(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Go(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ko(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Do(e,t.alternate,t),t=t.sibling}function $o(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vo(4,t,t.return),$o(t);break;case 1:yo(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bo(t,t.return,n),$o(t);break;case 27:Iu(t.stateNode);case 26:case 5:yo(t,t.return),$o(t);break;case 22:null===t.memoizedState&&$o(t);break;default:$o(t)}e=e.sibling}}function Yo(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,s=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:Yo(s,r,n),go(4,r);break;case 1:if(Yo(s,r,n),"function"===typeof(s=(a=r).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){Sd(a,a.return,c)}if(null!==(s=(a=r).updateQueue)){var l=a.stateNode;try{var o=s.shared.hiddenCallbacks;if(null!==o)for(s.shared.hiddenCallbacks=null,s=0;s<o.length;s++)kr(o[s],l)}catch(c){Sd(a,a.return,c)}}n&&64&i&&xo(r),jo(r,r.return);break;case 27:zo(r);case 26:case 5:Yo(s,r,n),n&&null===a&&4&i&&wo(r),jo(r,r.return);break;case 12:Yo(s,r,n);break;case 31:Yo(s,r,n),n&&4&i&&Vo(s,r);break;case 13:Yo(s,r,n),n&&4&i&&Ho(s,r);break;case 22:null===r.memoizedState&&Yo(s,r,n),jo(r,r.return);break;case 30:break;default:Yo(s,r,n)}t=t.sibling}}function Xo(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Vs(n))}function Jo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vs(e))}function Zo(e,t,n,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,a),t=t.sibling}function ec(e,t,n,a){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Zo(e,t,n,a),2048&s&&go(9,t);break;case 1:case 31:case 13:default:Zo(e,t,n,a);break;case 3:Zo(e,t,n,a),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vs(e)));break;case 12:if(2048&s){Zo(e,t,n,a),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,l=r.onPostCommit;"function"===typeof l&&l(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Sd(t,t.return,o)}}else Zo(e,t,n,a);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,null!==t.memoizedState?2&r._visibility?Zo(e,t,n,a):nc(e,t):2&r._visibility?Zo(e,t,n,a):(r._visibility|=2,tc(e,t,n,a,0!==(10256&t.subtreeFlags)||!1)),2048&s&&Xo(i,t);break;case 24:Zo(e,t,n,a),2048&s&&Jo(t.alternate,t)}}function tc(e,t,n,a,s){for(s=s&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var r=e,i=t,l=n,o=a,c=i.flags;switch(i.tag){case 0:case 11:case 15:tc(r,i,l,o,s),go(8,i);break;case 23:break;case 22:var d=i.stateNode;null!==i.memoizedState?2&d._visibility?tc(r,i,l,o,s):nc(r,i):(d._visibility|=2,tc(r,i,l,o,s)),s&&2048&c&&Xo(i.alternate,i);break;case 24:tc(r,i,l,o,s),s&&2048&c&&Jo(i.alternate,i);break;default:tc(r,i,l,o,s)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,a=t,s=a.flags;switch(a.tag){case 22:nc(n,a),2048&s&&Xo(a.alternate,a);break;case 24:nc(n,a),2048&s&&Jo(a.alternate,a);break;default:nc(n,a)}t=t.sibling}}var ac=8192;function sc(e,t,n){if(e.subtreeFlags&ac)for(e=e.child;null!==e;)rc(e,t,n),e=e.sibling}function rc(e,t,n){switch(e.tag){case 26:sc(e,t,n),e.flags&ac&&null!==e.memoizedState&&function(e,t,n,a){if("stylesheet"===n.type&&("string"!==typeof a.media||!1!==matchMedia(a.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var s=Qu(a.href),r=t.querySelector(Gu(s));if(r)return null!==(t=r._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ih.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=r,void et(r);r=t.ownerDocument||t,a=Ku(a),(s=Ou.get(s))&&Zu(a,s),et(r=r.createElement("link"));var i=r;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),hu(r,"link",a),n.instance=r}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ih.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,qo,e.memoizedState,e.memoizedProps);break;case 5:default:sc(e,t,n);break;case 3:case 4:var a=qo;qo=Hu(e.stateNode.containerInfo),sc(e,t,n),qo=a;break;case 22:null===e.memoizedState&&(null!==(a=e.alternate)&&null!==a.memoizedState?(a=ac,ac=16777216,sc(e,t,n),ac=a):sc(e,t,n))}}function ic(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Lo=a,dc(a,e)}ic(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)oc(e),e=e.sibling}function oc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&vo(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):lc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Lo=a,dc(a,e)}ic(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vo(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function dc(e,t){for(;null!==Lo;){var n=Lo;switch(n.tag){case 0:case 11:case 15:vo(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var a=n.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Vs(n.memoizedState.cache)}if(null!==(a=n.child))a.return=n,Lo=a;else e:for(n=e;null!==Lo;){var s=(a=Lo).sibling,r=a.return;if(Ao(a),a===n){Lo=null;break e}if(null!==s){s.return=r,Lo=s;break e}Lo=r}}}var uc={getCacheForType:function(e){var t=Rs(Is),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Rs(Is).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,mc=0,pc=null,fc=null,gc=0,vc=0,xc=null,bc=!1,jc=!1,yc=!1,wc=0,Sc=0,Nc=0,kc=0,Cc=0,Mc=0,zc=0,Ec=null,Tc=null,Pc=!1,Rc=0,Lc=0,Dc=1/0,Ac=null,Fc=null,Bc=0,Ic=null,Oc=null,Vc=0,Hc=0,Uc=null,_c=null,qc=0,Wc=null;function Qc(){return 0!==(2&mc)&&0!==gc?gc&-gc:null!==D.T?Ud():Ie()}function Gc(){if(0===Mc)if(0===(536870912&gc)||us){var e=Ne;0===(3932160&(Ne<<=1))&&(Ne=262144),Mc=e}else Mc=536870912;return null!==(e=Rr.current)&&(e.flags|=32),Mc}function Kc(e,t,n){(e!==pc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(td(e,0),Jc(e,gc,Mc,!1)),Re(e,n),0!==(2&mc)&&e===pc||(e===pc&&(0===(2&mc)&&(kc|=n),4===Sc&&Jc(e,gc,Mc,!1)),Ad(e))}function $c(e,t,n){if(0!==(6&mc))throw Error(i(327));for(var a=!n&&0===(127&t)&&0===(t&e.expiredLanes)||ze(e,t),s=a?function(e,t){var n=mc;mc|=2;var a=sd(),s=rd();pc!==e||gc!==t?(Ac=null,Dc=oe()+500,td(e,t)):jc=ze(e,t);e:for(;;)try{if(0!==vc&&null!==fc){t=fc;var r=xc;t:switch(vc){case 1:vc=0,xc=null,hd(e,t,r,1);break;case 2:case 9:if(tr(r)){vc=0,xc=null,ud(t);break}t=function(){2!==vc&&9!==vc||pc!==e||(vc=7),Ad(e)},r.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:tr(r)?(vc=0,xc=null,ud(t)):(vc=0,xc=null,hd(e,t,r,7));break;case 5:var l=null;switch(fc.tag){case 26:l=fc.memoizedState;case 5:case 27:var o=fc;if(l?sh(l):o.stateNode.complete){vc=0,xc=null;var c=o.sibling;if(null!==c)fc=c;else{var d=o.return;null!==d?(fc=d,md(d)):fc=null}break t}}vc=0,xc=null,hd(e,t,r,5);break;case 6:vc=0,xc=null,hd(e,t,r,6);break;case 8:ed(),Sc=6;break e;default:throw Error(i(462))}}cd();break}catch(u){nd(e,u)}return Ns=Ss=null,D.H=a,D.A=s,mc=n,null!==fc?0:(pc=null,gc=0,Ta(),Sc)}(e,t):ld(e,t,!0),r=a;;){if(0===s){jc&&!a&&Jc(e,t,0,!1);break}if(n=e.current.alternate,!r||Xc(n)){if(2===s){if(r=t,e.errorRecoveryDisabledLanes&r)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var o=e;s=Ec;var c=o.current.memoizedState.isDehydrated;if(c&&(td(o,l).flags|=256),2!==(l=ld(o,l,!1))){if(yc&&!c){o.errorRecoveryDisabledLanes|=r,kc|=r,s=4;break e}r=Tc,Tc=s,null!==r&&(null===Tc?Tc=r:Tc.push.apply(Tc,r))}s=l}if(r=!1,2!==s)continue}}if(1===s){td(e,0),Jc(e,t,0,!0);break}e:{switch(a=e,r=s){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Jc(a,t,Mc,!bc);break e;case 2:Tc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(s=Rc+300-oe())){if(Jc(a,t,Mc,!bc),0!==Me(a,0,!0))break e;Vc=t,a.timeoutHandle=yu(Yc.bind(null,a,n,Tc,Ac,Pc,t,Mc,kc,zc,bc,r,"Throttled",-0,0),s)}else Yc(a,n,Tc,Ac,Pc,t,Mc,kc,zc,bc,r,null,-0,0)}break}s=ld(e,t,!1),r=!1}Ad(e)}function Yc(e,t,n,a,s,r,i,l,o,c,d,u,h,m){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||16785408===(16785408&u)){rc(t,r,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var p=(62914560&r)===r?Rc-oe():(4194048&r)===r?Lc-oe():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&oh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&oh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===rh&&(rh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var s=n[a],r=s.transferSize,i=s.initiatorType,l=s.duration;if(r&&l&&mu(i)){for(i=0,l=s.responseEnd,a+=1;a<n.length;a++){var o=n[a],c=o.startTime;if(c>l)break;var d=o.transferSize,u=o.initiatorType;d&&mu(u)&&(i+=d*((o=o.responseEnd)<l?1:(l-c)/(o-c)))}if(--a,t+=8*(r+i)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&oh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>rh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(s)}}:null}(u,p)))return Vc=r,e.cancelPendingCommit=p(fd.bind(null,e,t,r,n,a,s,i,l,o,d,u,null,h,m)),void Jc(e,r,i,!c)}fd(e,t,r,n,a,s,i,l,o)}function Xc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var a=0;a<n.length;a++){var s=n[a],r=s.getSnapshot;s=s.value;try{if(!Jn(r(),s))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t,n,a){t&=~Cc,t&=~kc,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var s=t;0<s;){var r=31-je(s),i=1<<r;a[r]=-1,s&=~i}0!==n&&Le(e,n,t)}function Zc(){return 0!==(6&mc)||(Fd(0,!1),!1)}function ed(){if(null!==fc){if(0===vc)var e=fc.return;else Ns=Ss=null,ii(e=fc),lr=null,or=0,e=fc;for(;null!==e;)fo(e.alternate,e),e=e.return;fc=null}}function td(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,wu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc=0,ed(),pc=e,fc=n=Va(e.current,null),gc=t,vc=0,xc=null,bc=!1,jc=ze(e,t),yc=!1,zc=Mc=Cc=kc=Nc=Sc=0,Tc=Ec=null,Pc=!1,0!==(8&t)&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var s=31-je(a),r=1<<s;t|=e[s],a&=~r}return wc=t,Ta(),n}function nd(e,t){Ur=null,D.H=pl,t===Xs||t===Zs?(t=rr(),vc=3):t===Js?(t=rr(),vc=4):vc=t===Pl?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,xc=t,null===fc&&(Sc=1,Cl(e,Ka(t,e.current)))}function ad(){var e=Rr.current;return null===e||((4194048&gc)===gc?null===Lr:((62914560&gc)===gc||0!==(536870912&gc))&&e===Lr)}function sd(){var e=D.H;return D.H=pl,null===e?pl:e}function rd(){var e=D.A;return D.A=uc,e}function id(){Sc=4,bc||(4194048&gc)!==gc&&null!==Rr.current||(jc=!0),0===(134217727&Nc)&&0===(134217727&kc)||null===pc||Jc(pc,gc,Mc,!1)}function ld(e,t,n){var a=mc;mc|=2;var s=sd(),r=rd();pc===e&&gc===t||(Ac=null,td(e,t)),t=!1;var i=Sc;e:for(;;)try{if(0!==vc&&null!==fc){var l=fc,o=xc;switch(vc){case 8:ed(),i=6;break e;case 3:case 2:case 9:case 6:null===Rr.current&&(t=!0);var c=vc;if(vc=0,xc=null,hd(e,l,o,c),n&&jc){i=0;break e}break;default:c=vc,vc=0,xc=null,hd(e,l,o,c)}}od(),i=Sc;break}catch(d){nd(e,d)}return t&&e.shellSuspendCounter++,Ns=Ss=null,mc=a,D.H=s,D.A=r,null===fc&&(pc=null,gc=0,Ta()),i}function od(){for(;null!==fc;)dd(fc)}function cd(){for(;null!==fc&&!ie();)dd(fc)}function dd(e){var t=ro(e.alternate,e,wc);e.memoizedProps=e.pendingProps,null===t?md(e):fc=t}function ud(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=ql(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=ql(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:ii(t);default:fo(n,t),t=ro(n,t=fc=Ha(t,wc),wc)}e.memoizedProps=e.pendingProps,null===t?md(e):fc=t}function hd(e,t,n,a){Ns=Ss=null,ii(t),lr=null,or=0;var s=t.return;try{if(function(e,t,n,a,s){if(n.flags|=32768,null!==a&&"object"===typeof a&&"function"===typeof a.then){if(null!==(t=n.alternate)&&Es(t,n,s,!0),null!==(n=Rr.current)){switch(n.tag){case 31:case 13:return null===Lr?id():null===n.alternate&&0===Sc&&(Sc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,a===er?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),Nd(e,a,s)),!1;case 22:return n.flags|=65536,a===er?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),Nd(e,a,s)),!1}throw Error(i(435,n.tag))}return Nd(e,a,s),id(),!1}if(us)return null!==(t=Rr.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,a!==ps&&ys(Ka(e=Error(i(422),{cause:a}),n))):(a!==ps&&ys(Ka(t=Error(i(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,a=Ka(a,n),yr(e,s=zl(e.stateNode,a,s)),4!==Sc&&(Sc=2)),!1;var r=Error(i(520),{cause:a});if(r=Ka(r,n),null===Ec?Ec=[r]:Ec.push(r),4!==Sc&&(Sc=2),null===t)return!0;a=Ka(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,yr(n,e=zl(n.stateNode,a,e)),!1;case 1:if(t=n.type,r=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===Fc||!Fc.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,Tl(s=El(s),e,n,a),yr(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,gc))return Sc=1,Cl(e,Ka(n,e.current)),void(fc=null)}catch(r){if(null!==s)throw fc=s,r;return Sc=1,Cl(e,Ka(n,e.current)),void(fc=null)}32768&t.flags?(us||1===a?e=!0:jc||0!==(536870912&gc)?e=!1:(bc=e=!0,(2===a||9===a||3===a||6===a)&&(null!==(a=Rr.current)&&13===a.tag&&(a.flags|=16384))),pd(t,e)):md(t)}function md(e){var t=e;do{if(0!==(32768&t.flags))return void pd(t,bc);e=t.return;var n=mo(t.alternate,t,wc);if(null!==n)return void(fc=n);if(null!==(t=t.sibling))return void(fc=t);fc=t=e}while(null!==t);0===Sc&&(Sc=5)}function pd(e,t){do{var n=po(e.alternate,e);if(null!==n)return n.flags&=32767,void(fc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(fc=e);fc=e=n}while(null!==e);Sc=6,fc=null}function fd(e,t,n,a,s,r,l,o,c){e.cancelPendingCommit=null;do{jd()}while(0!==Bc);if(0!==(6&mc))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(r=t.lanes|t.childLanes,function(e,t,n,a,s,r){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var d=31-je(n),u=1<<d;l[d]=0,o[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}n&=~u}0!==a&&Le(e,a,0),0!==r&&0===s&&0!==e.tag&&(e.suspendedLanes|=r&~(i&~t))}(e,n,r|=Ea,l,o,c),e===pc&&(fc=pc=null,gc=0),Oc=t,Ic=e,Vc=n,Hc=r,Uc=s,_c=a,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,se(he,function(){return yd(),null})):(e.callbackNode=null,e.callbackPriority=0),a=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||a){a=D.T,D.T=null,s=A.p,A.p=2,l=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,pu=bh,sa(e=aa(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var s=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch(g){n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(o=l+s),h!==r||0!==a&&3!==h.nodeType||(c=l+a),3===h.nodeType&&(l+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===s&&(o=l),m===r&&++u===a&&(c=l),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===o||-1===c?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(fu={focusedElem:e,selectionRange:n},bh=!1,Lo=t;null!==Lo;)if(e=(t=Lo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Lo=e;else for(;null!==Lo;){switch(r=(t=Lo).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,a=n.stateNode;try{var f=wl(n.type,s);e=a.getSnapshotBeforeUpdate(f,r),a.__reactInternalSnapshotBeforeUpdate=e}catch(v){Sd(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Eu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Eu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Lo=e;break}Lo=t.return}}(e,t)}finally{mc=l,A.p=s,D.T=a}}Bc=1,gd(),vd(),xd()}}function gd(){if(1===Bc){Bc=0;var e=Ic,t=Oc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var a=A.p;A.p=2;var s=mc;mc|=4;try{Wo(t,e);var r=fu,i=aa(e.containerInfo),l=r.focusedElem,o=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&na(l.ownerDocument.documentElement,l)){if(null!==o&&sa(l)){var c=o.start,d=o.end;if(void 0===d&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var u=l.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=l.textContent.length,f=Math.min(o.start,p),g=void 0===o.end?f:Math.min(o.end,p);!m.extend&&f>g&&(i=g,g=f,f=i);var v=ta(l,f),x=ta(l,g);if(v&&x&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==x.node||m.focusOffset!==x.offset)){var b=u.createRange();b.setStart(v.node,v.offset),m.removeAllRanges(),f>g?(m.addRange(b),m.extend(x.node,x.offset)):(b.setEnd(x.node,x.offset),m.addRange(b))}}}}for(u=[],m=l;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof l.focus&&l.focus(),l=0;l<u.length;l++){var j=u[l];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}bh=!!pu,fu=pu=null}finally{mc=s,A.p=a,D.T=n}}e.current=t,Bc=2}}function vd(){if(2===Bc){Bc=0;var e=Ic,t=Oc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var a=A.p;A.p=2;var s=mc;mc|=4;try{Do(e,t.alternate,t)}finally{mc=s,A.p=a,D.T=n}}Bc=3}}function xd(){if(4===Bc||3===Bc){Bc=0,le();var e=Ic,t=Oc,n=Vc,a=_c;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Bc=5:(Bc=0,Oc=Ic=null,bd(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Fc=null),Be(n),t=t.stateNode,xe&&"function"===typeof xe.onCommitFiberRoot)try{xe.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(o){}if(null!==a){t=D.T,s=A.p,A.p=2,D.T=null;try{for(var r=e.onRecoverableError,i=0;i<a.length;i++){var l=a[i];r(l.value,{componentStack:l.stack})}}finally{D.T=t,A.p=s}}0!==(3&Vc)&&jd(),Ad(e),s=e.pendingLanes,0!==(261930&n)&&0!==(42&s)?e===Wc?qc++:(qc=0,Wc=e):qc=0,Fd(0,!1)}}function bd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Vs(t)))}function jd(){return gd(),vd(),xd(),yd()}function yd(){if(5!==Bc)return!1;var e=Ic,t=Hc;Hc=0;var n=Be(Vc),a=D.T,s=A.p;try{A.p=32>n?32:n,D.T=null,n=Uc,Uc=null;var r=Ic,l=Vc;if(Bc=0,Oc=Ic=null,Vc=0,0!==(6&mc))throw Error(i(331));var o=mc;if(mc|=4,oc(r.current),ec(r,r.current,l,n),mc=o,Fd(0,!1),xe&&"function"===typeof xe.onPostCommitFiberRoot)try{xe.onPostCommitFiberRoot(ve,r)}catch(c){}return!0}finally{A.p=s,D.T=a,bd(e,t)}}function wd(e,t,n){t=Ka(n,t),null!==(e=br(e,t=zl(e.stateNode,t,2),2))&&(Re(e,2),Ad(e))}function Sd(e,t,n){if(3===e.tag)wd(e,e,n);else for(;null!==t;){if(3===t.tag){wd(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Fc||!Fc.has(a))){e=Ka(n,e),null!==(a=br(t,n=El(2),2))&&(Tl(n,a,t,e),Re(a,2),Ad(a));break}}t=t.return}}function Nd(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new hc;var s=new Set;a.set(t,s)}else void 0===(s=a.get(t))&&(s=new Set,a.set(t,s));s.has(n)||(yc=!0,s.add(n),e=kd.bind(null,e,t,n),t.then(e,e))}function kd(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(gc&n)===n&&(4===Sc||3===Sc&&(62914560&gc)===gc&&300>oe()-Rc?0===(2&mc)&&td(e,0):Cc|=n,zc===gc&&(zc=0)),Ad(e)}function Cd(e,t){0===t&&(t=Te()),null!==(e=La(e,t))&&(Re(e,t),Ad(e))}function Md(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cd(e,n)}function zd(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==a&&a.delete(t),Cd(e,n)}var Ed=null,Td=null,Pd=!1,Rd=!1,Ld=!1,Dd=0;function Ad(e){e!==Td&&null===e.next&&(null===Td?Ed=Td=e:Td=Td.next=e),Rd=!0,Pd||(Pd=!0,Nu(function(){0!==(6&mc)?se(de,Bd):Id()}))}function Fd(e,t){if(!Ld&&Rd){Ld=!0;do{for(var n=!1,a=Ed;null!==a;){if(!t)if(0!==e){var s=a.pendingLanes;if(0===s)var r=0;else{var i=a.suspendedLanes,l=a.pingedLanes;r=(1<<31-je(42|e)+1)-1,r=201326741&(r&=s&~(i&~l))?201326741&r|1:r?2|r:0}0!==r&&(n=!0,Hd(a,r))}else r=gc,0===(3&(r=Me(a,a===pc?r:0,null!==a.cancelPendingCommit||-1!==a.timeoutHandle)))||ze(a,r)||(n=!0,Hd(a,r));a=a.next}}while(n);Ld=!1}}function Bd(){Id()}function Id(){Rd=Pd=!1;var e=0;0!==Dd&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ju&&(ju=e,!0);return ju=null,!1}()&&(e=Dd);for(var t=oe(),n=null,a=Ed;null!==a;){var s=a.next,r=Od(a,t);0===r?(a.next=null,null===n?Ed=s:n.next=s,null===s&&(Td=n)):(n=a,(0!==e||0!==(3&r))&&(Rd=!0)),a=s}0!==Bc&&5!==Bc||Fd(e,!1),0!==Dd&&(Dd=0)}function Od(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var i=31-je(r),l=1<<i,o=s[i];-1===o?0!==(l&n)&&0===(l&a)||(s[i]=Ee(l,t)):o<=t&&(e.expiredLanes|=l),r&=~l}if(n=gc,n=Me(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&re(a),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||ze(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==a&&re(a),Be(n)){case 2:case 8:n=ue;break;case 32:default:n=he;break;case 268435456:n=pe}return a=Vd.bind(null,e),n=se(n,a),e.callbackPriority=t,e.callbackNode=n,t}return null!==a&&null!==a&&re(a),e.callbackPriority=2,e.callbackNode=null,2}function Vd(e,t){if(0!==Bc&&5!==Bc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(jd()&&e.callbackNode!==n)return null;var a=gc;return 0===(a=Me(e,e===pc?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:($c(e,a,t),Od(e,oe()),null!=e.callbackNode&&e.callbackNode===n?Vd.bind(null,e):null)}function Hd(e,t){if(jd())return null;$c(e,t,!0)}function Ud(){if(0===Dd){var e=_s;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Dd=e}return Dd}function _d(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function qd(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wd=0;Wd<Na.length;Wd++){var Qd=Na[Wd];ka(Qd.toLowerCase(),"on"+(Qd[0].toUpperCase()+Qd.slice(1)))}ka(ga,"onAnimationEnd"),ka(va,"onAnimationIteration"),ka(xa,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(ba,"onTransitionRun"),ka(ja,"onTransitionStart"),ka(ya,"onTransitionCancel"),ka(wa,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),at("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),at("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),at("onBeforeInput",["compositionend","keypress","textInput","paste"]),at("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gd));function $d(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var i=a.length-1;0<=i;i--){var l=a[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=c;try{r(s)}catch(d){Ca(d)}s.currentTarget=null,r=o}else for(i=0;i<a.length;i++){if(o=(l=a[i]).instance,c=l.currentTarget,l=l.listener,o!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=c;try{r(s)}catch(d){Ca(d)}s.currentTarget=null,r=o}}}}function Yd(e,t){var n=t[qe];void 0===n&&(n=t[qe]=new Set);var a=e+"__bubble";n.has(a)||(eu(t,e,2,!1),n.add(a))}function Xd(e,t,n){var a=0;t&&(a|=4),eu(n,e,a,t)}var Jd="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[Jd]){e[Jd]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Kd.has(t)||Xd(t,!1,e),Xd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Jd]||(t[Jd]=!0,Xd("selectionchange",!1,t))}}function eu(e,t,n,a){switch(Ch(t)){case 2:var s=jh;break;case 8:s=yh;break;default:s=wh}n=s.bind(null,t,n,e),s=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),a?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function tu(e,t,n,a,s){var r=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var l=a.stateNode.containerInfo;if(l===s)break;if(4===i)for(i=a.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===s)return;i=i.return}for(;null!==l;){if(null===(i=Ye(l)))return;if(5===(c=i.tag)||6===c||26===c||27===c){a=r=i;continue e}l=l.parentNode}}a=a.return}Ot(function(){var a=r,s=Dt(n),i=[];e:{var l=Sa.get(e);if(void 0!==l){var c=nn,d=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":c=xn;break;case"focusin":d="focus",c=cn;break;case"focusout":d="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=jn;break;case ga:case va:case xa:c=dn;break;case wa:c=yn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Sn}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),m=u?null!==l?l+"Capture":null:l;u=[];for(var p,f=a;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===m||null!=(g=Vt(f,m))&&u.push(nu(f,g,p)),h)break;f=f.return}0<u.length&&(l=new c(l,d,null,n,s),i.push({event:l,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Lt||!(d=n.relatedTarget||n.fromElement)||!Ye(d)&&!d[_e])&&(c||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=a,null!==(d=(d=n.relatedTarget||n.toElement)?Ye(d):null)&&(h=o(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=a),c!==d)){if(u=ln,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=bn,g="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?l:Je(c),p=null==d?l:Je(d),(l=new u(g,f+"leave",c,n,s)).target=h,l.relatedTarget=p,g=null,Ye(s)===a&&((u=new u(m,f+"enter",d,n,s)).target=p,u.relatedTarget=h,g=u),h=g,c&&d)e:{for(u=su,f=d,p=0,g=m=c;g;g=u(g))p++;g=0;for(var v=f;v;v=u(v))g++;for(;0<p-g;)m=u(m),p--;for(;0<g-p;)f=u(f),g--;for(;p--;){if(m===f||null!==f&&m===f.alternate){u=m;break e}m=u(m),f=u(f)}u=null}else u=null;null!==c&&ru(i,l,c,u,!1),null!==d&&null!==h&&ru(i,h,d,u,!0)}if("select"===(c=(l=a?Je(a):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var x=Hn;else if(An(l))if(Un)x=Xn;else{x=$n;var b=Kn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?a&&zt(a.elementType)&&(x=Hn):x=Yn;switch(x&&(x=x(e,a))?Fn(i,x,n,s):(b&&b(e,l,a),"focusout"===e&&a&&"number"===l.type&&null!=a.memoizedProps.value&&jt(l,"number",l.value)),b=a?Je(a):window,e){case"focusin":(An(b)||"true"===b.contentEditable)&&(ia=b,la=a,oa=null);break;case"focusout":oa=la=ia=null;break;case"mousedown":ca=!0;break;case"contextmenu":case"mouseup":case"dragend":ca=!1,da(i,n,s);break;case"selectionchange":if(ra)break;case"keydown":case"keyup":da(i,n,s)}var j;if(kn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ln?Pn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(zn&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==y?"onCompositionEnd"===y&&Ln&&(j=Gt()):(Wt="value"in(qt=s)?qt.value:qt.textContent,Ln=!0)),0<(b=au(a,y)).length&&(y=new hn(y,e,null,n,s),i.push({event:y,listeners:b}),j?y.data=j:null!==(j=Rn(n))&&(y.data=j))),(j=Mn?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(Tn=!0,En);case"textInput":return(e=t.data)===En&&Tn?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!kn&&Pn(e,t)?(e=Gt(),Qt=Wt=qt=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(y=au(a,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,s),i.push({event:b,listeners:y}),b.data=j)),function(e,t,n,a,s){if("submit"===t&&n&&n.stateNode===s){var r=_d((s[Ue]||null).action),i=a.submitter;i&&null!==(t=(t=i[Ue]||null)?_d(t.formAction):i.getAttribute("formAction"))&&(r=t,i=null);var l=new nn("action","action",null,a,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==Dd){var e=i?qd(s,i):new FormData(s);el(n,{pending:!0,data:e,method:s.method,action:r},null,e)}}else"function"===typeof r&&(l.preventDefault(),e=i?qd(s,i):new FormData(s),el(n,{pending:!0,data:e,method:s.method,action:r},r,e))},currentTarget:s}]})}}(i,e,a,n,s)}$d(i,t)})}function nu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function au(e,t){for(var n=t+"Capture",a=[];null!==e;){var s=e,r=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===r||(null!=(s=Vt(e,n))&&a.unshift(nu(e,s,r)),null!=(s=Vt(e,t))&&a.push(nu(e,s,r))),3===e.tag)return a;e=e.return}return[]}function su(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ru(e,t,n,a,s){for(var r=t._reactName,i=[];null!==n&&n!==a;){var l=n,o=l.alternate,c=l.stateNode;if(l=l.tag,null!==o&&o===a)break;5!==l&&26!==l&&27!==l||null===c||(o=c,s?null!=(c=Vt(n,r))&&i.unshift(nu(n,c,o)):s||null!=(c=Vt(n,r))&&i.push(nu(n,c,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var iu=/\r\n?/g,lu=/\u0000|\uFFFD/g;function ou(e){return("string"===typeof e?e:""+e).replace(iu,"\n").replace(lu,"")}function cu(e,t){return t=ou(t),ou(e)===t}function du(e,t,n,a,s,r){switch(n){case"children":"string"===typeof a?"body"===t||"textarea"===t&&""===a||Nt(e,a):("number"===typeof a||"bigint"===typeof a)&&"body"!==t&&Nt(e,""+a);break;case"className":ct(e,"class",a);break;case"tabIndex":ct(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,a);break;case"style":Mt(e,a,r);break;case"data":if("object"!==t){ct(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"===typeof a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=Pt(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"===typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===n?("input"!==t&&du(e,t,"name",s.name,s,null),du(e,t,"formEncType",s.formEncType,s,null),du(e,t,"formMethod",s.formMethod,s,null),du(e,t,"formTarget",s.formTarget,s,null)):(du(e,t,"encType",s.encType,s,null),du(e,t,"method",s.method,s,null),du(e,t,"target",s.target,s,null))),null==a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=Pt(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=Rt);break;case"onScroll":null!=a&&Yd("scroll",e);break;case"onScrollEnd":null!=a&&Yd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(i(61));if(null!=(n=a.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"muted":e.muted=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"===typeof a||"boolean"===typeof a||"symbol"===typeof a){e.removeAttribute("xlink:href");break}n=Pt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"===typeof a||"symbol"===typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Yd("beforetoggle",e),Yd("toggle",e),ot(e,"popover",a);break;case"xlinkActuate":dt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":dt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":dt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":dt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":dt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":dt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":dt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":dt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":dt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ot(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ot(e,n=Et.get(n)||n,a)}}function uu(e,t,n,a,s,r){switch(n){case"style":Mt(e,a,r);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(i(61));if(null!=(n=a.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"===typeof a?Nt(e,a):("number"===typeof a||"bigint"===typeof a)&&Nt(e,""+a);break;case"onScroll":null!=a&&Yd("scroll",e);break;case"onScrollEnd":null!=a&&Yd("scrollend",e);break;case"onClick":null!=a&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(r=null!=(r=e[Ue]||null)?r[n]:null)&&e.removeEventListener(t,r,s),"function"!==typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):ot(e,n,a):("function"!==typeof r&&null!==r&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,s)))}}function hu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yd("error",e),Yd("load",e);var a,s=!1,r=!1;for(a in n)if(n.hasOwnProperty(a)){var l=n[a];if(null!=l)switch(a){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:du(e,t,a,l,n,null)}}return r&&du(e,t,"srcSet",n.srcSet,n,null),void(s&&du(e,t,"src",n.src,n,null));case"input":Yd("invalid",e);var o=a=l=r=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(null!=u)switch(s){case"name":r=u;break;case"type":l=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(i(137,t));break;default:du(e,t,s,u,n,null)}}return void bt(e,a,o,c,d,l,r,!1);case"select":for(r in Yd("invalid",e),s=l=a=null,n)if(n.hasOwnProperty(r)&&null!=(o=n[r]))switch(r){case"value":a=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:du(e,t,r,o,n,null)}return t=a,n=l,e.multiple=!!s,void(null!=t?yt(e,!!s,t,!1):null!=n&&yt(e,!!s,n,!0));case"textarea":for(l in Yd("invalid",e),a=r=s=null,n)if(n.hasOwnProperty(l)&&null!=(o=n[l]))switch(l){case"value":s=o;break;case"defaultValue":r=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(i(91));break;default:du(e,t,l,o,n,null)}return void St(e,s,r,a);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else du(e,t,c,s,n,null);return;case"dialog":Yd("beforetoggle",e),Yd("toggle",e),Yd("cancel",e),Yd("close",e);break;case"iframe":case"object":Yd("load",e);break;case"video":case"audio":for(s=0;s<Gd.length;s++)Yd(Gd[s],e);break;case"image":Yd("error",e),Yd("load",e);break;case"details":Yd("toggle",e);break;case"embed":case"source":case"link":Yd("error",e),Yd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(s=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:du(e,t,d,s,n,null)}return;default:if(zt(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(s=n[u])&&uu(e,t,u,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(null!=(s=n[o])&&du(e,t,o,s,n,null))}function mu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pu=null,fu=null;function gu(e){return 9===e.nodeType?e:e.ownerDocument}function vu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ju=null;var yu="function"===typeof setTimeout?setTimeout:void 0,wu="function"===typeof clearTimeout?clearTimeout:void 0,Su="function"===typeof Promise?Promise:void 0,Nu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Su?function(e){return Su.resolve(null).then(e).catch(ku)}:yu;function ku(e){setTimeout(function(){throw e})}function Cu(e){return"head"===e}function Mu(e,t){var n=t,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)||"/&"===n){if(0===a)return e.removeChild(s),void qh(t);a--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)a++;else if("html"===n)Iu(e.ownerDocument.documentElement);else if("head"===n){Iu(n=e.ownerDocument.head);for(var r=n.firstChild;r;){var i=r.nextSibling,l=r.nodeName;r[Ke]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===r.rel.toLowerCase()||n.removeChild(r),r=i}}else"body"===n&&Iu(e.ownerDocument.body);n=s}while(n);qh(t)}function zu(e,t){var n=e;e=0;do{var a=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=a}while(n)}function Eu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Eu(n),$e(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Tu(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Lu(e.nextSibling)))return null}return e}function Pu(e){return"$?"===e.data||"$~"===e.data}function Ru(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Du=null;function Au(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Lu(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Fu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Bu(e,t,n){switch(t=gu(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Iu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$e(e)}var Ou=new Map,Vu=new Set;function Hu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Uu=A.d;A.d={f:function(){var e=Uu.f(),t=Zc();return e||t},r:function(e){var t=Xe(e);null!==t&&5===t.tag&&"form"===t.type?nl(t):Uu.r(e)},D:function(e){Uu.D(e),qu("dns-prefetch",e,null)},C:function(e,t){Uu.C(e,t),qu("preconnect",e,t)},L:function(e,t,n){Uu.L(e,t,n);var a=_u;if(a&&e&&t){var s='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+vt(n.imageSizes)+'"]')):s+='[href="'+vt(e)+'"]';var r=s;switch(t){case"style":r=Qu(e);break;case"script":r=$u(e)}Ou.has(r)||(e=m({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ou.set(r,e),null!==a.querySelector(s)||"style"===t&&a.querySelector(Gu(r))||"script"===t&&a.querySelector(Yu(r))||(hu(t=a.createElement("link"),"link",e),et(t),a.head.appendChild(t)))}},m:function(e,t){Uu.m(e,t);var n=_u;if(n&&e){var a=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+vt(a)+'"][href="'+vt(e)+'"]',r=s;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=$u(e)}if(!Ou.has(r)&&(e=m({rel:"modulepreload",href:e},t),Ou.set(r,e),null===n.querySelector(s))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Yu(r)))return}hu(a=n.createElement("link"),"link",e),et(a),n.head.appendChild(a)}}},X:function(e,t){Uu.X(e,t);var n=_u;if(n&&e){var a=Ze(n).hoistableScripts,s=$u(e),r=a.get(s);r||((r=n.querySelector(Yu(s)))||(e=m({src:e,async:!0},t),(t=Ou.get(s))&&eh(e,t),et(r=n.createElement("script")),hu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}},S:function(e,t,n){Uu.S(e,t,n);var a=_u;if(a&&e){var s=Ze(a).hoistableStyles,r=Qu(e);t=t||"default";var i=s.get(r);if(!i){var l={loading:0,preload:null};if(i=a.querySelector(Gu(r)))l.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ou.get(r))&&Zu(e,n);var o=i=a.createElement("link");et(o),hu(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Ju(i,t,a)}i={type:"stylesheet",instance:i,count:1,state:l},s.set(r,i)}}},M:function(e,t){Uu.M(e,t);var n=_u;if(n&&e){var a=Ze(n).hoistableScripts,s=$u(e),r=a.get(s);r||((r=n.querySelector(Yu(s)))||(e=m({src:e,async:!0,type:"module"},t),(t=Ou.get(s))&&eh(e,t),et(r=n.createElement("script")),hu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}}};var _u="undefined"===typeof document?null:document;function qu(e,t,n){var a=_u;if(a&&"string"===typeof t&&t){var s=vt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Vu.has(s)||(Vu.add(s),e={rel:e,crossOrigin:n,href:t},null===a.querySelector(s)&&(hu(t=a.createElement("link"),"link",e),et(t),a.head.appendChild(t)))}}function Wu(e,t,n,a){var s,r,l,o,c=(c=Q.current)?Hu(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Qu(n.href),(a=(n=Ze(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Qu(n.href);var d=Ze(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Gu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),Ou.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ou.set(e,n),d||(s=c,r=e,l=n,o=u.state,s.querySelector('link[rel="preload"][as="style"]['+r+"]")?o.loading=1:(r=s.createElement("link"),o.preload=r,r.addEventListener("load",function(){return o.loading|=1}),r.addEventListener("error",function(){return o.loading|=2}),hu(r,"link",l),et(r),s.head.appendChild(r))))),t&&null===a)throw Error(i(528,""));return u}if(t&&null!==a)throw Error(i(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=$u(n),(a=(n=Ze(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Qu(e){return'href="'+vt(e)+'"'}function Gu(e){return'link[rel="stylesheet"]['+e+"]"}function Ku(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function $u(e){return'[src="'+vt(e)+'"]'}function Yu(e){return"script[async]"+e}function Xu(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(a)return t.instance=a,et(a),a;var s=m({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(a=(e.ownerDocument||e).createElement("style")),hu(a,"style",s),Ju(a,n.precedence,e),t.instance=a;case"stylesheet":s=Qu(n.href);var r=e.querySelector(Gu(s));if(r)return t.state.loading|=4,t.instance=r,et(r),r;a=Ku(n),(s=Ou.get(s))&&Zu(a,s),et(r=(e.ownerDocument||e).createElement("link"));var l=r;return l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),hu(r,"link",a),t.state.loading|=4,Ju(r,n.precedence,e),t.instance=r;case"script":return r=$u(n.src),(s=e.querySelector(Yu(r)))?(t.instance=s,et(s),s):(a=n,(s=Ou.get(r))&&eh(a=m({},n),s),et(s=(e=e.ownerDocument||e).createElement("script")),hu(s,"link",a),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,Ju(a,n.precedence,e));return t.instance}function Ju(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=a.length?a[a.length-1]:null,r=s,i=0;i<a.length;i++){var l=a[i];if(l.dataset.precedence===t)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Zu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var a=new Map,s=th=new Map;s.set(n,a)}else(a=(s=th).get(n))||(a=new Map,s.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[Ke]||r[He]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var i=r.getAttribute(t)||"";i=e+i;var l=a.get(i);l?l.push(r):a.set(i,[r])}}return a}function ah(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function sh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var rh=0;function ih(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)oh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lh=null;function oh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lh=new Map,t.forEach(ch,e),lh=null,ih.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=lh.get(e);if(n)var a=n.get(null);else{n=new Map,lh.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var i=s[r];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),a=i)}a&&n.set(null,a)}i=(s=t.instance).getAttribute("data-precedence"),(r=n.get(i)||a)===a&&n.set(null,s),n.set(i,s),this.count++,a=ih.bind(this),s.addEventListener("load",a),s.addEventListener("error",a),r?r.parentNode.insertBefore(s,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var dh={$$typeof:y,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function uh(e,t,n,a,s,r,i,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=a,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function hh(e,t,n,a,s,r,i,l,o,c,d,u){return e=new uh(e,t,n,i,o,c,d,u,l),t=1,!0===r&&(t|=24),r=Ia(3,null,null,t),e.current=r,r.stateNode=e,(t=Os()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:a,isDehydrated:n,cache:t},gr(r),e}function mh(e){return e?e=Fa:Fa}function ph(e,t,n,a,s,r){s=mh(s),null===a.context?a.context=s:a.pendingContext=s,(a=xr(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(a.callback=r),null!==(n=br(e,a,t))&&(Kc(n,0,t),jr(n,e,t))}function fh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function vh(e){if(13===e.tag||31===e.tag){var t=La(e,67108864);null!==t&&Kc(t,0,67108864),gh(e,67108864)}}function xh(e){if(13===e.tag||31===e.tag){var t=Qc(),n=La(e,t=Fe(t));null!==n&&Kc(n,0,t),gh(e,t)}}var bh=!0;function jh(e,t,n,a){var s=D.T;D.T=null;var r=A.p;try{A.p=2,wh(e,t,n,a)}finally{A.p=r,D.T=s}}function yh(e,t,n,a){var s=D.T;D.T=null;var r=A.p;try{A.p=8,wh(e,t,n,a)}finally{A.p=r,D.T=s}}function wh(e,t,n,a){if(bh){var s=Sh(a);if(null===s)tu(e,t,a,Nh,n),Ah(e,a);else if(function(e,t,n,a,s){switch(t){case"focusin":return zh=Fh(zh,e,t,n,a,s),!0;case"dragenter":return Eh=Fh(Eh,e,t,n,a,s),!0;case"mouseover":return Th=Fh(Th,e,t,n,a,s),!0;case"pointerover":var r=s.pointerId;return Ph.set(r,Fh(Ph.get(r)||null,e,t,n,a,s)),!0;case"gotpointercapture":return r=s.pointerId,Rh.set(r,Fh(Rh.get(r)||null,e,t,n,a,s)),!0}return!1}(s,e,t,n,a))a.stopPropagation();else if(Ah(e,a),4&t&&-1<Dh.indexOf(e)){for(;null!==s;){var r=Xe(s);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var i=Ce(r.pendingLanes);if(0!==i){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var o=1<<31-je(i);l.entanglements[1]|=o,i&=~o}Ad(r),0===(6&mc)&&(Dc=oe()+500,Fd(0,!1))}}break;case 31:case 13:null!==(l=La(r,2))&&Kc(l,0,2),Zc(),gh(r,2)}if(null===(r=Sh(a))&&tu(e,t,a,Nh,n),r===s)break;s=r}null!==s&&a.stopPropagation()}else tu(e,t,a,null,n)}}function Sh(e){return kh(e=Dt(e))}var Nh=null;function kh(e){if(Nh=null,null!==(e=Ye(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=d(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case de:return 2;case ue:return 8;case he:case me:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Mh=!1,zh=null,Eh=null,Th=null,Ph=new Map,Rh=new Map,Lh=[],Dh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ah(e,t){switch(e){case"focusin":case"focusout":zh=null;break;case"dragenter":case"dragleave":Eh=null;break;case"mouseover":case"mouseout":Th=null;break;case"pointerover":case"pointerout":Ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function Fh(e,t,n,a,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=Xe(t))&&vh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Bh(e){var t=Ye(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Oe(e.priority,function(){xh(n)})}else if(31===t){if(null!==(t=d(n)))return e.blockedOn=t,void Oe(e.priority,function(){xh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ih(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sh(e.nativeEvent);if(null!==n)return null!==(t=Xe(n))&&vh(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);Lt=a,n.target.dispatchEvent(a),Lt=null,t.shift()}return!0}function Oh(e,t,n){Ih(e)&&n.delete(t)}function Vh(){Mh=!1,null!==zh&&Ih(zh)&&(zh=null),null!==Eh&&Ih(Eh)&&(Eh=null),null!==Th&&Ih(Th)&&(Th=null),Ph.forEach(Oh),Rh.forEach(Oh)}function Hh(e,t){e.blockedOn===t&&(e.blockedOn=null,Mh||(Mh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Vh)))}var Uh=null;function _h(e){Uh!==e&&(Uh=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Uh===e&&(Uh=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],s=e[t+2];if("function"!==typeof a){if(null===kh(a||n))continue;break}var r=Xe(n);null!==r&&(e.splice(t,3),t-=3,el(r,{pending:!0,data:s,method:n.method,action:a},a,s))}}))}function qh(e){function t(t){return Hh(t,e)}null!==zh&&Hh(zh,e),null!==Eh&&Hh(Eh,e),null!==Th&&Hh(Th,e),Ph.forEach(t),Rh.forEach(t);for(var n=0;n<Lh.length;n++){var a=Lh[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Lh.length&&null===(n=Lh[0]).blockedOn;)Bh(n),null===n.blockedOn&&Lh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<n.length;a+=3){var s=n[a],r=n[a+1],i=s[Ue]||null;if("function"===typeof r)i||_h(n);else if(i){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,i=r[Ue]||null)l=i.formAction;else if(null!==kh(s))continue}else l=i.action;"function"===typeof l?n[a+1]=l:(n.splice(a,3),a-=3),_h(n)}}}function Wh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var a=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function Qh(e){this._internalRoot=e}function Gh(e){this._internalRoot=e}Gh.prototype.render=Qh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));ph(t.current,Qc(),e,t,null,null)},Gh.prototype.unmount=Qh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),Zc(),t[_e]=null}},Gh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lh.length&&0!==t&&t<Lh[n].priority;n++);Lh.splice(n,0,e),0===n&&Bh(e)}};var Kh=s.version;if("19.2.0"!==Kh)throw Error(i(527,Kh,"19.2.0"));A.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(null===s)break;var r=s.alternate;if(null===r){if(null!==(a=s.return)){n=a;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return u(s),e;if(r===a)return u(s),t;r=r.sibling}throw Error(i(188))}if(n.return!==a.return)n=s,a=r;else{for(var l=!1,c=s.child;c;){if(c===n){l=!0,n=s,a=r;break}if(c===a){l=!0,a=s,n=r;break}c=c.sibling}if(!l){for(c=r.child;c;){if(c===n){l=!0,n=r,a=s;break}if(c===a){l=!0,a=r,n=s;break}c=c.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==a)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var $h={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{ve=Yh.inject($h),xe=Yh}catch(Jh){}}t.createRoot=function(e,t){if(!l(e))throw Error(i(299));var n=!1,a="",s=Sl,r=Nl,o=kl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,a,null,s,r,o,Wh),e[_e]=t.current,Zd(e),new Qh(t)},t.hydrateRoot=function(e,t,n){if(!l(e))throw Error(i(299));var a=!1,s="",r=Sl,o=Nl,c=kl,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(r=n.onUncaughtError),void 0!==n.onCaughtError&&(o=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(d=n.formState)),(t=hh(e,1,!0,t,0,a,s,d,r,o,c,Wh)).context=mh(null),n=t.current,(s=xr(a=Fe(a=Qc()))).callback=null,br(n,s,a),n=a,t.current.lanes=n,Re(t,n),Ad(t),e[_e]=t.current,Zd(e),new Gh(t)},t.version="19.2.0"},119:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(863)},340:(e,t,n)=>{e.exports=n(487)},352:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(85)},414:(e,t,n)=>{e.exports=n(916)},487:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,s=e[a];if(!(0<r(s,t)))break e;e[a]=t,e[n]=s,n=a}}function a(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,s=e.length,i=s>>>1;a<i;){var l=2*(a+1)-1,o=e[l],c=l+1,d=e[c];if(0>r(o,n))c<s&&0>r(d,o)?(e[a]=d,e[c]=n,a=c):(e[a]=o,e[l]=n,a=l);else{if(!(c<s&&0>r(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,v=!1,x="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,j="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=a(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=a(d)}}function w(e){if(g=!1,y(e),!f)if(null!==a(c))f=!0,N||(N=!0,S());else{var t=a(d);null!==t&&R(w,t.startTime-e)}}var S,N=!1,k=-1,C=5,M=-1;function z(){return!!v||!(t.unstable_now()-M<C)}function E(){if(v=!1,N){var e=t.unstable_now();M=e;var n=!0;try{e:{f=!1,g&&(g=!1,b(k),k=-1),p=!0;var r=m;try{t:{for(y(e),h=a(c);null!==h&&!(h.expirationTime>e&&z());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var l=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof l){h.callback=l,y(e),n=!0;break t}h===a(c)&&s(c),y(e)}else s(c);h=a(c)}if(null!==h)n=!0;else{var o=a(d);null!==o&&R(w,o.startTime-e),n=!1}}break e}finally{h=null,m=r,p=!1}n=void 0}}finally{n?S():N=!1}}}if("function"===typeof j)S=function(){j(E)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,P=T.port2;T.port1.onmessage=E,S=function(){P.postMessage(null)}}else S=function(){x(E,0)};function R(e,n){k=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:r,expirationTime:l=r+l,sortIndex:-1},r>i?(e.sortIndex=r,n(d,e),null===a(c)&&e===a(d)&&(g?(b(k),k=-1):g=!0,R(w,r-i))):(e.sortIndex=l,n(c,e),f||p||(f=!0,N||(N=!0,S()))),e},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},863:(e,t,n)=>{var a=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(s(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");var o=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=o.T,n=i.p;try{if(o.T=null,i.p=2,e)return e()}finally{o.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:s,fetchPriority:r}):"script"===n&&i.d.X(e,{crossOrigin:a,integrity:s,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return o.H.useFormState(e,t,n)},t.useFormStatus=function(){return o.H.useHostTransitionStatus()},t.version="19.2.0"},916:(e,t)=>{var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(e,t,a){var s=null;if(void 0!==a&&(s=""+a),void 0!==t.key&&(s=""+t.key),"key"in t)for(var r in a={},t)"key"!==r&&(a[r]=t[r]);else a=t;return t=a.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:a}}t.Fragment=a,t.jsx=s,t.jsxs=s},950:(e,t,n)=>{e.exports=n(983)},983:(e,t)=>{var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function x(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}function b(){}function j(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var y=j.prototype=new b;y.constructor=j,g(y,x.prototype),y.isPureReactComponent=!0;var w=Array.isArray;function S(){}var N={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function C(e,t,a){var s=a.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:a}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var z=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,s,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o,c,d=!1;if(null===e)d=!0;else switch(l){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case a:d=!0;break;case h:return T((d=e._init)(e._payload),t,s,r,i)}}if(d)return i=i(e),d=""===r?"."+E(e,0):r,w(i)?(s="",null!=d&&(s=d.replace(z,"$&/")+"/"),T(i,t,s,"",function(e){return e})):null!=i&&(M(i)&&(o=i,c=s+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(z,"$&/")+"/")+d,i=C(o.type,c,o.props)),t.push(i)),1;d=0;var u,m=""===r?".":r+":";if(w(e))for(var f=0;f<e.length;f++)d+=T(r=e[f],t,s,l=m+E(r,f),i);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(r=e.next()).done;)d+=T(r=r.value,t,s,l=m+E(r,f++),i);else if("object"===l){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,r,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function P(e,t,n){if(null==e)return e;var a=[],s=0;return T(e,a,"","",function(e){return t.call(n,e,s++)}),a}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},D={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=m,t.Children=D,t.Component=x,t.Fragment=s,t.Profiler=i,t.PureComponent=j,t.StrictMode=r,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return N.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var a=g({},e.props),s=e.key;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)!k.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(a[r]=t[r]);var r=arguments.length-2;if(1===r)a.children=n;else if(1<r){for(var i=Array(r),l=0;l<r;l++)i[l]=arguments[l+2];a.children=i}return C(e.type,s,a)},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},t.createElement=function(e,t,n){var a,s={},r=null;if(null!=t)for(a in void 0!==t.key&&(r=""+t.key),t)k.call(t,a)&&"key"!==a&&"__self"!==a&&"__source"!==a&&(s[a]=t[a]);var i=arguments.length-2;if(1===i)s.children=n;else if(1<i){for(var l=Array(i),o=0;o<i;o++)l[o]=arguments[o+2];s.children=l}if(e&&e.defaultProps)for(a in i=e.defaultProps)void 0===s[a]&&(s[a]=i[a]);return C(e,r,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.T,n={};N.T=n;try{var a=e(),s=N.S;null!==s&&s(n,a),"object"===typeof a&&null!==a&&"function"===typeof a.then&&a.then(S,L)}catch(r){L(r)}finally{null!==t&&null!==n.types&&(t.types=n.types),N.T=t}},t.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},t.use=function(e){return N.H.use(e)},t.useActionState=function(e,t,n){return N.H.useActionState(e,t,n)},t.useCallback=function(e,t){return N.H.useCallback(e,t)},t.useContext=function(e){return N.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return N.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return N.H.useEffect(e,t)},t.useEffectEvent=function(e){return N.H.useEffectEvent(e)},t.useId=function(){return N.H.useId()},t.useImperativeHandle=function(e,t,n){return N.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.H.useMemo(e,t)},t.useOptimistic=function(e,t){return N.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return N.H.useReducer(e,t,n)},t.useRef=function(e){return N.H.useRef(e)},t.useState=function(e){return N.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.H.useTransition()},t.version="19.2.0"}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,a)=>(n.f[a](e,t),t),[])),n.u=e=>"static/js/"+e+".78c9b5b0.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="nebula-screen-capture:";n.l=(a,s,r,i)=>{if(e[a])e[a].push(s);else{var l,o;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+r){l=u;break}}l||(o=!0,(l=document.createElement("script")).charset="utf-8",n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+r),l.src=a),e[a]=[s];var h=(t,n)=>{l.onerror=l.onload=null,clearTimeout(m);var s=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach(e=>e(n)),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),o&&document.head.appendChild(l)}}})(),n.p="/",(()=>{var e={792:0};n.f.j=(t,a)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var r=new Promise((n,a)=>s=e[t]=[n,a]);a.push(s[2]=r);var i=n.p+n.u(t),l=new Error;n.l(i,a=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,s[1](l)}},"chunk-"+t,t)}};var t=(t,a)=>{var s,r,i=a[0],l=a[1],o=a[2],c=0;if(i.some(t=>0!==e[t])){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(o)o(n)}for(t&&t(a);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},a=self.webpackChunknebula_screen_capture=self.webpackChunknebula_screen_capture||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n(950),s=n(352);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function l(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=n(414);const u=e=>{let{isRecording:t,isPaused:n,recordingTime:s,onStart:r,onStop:i,onPause:l}=e;const[o,c]=(0,a.useState)(!1),[u,h]=(0,a.useState)(0),[m,p]=(0,a.useState)("ready");(0,a.useEffect)(()=>{t?(p("recording"),c(!1),h(0)):o||p("ready")},[t,o]);return(0,d.jsxs)("div",{className:"recording-controls",children:[(0,d.jsxs)("div",{className:"timer-display",children:[(0,d.jsxs)("div",{className:"recording-indicator ".concat(t?"active":""),children:[(0,d.jsx)("div",{className:"dot"}),t?n?"PAUSED":"REC":"READY"]}),(0,d.jsx)("div",{className:"time",children:(e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))})(s)})]}),(0,d.jsx)("div",{className:"control-buttons",children:t?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{className:"control-btn pause-btn",onClick:l,title:n?"Resume Recording":"Pause Recording",children:[n?(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("polygon",{points:"5,3 19,12 5,21"})}):(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("rect",{x:"6",y:"4",width:"4",height:"16"}),(0,d.jsx)("rect",{x:"14",y:"4",width:"4",height:"16"})]}),n?"Resume":"Pause"]}),(0,d.jsxs)("button",{className:"control-btn stop-btn",onClick:i,title:"Stop Recording",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop"]})]}):(0,d.jsx)("button",{className:"control-btn start-btn ".concat(m),onClick:async()=>{c(!0),p("starting");for(let t=3;t>0;t--)h(t),await new Promise(e=>setTimeout(e,1e3));h(0);try{await r()}catch(e){console.error("Failed to start recording:",e),c(!1),p("ready")}},disabled:o,title:"Start Recording",children:u>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"countdown-circle",children:(0,d.jsx)("span",{className:"countdown-number",children:u})}),"Starting in ",u,"..."]}):o?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"loading-spinner",children:(0,d.jsx)("div",{className:"spinner-ring"})}),"Initializing..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"record-icon",children:(0,d.jsx)("circle",{cx:"12",cy:"12",r:"8"})}),"Start Recording"]})})}),(0,d.jsx)("div",{className:"recording-status",children:t&&(0,d.jsx)("div",{className:"status-text",children:n?"\u23f8\ufe0f Recording paused":"\ud83d\udd34 Recording in progress..."})})]})},h=e=>{var t,n,s,r,i,l,o,u,h,m,p,f,g;let{settings:v,onChange:x,disabled:b}=e;const[j,y]=(0,a.useState)({microphones:[],speakers:[]}),[w,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{N()},[]);const N=async()=>{try{const e=await navigator.mediaDevices.enumerateDevices(),t=e.filter(e=>"audioinput"===e.kind),n=e.filter(e=>"audiooutput"===e.kind);y({microphones:t,speakers:n})}catch(e){console.error("Failed to get audio devices:",e)}},k=(e,t)=>{x(n=>c(c({},n),{},{audio:c(c({},n.audio),{},{[e]:t})}))};return(0,d.jsxs)("div",{className:"audio-settings",children:[(0,d.jsxs)("div",{className:"audio-settings-header",onClick:()=>S(!w),children:[(0,d.jsx)("h4",{children:"Audio Settings"}),(0,d.jsx)("svg",{className:"expand-icon ".concat(w?"expanded":""),viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M7 10l5 5 5-5z"})})]}),w&&(0,d.jsxs)("div",{className:"audio-settings-content",children:[(0,d.jsxs)("div",{className:"audio-option",children:[(0,d.jsx)("label",{children:"Audio Source"}),(0,d.jsxs)("select",{value:(null===(t=v.audio)||void 0===t?void 0:t.source)||"system",onChange:e=>k("source",e.target.value),disabled:b,children:[(0,d.jsx)("option",{value:"none",children:"No Audio"}),(0,d.jsx)("option",{value:"system",children:"System Audio"}),(0,d.jsx)("option",{value:"microphone",children:"Microphone Only"}),(0,d.jsx)("option",{value:"both",children:"System + Microphone"})]})]}),("microphone"===(null===(n=v.audio)||void 0===n?void 0:n.source)||"both"===(null===(s=v.audio)||void 0===s?void 0:s.source))&&(0,d.jsxs)("div",{className:"audio-option",children:[(0,d.jsx)("label",{children:"Microphone"}),(0,d.jsxs)("select",{value:(null===(r=v.audio)||void 0===r?void 0:r.microphoneId)||"",onChange:e=>k("microphoneId",e.target.value),disabled:b,children:[(0,d.jsx)("option",{value:"",children:"Default Microphone"}),j.microphones.map(e=>(0,d.jsx)("option",{value:e.deviceId,children:e.label||"Microphone ".concat(e.deviceId.slice(0,8))},e.deviceId))]})]}),"none"!==(null===(i=v.audio)||void 0===i?void 0:i.source)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"audio-option",children:[(0,d.jsx)("label",{children:"Audio Quality"}),(0,d.jsxs)("select",{value:(null===(l=v.audio)||void 0===l?void 0:l.quality)||"high",onChange:e=>k("quality",e.target.value),disabled:b,children:[(0,d.jsx)("option",{value:"low",children:"Low (32 kbps)"}),(0,d.jsx)("option",{value:"medium",children:"Medium (64 kbps)"}),(0,d.jsx)("option",{value:"high",children:"High (128 kbps)"}),(0,d.jsx)("option",{value:"very-high",children:"Very High (192 kbps)"})]})]}),(0,d.jsxs)("div",{className:"audio-toggles",children:[(0,d.jsxs)("label",{className:"toggle-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:(null===(o=v.audio)||void 0===o?void 0:o.noiseSuppression)||!1,onChange:e=>k("noiseSuppression",e.target.checked),disabled:b}),(0,d.jsx)("span",{className:"toggle-slider"}),"Noise Suppression"]}),(0,d.jsxs)("label",{className:"toggle-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:(null===(u=v.audio)||void 0===u?void 0:u.echoCancellation)||!1,onChange:e=>k("echoCancellation",e.target.checked),disabled:b}),(0,d.jsx)("span",{className:"toggle-slider"}),"Echo Cancellation"]}),(0,d.jsxs)("label",{className:"toggle-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:(null===(h=v.audio)||void 0===h?void 0:h.autoGainControl)||!1,onChange:e=>k("autoGainControl",e.target.checked),disabled:b}),(0,d.jsx)("span",{className:"toggle-slider"}),"Auto Gain Control"]})]}),("microphone"===(null===(m=v.audio)||void 0===m?void 0:m.source)||"both"===(null===(p=v.audio)||void 0===p?void 0:p.source))&&(0,d.jsxs)("div",{className:"volume-control",children:[(0,d.jsx)("label",{children:"Microphone Volume"}),(0,d.jsxs)("div",{className:"volume-slider-container",children:[(0,d.jsx)("input",{type:"range",min:"0",max:"100",value:(null===(f=v.audio)||void 0===f?void 0:f.microphoneVolume)||50,onChange:e=>k("microphoneVolume",parseInt(e.target.value)),disabled:b,className:"volume-slider"}),(0,d.jsxs)("span",{className:"volume-value",children:[(null===(g=v.audio)||void 0===g?void 0:g.microphoneVolume)||50,"%"]})]})]})]})]})]})},m={free:{maxRecordingDuration:1800,maxResolution:"1080p",maxFileSize:262144e3,maxStorage:5368709120,recordingsPerDay:-1,formats:["webm"],features:{basicRecording:!0,audioRecording:!0,webcamOverlay:!1,areaSelection:!0,advancedAudio:!1,cloudStorage:!1,teamSharing:!1,analytics:!1,customBranding:!1,prioritySupport:!1,exportFormats:!1,scheduledRecording:!1,liveStreaming:!1,aiTranscription:!1,videoEditing:!1,bulkOperations:!1,apiAccess:!1,customDomain:!1}},pro:{maxRecordingDuration:3600,maxResolution:"4K",maxFileSize:524288e3,maxStorage:10737418240,recordingsPerDay:50,formats:["webm","mp4","mov"],features:{basicRecording:!0,audioRecording:!0,webcamOverlay:!0,areaSelection:!0,advancedAudio:!0,cloudStorage:!0,teamSharing:!1,analytics:!0,customBranding:!1,prioritySupport:!0,exportFormats:!0,scheduledRecording:!0,liveStreaming:!1,aiTranscription:!0,videoEditing:!0,bulkOperations:!0,apiAccess:!1,customDomain:!1}},premium:{maxRecordingDuration:-1,maxResolution:"4K",maxFileSize:-1,maxStorage:107374182400,recordingsPerDay:-1,formats:["webm","mp4","mov","avi","mkv"],features:{basicRecording:!0,audioRecording:!0,webcamOverlay:!0,areaSelection:!0,advancedAudio:!0,cloudStorage:!0,teamSharing:!0,analytics:!0,customBranding:!0,prioritySupport:!0,exportFormats:!0,scheduledRecording:!0,liveStreaming:!0,aiTranscription:!0,videoEditing:!0,bulkOperations:!0,apiAccess:!0,customDomain:!0}},admin:{maxRecordingDuration:-1,maxResolution:"8K",maxFileSize:-1,maxStorage:-1,recordingsPerDay:-1,formats:["webm","mp4","mov","avi","mkv","flv","wmv"],features:{basicRecording:!0,audioRecording:!0,webcamOverlay:!0,areaSelection:!0,advancedAudio:!0,cloudStorage:!0,teamSharing:!0,analytics:!0,customBranding:!0,prioritySupport:!0,exportFormats:!0,scheduledRecording:!0,liveStreaming:!0,aiTranscription:!0,videoEditing:!0,bulkOperations:!0,apiAccess:!0,customDomain:!0}}},p=(e,t)=>{if("admin"===e)return!0;return(m[e]||m.free).features[t]||!1},f=e=>{let{feature:t,userPlan:n,children:a,fallback:s=null,showUpgradePrompt:r=!0,onUpgrade:i}=e;if(p(n,t))return a;if(!r)return s;const l=(e=>{const t=["pro","premium"];for(const n of t)if(p(n,e))return n;return"pro"})(t);return(0,d.jsxs)("div",{className:"premium-feature-wrapper",children:[(0,d.jsx)("div",{className:"premium-overlay",children:(0,d.jsxs)("div",{className:"premium-content",children:[(0,d.jsx)("div",{className:"premium-icon",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,d.jsx)("h3",{children:"Premium Feature"}),(0,d.jsx)("p",{children:(e=>({webcamOverlay:"Add your webcam to recordings for a personal touch",areaSelection:"Record specific areas of your screen with precision",advancedAudio:"Professional audio controls and noise suppression",cloudStorage:"Store recordings securely in the cloud",teamSharing:"Share recordings with your team instantly",analytics:"Track recording performance and viewer engagement",customBranding:"Add your logo and brand to recordings",prioritySupport:"24/7 priority support from our experts",exportFormats:"Export in multiple formats (MP4, MOV, AVI)",scheduledRecording:"Schedule recordings for automatic capture",liveStreaming:"Stream live to platforms like YouTube and Twitch",aiTranscription:"AI-powered automatic transcription and subtitles",videoEditing:"Built-in video editing tools and effects",bulkOperations:"Manage multiple recordings at once",apiAccess:"Full API access for integrations",customDomain:"Host recordings on your custom domain"}[e]||"Premium feature"))(t)}),(0,d.jsxs)("div",{className:"plan-badge",children:[l.charAt(0).toUpperCase()+l.slice(1)," Plan Required"]}),(0,d.jsx)("button",{className:"upgrade-button",onClick:i,children:"Upgrade Now"})]})}),(0,d.jsx)("div",{className:"premium-content-blurred",children:a})]})},g=e=>{let{options:t,onChange:n,disabled:a,selectedArea:s,onAreaSelect:r,userPlan:i,onUpgrade:l}=e;const o=(e,t)=>{n(n=>c(c({},n),{},{[e]:t}))};return(0,d.jsxs)("div",{className:"recording-options",children:[(0,d.jsx)("h3",{children:"Recording Settings"}),(0,d.jsxs)("div",{className:"options-grid",children:[(0,d.jsxs)("div",{className:"option-group",children:[(0,d.jsx)("label",{htmlFor:"videoQuality",children:"Video Quality"}),(0,d.jsxs)("select",{id:"videoQuality",value:t.videoQuality,onChange:e=>o("videoQuality",e.target.value),disabled:a,children:[(0,d.jsx)("option",{value:"720p",children:"720p HD"}),(0,d.jsx)("option",{value:"1080p",children:"1080p Full HD"}),(0,d.jsx)("option",{value:"1440p",children:"1440p 2K"}),(0,d.jsx)("option",{value:"4K",children:"4K Ultra HD"})]})]}),(0,d.jsxs)("div",{className:"option-group",children:[(0,d.jsx)("label",{htmlFor:"frameRate",children:"Frame Rate"}),(0,d.jsxs)("select",{id:"frameRate",value:t.frameRate,onChange:e=>o("frameRate",parseInt(e.target.value)),disabled:a,children:[(0,d.jsx)("option",{value:15,children:"15 FPS"}),(0,d.jsx)("option",{value:24,children:"24 FPS"}),(0,d.jsx)("option",{value:30,children:"30 FPS"}),(0,d.jsx)("option",{value:60,children:"60 FPS"})]})]}),(0,d.jsxs)("div",{className:"option-group",children:[(0,d.jsx)("label",{htmlFor:"audioSource",children:"Audio Source"}),(0,d.jsxs)("select",{id:"audioSource",value:t.audioSource,onChange:e=>o("audioSource",e.target.value),disabled:a,children:[(0,d.jsx)("option",{value:"none",children:"No Audio"}),(0,d.jsx)("option",{value:"system",children:"System Audio"}),(0,d.jsx)("option",{value:"microphone",children:"Microphone"}),(0,d.jsx)("option",{value:"both",children:"System + Microphone"})]})]}),(0,d.jsxs)("div",{className:"option-group",children:[(0,d.jsx)("label",{htmlFor:"captureArea",children:"Capture Area"}),(0,d.jsxs)("select",{id:"captureArea",value:t.captureArea,onChange:e=>o("captureArea",e.target.value),disabled:a,children:[(0,d.jsx)("option",{value:"fullscreen",children:"Full Screen"}),(0,d.jsx)("option",{value:"window",children:"Specific Window"}),(0,d.jsx)("option",{value:"tab",children:"Browser Tab"}),(0,d.jsxs)("option",{value:"area",disabled:!p(i,"areaSelection"),children:["Custom Area ",p(i,"areaSelection")?"":"(Premium)"]})]}),"area"===t.captureArea&&(0,d.jsx)(f,{feature:"areaSelection",userPlan:i,onUpgrade:l,fallback:(0,d.jsx)("button",{className:"area-select-btn disabled",disabled:!0,children:"Custom Area (Premium Feature)"}),children:(0,d.jsx)("button",{className:"area-select-btn",onClick:r,disabled:a,type:"button",children:s?"Area Selected: ".concat(s.width,"\xd7").concat(s.height):"Select Recording Area"})})]})]}),(0,d.jsx)("div",{className:"option-toggles",children:(0,d.jsx)(f,{feature:"webcamOverlay",userPlan:i,onUpgrade:l,fallback:(0,d.jsx)("div",{className:"toggle-group disabled",children:(0,d.jsxs)("label",{className:"toggle-label disabled",children:[(0,d.jsx)("input",{type:"checkbox",disabled:!0}),(0,d.jsx)("span",{className:"toggle-slider disabled"}),"Include Webcam Overlay (Premium)"]})}),children:(0,d.jsx)("div",{className:"toggle-group",children:(0,d.jsxs)("label",{className:"toggle-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:t.includeWebcam,onChange:e=>o("includeWebcam",e.target.checked),disabled:a}),(0,d.jsx)("span",{className:"toggle-slider"}),"Include Webcam Overlay"]})})})}),(0,d.jsx)(h,{settings:t,onChange:n,disabled:a}),(0,d.jsxs)("div",{className:"options-info",children:[(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("span",{className:"info-label",children:"Estimated file size:"}),(0,d.jsx)("span",{className:"info-value",children:"4K"===t.videoQuality?"~50MB/min":"1440p"===t.videoQuality?"~30MB/min":"1080p"===t.videoQuality?"~20MB/min":"~10MB/min"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("span",{className:"info-label",children:"Format:"}),(0,d.jsx)("span",{className:"info-value",children:"WebM (VP9)"})]})]})]})},v=e=>{let{recording:t,onDownload:n,onDelete:s,recordings:r=[],onNavigate:i,onOpenAdvancedEditor:l,onOpenAutoCaptions:o,onOpenAutoTranscription:c,onOpenAutoChapters:u,onOpenSceneDetection:h,onOpenBackgroundRemoval:m,onOpenSmartCrop:p,onOpenExportOptimizer:f}=e;const[g,v]=(0,a.useState)(!1),[x,b]=(0,a.useState)(0),[j,y]=(0,a.useState)(0),w=(0,a.useRef)(null),S=r.findIndex(e=>e.id===(null===t||void 0===t?void 0:t.id)),N=S>0,k=S<r.length-1,C=()=>{g?w.current&&(w.current.pause(),v(!1)):w.current&&w.current.play().then(()=>{v(!0)}).catch(e=>{console.error("Failed to play video:",e)})},M=()=>{k&&i&&i(r[S+1])},z=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))};return t?(0,d.jsxs)("div",{className:"video-preview",children:[(0,d.jsx)("h3",{children:"Preview"}),(0,d.jsxs)("div",{className:"video-container",children:[(0,d.jsx)("video",{ref:w,src:t.url,onPlay:()=>{v(!0)},onPause:()=>{v(!1)},onEnded:()=>{v(!1),k&&i&&setTimeout(()=>M(),1e3)},onTimeUpdate:()=>{w.current&&b(w.current.currentTime)},onLoadedMetadata:()=>{w.current&&y(w.current.duration)},className:"preview-video",children:"Your browser does not support the video tag."}),(0,d.jsx)("div",{className:"video-overlay ".concat(g?"hidden":""),onClick:C,children:!g&&(0,d.jsx)("div",{className:"play-button",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("polygon",{points:"5,3 19,12 5,21"})})})}),(0,d.jsxs)("div",{className:"video-controls",children:[(0,d.jsx)("div",{className:"progress-container",onClick:e=>{if(w.current&&j){const t=e.currentTarget.getBoundingClientRect(),n=(e.clientX-t.left)/t.width*j;w.current.currentTime=n}},children:(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:j?"".concat(x/j*100,"%"):"0%"}})})}),(0,d.jsxs)("div",{className:"controls-row",children:[(0,d.jsxs)("div",{className:"controls-left",children:[(0,d.jsx)("button",{className:"control-btn",onClick:()=>{N&&i&&i(r[S-1])},disabled:!N,title:"Previous Recording",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})})}),(0,d.jsxs)("button",{className:"control-btn rewind-btn",onClick:()=>{w.current&&(w.current.currentTime=Math.max(0,w.current.currentTime-10))},title:"Rewind 10s",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"})}),(0,d.jsx)("span",{className:"skip-text",children:"10"})]}),(0,d.jsx)("button",{className:"control-btn play-pause-btn",onClick:C,title:g?"Pause":"Play",children:g?(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}):(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("polygon",{points:"5,3 19,12 5,21"})})}),(0,d.jsxs)("button",{className:"control-btn fast-forward-btn",onClick:()=>{w.current&&(w.current.currentTime=Math.min(j,w.current.currentTime+10))},title:"Fast Forward 10s",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"})}),(0,d.jsx)("span",{className:"skip-text",children:"10"})]}),(0,d.jsx)("button",{className:"control-btn",onClick:M,disabled:!k,title:"Next Recording",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})})})]}),(0,d.jsx)("div",{className:"controls-right",children:(0,d.jsxs)("span",{className:"time-display",children:[z(x)," / ",z(j)]})})]})]})]}),(0,d.jsxs)("div",{className:"video-info",children:[(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"label",children:"Filename:"}),(0,d.jsx)("span",{className:"value",children:t.filename})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"label",children:"Duration:"}),(0,d.jsx)("span",{className:"value",children:(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))})(t.duration)})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"label",children:"File Size:"}),(0,d.jsx)("span",{className:"value",children:(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]})(t.size)})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"label",children:"Created:"}),(0,d.jsx)("span",{className:"value",children:t.timestamp.toLocaleString()})]})]}),(0,d.jsxs)("div",{className:"video-actions",children:[(0,d.jsxs)("button",{className:"action-btn download-btn",onClick:()=>n(t),title:"Download Video",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),"Download"]}),l&&(0,d.jsxs)("button",{className:"action-btn editor-btn",onClick:l,title:"Advanced Editor",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),"Editor"]}),o&&(0,d.jsxs)("button",{className:"action-btn captions-btn",onClick:o,title:"Auto Captions",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z"})}),"Captions"]}),c&&(0,d.jsxs)("button",{className:"action-btn transcription-btn",onClick:c,title:"Auto Transcription - Speech to Text",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),(0,d.jsx)("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),"Transcribe"]}),u&&(0,d.jsxs)("button",{className:"action-btn chapters-btn",onClick:u,title:"Auto Chapters - Scene Detection",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),"Chapters"]}),h&&(0,d.jsxs)("button",{className:"action-btn scenes-btn",onClick:h,title:"Scene Detection",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"})}),"Scenes"]}),p&&(0,d.jsxs)("button",{className:"action-btn crop-btn",onClick:p,title:"Smart Crop",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"})}),"Crop"]}),f&&(0,d.jsxs)("button",{className:"action-btn export-btn",onClick:f,title:"Export Optimizer",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z"})}),"Export"]}),(0,d.jsxs)("button",{className:"action-btn delete-btn",onClick:()=>{window.confirm("Are you sure you want to delete this recording?")&&s(t.id)},title:"Delete Video",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),"Delete"]})]})]}):null},x=e=>{let{size:t=40,color:n="currentColor",className:a="",animated:s=!1}=e;return(0,d.jsxs)("svg",{width:t,height:t,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"nebula-logo ".concat(a," ").concat(s?"nebula-animated":""),style:{"--logo-color":n},children:[(0,d.jsx)("circle",{cx:"50",cy:"50",r:"45",stroke:n,strokeWidth:"3",fill:"none",strokeDasharray:"8 4",opacity:"0.6",className:"capture-ring"}),(0,d.jsx)("path",{d:"M25 40 Q35 25 50 30 Q65 35 75 45 Q70 60 55 65 Q40 70 30 55 Q20 50 25 40 Z",fill:n,opacity:"0.8",className:"nebula-cloud"}),(0,d.jsx)("ellipse",{cx:"48",cy:"48",rx:"18",ry:"12",fill:n,opacity:"0.4",className:"inner-glow"}),(0,d.jsx)("circle",{cx:"50",cy:"50",r:"8",fill:n,className:"recording-dot",children:s&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("animate",{attributeName:"r",values:"6;10;6",dur:"2s",repeatCount:"indefinite"}),(0,d.jsx)("animate",{attributeName:"opacity",values:"1;0.6;1",dur:"2s",repeatCount:"indefinite"})]})}),(0,d.jsx)("rect",{x:"15",y:"15",width:"8",height:"8",fill:n,opacity:"0.7",className:"corner-indicator"}),(0,d.jsx)("rect",{x:"77",y:"15",width:"8",height:"8",fill:n,opacity:"0.7",className:"corner-indicator"}),(0,d.jsx)("rect",{x:"15",y:"77",width:"8",height:"8",fill:n,opacity:"0.7",className:"corner-indicator"}),(0,d.jsx)("rect",{x:"77",y:"77",width:"8",height:"8",fill:n,opacity:"0.7",className:"corner-indicator"}),(0,d.jsx)("line",{x1:"23",y1:"19",x2:"35",y2:"31",stroke:n,strokeWidth:"2",opacity:"0.5",className:"connection-line"}),(0,d.jsx)("line",{x1:"77",y1:"23",x2:"65",y2:"35",stroke:n,strokeWidth:"2",opacity:"0.5",className:"connection-line"}),(0,d.jsx)("line",{x1:"23",y1:"81",x2:"35",y2:"69",stroke:n,strokeWidth:"2",opacity:"0.5",className:"connection-line"}),(0,d.jsx)("line",{x1:"77",y1:"81",x2:"65",y2:"69",stroke:n,strokeWidth:"2",opacity:"0.5",className:"connection-line"}),(0,d.jsx)("style",{jsx:!0,children:"\n        .nebula-logo {\n          transition: all 0.3s ease;\n        }\n        \n        .nebula-animated .capture-ring {\n          animation: rotateRing 20s linear infinite;\n        }\n        \n        .nebula-animated .corner-indicator {\n          animation: pulse 3s ease-in-out infinite;\n        }\n        \n        .nebula-animated .connection-line {\n          animation: fadeInOut 4s ease-in-out infinite;\n        }\n        \n        @keyframes rotateRing {\n          from { transform-origin: 50px 50px; transform: rotate(0deg); }\n          to { transform-origin: 50px 50px; transform: rotate(360deg); }\n        }\n        \n        @keyframes pulse {\n          0%, 100% { opacity: 0.7; }\n          50% { opacity: 0.3; }\n        }\n        \n        @keyframes fadeInOut {\n          0%, 100% { opacity: 0.5; }\n          50% { opacity: 0.8; }\n        }\n      "})]})},b=210,j=e=>{var t;let{recordings:n,onSelect:s,onDownload:r,onDelete:i,onEdit:l,currentRecording:o,formatFileSize:c,formatDuration:u}=e;const[h,m]=(0,a.useState)(0),p=(0,a.useRef)(null),f=(0,a.useCallback)(()=>{p.current&&m(p.current.scrollTop)},[]);(0,a.useEffect)(()=>{const e=p.current;if(e)return e.addEventListener("scroll",f),()=>e.removeEventListener("scroll",f)},[f]);const g=(null===(t=p.current)||void 0===t?void 0:t.clientHeight)||600,v=(n||[]).length*b,j=Math.max(0,Math.floor(h/b)-3),y=Math.min((n||[]).length,Math.ceil((h+g)/b)+3),w=(n||[]).slice(j,y),S=j*b;return console.log("VirtualFileList - Total recordings:",null===n||void 0===n?void 0:n.length),console.log("VirtualFileList - Visible items:",null===w||void 0===w?void 0:w.length),console.log("VirtualFileList - onEdit function exists:",!!l),n&&0!==n.length?(0,d.jsx)("div",{className:"virtual-file-list",ref:p,children:(0,d.jsx)("div",{className:"virtual-spacer",style:{height:"".concat(v,"px")},children:(0,d.jsx)("div",{className:"virtual-content",style:{transform:"translateY(".concat(S,"px)")},children:w.map((e,t)=>{var n,a;const h=o&&o.id===e.id;return(0,d.jsxs)("div",{className:"file-card ".concat(h?"active":""),onClick:()=>s(e),children:[(0,d.jsxs)("div",{className:"file-card-content",children:[(0,d.jsxs)("div",{className:"file-thumbnail",children:[e.url?(0,d.jsx)("video",{src:e.url,className:"thumbnail-video",preload:"metadata",muted:!0,playsInline:!0,onClick:e=>{e.stopPropagation(),e.target.paused?e.target.play():e.target.pause()},onLoadedMetadata:e=>{try{const t=Math.min(1,.1*e.target.duration);isFinite(t)&&t>0&&(e.target.currentTime=t)}catch(t){console.warn("Failed to seek video thumbnail:",t)}},onError:e=>{console.error("Video thumbnail load error:",e)}}):(0,d.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#1a1a1a",color:"#666"},children:"No Preview"}),(0,d.jsx)("div",{className:"thumbnail-overlay",children:(0,d.jsx)("div",{className:"duration-badge",children:u(e.duration)})})]}),(0,d.jsxs)("div",{className:"file-info",children:[(0,d.jsx)("h4",{className:"file-name",title:e.filename,children:e.filename}),(0,d.jsxs)("div",{className:"file-meta",children:[(0,d.jsx)("span",{className:"file-size",children:c(e.size)}),(0,d.jsx)("span",{className:"file-date",children:new Date(e.timestamp).toLocaleDateString()})]}),(0,d.jsxs)("div",{className:"file-quality",children:[(0,d.jsx)("span",{className:"quality-badge",children:(null===(n=e.settings)||void 0===n?void 0:n.videoQuality)||"1080p"}),(0,d.jsxs)("span",{className:"fps-badge",children:[(null===(a=e.settings)||void 0===a?void 0:a.frameRate)||30," FPS"]})]})]})]}),(0,d.jsxs)("div",{className:"file-actions",onClick:e=>e.stopPropagation(),children:[l&&(0,d.jsxs)("button",{className:"action-btn edit",onClick:()=>l(e),title:"Edit Video",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),(0,d.jsx)("span",{className:"btn-label",children:"Edit"})]}),(0,d.jsxs)("button",{className:"action-btn download",onClick:()=>r(e),title:"Download",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),(0,d.jsx)("span",{className:"btn-label",children:"Download"})]}),(0,d.jsxs)("button",{className:"action-btn delete",onClick:()=>i(e.id),title:"Delete",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),(0,d.jsx)("span",{className:"btn-label",children:"Delete"})]})]})]},e.id)})})})}):(0,d.jsx)("div",{className:"virtual-file-list empty",children:(0,d.jsxs)("div",{className:"empty-state",children:[(0,d.jsx)(x,{size:64,color:"#cbd5e1"}),(0,d.jsx)("p",{children:"No recordings yet"}),(0,d.jsx)("span",{children:"Start your first screen recording above"})]})})},y=e=>{let{recordings:t,onSelect:n,onDownload:s,onDelete:r,onEdit:i,currentRecording:l}=e;const[o,c]=(0,a.useState)("newest"),[u,h]=(0,a.useState)(""),m=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]},p=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},f=t.filter(e=>e.filename.toLowerCase().includes(u.toLowerCase())).sort((e,t)=>{switch(o){case"newest":return new Date(t.timestamp)-new Date(e.timestamp);case"oldest":return new Date(e.timestamp)-new Date(t.timestamp);case"name":return e.filename.localeCompare(t.filename);case"size":return t.size-e.size;case"duration":return t.duration-e.duration;default:return 0}});return(0,d.jsxs)("div",{className:"file-manager",children:[(0,d.jsxs)("div",{className:"file-manager-header",children:[(0,d.jsxs)("h3",{children:["Recorded Videos (",t.length,")"]}),t.length>0&&(0,d.jsxs)("div",{className:"bulk-actions",children:[(0,d.jsx)("button",{className:"bulk-btn download-all",onClick:()=>{t.forEach(e=>{setTimeout(()=>s(e),100)})},title:"Download All",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})})}),(0,d.jsx)("button",{className:"bulk-btn delete-all",onClick:()=>{window.confirm("Are you sure you want to delete all ".concat(t.length," recordings?"))&&t.forEach(e=>r(e.id))},title:"Delete All",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]}),t.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"file-controls",children:[(0,d.jsx)("input",{type:"text",placeholder:"Search recordings...",value:u,onChange:e=>h(e.target.value),className:"search-input"}),(0,d.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"sort-select",children:[(0,d.jsx)("option",{value:"newest",children:"Newest First"}),(0,d.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,d.jsx)("option",{value:"name",children:"Name A-Z"}),(0,d.jsx)("option",{value:"size",children:"Largest First"}),(0,d.jsx)("option",{value:"duration",children:"Longest First"})]})]}),(0,d.jsxs)("div",{className:"file-stats",children:[(0,d.jsxs)("div",{className:"stat",children:[(0,d.jsx)("span",{children:"Total Size:"}),(0,d.jsx)("span",{children:m(t.reduce((e,t)=>e+t.size,0))})]}),(0,d.jsxs)("div",{className:"stat",children:[(0,d.jsx)("span",{children:"Total Duration:"}),(0,d.jsx)("span",{children:p(t.reduce((e,t)=>e+t.duration,0))})]})]})]}),(0,d.jsx)(j,{recordings:f,onSelect:n,onDownload:s,onDelete:r,onEdit:i,currentRecording:l,formatFileSize:m,formatDuration:p})]})},w=e=>{let{isVisible:t,onAreaSelected:n,onCancel:s}=e;const[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)({x:0,y:0}),[c,u]=(0,a.useState)({x:0,y:0}),[h,m]=(0,a.useState)(null),p=(0,a.useRef)(null);(0,a.useEffect)(()=>(t?document.body.style.overflow="hidden":(document.body.style.overflow="auto",i(!1),m(null)),()=>{document.body.style.overflow="auto"}),[t]);return t?(0,d.jsxs)("div",{className:"area-selector-overlay",children:[(0,d.jsxs)("div",{className:"area-selector-instructions",children:[(0,d.jsx)("h3",{children:"Select Recording Area"}),(0,d.jsx)("p",{children:"Click and drag to select the area you want to record"}),(0,d.jsxs)("div",{className:"instruction-buttons",children:[(0,d.jsx)("button",{onClick:s,className:"cancel-btn",children:"Cancel"}),h&&(0,d.jsx)("button",{onClick:()=>{h&&n(h)},className:"confirm-btn",children:"Use This Area"})]})]}),(0,d.jsx)("div",{ref:p,className:"selection-overlay",onMouseDown:e=>{const t=p.current.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;o({x:n,y:a}),u({x:n,y:a}),i(!0),m(null)},onMouseMove:e=>{if(!r)return;const t=p.current.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;u({x:n,y:a})},onMouseUp:()=>{if(!r)return;const e=Math.abs(c.x-l.x),t=Math.abs(c.y-l.y);if(e>10&&t>10){const n={x:Math.min(l.x,c.x),y:Math.min(l.y,c.y),width:e,height:t};m(n)}i(!1)},children:(r||h)&&(0,d.jsxs)("div",{className:"selection-box",style:(()=>{if(!r&&!h)return{};const e=h||{x:Math.min(l.x,c.x),y:Math.min(l.y,c.y),width:Math.abs(c.x-l.x),height:Math.abs(c.y-l.y)};return{left:e.x,top:e.y,width:e.width,height:e.height}})(),children:[(0,d.jsx)("div",{className:"selection-border"}),h&&(0,d.jsxs)("div",{className:"selection-info",children:[h.width," \xd7 ",h.height]})]})})]}):null},S=e=>{let{notifications:t}=e;if(!t||0===t.length)return null;const n=e=>{switch(e){case"success":return(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})});case"error":return(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})});case"warning":return(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})});default:return(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}};return(0,d.jsx)("div",{className:"notification-center",children:t.map(e=>(0,d.jsxs)("div",{className:"notification notification-".concat(e.type),children:[(0,d.jsx)("div",{className:"notification-icon",children:n(e.type)}),(0,d.jsxs)("div",{className:"notification-content",children:[(0,d.jsx)("p",{children:e.message}),(0,d.jsx)("span",{className:"notification-time",children:e.timestamp.toLocaleTimeString()})]})]},e.id))})},N=e=>{let{isVisible:t,onClose:n}=e;return t?(0,d.jsx)("div",{className:"help-modal-overlay",onClick:n,children:(0,d.jsxs)("div",{className:"help-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"help-header",children:[(0,d.jsxs)("div",{className:"help-title",children:[(0,d.jsx)(x,{size:32,color:"#ffffff"}),(0,d.jsx)("h2",{children:"Nebula Screen Capture Help"})]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("div",{className:"help-content",children:[(0,d.jsxs)("section",{className:"help-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udfac Recording Basics"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Start Recording:"}),' Click "Start Recording" or press ',(0,d.jsx)("kbd",{children:"Ctrl+R"})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Pause/Resume:"}),' Click "Pause" or press ',(0,d.jsx)("kbd",{children:"Space"})," while recording"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Stop Recording:"}),' Click "Stop" or press ',(0,d.jsx)("kbd",{children:"Ctrl+R"})," again"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Cancel:"})," Press ",(0,d.jsx)("kbd",{children:"Esc"})," to cancel recording or area selection"]})]})]}),(0,d.jsxs)("section",{className:"help-section",children:[(0,d.jsx)("h3",{children:"\u2699\ufe0f Recording Options"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Video Quality:"})," Choose from 720p to 4K based on your needs"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Frame Rate:"})," Higher rates for smoother video, lower for smaller files"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Audio Source:"})," Record system audio, microphone, or both"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Capture Area:"})," Full screen, window, browser tab, or custom area"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Webcam Overlay:"})," Include your webcam in the recording"]})]})]}),(0,d.jsxs)("section",{className:"help-section",children:[(0,d.jsx)("h3",{children:"\u2328\ufe0f Keyboard Shortcuts"}),(0,d.jsxs)("div",{className:"shortcuts-grid",children:[(0,d.jsxs)("div",{className:"shortcut",children:[(0,d.jsx)("kbd",{children:"Ctrl+R"}),(0,d.jsx)("span",{children:"Start/Stop Recording"})]}),(0,d.jsxs)("div",{className:"shortcut",children:[(0,d.jsx)("kbd",{children:"Space"}),(0,d.jsx)("span",{children:"Pause/Resume"})]}),(0,d.jsxs)("div",{className:"shortcut",children:[(0,d.jsx)("kbd",{children:"Esc"}),(0,d.jsx)("span",{children:"Cancel/Stop"})]}),(0,d.jsxs)("div",{className:"shortcut",children:[(0,d.jsx)("kbd",{children:"Ctrl+D"}),(0,d.jsx)("span",{children:"Download Current"})]})]})]}),(0,d.jsxs)("section",{className:"help-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udfb5 Audio Settings"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Noise Suppression:"})," Reduces background noise from microphone"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Echo Cancellation:"})," Prevents audio feedback loops"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Auto Gain Control:"})," Automatically adjusts microphone volume"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Audio Quality:"})," Higher quality means larger file sizes"]})]})]}),(0,d.jsxs)("section",{className:"help-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udcc1 File Management"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Download:"})," Save recordings to your computer"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Preview:"})," Watch recordings before downloading"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Search:"})," Find recordings by filename"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Sort:"})," Organize by date, size, duration, or name"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Bulk Actions:"})," Download or delete multiple recordings"]})]})]}),(0,d.jsxs)("section",{className:"help-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udca1 Tips & Best Practices"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Close unnecessary applications before recording for better performance"}),(0,d.jsx)("li",{children:"Use lower quality settings for longer recordings to save space"}),(0,d.jsx)("li",{children:"Test your audio settings before important recordings"}),(0,d.jsx)("li",{children:"Grant browser permissions for screen capture and microphone access"}),(0,d.jsx)("li",{children:"Consider your internet connection when recording browser tabs"})]})]}),(0,d.jsxs)("section",{className:"help-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udf10 Browser Compatibility"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Recommended:"})," Chrome 72+, Firefox 66+, Edge 79+"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Features:"})," Full support for all recording features"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Mobile:"})," Limited support on mobile browsers"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Permissions:"})," Always allow screen capture and microphone access"]})]})]})]})]})}):null};var k,C,M,z=n(119);!function(e){e.INITIAL="initial",e.PENDING="pending",e.REJECTED="rejected",e.RESOLVED="resolved"}(k||(k={})),function(e){e.LOADING_STATUS="setLoadingStatus",e.RESET_OPTIONS="resetOptions",e.SET_BRAINTREE_INSTANCE="braintreeInstance"}(C||(C={})),function(e){e.NUMBER="number",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.EXPIRATION_MONTH="expirationMonth",e.EXPIRATION_YEAR="expirationYear",e.POSTAL_CODE="postalCode"}(M||(M={}));var E=function(){return E=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},E.apply(this,arguments)};function T(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n}function P(e,t,n){if(n||2===arguments.length)for(var a,s=0,r=t.length;s<r;s++)!a&&s in t||(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}"function"===typeof SuppressedError&&SuppressedError;var R="dataNamespace",L="3.117.0",D=("https://js.braintreegateway.com/web/".concat(L,"/js/client.min.js"),"https://js.braintreegateway.com/web/".concat(L,"/js/paypal-checkout.min.js"),"paypal");function A(e){return void 0===e&&(e=D),window[e]}function F(e){var t=e.reactComponentName,n=e.sdkComponentKey,a=e.sdkRequestedComponents,s=void 0===a?"":a,r=e.sdkDataNamespace,i=void 0===r?D:r,l=n.charAt(0).toUpperCase().concat(n.substring(1)),o="Unable to render <".concat(t," /> because window.").concat(i,".").concat(l," is undefined."),c="string"===typeof s?s:s.join(",");if(!c.includes(n)){var d=[c,n].filter(Boolean).join();o+="\nTo fix the issue, add '".concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(d,"'}}>`.")}return o}var B=(0,a.createContext)(null);function I(e){if("function"===typeof(null===e||void 0===e?void 0:e.dispatch)&&0!==e.dispatch.length)return e;throw new Error("usePayPalScriptReducer must be used within a PayPalScriptProvider")}function O(){var e=I((0,a.useContext)(B));return[E(E({},e),{isInitial:e.loadingStatus===k.INITIAL,isPending:e.loadingStatus===k.PENDING,isResolved:e.loadingStatus===k.RESOLVED,isRejected:e.loadingStatus===k.REJECTED}),e.dispatch]}(0,a.createContext)({});function V(e){var t=(0,a.useRef)(new Proxy({},{get:function(e,t,n){return"function"===typeof e[t]?function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return e[t].apply(e,n)}:Reflect.get(e,t,n)}}));return t.current=Object.assign(t.current,e),t.current}var H=function(e){var t,n=e.className,s=void 0===n?"":n,r=e.disabled,i=void 0!==r&&r,l=e.children,o=e.forceReRender,c=void 0===o?[]:o,d=T(e,["className","disabled","children","forceReRender"]),u=i?{opacity:.38}:{},h="".concat(s," ").concat(i?"paypal-buttons-disabled":"").trim(),m=(0,a.useRef)(null),p=(0,a.useRef)(null),f=V(d),g=O()[0],v=g.isResolved,x=g.options,b=(0,a.useState)(null),j=b[0],y=b[1],w=(0,a.useState)(!0),S=w[0],N=w[1],k=(0,a.useState)(null)[1];function C(){null!==p.current&&p.current.close().catch(function(){})}return(null===(t=p.current)||void 0===t?void 0:t.updateProps)&&p.current.updateProps({message:d.message}),(0,a.useEffect)(function(){if(!1===v)return C;var e=A(x.dataNamespace);if(void 0===e||void 0===e.Buttons)return k(function(){throw new Error(F({reactComponentName:H.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:x.components,sdkDataNamespace:x[R]}))}),C;try{p.current=e.Buttons(E(E({},f),{onInit:function(e,t){y(t),"function"===typeof d.onInit&&d.onInit(e,t)}}))}catch(t){return k(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(t))})}return!1===p.current.isEligible()?(N(!1),C):m.current?(p.current.render(m.current).catch(function(e){null!==m.current&&0!==m.current.children.length&&k(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(e))})}),C):C},P(P([v],c,!0),[d.fundingSource],!1)),(0,a.useEffect)(function(){null!==j&&(!0===i?j.disable().catch(function(){}):j.enable().catch(function(){}))},[i,j]),a.createElement(a.Fragment,null,S?a.createElement("div",{ref:m,style:u,className:h}):l)};H.displayName="PayPalButtons","function"===typeof SuppressedError&&SuppressedError;var U=function(e){var t=e.className,n=void 0===t?"":t,s=e.children,r=T(e,["className","children"]),i=O()[0],l=i.isResolved,o=i.options,c=(0,a.useRef)(null),d=(0,a.useState)(!0),u=d[0],h=d[1],m=(0,a.useState)(null)[1];return(0,a.useEffect)(function(){if(!1!==l){var e=A(o[R]);if(void 0===e||void 0===e.Marks)return m(function(){throw new Error(F({reactComponentName:U.displayName,sdkComponentKey:"marks",sdkRequestedComponents:o.components,sdkDataNamespace:o[R]}))});!function(e){var t=c.current;if(!t||!e.isEligible())return h(!1);t.firstChild&&t.removeChild(t.firstChild),e.render(t).catch(function(e){null!==t&&0!==t.children.length&&m(function(){throw new Error("Failed to render <PayPalMarks /> component. ".concat(e))})})}(e.Marks(E({},r)))}},[l,r.fundingSource]),a.createElement(a.Fragment,null,u?a.createElement("div",{ref:c,className:n}):s)};U.displayName="PayPalMarks";var _=function(e){var t=e.className,n=void 0===t?"":t,s=e.forceReRender,r=void 0===s?[]:s,i=T(e,["className","forceReRender"]),l=O()[0],o=l.isResolved,c=l.options,d=(0,a.useRef)(null),u=(0,a.useRef)(null),h=(0,a.useState)(null)[1];return(0,a.useEffect)(function(){if(!1!==o){var e=A(c[R]);if(void 0===e||void 0===e.Messages)return h(function(){throw new Error(F({reactComponentName:_.displayName,sdkComponentKey:"messages",sdkRequestedComponents:c.components,sdkDataNamespace:c[R]}))});u.current=e.Messages(E({},i)),u.current.render(d.current).catch(function(e){null!==d.current&&0!==d.current.children.length&&h(function(){throw new Error("Failed to render <PayPalMessages /> component. ".concat(e))})})}},P([o],r,!0)),a.createElement("div",{ref:d,className:n})};_.displayName="PayPalMessages";function q(){}(0,a.createContext)({cardFieldsForm:null,fields:{},registerField:q,unregisterField:q});var W,Q="clover",G="https://js.stripe.com",K="".concat(G,"/").concat(Q,"/stripe.js"),$=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Y=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,X="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",J=function(e){return $.test(e)||Y.test(e)},Z=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(K).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},ee=null,te=null,ne=null,ae=function(e){return null!==ee?ee:(ee=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(X),window.Stripe)t(window.Stripe);else try{var a=function(){for(var e=document.querySelectorAll('script[src^="'.concat(G,'"]')),t=0;t<e.length;t++){var n=e[t];if(J(n.src))return n}return null}();if(a&&e)console.warn(X);else if(a){if(a&&null!==ne&&null!==te){var s;a.removeEventListener("load",ne),a.removeEventListener("error",te),null===(s=a.parentNode)||void 0===s||s.removeChild(a),a=Z(e)}}else a=Z(e);ne=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),te=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),a.addEventListener("load",ne),a.addEventListener("error",te)}catch(r){return void n(r)}else t(null)})).catch(function(e){return ee=null,Promise.reject(e)})},se=!1,re=function(){return W||(W=ae(null).catch(function(e){return W=null,Promise.reject(e)}))};Promise.resolve().then(function(){return re()}).catch(function(e){se||console.warn(e)});console.warn("\u26a0\ufe0f Stripe publishable key not configured - using demo mode");const ie={async processStripePayment(e){try{const{plan:t,billingInfo:n,cardDetails:a,userEmail:s,userName:r}=e;console.log("Processing Stripe payment:",{plan:t.id,amount:t.price,email:n.email}),await new Promise(e=>setTimeout(e,2e3));return{success:!0,transactionId:"stripe_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),amount:t.price,currency:"USD",method:"stripe",plan:t.id,timestamp:(new Date).toISOString()}}catch(t){throw console.error("Stripe payment error:",t),new Error("Payment processing failed. Please try again.")}},async processPayPalPayment(e){try{const{plan:t,billingInfo:n,orderID:a}=e;console.log("Processing PayPal payment:",{plan:t.id,amount:t.price,orderID:a}),await new Promise(e=>setTimeout(e,1500));return{success:!0,transactionId:a||"paypal_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),amount:t.price,currency:"USD",method:"paypal",plan:t.id,timestamp:(new Date).toISOString()}}catch(t){throw console.error("PayPal payment error:",t),new Error("Payment processing failed. Please try again.")}},async sendPaymentConfirmationEmail(e){try{const{email:t,name:n,plan:a,transactionId:s,amount:r}=e,i=JSON.parse(localStorage.getItem("nebulaUser")||"{}"),l={email:t||i.email,name:n||i.name,plan:a.charAt(0).toUpperCase()+a.slice(1),price:r};0;const o="http://localhost:5001/nebula-screen-capture/us-central1",c=await fetch("".concat(o,"/sendUpgradeConfirmation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!c.ok)throw new Error("Failed to send confirmation email");return await c.json()}catch(t){return console.error("Email send error:",t),{success:!1,error:t.message}}},validateCardNumber(e){const t=e.replace(/\s/g,"");if(!/^\d+$/.test(t))return!1;if(t.length<13||t.length>19)return!1;let n=0,a=!1;for(let s=t.length-1;s>=0;s--){let e=parseInt(t[s]);a&&(e*=2,e>9&&(e-=9)),n+=e,a=!a}return n%10===0},getCardBrand(e){const t=e.replace(/\s/g,""),n={visa:/^4/,mastercard:/^5[1-5]/,amex:/^3[47]/,discover:/^6(?:011|5)/,diners:/^3(?:0[0-5]|[68])/,jcb:/^35/};for(const[a,s]of Object.entries(n))if(s.test(t))return a;return"unknown"},formatCardNumber(e){const t=e.replace(/\s/g,"");return"amex"===this.getCardBrand(t)?t.replace(/(\d{4})(\d{6})(\d{5})/,"$1 $2 $3").trim():t.replace(/(\d{4})/g,"$1 ").trim()}},le=e=>{let{plan:t,onClose:n,onPaymentSuccess:s,onPaymentError:r}=e;const[i,l]=(0,a.useState)("stripe"),[o,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)({cardNumber:"",cardName:"",expiryDate:"",cvv:""}),[p,f]=(0,a.useState)({email:"",country:"",zipCode:""}),[g,v]=(0,a.useState)({}),x={pro:{amount:9.99,currency:"USD"},premium:{amount:19.99,currency:"USD"}},b=x[t.id]||x.pro,j=e=>{const{name:t,value:n}=e.target;let a=n;"cardNumber"===t&&(a=n.replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim(),a=a.slice(0,19)),"expiryDate"===t&&(a=n.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").slice(0,5)),"cvv"===t&&(a=n.replace(/\D/g,"").slice(0,4)),m(e=>c(c({},e),{},{[t]:a})),g[t]&&v(e=>c(c({},e),{},{[t]:""}))},y=e=>{const{name:t,value:n}=e.target;f(e=>c(c({},e),{},{[t]:n})),g[t]&&v(e=>c(c({},e),{},{[t]:""}))},w=async e=>{try{console.log("Processing PayPal payment...",e);const n=await ie.processPayPalPayment({plan:{id:t.id,name:t.name,price:t.price},billingInfo:p,orderID:e,userEmail:p.email});return await ie.sendPaymentConfirmationEmail({email:p.email,name:JSON.parse(localStorage.getItem("nebulaUser")||"{}").name,plan:t.id,transactionId:n.transactionId,amount:b.amount}),n}catch(n){throw console.error("PayPal payment error:",n),new Error("PayPal payment failed. Please try again.")}};return(0,z.createPortal)((0,d.jsx)("div",{className:"payment-modal-overlay",onClick:e=>{e.stopPropagation(),e.target===e.currentTarget&&n()},children:(0,d.jsxs)("div",{className:"modal-content payment-modal",onClick:e=>{e.stopPropagation()},children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{children:"Complete Your Upgrade"}),(0,d.jsxs)("p",{className:"modal-subtitle",children:["You're upgrading to ",(0,d.jsx)("strong",{children:t.name})," plan"]})]}),(0,d.jsx)("button",{className:"modal-close",onClick:n,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("div",{className:"modal-body payment-body",children:[g.general&&(0,d.jsxs)("div",{className:"error-banner",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),g.general]}),(0,d.jsxs)("div",{className:"payment-summary",children:[(0,d.jsxs)("div",{className:"summary-row",children:[(0,d.jsx)("span",{children:"Plan"}),(0,d.jsx)("span",{className:"summary-value",children:t.name})]}),(0,d.jsxs)("div",{className:"summary-row",children:[(0,d.jsx)("span",{children:"Billing Cycle"}),(0,d.jsx)("span",{className:"summary-value",children:"Monthly"})]}),(0,d.jsxs)("div",{className:"summary-row total",children:[(0,d.jsx)("span",{children:"Total Due Today"}),(0,d.jsxs)("span",{className:"summary-value",children:["$",b.amount.toFixed(2)," ",b.currency]})]})]}),(0,d.jsxs)("div",{className:"payment-methods",children:[(0,d.jsx)("h3",{children:"Select Payment Method"}),(0,d.jsxs)("div",{className:"method-buttons",children:[(0,d.jsxs)("button",{className:"method-btn ".concat("stripe"===i?"active":""),onClick:()=>l("stripe"),type:"button",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"})}),"Credit/Debit Card"]}),(0,d.jsxs)("button",{className:"method-btn ".concat("paypal"===i?"active":""),onClick:()=>l("paypal"),type:"button",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M8.32 21.97a.546.546 0 0 1-.26-.32c-.03-.15-.01-.3.06-.44l2.4-5.54H7.5a.5.5 0 0 1-.48-.63L8.8 9.65c.06-.19.23-.32.43-.32h5.28c.2 0 .37.13.43.32l1.78 5.39a.5.5 0 0 1-.48.63h-3.02l-2.4 5.54a.546.546 0 0 1-.26.32c-.13.07-.28.08-.42.03-.14-.05-.25-.15-.31-.29z"})}),"PayPal"]})]})]}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(p.email?/\S+@\S+\.\S+/.test(p.email)||(e.email="Invalid email address"):e.email="Email is required",p.country||(e.country="Country is required"),p.zipCode||(e.zipCode="Zip/Postal code is required"),"stripe"===i){const t=h.cardNumber.replace(/\s/g,"");h.cardNumber?(t.length<13||t.length>19)&&(e.cardNumber="Invalid card number"):e.cardNumber="Card number is required",h.cardName||(e.cardName="Cardholder name is required"),h.expiryDate?/^\d{2}\/\d{2}$/.test(h.expiryDate)||(e.expiryDate="Invalid format (MM/YY)"):e.expiryDate="Expiry date is required",h.cvv?h.cvv.length<3&&(e.cvv="Invalid CVV"):e.cvv="CVV is required"}return v(e),0===Object.keys(e).length})()){u(!0);try{let e;if("stripe"!==i)return v({general:"Please use the PayPal button below to complete payment"}),void u(!1);e=await(async()=>{try{console.warn("\u26a0\ufe0f Stripe not configured - using demo mode");const e=await ie.processStripePayment({plan:{id:t.id,name:t.name,price:t.price},billingInfo:p,cardDetails:h,userEmail:p.email,userName:JSON.parse(localStorage.getItem("nebulaUser")||"{}").name});return await ie.sendPaymentConfirmationEmail({email:p.email,name:JSON.parse(localStorage.getItem("nebulaUser")||"{}").name,plan:t.id,transactionId:e.transactionId,amount:b.amount}),e}catch(e){throw console.error("Stripe payment error:",e),new Error("Payment processing failed. Please try again.")}})(),s(c(c({},e),{},{billingInfo:p}))}catch(n){console.error("Payment error:",n),v({general:n.message}),r(n)}finally{u(!1)}}},className:"payment-form",children:[(0,d.jsxs)("div",{className:"form-section",children:[(0,d.jsx)("h3",{children:"Billing Information"}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Email Address *"}),(0,d.jsx)("input",{type:"email",name:"email",value:p.email,onChange:y,className:g.email?"error":"",placeholder:"your@email.com",disabled:o}),g.email&&(0,d.jsx)("span",{className:"error-text",children:g.email})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Country *"}),(0,d.jsxs)("select",{name:"country",value:p.country,onChange:y,className:g.country?"error":"",disabled:o,children:[(0,d.jsx)("option",{value:"",children:"Select Country"}),(0,d.jsx)("option",{value:"US",children:"United States"}),(0,d.jsx)("option",{value:"CA",children:"Canada"}),(0,d.jsx)("option",{value:"GB",children:"United Kingdom"}),(0,d.jsx)("option",{value:"AU",children:"Australia"}),(0,d.jsx)("option",{value:"DE",children:"Germany"}),(0,d.jsx)("option",{value:"FR",children:"France"}),(0,d.jsx)("option",{value:"ES",children:"Spain"}),(0,d.jsx)("option",{value:"IT",children:"Italy"}),(0,d.jsx)("option",{value:"NL",children:"Netherlands"}),(0,d.jsx)("option",{value:"SE",children:"Sweden"}),(0,d.jsx)("option",{value:"NO",children:"Norway"}),(0,d.jsx)("option",{value:"DK",children:"Denmark"}),(0,d.jsx)("option",{value:"FI",children:"Finland"}),(0,d.jsx)("option",{value:"JP",children:"Japan"}),(0,d.jsx)("option",{value:"KR",children:"South Korea"}),(0,d.jsx)("option",{value:"SG",children:"Singapore"}),(0,d.jsx)("option",{value:"IN",children:"India"}),(0,d.jsx)("option",{value:"BR",children:"Brazil"}),(0,d.jsx)("option",{value:"MX",children:"Mexico"})]}),g.country&&(0,d.jsx)("span",{className:"error-text",children:g.country})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Zip/Postal Code *"}),(0,d.jsx)("input",{type:"text",name:"zipCode",value:p.zipCode,onChange:y,className:g.zipCode?"error":"",placeholder:"12345",disabled:o}),g.zipCode&&(0,d.jsx)("span",{className:"error-text",children:g.zipCode})]})]})]}),"stripe"===i&&(0,d.jsxs)("div",{className:"form-section",children:[(0,d.jsx)("h3",{children:"Card Details"}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Card Number *"}),(0,d.jsx)("input",{type:"text",name:"cardNumber",value:h.cardNumber,onChange:j,className:g.cardNumber?"error":"",placeholder:"1234 5678 9012 3456",disabled:o}),g.cardNumber&&(0,d.jsx)("span",{className:"error-text",children:g.cardNumber})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Cardholder Name *"}),(0,d.jsx)("input",{type:"text",name:"cardName",value:h.cardName,onChange:j,className:g.cardName?"error":"",placeholder:"John Doe",disabled:o}),g.cardName&&(0,d.jsx)("span",{className:"error-text",children:g.cardName})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Expiry Date *"}),(0,d.jsx)("input",{type:"text",name:"expiryDate",value:h.expiryDate,onChange:j,className:g.expiryDate?"error":"",placeholder:"MM/YY",disabled:o}),g.expiryDate&&(0,d.jsx)("span",{className:"error-text",children:g.expiryDate})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"CVV *"}),(0,d.jsx)("input",{type:"text",name:"cvv",value:h.cvv,onChange:j,className:g.cvv?"error":"",placeholder:"123",disabled:o}),g.cvv&&(0,d.jsx)("span",{className:"error-text",children:g.cvv})]})]})]}),"paypal"===i&&(0,d.jsxs)("div",{className:"paypal-container",children:[(0,d.jsxs)("div",{className:"info-box",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})}),(0,d.jsx)("p",{children:"Click the PayPal button below to complete your payment securely."})]}),"undefined"!==typeof H?(0,d.jsx)("div",{className:"paypal-button-container",children:(0,d.jsx)(H,{style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal"},createOrder:(e,n)=>n&&n.order?n.order.create({purchase_units:[{description:"".concat(t.name," Plan - Monthly Subscription"),amount:{currency_code:b.currency,value:b.amount.toFixed(2)}}],application_context:{shipping_preference:"NO_SHIPPING"}}):(console.error("PayPal actions not available"),Promise.reject("PayPal not initialized")),onApprove:async(e,t)=>{try{u(!0);const e=await t.order.capture(),n=await w(e.id);s(c(c({},n),{},{billingInfo:p,paypalOrderId:e.id}))}catch(n){console.error("PayPal approval error:",n),v({general:"PayPal payment failed. Please try again."}),r(n)}finally{u(!1)}},onError:e=>{console.error("PayPal error:",e),v({general:"PayPal encountered an error. Please try another payment method."}),r(e)},disabled:o||!p.email||!p.country})}):(0,d.jsxs)("div",{className:"paypal-notice",style:{marginTop:"1rem"},children:[(0,d.jsx)("p",{children:"\u26a0\ufe0f PayPal not configured - Demo mode active"}),(0,d.jsx)("p",{style:{fontSize:"0.8rem",marginTop:"0.5rem"},children:"Payment will be simulated for testing"}),(0,d.jsx)("button",{type:"button",onClick:async()=>{u(!0);try{const e=await w("demo_"+Date.now());s(c(c({},e),{},{billingInfo:p}))}catch(e){v({general:e.message})}finally{u(!1)}},className:"btn-pay",disabled:o||!p.email,style:{marginTop:"1rem",width:"100%"},children:o?"Processing...":"Demo: Pay $".concat(b.amount.toFixed(2))})]})]}),(0,d.jsxs)("div",{className:"security-badges",children:[(0,d.jsxs)("div",{className:"badge",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})}),(0,d.jsx)("span",{children:"SSL Encrypted"})]}),(0,d.jsxs)("div",{className:"badge",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})}),(0,d.jsx)("span",{children:"PCI Compliant"})]}),(0,d.jsxs)("div",{className:"badge",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),(0,d.jsx)("span",{children:"Money-Back Guarantee"})]})]}),(0,d.jsxs)("div",{className:"form-actions",children:[(0,d.jsx)("button",{type:"button",onClick:n,className:"btn-cancel",disabled:o,children:"Cancel"}),"stripe"===i&&(0,d.jsx)("button",{type:"submit",className:"btn-pay",disabled:o,children:o?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner"}),"Processing..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})}),"Pay $",b.amount.toFixed(2)]})}),"paypal"===i&&(0,d.jsx)("div",{className:"paypal-notice",children:(0,d.jsx)("p",{children:"Use the PayPal button above to complete payment"})})]})]}),(0,d.jsx)("div",{className:"payment-footer",children:(0,d.jsxs)("p",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})}),"Your payment information is secure and encrypted. We never store your full card details."]})})]})]})}),document.body)},oe=e=>{let{currentPlan:t,onClose:n,onUpgrade:s}=e;const[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(null),c=[{id:"free",name:"Free",price:"$0",period:"forever",features:["Up to 10 recordings per month","720p video quality","500 MB storage","Basic editing tools","Community support"],color:"#94a3b8",current:"free"===t},{id:"pro",name:"Pro",price:"$9.99",period:"per month",features:["Unlimited recordings","1080p video quality","10 GB storage","Advanced editing tools","Priority support","Custom branding","Team collaboration"],color:"#34d399",popular:!0,current:"pro"===t},{id:"premium",name:"Premium",price:"$19.99",period:"per month",features:["Everything in Pro","4K video quality","100 GB storage","AI-powered editing","24/7 premium support","API access","Advanced analytics","White-label solution"],color:"#fbbf24",current:"premium"===t}],u=e=>{i(!1),o(null),alert("Payment successful! Welcome to ".concat(l.name,".\nTransaction ID: ").concat(e.transactionId,"\nAmount: $").concat(e.amount)),s(l.id),setTimeout(()=>{n()},100)},h=e=>{},m=()=>{i(!1),o(null)};return(0,z.createPortal)((0,d.jsx)("div",{className:"upgrade-modal-overlay",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,d.jsxs)("div",{className:"upgrade-modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{children:"Upgrade Your Plan"}),(0,d.jsx)("p",{className:"modal-subtitle",children:"Choose the perfect plan for your needs"})]}),(0,d.jsx)("button",{className:"modal-close",onClick:n,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("div",{className:"modal-body upgrade-body",children:[(0,d.jsx)("div",{className:"plans-grid",children:c.map(e=>(0,d.jsxs)("div",{className:"plan-card ".concat(e.current?"current":""," ").concat(e.popular?"popular":""),children:[e.popular&&(0,d.jsxs)("div",{className:"popular-badge",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Most Popular"]}),(0,d.jsxs)("div",{className:"plan-header",children:[(0,d.jsx)("h3",{className:"plan-name","data-plan":e.id,children:e.name}),(0,d.jsxs)("div",{className:"plan-price",children:[(0,d.jsx)("span",{className:"price-amount",children:e.price}),(0,d.jsxs)("span",{className:"price-period",children:["/",e.period]})]})]}),(0,d.jsx)("ul",{className:"plan-features",children:e.features.map((e,t)=>(0,d.jsxs)("li",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),e]},t))}),(0,d.jsx)("button",{className:"plan-button ".concat(e.current?"current-plan":""),onClick:()=>((e,a)=>{if("free"===e)return s(e),void n();e!==t&&(o(a),i(!0))})(e.id,e),disabled:e.current,children:e.current?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Current Plan"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"free"===e.id?"Downgrade":"Upgrade"]})})]},e.id))}),(0,d.jsxs)("div",{className:"upgrade-footer-info",children:[(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),(0,d.jsx)("span",{children:"Cancel anytime, no commitment"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),(0,d.jsx)("span",{children:"14-day money-back guarantee"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),(0,d.jsx)("span",{children:"Secure payment processing"})]})]})]}),r&&l?(0,d.jsx)(le,{plan:l,onClose:m,onPaymentSuccess:u,onPaymentError:h}):null]})}),document.body)},ce=e=>{let{recordings:t,userPlan:n,onUpgrade:s}=e;const[r,i]=(0,a.useState)("7d"),l=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60);return t>0?"".concat(t,"h ").concat(n,"m"):"".concat(n,"m ").concat(e%60,"s")},o=(()=>{const e=new Date,n="7d"===r?7:"30d"===r?30:90,a=new Date(e.getTime()-24*n*60*60*1e3),s=t.filter(e=>new Date(e.timestamp)>=a),i=s.length,l=s.reduce((e,t)=>e+t.duration,0),o=s.reduce((e,t)=>e+t.size,0),c=i>0?l/i:0,d=i*Math.floor(50*Math.random()+10),u=.7*c,h=[];if("7d"===r)for(let t=n-1;t>=0;t--){const n=new Date(e.getTime()-24*t*60*60*1e3),a=s.filter(e=>new Date(e.timestamp).toDateString()===n.toDateString());h.push({date:n.toLocaleDateString("en-US",{month:"short",day:"numeric"}),recordings:a.length,views:a.length*Math.floor(20*Math.random()+5)})}else{const t="30d"===r?4:12,a=Math.ceil(n/t);for(let n=t-1;n>=0;n--){const i=new Date(e.getTime()-n*a*24*60*60*1e3),l=new Date(i.getTime()-24*a*60*60*1e3),o=s.filter(e=>{const t=new Date(e.timestamp);return t>=l&&t<=i}),c="30d"===r?"Week ".concat(t-n):"W".concat(t-n);h.push({date:c,recordings:o.length,views:o.length*Math.floor(20*Math.random()+5)})}}return{totalRecordings:i,totalDuration:l,totalSize:o,avgDuration:c,totalViews:d,avgViewTime:u,chartData:h}})();return(0,d.jsx)(f,{feature:"analytics",userPlan:n,onUpgrade:s,children:(0,d.jsxs)("div",{className:"analytics-dashboard",children:[(0,d.jsxs)("div",{className:"analytics-header",children:[(0,d.jsx)("h3",{children:"\ud83d\udcca Analytics Dashboard"}),(0,d.jsxs)("div",{className:"timeframe-selector",children:[(0,d.jsx)("button",{className:"7d"===r?"active":"",onClick:()=>i("7d"),children:"7 Days"}),(0,d.jsx)("button",{className:"30d"===r?"active":"",onClick:()=>i("30d"),children:"30 Days"}),(0,d.jsx)("button",{className:"90d"===r?"active":"",onClick:()=>i("90d"),children:"90 Days"})]})]}),(0,d.jsxs)("div",{className:"analytics-grid",children:[(0,d.jsxs)("div",{className:"metric-card",children:[(0,d.jsx)("div",{className:"metric-icon",children:"\ud83c\udfac"}),(0,d.jsxs)("div",{className:"metric-content",children:[(0,d.jsx)("div",{className:"metric-value",children:o.totalRecordings}),(0,d.jsx)("div",{className:"metric-label",children:"Total Recordings"})]})]}),(0,d.jsxs)("div",{className:"metric-card",children:[(0,d.jsx)("div",{className:"metric-icon",children:"\u23f1\ufe0f"}),(0,d.jsxs)("div",{className:"metric-content",children:[(0,d.jsx)("div",{className:"metric-value",children:l(o.totalDuration)}),(0,d.jsx)("div",{className:"metric-label",children:"Total Duration"})]})]}),(0,d.jsxs)("div",{className:"metric-card",children:[(0,d.jsx)("div",{className:"metric-icon",children:"\ud83d\udc40"}),(0,d.jsxs)("div",{className:"metric-content",children:[(0,d.jsx)("div",{className:"metric-value",children:o.totalViews.toLocaleString()}),(0,d.jsx)("div",{className:"metric-label",children:"Total Views"})]})]}),(0,d.jsxs)("div",{className:"metric-card",children:[(0,d.jsx)("div",{className:"metric-icon",children:"\ud83d\udcbe"}),(0,d.jsxs)("div",{className:"metric-content",children:[(0,d.jsx)("div",{className:"metric-value",children:(e=>{const t=e/1048576,n=t/1024;return n>=1?"".concat(n.toFixed(1)," GB"):"".concat(t.toFixed(0)," MB")})(o.totalSize)}),(0,d.jsx)("div",{className:"metric-label",children:"Storage Used"})]})]}),(0,d.jsxs)("div",{className:"metric-card",children:[(0,d.jsx)("div",{className:"metric-icon",children:"\ud83d\udcc8"}),(0,d.jsxs)("div",{className:"metric-content",children:[(0,d.jsx)("div",{className:"metric-value",children:l(o.avgDuration)}),(0,d.jsx)("div",{className:"metric-label",children:"Avg Duration"})]})]}),(0,d.jsxs)("div",{className:"metric-card",children:[(0,d.jsx)("div",{className:"metric-icon",children:"\u23ef\ufe0f"}),(0,d.jsxs)("div",{className:"metric-content",children:[(0,d.jsx)("div",{className:"metric-value",children:l(o.avgViewTime)}),(0,d.jsx)("div",{className:"metric-label",children:"Avg View Time"})]})]})]}),(0,d.jsxs)("div",{className:"chart-container",children:[(0,d.jsx)("h4",{children:"7d"===r?"Daily Activity":"Weekly Activity"}),(0,d.jsx)("div",{className:"chart",children:o.chartData.map((e,t)=>{const n=Math.max(...o.chartData.map(e=>e.recordings),1),a=Math.max(...o.chartData.map(e=>e.views),1);return(0,d.jsxs)("div",{className:"chart-bar",children:[(0,d.jsx)("div",{className:"bar recordings",style:{height:"".concat(Math.max(e.recordings/n*150,5),"px")},title:"".concat(e.recordings," recordings")}),(0,d.jsx)("div",{className:"bar views",style:{height:"".concat(Math.max(e.views/a*150,5),"px")},title:"".concat(e.views," views")}),(0,d.jsx)("div",{className:"chart-label",children:e.date})]},t)})}),(0,d.jsxs)("div",{className:"chart-legend",children:[(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("div",{className:"legend-color recordings"}),(0,d.jsx)("span",{children:"Recordings"})]}),(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("div",{className:"legend-color views"}),(0,d.jsx)("span",{children:"Views"})]})]})]}),(0,d.jsxs)("div",{className:"insights-section",children:[(0,d.jsx)("h4",{children:"\ud83d\udccb Insights"}),(0,d.jsxs)("div",{className:"insights-list",children:[(0,d.jsxs)("div",{className:"insight-item",children:[(0,d.jsx)("span",{className:"insight-icon",children:"\ud83d\ude80"}),(0,d.jsxs)("span",{children:["Your recordings get an average of ",Math.round(o.totalViews/o.totalRecordings)," views each"]})]}),(0,d.jsxs)("div",{className:"insight-item",children:[(0,d.jsx)("span",{className:"insight-icon",children:"\u2b50"}),(0,d.jsxs)("span",{children:["Viewers watch ",Math.round(o.avgViewTime/o.avgDuration*100),"% of your recordings on average"]})]}),(0,d.jsxs)("div",{className:"insight-item",children:[(0,d.jsx)("span",{className:"insight-icon",children:"\ud83d\udcca"}),(0,d.jsxs)("span",{children:["You've been most active on ",o.chartData.reduce((e,t)=>t.recordings>e.recordings?t:e,{recordings:0,date:"N/A"}).date]})]})]})]})]})})},de=(0,a.createContext)(),ue=()=>{const e=(0,a.useContext)(de);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},he=e=>{let{children:t}=e;const[n,s]=(0,a.useState)("light"),[r,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=localStorage.getItem("nebulaTheme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",n=e||t;s(n),l(n)},[]);const l=e=>{document.documentElement.setAttribute("data-theme",e),document.documentElement.style.colorScheme=e},o={theme:n,toggleTheme:()=>{i(!0);const e="light"===n?"dark":"light";s(e),l(e),localStorage.setItem("nebulaTheme",e),setTimeout(()=>i(!1),300)},isTransitioning:r,isDark:"dark"===n,isLight:"light"===n};return(0,d.jsx)(de.Provider,{value:o,children:t})},me=()=>{const{theme:e,toggleTheme:t,isTransitioning:n}=ue();return(0,d.jsxs)("button",{className:"theme-toggle ".concat(e," ").concat(n?"transitioning":""),onClick:t,"aria-label":"Switch to ".concat("light"===e?"dark":"light"," theme"),title:"Switch to ".concat("light"===e?"dark":"light"," theme"),children:[(0,d.jsxs)("div",{className:"toggle-track",children:[(0,d.jsx)("div",{className:"toggle-thumb",children:(0,d.jsx)("div",{className:"toggle-icon",children:"light"===e?(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,d.jsx)("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})}),(0,d.jsxs)("div",{className:"toggle-particles",children:[(0,d.jsx)("div",{className:"particle particle-1"}),(0,d.jsx)("div",{className:"particle particle-2"}),(0,d.jsx)("div",{className:"particle particle-3"})]})]}),(0,d.jsx)("div",{className:"toggle-ripple"})]})},pe=e=>{let{user:t,onClose:n,onSave:s}=e;const[r,i]=(0,a.useState)({name:t.name||"",email:t.email||"",notifications:!0,autoSave:!0,quality:"high",theme:"dark"}),[l,o]=(0,a.useState)("profile"),u=(e,t)=>{i(n=>c(c({},n),{},{[e]:t}))};return(0,z.createPortal)((0,d.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,d.jsxs)("div",{className:"modal-content settings-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h2",{children:"Account Settings"}),(0,d.jsx)("button",{className:"modal-close",onClick:n,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("div",{className:"settings-tabs",children:[(0,d.jsxs)("button",{className:"settings-tab ".concat("profile"===l?"active":""),onClick:()=>o("profile"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Profile"]}),(0,d.jsxs)("button",{className:"settings-tab ".concat("recording"===l?"active":""),onClick:()=>o("recording"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"})}),"Recording"]}),(0,d.jsxs)("button",{className:"settings-tab ".concat("preferences"===l?"active":""),onClick:()=>o("preferences"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),"Preferences"]})]}),(0,d.jsxs)("div",{className:"modal-body settings-body",children:["profile"===l&&(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"name",children:"Full Name"}),(0,d.jsx)("input",{type:"text",id:"name",value:r.name,onChange:e=>u("name",e.target.value),placeholder:"Your name"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,d.jsx)("input",{type:"email",id:"email",value:r.email,onChange:e=>u("email",e.target.value),placeholder:"your.email@example.com"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Current Plan"}),(0,d.jsxs)("div",{className:"plan-badge",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),t.plan.charAt(0).toUpperCase()+t.plan.slice(1)," Plan"]})]}),(0,d.jsxs)("div",{className:"storage-info",children:[(0,d.jsxs)("div",{className:"storage-header",children:[(0,d.jsx)("span",{children:"Storage Used"}),(0,d.jsxs)("span",{children:[(t.storageUsed/(1024*t.maxStorage*1024)*100).toFixed(1),"%"]})]}),(0,d.jsx)("div",{className:"storage-bar-full",children:(0,d.jsx)("div",{className:"storage-fill-full",style:{width:"".concat(t.storageUsed/(1024*t.maxStorage*1024)*100,"%")}})})]})]}),"recording"===l&&(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"quality",children:"Default Quality"}),(0,d.jsxs)("select",{id:"quality",value:r.quality,onChange:e=>u("quality",e.target.value),children:[(0,d.jsx)("option",{value:"low",children:"Low (720p)"}),(0,d.jsx)("option",{value:"medium",children:"Medium (1080p)"}),(0,d.jsx)("option",{value:"high",children:"High (1440p)"})]})]}),(0,d.jsxs)("div",{className:"form-group toggle-group",children:[(0,d.jsxs)("div",{className:"toggle-label",children:[(0,d.jsx)("label",{children:"Auto-save Recordings"}),(0,d.jsx)("span",{className:"toggle-description",children:"Automatically save recordings when stopped"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:r.autoSave,onChange:e=>u("autoSave",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]}),(0,d.jsxs)("div",{className:"form-group toggle-group",children:[(0,d.jsxs)("div",{className:"toggle-label",children:[(0,d.jsx)("label",{children:"Enable Notifications"}),(0,d.jsx)("span",{className:"toggle-description",children:"Get notified when recording starts/stops"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:r.notifications,onChange:e=>u("notifications",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]})]}),"preferences"===l&&(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"theme",children:"Theme"}),(0,d.jsxs)("select",{id:"theme",value:r.theme,onChange:e=>u("theme",e.target.value),children:[(0,d.jsx)("option",{value:"light",children:"Light"}),(0,d.jsx)("option",{value:"dark",children:"Dark"}),(0,d.jsx)("option",{value:"auto",children:"Auto (System)"})]})]}),(0,d.jsxs)("div",{className:"info-box",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"More preferences coming soon!"}),(0,d.jsx)("p",{children:"We're working on adding more customization options."})]})]})]})]}),(0,d.jsxs)("div",{className:"modal-footer",children:[(0,d.jsx)("button",{className:"btn-secondary",onClick:n,children:"Cancel"}),(0,d.jsxs)("button",{className:"btn-primary",onClick:()=>{s(r),n()},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Save Changes"]})]})]})}),document.body)},fe=e=>{let{onClose:t}=e;const[n,s]=(0,a.useState)("faq"),[r,i]=(0,a.useState)(""),[l,o]=(0,a.useState)(null),[u,h]=(0,a.useState)({subject:"",message:"",priority:"normal"}),m={quickstart:{title:"Quick Start Guide",icon:"\ud83d\ude80",steps:[{title:"Log In",desc:"Sign in with your credentials or use the demo account (demo@nebula.com / demo123)"},{title:"Start Recording",desc:'Click the "Start Recording" button in the header'},{title:"Select Source",desc:"Choose to share your entire screen, a specific window, or a browser tab"},{title:"Configure Options",desc:"Toggle webcam, microphone, and system audio as needed"},{title:"Begin Recording",desc:'Click "Share" to start. Use the floating controls to pause or stop'},{title:"Save & View",desc:'Your recording is automatically saved. Access it from "My Recordings"'}]},shortcuts:{title:"Keyboard Shortcuts",icon:"\u2328\ufe0f",shortcuts:[{keys:"Ctrl/Cmd + R",action:"Start/Stop Recording"},{keys:"Ctrl/Cmd + P",action:"Pause/Resume Recording"},{keys:"Ctrl/Cmd + S",action:"Take Screenshot"},{keys:"Ctrl/Cmd + W",action:"Toggle Webcam"},{keys:"Ctrl/Cmd + M",action:"Toggle Microphone"},{keys:"Ctrl/Cmd + K",action:"Open Settings"},{keys:"Ctrl/Cmd + H",action:"Open Help"},{keys:"Esc",action:"Close Modal/Cancel"}]},advanced:{title:"Advanced Features",icon:"\u26a1",features:[{name:"Custom Video Quality",desc:"Adjust resolution (720p, 1080p, 4K) and frame rate (24, 30, 60 fps) in Settings",tip:"Higher quality = larger file sizes. Use 720p for quick sharing, 4K for professional content"},{name:"Webcam Overlay",desc:"Drag to reposition, resize with corner handles, customize border and shadow",tip:"Position webcam in bottom-right for minimal content obstruction"},{name:"Screenshot Capture",desc:"Take timestamped screenshots during recording without interruption",tip:"Perfect for creating presentation slides or documentation from your recording"},{name:"Audio Mixing",desc:"Record system audio, microphone, or both simultaneously",tip:"Test audio levels before important recordings using the preview"},{name:"Storage Management",desc:"Monitor storage usage, auto-compress old recordings, bulk delete",tip:"Download important recordings before deleting to free up space"}]},practices:{title:"Best Practices",icon:"\ud83d\udca1",tips:[{category:"Preparation",items:["Close unnecessary applications to improve performance","Disable notifications to avoid interruptions","Test your audio setup before recording","Plan your content with a script or outline"]},{category:"Recording",items:["Use a quiet environment for clear audio","Speak clearly and at a moderate pace","Pause briefly between topics for easier editing","Use keyboard shortcuts to stay efficient"]},{category:"Quality",items:["Record in 1080p for most professional use cases","Use 60fps for gaming or fast-motion content","Ensure good lighting if using webcam","Keep recordings under 30 minutes for easier sharing"]},{category:"After Recording",items:["Review recordings before sharing","Download important recordings as backup","Organize recordings with descriptive names","Delete old recordings to free up storage"]}]}},p=[{category:"Getting Started",questions:[{q:"How do I start recording?",a:'Click the "Start Recording" button in the header, select your screen or window, and click "Share". The recording will begin immediately.'},{q:"What browsers are supported?",a:"Nebula Screen Capture works best on Chrome, Edge, Firefox, and Safari (desktop). Mobile browsers have limited screen recording support due to browser restrictions."},{q:"Can I record my webcam?",a:"Yes! Toggle the webcam option before starting your recording. You can position and resize the webcam overlay during recording."}]},{category:"Recording Features",questions:[{q:"How do I take screenshots during recording?",a:"Click the camera icon while recording to capture a screenshot. Screenshots are saved alongside your recording."},{q:"What video quality can I record in?",a:"Quality depends on your plan: Free (720p), Pro (1080p), Premium (4K). You can change quality in settings."},{q:"Is there a recording time limit?",a:"Free plan: 10 minutes per recording. Pro: 1 hour. Premium: Unlimited recording time."}]},{category:"Storage & Files",questions:[{q:"Where are my recordings stored?",a:"Recordings are stored locally in your browser using IndexedDB. No files are uploaded to external servers, ensuring your privacy."},{q:"How do I download my recordings?",a:'Go to "My Recordings", find your video, and click the download icon. The file will be saved to your Downloads folder.'},{q:"Can I delete old recordings?",a:'Yes! Click the trash icon on any recording in the "My Recordings" section to free up storage space.'}]},{category:"Troubleshooting",questions:[{q:"Why isn't screen recording working on my iPhone?",a:"Safari on iOS doesn't support the Screen Capture API. Use the native iOS screen recorder or access Nebula from a desktop/Android device."},{q:"My recording has no audio. What happened?",a:'Make sure you enabled "Share audio" when selecting your screen. Also check that your browser has microphone permissions.'},{q:"The app says I'm out of storage. What can I do?",a:"Delete old recordings to free up space, or upgrade your plan for more storage. You can also download and delete recordings you want to keep offline."}]}].map(e=>c(c({},e),{},{questions:e.questions.filter(e=>e.q.toLowerCase().includes(r.toLowerCase())||e.a.toLowerCase().includes(r.toLowerCase()))})).filter(e=>e.questions.length>0);return(0,z.createPortal)((0,d.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,d.jsxs)("div",{className:"modal-content help-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{children:"Help & Support"}),(0,d.jsx)("p",{className:"modal-subtitle",children:"We're here to help you get the most out of Nebula"})]}),(0,d.jsx)("button",{className:"modal-close",onClick:t,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("div",{className:"help-tabs",children:[(0,d.jsxs)("button",{className:"help-tab ".concat("faq"===n?"active":""),onClick:()=>s("faq"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})}),"FAQ"]}),(0,d.jsxs)("button",{className:"help-tab ".concat("tutorials"===n?"active":""),onClick:()=>s("tutorials"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"})}),"Tutorials"]}),(0,d.jsxs)("button",{className:"help-tab ".concat("contact"===n?"active":""),onClick:()=>s("contact"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),"Contact"]})]}),(0,d.jsxs)("div",{className:"modal-body help-body",children:["faq"===n&&(0,d.jsxs)("div",{className:"faq-section",children:[(0,d.jsxs)("div",{className:"search-box",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),(0,d.jsx)("input",{type:"text",placeholder:"Search frequently asked questions...",value:r,onChange:e=>i(e.target.value)})]}),(0,d.jsx)("div",{className:"faq-list",children:p.length>0?p.map((e,t)=>(0,d.jsxs)("div",{className:"faq-category",children:[(0,d.jsx)("h3",{className:"category-title",children:e.category}),e.questions.map((e,t)=>(0,d.jsxs)("details",{className:"faq-item",children:[(0,d.jsxs)("summary",{className:"faq-question",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})}),e.q]}),(0,d.jsx)("div",{className:"faq-answer",children:e.a})]},t))]},t)):(0,d.jsxs)("div",{className:"no-results",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),(0,d.jsxs)("p",{children:['No results found for "',r,'"']}),(0,d.jsx)("small",{children:"Try different keywords or browse all categories"})]})})]}),"tutorials"===n&&(0,d.jsx)("div",{className:"tutorials-section",children:l?(0,d.jsxs)("div",{className:"tutorial-detail",children:[(0,d.jsxs)("button",{className:"back-button",onClick:()=>o(null),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Back to Tutorials"]}),(0,d.jsxs)("div",{className:"tutorial-header",children:[(0,d.jsx)("div",{className:"tutorial-icon-large",children:m[l].icon}),(0,d.jsx)("h2",{children:m[l].title})]}),"quickstart"===l&&(0,d.jsx)("div",{className:"tutorial-steps",children:m.quickstart.steps.map((e,t)=>(0,d.jsxs)("div",{className:"step-item",children:[(0,d.jsx)("div",{className:"step-number",children:t+1}),(0,d.jsxs)("div",{className:"step-content",children:[(0,d.jsx)("h4",{children:e.title}),(0,d.jsx)("p",{children:e.desc})]})]},t))}),"shortcuts"===l&&(0,d.jsx)("div",{className:"shortcuts-list",children:m.shortcuts.shortcuts.map((e,t)=>(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{className:"shortcut-key",children:e.keys}),(0,d.jsx)("span",{className:"shortcut-action",children:e.action})]},t))}),"advanced"===l&&(0,d.jsx)("div",{className:"features-list",children:m.advanced.features.map((e,t)=>(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("h4",{children:e.name}),(0,d.jsx)("p",{children:e.desc}),(0,d.jsxs)("div",{className:"feature-tip",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"})}),(0,d.jsx)("strong",{children:"Tip:"})," ",e.tip]})]},t))}),"practices"===l&&(0,d.jsx)("div",{className:"practices-list",children:m.practices.tips.map((e,t)=>(0,d.jsxs)("div",{className:"practice-category",children:[(0,d.jsx)("h3",{children:e.category}),(0,d.jsx)("ul",{children:e.items.map((e,t)=>(0,d.jsxs)("li",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),e]},t))})]},t))})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"tutorials-grid",children:[{id:"quickstart",title:"Quick Start Guide",description:"Learn the basics in 2 minutes",icon:"\ud83d\ude80"},{id:"advanced",title:"Advanced Features",description:"Master all recording options",icon:"\u26a1"},{id:"shortcuts",title:"Keyboard Shortcuts",description:"Speed up your workflow",icon:"\u2328\ufe0f"},{id:"practices",title:"Best Practices",description:"Tips for professional recordings",icon:"\ud83d\udca1"}].map(e=>(0,d.jsxs)("button",{className:"tutorial-card",onClick:()=>o(e.id),children:[(0,d.jsx)("div",{className:"tutorial-icon",children:e.icon}),(0,d.jsx)("h3",{className:"tutorial-title",children:e.title}),(0,d.jsx)("p",{className:"tutorial-description",children:e.description}),(0,d.jsxs)("div",{className:"tutorial-link",children:["View tutorial",(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})})]})]},e.id))}),(0,d.jsxs)("div",{className:"resources-box",children:[(0,d.jsx)("h3",{children:"Additional Resources"}),(0,d.jsxs)("div",{className:"resource-links",children:[(0,d.jsxs)("a",{href:"https://github.com/ColinNebula/nebula-screen-capture/blob/main/README.md",className:"resource-link",target:"_blank",rel:"noopener noreferrer",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})}),"Full Documentation"]}),(0,d.jsxs)("a",{href:"https://github.com/ColinNebula/nebula-screen-capture",className:"resource-link",target:"_blank",rel:"noopener noreferrer",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),"GitHub Repository"]}),(0,d.jsxs)("a",{href:"https://github.com/ColinNebula/nebula-screen-capture/discussions",className:"resource-link",target:"_blank",rel:"noopener noreferrer",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"})}),"Community Forum"]})]})]})]})}),"contact"===n&&(0,d.jsxs)("div",{className:"contact-section",children:[(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Contact form submitted:",u),alert("Thank you! We'll get back to you within 24 hours."),h({subject:"",message:"",priority:"normal"})},className:"contact-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"subject",children:"Subject"}),(0,d.jsx)("input",{type:"text",id:"subject",value:u.subject,onChange:e=>h(c(c({},u),{},{subject:e.target.value})),placeholder:"What can we help you with?",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"priority",children:"Priority"}),(0,d.jsxs)("select",{id:"priority",value:u.priority,onChange:e=>h(c(c({},u),{},{priority:e.target.value})),children:[(0,d.jsx)("option",{value:"low",children:"Low - General question"}),(0,d.jsx)("option",{value:"normal",children:"Normal - Need help"}),(0,d.jsx)("option",{value:"high",children:"High - Issue affecting work"}),(0,d.jsx)("option",{value:"urgent",children:"Urgent - Critical problem"})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"message",children:"Message"}),(0,d.jsx)("textarea",{id:"message",value:u.message,onChange:e=>h(c(c({},u),{},{message:e.target.value})),placeholder:"Please describe your issue or question in detail...",rows:"6",required:!0})]}),(0,d.jsxs)("button",{type:"submit",className:"btn-primary",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),"Send Message"]})]}),(0,d.jsxs)("div",{className:"contact-info",children:[(0,d.jsx)("h3",{children:"Other ways to reach us"}),(0,d.jsxs)("div",{className:"contact-methods",children:[(0,d.jsxs)("div",{className:"contact-method",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Email"}),(0,d.jsx)("span",{children:"support@nebulamedia3d.com"})]})]}),(0,d.jsxs)("div",{className:"contact-method",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Live Chat"}),(0,d.jsx)("span",{children:"Available Mon-Fri, 9am-5pm EST"})]})]})]}),(0,d.jsxs)("div",{className:"response-time",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})}),"Average response time: ",(0,d.jsx)("strong",{children:"4 hours"})]})]})]})]})]})}),document.body)},ge=e=>{let{user:t,onClose:n}=e;const[s,r]=(0,a.useState)("overview"),[i,l]=(0,a.useState)(""),[o,u]=(0,a.useState)([]),[h,m]=(0,a.useState)({maintenanceMode:!1,allowRegistrations:!0,requireEmailVerification:!0,enableBackups:!0,backupFrequency:"daily",maxUploadSize:524288e3,sessionTimeout:36e5}),[p,f]=(0,a.useState)({emailNotifications:!0,securityAlerts:!0,performanceReports:!0,userActivityLogs:!0,autoBackup:!0,twoFactorAuth:!1}),[g,v]=(0,a.useState)([{id:1,name:"John Doe",email:"john.doe@example.com",plan:"pro",status:"active",recordings:45,storage:"4.2 GB",joinDate:"2024-08-15"},{id:2,name:"Jane Smith",email:"jane.smith@example.com",plan:"premium",status:"active",recordings:128,storage:"18.5 GB",joinDate:"2024-06-22"},{id:3,name:"Bob Wilson",email:"bob.wilson@example.com",plan:"free",status:"active",recordings:8,storage:"245 MB",joinDate:"2024-09-10"},{id:4,name:"Alice Brown",email:"alice.brown@example.com",plan:"pro",status:"suspended",recordings:67,storage:"6.8 GB",joinDate:"2024-07-03"},{id:5,name:"Charlie Davis",email:"charlie.davis@example.com",plan:"free",status:"inactive",recordings:3,storage:"89 MB",joinDate:"2024-09-28"}]);if(!t.isAdmin)return null;const x={totalUsers:1247,activeUsers:892,totalRecordings:15843,storageUsed:"2.4 TB",bandwidthUsed:"8.9 TB",systemUptime:"99.98%"},b=(e,t)=>{console.log("".concat(t," user:"),e),v(g.map(n=>{if(n.id===e){if("suspend"===t)return c(c({},n),{},{status:"suspended"});if("activate"===t)return c(c({},n),{},{status:"active"});if("delete"===t)return null}return n}).filter(Boolean))},j=e=>{console.log("Bulk ".concat(e," on users:"),o),"delete"===e&&(v(g.filter(e=>!o.includes(e.id))),u([]))},y=(e,t)=>{m(n=>c(c({},n),{},{[e]:t})),console.log("System setting changed: ".concat(e," = ").concat(t))},w=(e,t)=>{f(n=>c(c({},n),{},{[e]:t})),console.log("Admin setting changed: ".concat(e," = ").concat(t))},S=e=>{switch(console.log("System action: ".concat(e)),e){case"restart":alert("System restart initiated. This may take a few minutes.");break;case"backup":alert("Manual backup started. You will be notified when complete.");break;case"clearCache":alert("Cache cleared successfully.");break;case"exportData":alert("Data export initiated. Download link will be sent to your email.");break;default:console.log("Unknown action:",e)}},N=g.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase())),k=e=>{switch(e){case"active":return"#34d399";case"suspended":return"#fbbf24";case"inactive":return"#94a3b8";default:return"#64748b"}},C=e=>{switch(e){case"free":return"#94a3b8";case"pro":return"#34d399";case"premium":return"#fbbf24";default:return"#64748b"}};return(0,z.createPortal)((0,d.jsx)("div",{className:"modal-overlay admin-panel-overlay",onClick:n,children:(0,d.jsxs)("div",{className:"modal-content admin-panel",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"admin-panel-header",children:[(0,d.jsxs)("div",{className:"header-left",children:[(0,d.jsx)("div",{className:"admin-badge",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{children:"Admin Control Panel"}),(0,d.jsx)("p",{children:"System management and monitoring dashboard"})]})]}),(0,d.jsx)("button",{className:"modal-close",onClick:n,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("div",{className:"admin-tabs",children:[(0,d.jsxs)("button",{className:"admin-tab ".concat("overview"===s?"active":""),onClick:()=>r("overview"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"})}),"Overview"]}),(0,d.jsxs)("button",{className:"admin-tab ".concat("users"===s?"active":""),onClick:()=>r("users"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})}),"Users"]}),(0,d.jsxs)("button",{className:"admin-tab ".concat("system"===s?"active":""),onClick:()=>r("system"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),"System"]}),(0,d.jsxs)("button",{className:"admin-tab ".concat("settings"===s?"active":""),onClick:()=>r("settings"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Settings"]})]}),(0,d.jsxs)("div",{className:"admin-content",children:["overview"===s&&(0,d.jsxs)("div",{className:"overview-tab",children:[(0,d.jsxs)("div",{className:"stats-grid",children:[(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("div",{className:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})})}),(0,d.jsxs)("div",{className:"stat-info",children:[(0,d.jsx)("div",{className:"stat-value",children:x.totalUsers.toLocaleString()}),(0,d.jsx)("div",{className:"stat-label",children:"Total Users"}),(0,d.jsx)("div",{className:"stat-change positive",children:"+12.5% from last month"})]})]}),(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("div",{className:"stat-icon",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),(0,d.jsxs)("div",{className:"stat-info",children:[(0,d.jsx)("div",{className:"stat-value",children:x.activeUsers.toLocaleString()}),(0,d.jsx)("div",{className:"stat-label",children:"Active Users"}),(0,d.jsx)("div",{className:"stat-change positive",children:"+8.3% from last week"})]})]}),(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("div",{className:"stat-icon",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})})}),(0,d.jsxs)("div",{className:"stat-info",children:[(0,d.jsx)("div",{className:"stat-value",children:x.totalRecordings.toLocaleString()}),(0,d.jsx)("div",{className:"stat-label",children:"Total Recordings"}),(0,d.jsx)("div",{className:"stat-change positive",children:"+156 today"})]})]}),(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("div",{className:"stat-icon",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.65 0 3 1.35 3 3s-1.35 3-3 3z"})})}),(0,d.jsxs)("div",{className:"stat-info",children:[(0,d.jsx)("div",{className:"stat-value",children:x.storageUsed}),(0,d.jsx)("div",{className:"stat-label",children:"Storage Used"}),(0,d.jsx)("div",{className:"stat-change neutral",children:"75% of capacity"})]})]})]}),(0,d.jsxs)("div",{className:"panel-section",children:[(0,d.jsx)("h3",{children:"Recent Activity"}),(0,d.jsx)("div",{className:"activity-list",children:[{id:1,user:"john.doe@example.com",action:"Created recording",time:"2 mins ago",status:"success"},{id:2,user:"jane.smith@example.com",action:"Upgraded to Pro",time:"15 mins ago",status:"success"},{id:3,user:"bob.wilson@example.com",action:"Failed login attempt",time:"1 hour ago",status:"warning"},{id:4,user:"alice.brown@example.com",action:"Downloaded recording",time:"2 hours ago",status:"success"},{id:5,user:"charlie.davis@example.com",action:"Deleted account",time:"3 hours ago",status:"error"}].map(e=>(0,d.jsxs)("div",{className:"activity-item ".concat(e.status),children:[(0,d.jsxs)("div",{className:"activity-status",children:["success"===e.status&&(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"warning"===e.status&&(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),"error"===e.status&&(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})]}),(0,d.jsxs)("div",{className:"activity-details",children:[(0,d.jsx)("div",{className:"activity-user",children:e.user}),(0,d.jsx)("div",{className:"activity-action",children:e.action})]}),(0,d.jsx)("div",{className:"activity-time",children:e.time})]},e.id))})]}),(0,d.jsxs)("div",{className:"panel-section",children:[(0,d.jsx)("h3",{children:"System Health"}),(0,d.jsx)("div",{className:"health-grid",children:[{name:"API Server",status:"healthy",uptime:"99.99%",responseTime:"45ms"},{name:"Database",status:"healthy",uptime:"99.97%",responseTime:"12ms"},{name:"Storage Service",status:"healthy",uptime:"99.95%",responseTime:"89ms"},{name:"CDN",status:"healthy",uptime:"100%",responseTime:"23ms"}].map((e,t)=>(0,d.jsxs)("div",{className:"health-card",children:[(0,d.jsxs)("div",{className:"health-header",children:[(0,d.jsx)("div",{className:"health-name",children:e.name}),(0,d.jsxs)("div",{className:"health-badge ".concat(e.status),children:[(0,d.jsx)("span",{className:"status-dot"}),e.status]})]}),(0,d.jsxs)("div",{className:"health-metrics",children:[(0,d.jsxs)("div",{className:"metric",children:[(0,d.jsx)("span",{className:"metric-label",children:"Uptime"}),(0,d.jsx)("span",{className:"metric-value",children:e.uptime})]}),(0,d.jsxs)("div",{className:"metric",children:[(0,d.jsx)("span",{className:"metric-label",children:"Response Time"}),(0,d.jsx)("span",{className:"metric-value",children:e.responseTime})]})]})]},t))})]})]}),"users"===s&&(0,d.jsxs)("div",{className:"users-tab",children:[(0,d.jsxs)("div",{className:"section-header",children:[(0,d.jsx)("h3",{children:"User Management"}),(0,d.jsxs)("div",{className:"header-actions",children:[(0,d.jsxs)("div",{className:"search-box",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),(0,d.jsx)("input",{type:"text",placeholder:"Search users...",value:i,onChange:e=>l(e.target.value)})]}),(0,d.jsxs)("button",{className:"btn-primary",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add User"]})]})]}),o.length>0&&(0,d.jsxs)("div",{className:"bulk-actions",children:[(0,d.jsxs)("span",{className:"selected-count",children:[o.length," user(s) selected"]}),(0,d.jsxs)("div",{className:"bulk-buttons",children:[(0,d.jsxs)("button",{className:"btn-secondary",onClick:()=>j("export"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"})}),"Export"]}),(0,d.jsxs)("button",{className:"btn-danger",onClick:()=>j("delete"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),"Delete"]})]})]}),(0,d.jsx)("div",{className:"users-table-container",children:(0,d.jsxs)("table",{className:"users-table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:(0,d.jsx)("input",{type:"checkbox",checked:o.length===N.length,onChange:e=>u(e.target.checked?N.map(e=>e.id):[])})}),(0,d.jsx)("th",{children:"User"}),(0,d.jsx)("th",{children:"Plan"}),(0,d.jsx)("th",{children:"Status"}),(0,d.jsx)("th",{children:"Recordings"}),(0,d.jsx)("th",{children:"Storage"}),(0,d.jsx)("th",{children:"Join Date"}),(0,d.jsx)("th",{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:N.map(e=>(0,d.jsxs)("tr",{className:o.includes(e.id)?"selected":"",children:[(0,d.jsx)("td",{children:(0,d.jsx)("input",{type:"checkbox",checked:o.includes(e.id),onChange:()=>{return t=e.id,void u(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}})}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{className:"user-cell",children:[(0,d.jsx)("div",{className:"user-avatar",style:{background:"linear-gradient(135deg, ".concat(C(e.plan)," 0%, #667eea 100%)")},children:e.name.split(" ").map(e=>e[0]).join("")}),(0,d.jsxs)("div",{className:"user-info",children:[(0,d.jsx)("div",{className:"user-name",children:e.name}),(0,d.jsx)("div",{className:"user-email",children:e.email})]})]})}),(0,d.jsx)("td",{children:(0,d.jsx)("span",{className:"plan-badge",style:{background:C(e.plan)},children:e.plan})}),(0,d.jsx)("td",{children:(0,d.jsxs)("span",{className:"status-badge",style:{background:k(e.status)},children:[(0,d.jsx)("span",{className:"status-dot"}),e.status]})}),(0,d.jsx)("td",{children:e.recordings}),(0,d.jsx)("td",{children:e.storage}),(0,d.jsx)("td",{children:new Date(e.joinDate).toLocaleDateString()}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{className:"action-buttons",children:[(0,d.jsx)("button",{className:"action-btn",title:"Edit user",onClick:()=>console.log("Edit user:",e.id),children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),"active"===e.status?(0,d.jsx)("button",{className:"action-btn warning",title:"Suspend user",onClick:()=>b(e.id,"suspend"),children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"})})}):(0,d.jsx)("button",{className:"action-btn success",title:"Activate user",onClick:()=>b(e.id,"activate"),children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),(0,d.jsx)("button",{className:"action-btn danger",title:"Delete user",onClick:()=>b(e.id,"delete"),children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})})]},e.id))})]})})]}),"system"===s&&(0,d.jsxs)("div",{className:"system-tab",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsx)("h3",{children:"System Configuration"})}),(0,d.jsxs)("div",{className:"system-grid",children:[(0,d.jsxs)("div",{className:"system-card",children:[(0,d.jsxs)("div",{className:"card-header",children:[(0,d.jsx)("h4",{children:"System Status"}),(0,d.jsxs)("button",{className:"btn-secondary",onClick:()=>S("restart"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"})}),"Restart System"]})]}),(0,d.jsxs)("div",{className:"system-metrics",children:[(0,d.jsxs)("div",{className:"metric-row",children:[(0,d.jsx)("span",{className:"metric-label",children:"Server Uptime"}),(0,d.jsx)("span",{className:"metric-value",children:"45 days, 12 hours"})]}),(0,d.jsxs)("div",{className:"metric-row",children:[(0,d.jsx)("span",{className:"metric-label",children:"CPU Usage"}),(0,d.jsxs)("div",{className:"progress-bar",children:[(0,d.jsx)("div",{className:"progress-fill",style:{width:"45%",background:"#34d399"}}),(0,d.jsx)("span",{className:"progress-text",children:"45%"})]})]}),(0,d.jsxs)("div",{className:"metric-row",children:[(0,d.jsx)("span",{className:"metric-label",children:"Memory Usage"}),(0,d.jsxs)("div",{className:"progress-bar",children:[(0,d.jsx)("div",{className:"progress-fill",style:{width:"68%",background:"#fbbf24"}}),(0,d.jsx)("span",{className:"progress-text",children:"68%"})]})]}),(0,d.jsxs)("div",{className:"metric-row",children:[(0,d.jsx)("span",{className:"metric-label",children:"Disk Usage"}),(0,d.jsxs)("div",{className:"progress-bar",children:[(0,d.jsx)("div",{className:"progress-fill",style:{width:"82%",background:"#f87171"}}),(0,d.jsx)("span",{className:"progress-text",children:"82%"})]})]})]})]}),(0,d.jsxs)("div",{className:"system-card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Maintenance"})}),(0,d.jsxs)("div",{className:"settings-list",children:[(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Maintenance Mode"}),(0,d.jsx)("span",{className:"setting-description",children:"Temporarily disable user access"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:h.maintenanceMode,onChange:e=>y("maintenanceMode",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Allow New Registrations"}),(0,d.jsx)("span",{className:"setting-description",children:"Enable user sign-ups"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:h.allowRegistrations,onChange:e=>y("allowRegistrations",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Email Verification Required"}),(0,d.jsx)("span",{className:"setting-description",children:"Require email verification for new users"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:h.requireEmailVerification,onChange:e=>y("requireEmailVerification",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]})]})]}),(0,d.jsxs)("div",{className:"system-card",children:[(0,d.jsxs)("div",{className:"card-header",children:[(0,d.jsx)("h4",{children:"Backup & Recovery"}),(0,d.jsxs)("button",{className:"btn-secondary",onClick:()=>S("backup"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})}),"Backup Now"]})]}),(0,d.jsxs)("div",{className:"settings-list",children:[(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Automatic Backups"}),(0,d.jsx)("span",{className:"setting-description",children:"Enable scheduled backups"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:h.enableBackups,onChange:e=>y("enableBackups",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Backup Frequency"}),(0,d.jsx)("span",{className:"setting-description",children:"How often to create backups"})]}),(0,d.jsxs)("select",{value:h.backupFrequency,onChange:e=>y("backupFrequency",e.target.value),className:"setting-select",children:[(0,d.jsx)("option",{value:"hourly",children:"Hourly"}),(0,d.jsx)("option",{value:"daily",children:"Daily"}),(0,d.jsx)("option",{value:"weekly",children:"Weekly"}),(0,d.jsx)("option",{value:"monthly",children:"Monthly"})]})]}),(0,d.jsxs)("div",{className:"metric-row",children:[(0,d.jsx)("span",{className:"metric-label",children:"Last Backup"}),(0,d.jsx)("span",{className:"metric-value",children:"2 hours ago"})]}),(0,d.jsxs)("div",{className:"metric-row",children:[(0,d.jsx)("span",{className:"metric-label",children:"Backup Size"}),(0,d.jsx)("span",{className:"metric-value",children:"2.4 GB"})]})]})]}),(0,d.jsxs)("div",{className:"system-card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"System Limits"})}),(0,d.jsxs)("div",{className:"settings-list",children:[(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Max Upload Size"}),(0,d.jsx)("span",{className:"setting-description",children:"Maximum file upload size in MB"})]}),(0,d.jsx)("input",{type:"number",value:h.maxUploadSize/1048576,onChange:e=>y("maxUploadSize",1048576*e.target.value),className:"setting-input",min:"1",max:"5000"})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Session Timeout"}),(0,d.jsx)("span",{className:"setting-description",children:"User session timeout in minutes"})]}),(0,d.jsx)("input",{type:"number",value:h.sessionTimeout/6e4,onChange:e=>y("sessionTimeout",6e4*e.target.value),className:"setting-input",min:"5",max:"1440"})]})]})]}),(0,d.jsxs)("div",{className:"system-card full-width",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Quick Actions"})}),(0,d.jsxs)("div",{className:"quick-actions-grid",children:[(0,d.jsxs)("button",{className:"quick-action-btn",onClick:()=>S("clearCache"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})}),(0,d.jsx)("span",{children:"Clear Cache"})]}),(0,d.jsxs)("button",{className:"quick-action-btn",onClick:()=>S("exportData"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"})}),(0,d.jsx)("span",{children:"Export Data"})]}),(0,d.jsxs)("button",{className:"quick-action-btn",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),(0,d.jsx)("span",{children:"Email Logs"})]}),(0,d.jsxs)("button",{className:"quick-action-btn",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})}),(0,d.jsx)("span",{children:"Schedule Tasks"})]})]})]})]})]}),"settings"===s&&(0,d.jsxs)("div",{className:"settings-tab",children:[(0,d.jsxs)("div",{className:"section-header",children:[(0,d.jsx)("h3",{children:"Admin Settings"}),(0,d.jsxs)("button",{className:"btn-primary",onClick:()=>alert("Settings saved successfully!"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Save Settings"]})]}),(0,d.jsxs)("div",{className:"settings-grid",children:[(0,d.jsxs)("div",{className:"settings-card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Notification Preferences"})}),(0,d.jsxs)("div",{className:"settings-list",children:[(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Email Notifications"}),(0,d.jsx)("span",{className:"setting-description",children:"Receive email updates about system events"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:p.emailNotifications,onChange:e=>w("emailNotifications",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Security Alerts"}),(0,d.jsx)("span",{className:"setting-description",children:"Get notified about security issues"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:p.securityAlerts,onChange:e=>w("securityAlerts",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Performance Reports"}),(0,d.jsx)("span",{className:"setting-description",children:"Weekly performance summaries"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:p.performanceReports,onChange:e=>w("performanceReports",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"User Activity Logs"}),(0,d.jsx)("span",{className:"setting-description",children:"Daily digest of user activities"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:p.userActivityLogs,onChange:e=>w("userActivityLogs",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]})]})]}),(0,d.jsxs)("div",{className:"settings-card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Security Settings"})}),(0,d.jsxs)("div",{className:"settings-list",children:[(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Two-Factor Authentication"}),(0,d.jsx)("span",{className:"setting-description",children:"Add extra security to your admin account"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:p.twoFactorAuth,onChange:e=>w("twoFactorAuth",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)("div",{className:"setting-info",children:[(0,d.jsx)("span",{className:"setting-label",children:"Auto Backup"}),(0,d.jsx)("span",{className:"setting-description",children:"Automatically backup before critical changes"})]}),(0,d.jsxs)("label",{className:"toggle-switch",children:[(0,d.jsx)("input",{type:"checkbox",checked:p.autoBackup,onChange:e=>w("autoBackup",e.target.checked)}),(0,d.jsx)("span",{className:"toggle-slider"})]})]})]})]}),(0,d.jsxs)("div",{className:"settings-card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Admin Profile"})}),(0,d.jsxs)("div",{className:"profile-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Admin Name"}),(0,d.jsx)("input",{type:"text",defaultValue:"Administrator",className:"form-input"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Email Address"}),(0,d.jsx)("input",{type:"email",defaultValue:"admin@nebula-capture.com",className:"form-input"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Phone Number"}),(0,d.jsx)("input",{type:"tel",placeholder:"+1 (555) 123-4567",className:"form-input"})]})]})]}),(0,d.jsxs)("div",{className:"settings-card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Change Password"})}),(0,d.jsxs)("div",{className:"profile-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Current Password"}),(0,d.jsx)("input",{type:"password",className:"form-input"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"New Password"}),(0,d.jsx)("input",{type:"password",className:"form-input"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Confirm New Password"}),(0,d.jsx)("input",{type:"password",className:"form-input"})]}),(0,d.jsx)("button",{className:"btn-secondary full-width",children:"Update Password"})]})]}),(0,d.jsxs)("div",{className:"settings-card full-width",children:[(0,d.jsxs)("div",{className:"card-header danger-zone",children:[(0,d.jsx)("h4",{children:"Danger Zone"}),(0,d.jsx)("span",{className:"danger-badge",children:"Caution Required"})]}),(0,d.jsxs)("div",{className:"danger-actions",children:[(0,d.jsxs)("div",{className:"danger-item",children:[(0,d.jsxs)("div",{className:"danger-info",children:[(0,d.jsx)("strong",{children:"Reset System Settings"}),(0,d.jsx)("span",{children:"Restore all system settings to default values"})]}),(0,d.jsx)("button",{className:"btn-danger",children:"Reset Settings"})]}),(0,d.jsxs)("div",{className:"danger-item",children:[(0,d.jsxs)("div",{className:"danger-info",children:[(0,d.jsx)("strong",{children:"Clear All User Data"}),(0,d.jsx)("span",{children:"Permanently delete all user recordings and data"})]}),(0,d.jsx)("button",{className:"btn-danger",children:"Clear Data"})]}),(0,d.jsxs)("div",{className:"danger-item",children:[(0,d.jsxs)("div",{className:"danger-info",children:[(0,d.jsx)("strong",{children:"Factory Reset"}),(0,d.jsx)("span",{children:"Reset entire system to initial state (cannot be undone)"})]}),(0,d.jsx)("button",{className:"btn-danger",children:"Factory Reset"})]})]})]})]})]})]})]})}),document.body)},ve=e=>{let{user:t,onLogout:n}=e;const[s,r]=(0,a.useState)(!1),[i,l]=(0,a.useState)({top:0,left:0}),[o,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!1),[x,b]=(0,a.useState)(!1),j=(0,a.useRef)(null),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=e=>{e.altKey&&"o"===e.key.toLowerCase()&&t.isAdmin&&(e.preventDefault(),b(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t.isAdmin]),(0,a.useEffect)(()=>{const e=e=>{j.current&&!j.current.contains(e.target)&&y.current&&!y.current.contains(e.target)&&(console.log("Clicking outside, closing dropdown"),r(!1))};return s&&(document.addEventListener("mousedown",e),document.addEventListener("touchstart",e)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[s]),(0,a.useEffect)(()=>{if(s&&y.current){const e=y.current.getBoundingClientRect(),t=280,n=e.right-t,a=e.bottom+8,s=window.innerWidth,r=Math.max(8,Math.min(n,s-t-8));l({top:a,left:r})}},[s]);const w=e=>{const t=e/1048576,n=t/1024;return n>=1?"".concat(n.toFixed(1)," GB"):"".concat(t.toFixed(0)," MB")},S=()=>Math.min(t.storageUsed/(1024*t.maxStorage*1024)*100,100),N=()=>{console.error("Avatar image failed to load:",t.avatar),u(!0)},k=()=>{if(o){const e=t.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect fill='%23667eea' width='100' height='100'/%3E%3Ctext fill='white' font-size='45' font-weight='bold' x='50%25' y='50%25' text-anchor='middle' dy='.35em'%3E".concat(e,"%3C/text%3E%3C/svg%3E")}return t.avatar};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"user-profile",children:(0,d.jsxs)("div",{ref:y,className:"profile-trigger",onClick:()=>{console.log("Toggling dropdown, current state:",s),r(!s)},children:[(0,d.jsx)("img",{src:k(),alt:t.name,className:"profile-avatar",onError:N,loading:"lazy"}),(0,d.jsxs)("div",{className:"profile-info",children:[(0,d.jsx)("span",{className:"profile-name",children:t.name}),(0,d.jsx)("span",{className:"profile-plan",style:{color:(()=>{switch(t.plan){case"admin":return"#dc2626";case"pro":return"#34d399";case"premium":return"#fbbf24";default:return"#e5e7eb"}})()},children:t.plan.charAt(0).toUpperCase()+t.plan.slice(1)})]}),(0,d.jsx)("svg",{className:"dropdown-arrow ".concat(s?"open":""),viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M7 10l5 5 5-5z"})})]})}),s&&(0,z.createPortal)((0,d.jsxs)("div",{ref:j,className:"profile-dropdown profile-dropdown-portal",style:{position:"fixed",top:"".concat(i.top,"px"),left:"".concat(i.left,"px"),zIndex:2147483647},children:[(0,d.jsxs)("div",{className:"dropdown-header",children:[(0,d.jsx)("img",{src:k(),alt:t.name,className:"dropdown-avatar",onError:N,loading:"lazy"}),(0,d.jsxs)("div",{className:"dropdown-user-info",children:[(0,d.jsx)("div",{className:"dropdown-name",children:t.name}),(0,d.jsx)("div",{className:"dropdown-email",children:t.email})]})]}),(0,d.jsxs)("div",{className:"dropdown-stats",children:[(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{className:"stat-label",children:"Recordings"}),(0,d.jsx)("span",{className:"stat-value",children:t.recordingsCount})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{className:"stat-label",children:"Storage"}),(0,d.jsxs)("span",{className:"stat-value",children:[w(t.storageUsed)," / ",w(1024*t.maxStorage*1024)]})]})]}),(0,d.jsxs)("div",{className:"storage-bar",children:[(0,d.jsx)("div",{className:"storage-progress",children:(0,d.jsx)("div",{className:"storage-fill",style:{width:"".concat(S(),"%")}})}),(0,d.jsxs)("span",{className:"storage-text",children:[S().toFixed(1),"% used"]})]}),(0,d.jsxs)("div",{className:"dropdown-actions",children:[(0,d.jsxs)("button",{className:"dropdown-button",onClick:()=>{r(!1),m(!0)},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Account Settings"]}),"admin"!==t.plan&&(0,d.jsxs)("button",{className:"dropdown-button",onClick:()=>{r(!1),f(!0)},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Upgrade Plan"]}),(0,d.jsxs)("button",{className:"dropdown-button",onClick:()=>{r(!1),v(!0)},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})}),"Help & Support"]}),t.isAdmin&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"dropdown-divider"}),(0,d.jsxs)("button",{className:"dropdown-button admin-button",onClick:()=>{r(!1),b(!0)},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})}),"Admin Panel"]})]}),(0,d.jsx)("div",{className:"dropdown-divider"}),(0,d.jsxs)("button",{className:"dropdown-button logout",onClick:n,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),"Sign out"]})]})]}),document.body),h&&(0,d.jsx)(pe,{user:t,onClose:()=>m(!1),onSave:e=>{console.log("Saving settings:",e),m(!1)}}),p&&(0,d.jsx)(oe,{currentPlan:t.plan,onClose:()=>f(!1),onUpgrade:e=>{console.log("\u2705 Plan upgrade completed:",e);const t=c(c({},JSON.parse(localStorage.getItem("user")||"{}")),{},{plan:e});localStorage.setItem("user",JSON.stringify(t)),window.location.reload(),console.log("User plan upgraded to:",e)}}),g&&(0,d.jsx)(fe,{onClose:()=>v(!1)}),x&&(null===t||void 0===t?void 0:t.isAdmin)&&(0,d.jsx)(ge,{user:t,onClose:()=>b(!1)})]})},xe=e=>{let{user:t,onLogout:n,isRecording:s,isPaused:r,recordingTime:i,notifications:l,onShowHelp:o,onShowShortcuts:c,onShowUpgrade:u,recordedVideos:h=[],currentRecording:m=null,className:p=""}=e;const[f,g]=(0,a.useState)("default"),[v,b]=(0,a.useState)(!1),[j,y]=(0,a.useState)(Date.now());(0,a.useEffect)(()=>{g(s&&!r?"recording":s&&r?"paused":m?"reviewing":"default")},[s,r,m]),(0,a.useEffect)(()=>{y(Date.now())},[s,r,h.length]);const w=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},N=(()=>{switch(f){case"recording":return{title:"Recording in Progress",subtitle:"".concat(w(i)," \u2022 Click stop when finished"),titleClass:"recording-title",showPulse:!0};case"paused":return{title:"Recording Paused",subtitle:"".concat(w(i)," \u2022 Click resume to continue"),titleClass:"paused-title",showPulse:!1};case"reviewing":return{title:"Review Your Recording",subtitle:"Preview, edit, or save your captured content",titleClass:"review-title",showPulse:!1};default:return{title:"Nebula Screen Capture",subtitle:"Professional screen recording made simple",titleClass:"default-title",showPulse:!1}}})(),k=l&&l.length>0;return(0,d.jsxs)("header",{className:"dynamic-header ".concat(f," ").concat(p),children:[(0,d.jsxs)("div",{className:"header-content",children:[(0,d.jsxs)("div",{className:"header-left",children:[(0,d.jsxs)("div",{className:"logo-container",children:[(0,d.jsx)(x,{size:48,color:"#ffffff",className:"header-logo",animated:"recording"===f}),N.showPulse&&(0,d.jsx)("div",{className:"recording-pulse"})]}),("recording"===f||"paused"===f)&&(0,d.jsxs)("div",{className:"recording-status",children:[(0,d.jsxs)("div",{className:"status-indicator ".concat(f),children:[(0,d.jsx)("div",{className:"status-dot"}),(0,d.jsx)("span",{className:"status-text",children:"recording"===f?"REC":"PAUSED"})]}),(0,d.jsx)("div",{className:"recording-timer",children:w(i)})]})]}),(0,d.jsxs)("div",{className:"header-center",children:[(0,d.jsx)("h1",{className:"header-title ".concat(N.titleClass),children:N.title}),(0,d.jsx)("p",{className:"header-subtitle",children:N.subtitle}),"default"===f&&h.length>0&&(0,d.jsx)("div",{className:"quick-stats",children:(0,d.jsxs)("span",{className:"stat-item",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),h.length," recordings"]})})]}),(0,d.jsx)("div",{className:"header-right",children:(0,d.jsxs)("div",{className:"quick-actions",children:[k&&(0,d.jsxs)("button",{className:"notification-btn",onClick:()=>b(!v),title:"".concat(l.length," notifications"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})}),l.length>0&&(0,d.jsx)("span",{className:"notification-badge",children:l.length})]}),"free"===(null===t||void 0===t?void 0:t.plan)&&(0,d.jsxs)("button",{className:"upgrade-btn",onClick:u,title:"Upgrade to Pro",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Upgrade"]}),(0,d.jsx)(me,{}),c&&(0,d.jsx)("button",{className:"shortcuts-btn",onClick:c,title:"Keyboard Shortcuts (Ctrl+Shift+/)",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"})})}),(0,d.jsx)("button",{className:"help-btn",onClick:o,title:"Help & Shortcuts",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})})}),(0,d.jsx)(ve,{user:t,onLogout:n})]})})]}),v&&k&&(0,d.jsx)("div",{className:"notifications-dropdown",children:(0,d.jsx)(S,{notifications:l,onClose:()=>b(!1)})}),"recording"===f&&(0,d.jsx)("div",{className:"recording-progress",children:(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill"})})})]})},be=e=>{let{videoRef:t,isRecording:n,onScreenshotTaken:s,standalone:r=!1}=e;const[i,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1),[u,h]=(0,a.useState)(0),[m,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)("fullscreen"),v=(0,a.useCallback)(async()=>{p(!0);try{const e={video:{cursor:"always",displaySurface:"window"===f?"window":"monitor"},audio:!1},t=await navigator.mediaDevices.getDisplayMedia(e),n=document.createElement("video");n.srcObject=t,n.play(),await new Promise(e=>{n.onloadedmetadata=e});const a=document.createElement("canvas"),r=t.getVideoTracks()[0].getSettings();a.width=r.width||1920,a.height=r.height||1080;a.getContext("2d").drawImage(n,0,0,a.width,a.height),t.getTracks().forEach(e=>e.stop());const i=a.toDataURL("image/png"),o=(new Date).toISOString().replace(/[:.]/g,"-"),d="nebula-screenshot-".concat(o,".png"),u=i.length-i.indexOf(",")-1,m=Math.floor(3*u/4),g={id:"shot_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),dataUrl:i,filename:d,timestamp:(new Date).toISOString(),size:m,width:a.width,height:a.height,captureMode:f};l(g),c(!0),h(e=>e+1),s&&s(g),p(!1),setTimeout(()=>c(!1),5e3)}catch(e){console.error("Screenshot capture failed:",e),p(!1),"NotAllowedError"===e.name?alert("Screen capture permission denied. Please allow screen sharing to take screenshots."):"NotSupportedError"===e.name?alert("Screen capture is not supported in this browser. Please use Chrome, Edge, or Firefox."):alert("Failed to capture screenshot: "+e.message)}},[f,s]),x=()=>{if(r)v();else if(t&&t.current)try{const e=(e=>{const t=document.createElement("canvas");return t.width=e.videoWidth||e.width,t.height=e.videoHeight||e.height,t.getContext("2d").drawImage(e,0,0,t.width,t.height),t.toDataURL("image/png")})(t.current),n=(new Date).toISOString().replace(/[:.]/g,"-"),a="nebula-screenshot-".concat(n,".png"),r=e.length-e.indexOf(",")-1,i=Math.floor(3*r/4),o={id:"shot_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),dataUrl:e,filename:a,timestamp:(new Date).toISOString(),size:i,width:t.current.videoWidth,height:t.current.videoHeight,captureMode:"recording"};l(o),c(!0),h(e=>e+1),s&&s(o),setTimeout(()=>c(!1),3e3)}catch(e){console.error("Error capturing screenshot:",e)}else console.error("No video element available for screenshot")},b=()=>{i&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nebula-screenshot.png";const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(i.dataUrl,i.filename)},j=()=>{c(!1)};return r||!n?(0,d.jsxs)("div",{className:"screenshot-capture standalone",children:[(0,d.jsxs)("div",{className:"screenshot-header",children:[(0,d.jsxs)("h3",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})}),"Screenshot Capture"]}),(0,d.jsx)("p",{className:"subtitle",children:"Capture still images of your screen"})]}),(0,d.jsxs)("div",{className:"capture-mode-selector",children:[(0,d.jsx)("label",{children:"Capture Mode:"}),(0,d.jsxs)("div",{className:"mode-buttons",children:[(0,d.jsxs)("button",{className:"mode-btn ".concat("fullscreen"===f?"active":""),onClick:()=>g("fullscreen"),disabled:m,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})}),"Full Screen"]}),(0,d.jsxs)("button",{className:"mode-btn ".concat("window"===f?"active":""),onClick:()=>g("window"),disabled:m,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H5V8h14v10z"})}),"Window"]})]})]}),(0,d.jsx)("button",{className:"screenshot-btn-main ".concat(m?"capturing":""),onClick:v,disabled:m,children:m?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner-small"}),"Capturing..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"3.2"}),(0,d.jsx)("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})]}),"Take Screenshot",u>0&&(0,d.jsx)("span",{className:"count-badge",children:u})]})}),(0,d.jsxs)("div",{className:"screenshot-info-box",children:[(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),(0,d.jsx)("span",{children:"Screenshots are saved as PNG images in high quality"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),(0,d.jsx)("span",{children:"Your browser will prompt you to select what to capture"})]})]}),(0,d.jsxs)("div",{className:"keyboard-shortcut-hint",children:[(0,d.jsx)("kbd",{children:"Ctrl"})," + ",(0,d.jsx)("kbd",{children:"Shift"})," + ",(0,d.jsx)("kbd",{children:"S"})," to take screenshot"]}),o&&i&&(0,d.jsx)("div",{className:"screenshot-preview",children:(0,d.jsxs)("div",{className:"screenshot-preview-content",children:[(0,d.jsx)("button",{className:"screenshot-preview-close",onClick:j,"aria-label":"Close preview",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),(0,d.jsxs)("div",{className:"screenshot-preview-header",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V5H5v14Zm1-2h12l-3.75-5-3 4L9 13Z"})}),(0,d.jsx)("span",{children:"Screenshot Captured!"})]}),(0,d.jsx)("div",{className:"screenshot-preview-image",children:(0,d.jsx)("img",{src:i.dataUrl,alt:"Screenshot preview"})}),(0,d.jsxs)("div",{className:"screenshot-preview-actions",children:[(0,d.jsxs)("button",{className:"screenshot-download-btn",onClick:b,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"})}),"Download"]}),(0,d.jsxs)("button",{className:"screenshot-another-btn",onClick:v,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})}),"Take Another"]})]})]})})]}):n?(0,d.jsxs)("div",{className:"screenshot-capture",children:[(0,d.jsxs)("button",{className:"screenshot-button",onClick:x,title:"Take Screenshot (Ctrl+Shift+S)","aria-label":"Take screenshot",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})}),(0,d.jsx)("span",{children:"Screenshot"}),u>0&&(0,d.jsx)("span",{className:"screenshot-count",children:u})]}),o&&i&&(0,d.jsx)("div",{className:"screenshot-preview",children:(0,d.jsxs)("div",{className:"screenshot-preview-content",children:[(0,d.jsx)("button",{className:"screenshot-preview-close",onClick:j,"aria-label":"Close preview",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),(0,d.jsxs)("div",{className:"screenshot-preview-header",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V5H5v14Zm1-2h12l-3.75-5-3 4L9 13Z"})}),(0,d.jsx)("span",{children:"Screenshot Captured!"})]}),(0,d.jsx)("div",{className:"screenshot-preview-image",children:(0,d.jsx)("img",{src:i.dataUrl,alt:"Screenshot preview"})}),(0,d.jsxs)("div",{className:"screenshot-preview-actions",children:[(0,d.jsxs)("button",{className:"screenshot-download-btn",onClick:b,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"})}),"Download"]}),(0,d.jsxs)("button",{className:"screenshot-another-btn",onClick:x,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})}),"Take Another"]})]})]})})]}):null},je=e=>{let{onConfirm:t,onCancel:n}=e;const[s,r]=(0,a.useState)(""),i=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;null===(e=i.current)||void 0===e||e.focus();const t=new Date,n="Recording ".concat(t.toLocaleDateString()," ").concat(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}));r(n)},[]);return(0,d.jsx)("div",{className:"recording-name-prompt-overlay",onClick:n,children:(0,d.jsxs)("div",{className:"recording-name-prompt",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"prompt-header",children:[(0,d.jsx)("h3",{children:"Name Your Recording"}),(0,d.jsx)("button",{className:"close-btn",onClick:n,"aria-label":"Cancel",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&t(s.trim())},children:[(0,d.jsxs)("div",{className:"prompt-body",children:[(0,d.jsx)("label",{htmlFor:"recording-name",children:"Recording Name"}),(0,d.jsx)("input",{ref:i,id:"recording-name",type:"text",value:s,onChange:e=>r(e.target.value),onKeyDown:e=>{"Escape"===e.key&&n()},placeholder:"Enter recording name...",maxLength:100,className:"name-input"}),(0,d.jsxs)("span",{className:"char-count",children:[s.length,"/100"]})]}),(0,d.jsxs)("div",{className:"prompt-actions",children:[(0,d.jsx)("button",{type:"button",onClick:n,className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"confirm-btn",disabled:!s.trim(),children:"Start Recording"})]})]})]})})},ye=e=>{let{stream:t,isRecording:n,isPaused:s,recordingTime:r}=e;const[i,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)({x:20,y:20}),[u,h]=(0,a.useState)(!1),m=(0,a.useRef)(null),p=(0,a.useRef)({startX:0,startY:0});(0,a.useEffect)(()=>{m.current&&t&&(m.current.srcObject=t)},[t]);const f=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(n,":").concat(a.toString().padStart(2,"0"))},g=e=>{if(!u)return;const t=e.clientX-p.current.startX,n=e.clientY-p.current.startY,a=window.innerWidth-(i?80:320),s=window.innerHeight-(i?80:200);c({x:Math.max(0,Math.min(t,a)),y:Math.max(0,Math.min(n,s))})},v=()=>{h(!1)};return(0,a.useEffect)(()=>{if(u)return document.addEventListener("mousemove",g),document.addEventListener("mouseup",v),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v)}},[u]),t&&n?(0,d.jsx)("div",{className:"recording-preview ".concat(i?"minimized":""," ").concat(u?"dragging":""),style:{left:"".concat(o.x,"px"),top:"".concat(o.y,"px")},onMouseDown:e=>{e.target.closest(".preview-controls")||(h(!0),p.current={startX:e.clientX-o.x,startY:e.clientY-o.y})},children:i?(0,d.jsxs)("div",{className:"minimized-preview",children:[(0,d.jsxs)("div",{className:"recording-indicator ".concat(s?"paused":""),children:[(0,d.jsx)("span",{className:"pulse"}),(0,d.jsx)("span",{className:"time",children:f(r)})]}),(0,d.jsx)("button",{className:"expand-btn",onClick:()=>l(!1),title:"Expand preview",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"preview-header",children:[(0,d.jsxs)("div",{className:"preview-status",children:[(0,d.jsx)("span",{className:"status-dot ".concat(s?"paused":"recording")}),(0,d.jsx)("span",{className:"status-text",children:s?"Paused":"Recording"}),(0,d.jsx)("span",{className:"timer",children:f(r)})]}),(0,d.jsx)("div",{className:"preview-controls",children:(0,d.jsx)("button",{className:"control-btn",onClick:()=>l(!0),title:"Minimize",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 13H5v-2h14v2z"})})})})]}),(0,d.jsxs)("div",{className:"preview-video",children:[(0,d.jsx)("video",{ref:m,autoPlay:!0,muted:!0,playsInline:!0}),s&&(0,d.jsx)("div",{className:"paused-overlay",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})})})]})]})}):null},we="nebula_recording_recovery";const Se=e=>{const t=Date.now()-e,n=Math.floor(t/6e4),a=Math.floor(n/60);return a>0?"".concat(a," hour").concat(1!==a?"s":""," ago"):n>0?"".concat(n," minute").concat(1!==n?"s":""," ago"):"Just now"},Ne=class{constructor(){this.autosaveTimer=null,this.chunks=[],this.metadata=null}startAutoSave(e){this.metadata=c(c({},e),{},{startTime:Date.now(),lastSaved:Date.now()}),this.saveRecoveryData(),this.autosaveTimer=setInterval(()=>{this.saveRecoveryData()},3e4),console.log("\ud83d\udd04 Auto-save started for recording:",e.name)}addChunks(e){this.chunks.push(...e),this.chunks.length>100&&(this.chunks=this.chunks.slice(-100))}saveRecoveryData(){if(this.metadata)try{const e={metadata:c(c({},this.metadata),{},{lastSaved:Date.now(),chunksCount:this.chunks.length}),hasData:this.chunks.length>0};sessionStorage.setItem(we,JSON.stringify(e)),console.log("\ud83d\udcbe Auto-saved recording state:",e.metadata.name)}catch(e){console.error("Failed to save recovery data:",e)}}stopAutoSave(){this.autosaveTimer&&(clearInterval(this.autosaveTimer),this.autosaveTimer=null),this.clearRecoveryData(),console.log("\u2705 Auto-save stopped and recovery data cleared")}clearRecoveryData(){sessionStorage.removeItem(we),this.chunks=[],this.metadata=null}static hasRecoverableRecording(){const e=sessionStorage.getItem(we);if(!e)return!1;try{const t=JSON.parse(e),n=Date.now()-t.metadata.lastSaved;return t.hasData&&n<864e5}catch(t){return!1}}static getRecoveryMetadata(){const e=sessionStorage.getItem(we);if(!e)return null;try{return JSON.parse(e).metadata}catch(t){return null}}static clearRecovery(){sessionStorage.removeItem(we)}},ke=e=>{let{metadata:t,onRecover:n,onDiscard:a}=e;return(0,d.jsx)("div",{className:"recovery-prompt-overlay",children:(0,d.jsxs)("div",{className:"recovery-prompt",children:[(0,d.jsx)("div",{className:"recovery-icon",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})})}),(0,d.jsx)("h3",{children:"Recover Previous Recording?"}),(0,d.jsxs)("p",{className:"recovery-description",children:["We found an interrupted recording from ",Se(t.lastSaved),"."]}),(0,d.jsxs)("div",{className:"recovery-details",children:[(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsx)("span",{className:"detail-label",children:"Recording Name:"}),(0,d.jsx)("span",{className:"detail-value",children:t.name||"Unnamed"})]}),(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsx)("span",{className:"detail-label",children:"Started:"}),(0,d.jsx)("span",{className:"detail-value",children:new Date(t.startTime).toLocaleString()})]}),(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsx)("span",{className:"detail-label",children:"Duration:"}),(0,d.jsxs)("span",{className:"detail-value",children:["~",Math.floor((t.lastSaved-t.startTime)/1e3)," seconds"]})]})]}),(0,d.jsxs)("div",{className:"recovery-actions",children:[(0,d.jsx)("button",{className:"discard-btn",onClick:a,children:"Discard"}),(0,d.jsx)("button",{className:"recover-btn",onClick:n,children:"Recover Recording"})]}),(0,d.jsx)("p",{className:"recovery-note",children:"Note: Recovery may not include the last few seconds before interruption."})]})})},Ce=e=>{let{error:t,onRetry:n,onDismiss:a}=e;const s=(e=>{const t=e.name||"Error",n=e.message||"An unknown error occurred";return{NotAllowedError:{title:"Permission Denied",message:"Screen recording permission was denied.",icon:"\ud83d\udd12",suggestions:['Click "Start Recording" again and allow screen sharing',"Check your browser permissions for this site","Make sure you select a screen/window to share"],canRetry:!0},NotFoundError:{title:"No Screen Available",message:"No screen or window was selected for recording.",icon:"\ud83d\udda5\ufe0f",suggestions:["Select a screen, window, or tab when prompted","Make sure you have at least one display connected","Try sharing your entire screen instead of a specific window"],canRetry:!0},NotReadableError:{title:"Device Unavailable",message:"The recording device is unavailable or in use.",icon:"\u26a0\ufe0f",suggestions:["Close other apps that might be using screen capture","Restart your browser and try again","Check if another recording is already active"],canRetry:!0},AbortError:{title:"Recording Aborted",message:"Recording was stopped unexpectedly.",icon:"\u274c",suggestions:["The user or system stopped the screen share","Try starting a new recording","Make sure your device has enough storage space"],canRetry:!0},NotSupportedError:{title:"Not Supported",message:"Screen recording is not supported in your browser.",icon:"\ud83d\udeab",suggestions:["Use Google Chrome, Firefox, or Edge (version 72+)","Update your browser to the latest version","For iOS users: Use the native screen recording feature"],canRetry:!1},InvalidStateError:{title:"Invalid Recording State",message:"Cannot perform this action in the current state.",icon:"\u26a1",suggestions:["Stop the current recording before starting a new one","Refresh the page and try again","Clear your browser cache and reload"],canRetry:!0},QuotaExceededError:{title:"Storage Quota Exceeded",message:"Not enough storage space for recording.",icon:"\ud83d\udcbe",suggestions:["Delete old recordings to free up space","Download important recordings and remove them","Upgrade your plan for more storage","Clear browser data and cache"],canRetry:!1},SecurityError:{title:"Security Error",message:"Recording blocked for security reasons.",icon:"\ud83d\udee1\ufe0f",suggestions:["Make sure you're using HTTPS (secure connection)","Check if content security policies are blocking recording","Try recording in an incognito/private window"],canRetry:!0}}[t]||{title:"Recording Error",message:n,icon:"\u26a0\ufe0f",suggestions:["Try reloading the page and starting again","Check your internet connection","Contact support if the problem persists"],canRetry:!0}})(t);return(0,d.jsx)("div",{className:"enhanced-error-overlay",onClick:a,children:(0,d.jsxs)("div",{className:"enhanced-error-message",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("div",{className:"error-icon",children:s.icon}),(0,d.jsx)("h3",{className:"error-title",children:s.title}),(0,d.jsx)("p",{className:"error-description",children:s.message}),(0,d.jsxs)("div",{className:"error-suggestions",children:[(0,d.jsx)("h4",{children:"\ud83d\udca1 How to fix this:"}),(0,d.jsx)("ul",{children:s.suggestions.map((e,t)=>(0,d.jsx)("li",{children:e},t))})]}),t.message&&(0,d.jsxs)("details",{className:"error-technical",children:[(0,d.jsx)("summary",{children:"Technical Details"}),(0,d.jsxs)("code",{children:[t.name,": ",t.message]})]}),(0,d.jsxs)("div",{className:"error-actions",children:[(0,d.jsx)("button",{className:"dismiss-btn",onClick:a,children:"Close"}),s.canRetry&&n&&(0,d.jsx)("button",{className:"retry-btn",onClick:n,children:"Try Again"})]})]})})};const Me=new class{constructor(){this.audioContext=null,this.effects={noiseReduction:!1,echo:!1,reverb:!1,equalization:!1,fadeIn:!1,fadeOut:!1,ducking:!1},this.settings={noiseReduction:{threshold:-50,reduction:20},echo:{delay:.5,feedback:.3,mix:.5},reverb:{decay:2,preDelay:.03,mix:.3},equalization:{lowGain:0,midGain:0,highGain:0,lowFreq:250,midFreq:1e3,highFreq:4e3},fade:{inDuration:2,outDuration:2},ducking:{threshold:-20,ratio:4,attack:.003,release:.25}}}initializeContext(){return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext}async applyNoiseReduction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.initializeContext();const{threshold:n,reduction:a}=c(c({},this.settings.noiseReduction),t),s=new OfflineAudioContext(e.numberOfChannels,e.length,e.sampleRate),r=s.createBufferSource();r.buffer=e;const i=s.createDynamicsCompressor();i.threshold.value=n,i.knee.value=0,i.ratio.value=20,i.attack.value=0,i.release.value=.25,r.connect(i),i.connect(s.destination),r.start(0);return await s.startRendering()}async applyEcho(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.initializeContext();const{delay:n,feedback:a,mix:s}=c(c({},this.settings.echo),t),r=new OfflineAudioContext(e.numberOfChannels,e.length+Math.ceil(e.sampleRate*n*2),e.sampleRate),i=r.createBufferSource();i.buffer=e;const l=r.createDelay(5);l.delayTime.value=n;const o=r.createGain();o.gain.value=a;const d=r.createGain();d.gain.value=s;const u=r.createGain();u.gain.value=1-s,i.connect(u),u.connect(r.destination),i.connect(l),l.connect(o),o.connect(l),l.connect(d),d.connect(r.destination),i.start(0);return await r.startRendering()}async applyReverb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.initializeContext();const{decay:n,preDelay:a,mix:s}=c(c({},this.settings.reverb),t),r=this.generateImpulseResponse(e.sampleRate,n,a),i=new OfflineAudioContext(e.numberOfChannels,e.length+r.length,e.sampleRate),l=i.createBufferSource();l.buffer=e;const o=i.createConvolver();o.buffer=r;const d=i.createGain();d.gain.value=s;const u=i.createGain();u.gain.value=1-s,l.connect(u),u.connect(i.destination),l.connect(o),o.connect(d),d.connect(i.destination),l.start(0);return await i.startRendering()}generateImpulseResponse(e,t,n){const a=e*t,s=new AudioBuffer({numberOfChannels:2,length:a,sampleRate:e}),r=Math.floor(e*n);for(let i=0;i<s.numberOfChannels;i++){const e=s.getChannelData(i);for(let t=r;t<a;t++)e[t]=(2*Math.random()-1)*Math.exp(-3*(t-r)/a)}return s}async applyEqualization(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.initializeContext();const{lowGain:n,midGain:a,highGain:s,lowFreq:r,midFreq:i,highFreq:l}=c(c({},this.settings.equalization),t),o=new OfflineAudioContext(e.numberOfChannels,e.length,e.sampleRate),d=o.createBufferSource();d.buffer=e;const u=o.createBiquadFilter();u.type="lowshelf",u.frequency.value=r,u.gain.value=n;const h=o.createBiquadFilter();h.type="peaking",h.frequency.value=i,h.Q.value=1,h.gain.value=a;const m=o.createBiquadFilter();m.type="highshelf",m.frequency.value=l,m.gain.value=s,d.connect(u),u.connect(h),h.connect(m),m.connect(o.destination),d.start(0);return await o.startRendering()}async applyFade(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{inDuration:n,outDuration:a}=c(c({},this.settings.fade),t),s=(this.initializeContext(),new OfflineAudioContext(e.numberOfChannels,e.length,e.sampleRate)),r=s.createBufferSource();r.buffer=e;const i=s.createGain(),l=e.length/e.sampleRate;if(n>0?(i.gain.setValueAtTime(0,0),i.gain.linearRampToValueAtTime(1,Math.min(n,l))):i.gain.setValueAtTime(1,0),a>0&&l>a){const e=l-a;i.gain.setValueAtTime(1,e),i.gain.linearRampToValueAtTime(0,l)}r.connect(i),i.connect(s.destination),r.start(0);return await s.startRendering()}async applyDucking(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{threshold:a,ratio:s,attack:r,release:i}=c(c({},this.settings.ducking),n),l=(this.initializeContext(),Math.max(e.length,t.length)),o=new OfflineAudioContext(2,l,e.sampleRate),d=o.createBufferSource();d.buffer=e;const u=o.createBufferSource();u.buffer=t;const h=o.createDynamicsCompressor();h.threshold.value=a,h.knee.value=0,h.ratio.value=s,h.attack.value=r,h.release.value=i;const m=o.createGain();m.gain.value=.3,d.connect(o.destination),u.connect(m),m.connect(h),h.connect(o.destination),d.start(0),u.start(0);return await o.startRendering()}async mixTracks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===e.length)return null;this.initializeContext();const n=Math.max(...e.map(e=>e.length)),a=e[0].sampleRate,s=Math.max(...e.map(e=>e.numberOfChannels)),r=new OfflineAudioContext(s,n,a);e.forEach((e,n)=>{const a=r.createBufferSource();a.buffer=e;const s=r.createGain();s.gain.value=void 0!==t[n]?t[n]:1,a.connect(s),s.connect(r.destination),a.start(0)});return await r.startRendering()}async processAudio(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e;for(const a of t){const{type:e,settings:t}=a;switch(e){case"noiseReduction":n=await this.applyNoiseReduction(n,t);break;case"echo":n=await this.applyEcho(n,t);break;case"reverb":n=await this.applyReverb(n,t);break;case"equalization":n=await this.applyEqualization(n,t);break;case"fade":n=await this.applyFade(n,t);break;default:console.warn("Unknown effect type: ".concat(e))}}return n}async audioBufferToBlob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"audio/wav";const n=this.initializeContext(),a=new OfflineAudioContext(e.numberOfChannels,e.length,e.sampleRate),s=a.createBufferSource();s.buffer=e;const r=n.createMediaStreamDestination();s.connect(a.destination);const i=r.stream,l=new MediaRecorder(i),o=[];return new Promise((n,a)=>{l.ondataavailable=e=>o.push(e.data),l.onstop=()=>{const e=new Blob(o,{type:t});n(e)},l.onerror=a,s.start(0),l.start(),setTimeout(()=>{l.stop()},e.length/e.sampleRate*1e3)})}getPresets(){return{podcast:{noiseReduction:{threshold:-45,reduction:20},equalization:{lowGain:-3,midGain:2,highGain:1},fade:{inDuration:1,outDuration:2}},music:{reverb:{decay:1.5,preDelay:.02,mix:.25},equalization:{lowGain:2,midGain:0,highGain:3}},voiceover:{noiseReduction:{threshold:-40,reduction:15},equalization:{lowGain:-2,midGain:3,highGain:0},fade:{inDuration:.5,outDuration:1}},ambience:{reverb:{decay:3,preDelay:.05,mix:.5},echo:{delay:.3,feedback:.2,mix:.3}},clean:{noiseReduction:{threshold:-50,reduction:25},equalization:{lowGain:0,midGain:1,highGain:2}}}}},ze=e=>{let{audioBlob:t,onApply:n,onClose:s}=e;const[r,i]=(0,a.useState)("effects"),[l,o]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(0),[f,g]=(0,a.useState)(null),[v,x]=(0,a.useState)({noiseReduction:{threshold:-50,reduction:20},echo:{delay:.5,feedback:.3,mix:.5},reverb:{decay:2,preDelay:.03,mix:.3},equalization:{lowGain:0,midGain:0,highGain:0},fade:{inDuration:2,outDuration:2}}),b=[{id:"noiseReduction",name:"Noise Reduction",icon:"\ud83d\udd07",description:"Remove background noise",color:"#3b82f6"},{id:"echo",name:"Echo",icon:"\ud83d\udd0a",description:"Add echo effect",color:"#8b5cf6"},{id:"reverb",name:"Reverb",icon:"\ud83c\udfb5",description:"Add room ambience",color:"#ec4899"},{id:"equalization",name:"Equalization",icon:"\ud83c\udf9a\ufe0f",description:"Adjust frequency bands",color:"#10b981"},{id:"fade",name:"Fade In/Out",icon:"\ud83d\udd04",description:"Smooth transitions",color:"#f59e0b"}],j=Me.getPresets();(0,a.useEffect)(()=>{y()},[t]);const y=async()=>{try{const e=await t.arrayBuffer(),n=new(window.AudioContext||window.webkitAudioContext),a=await n.decodeAudioData(e);g(a)}catch(e){console.error("Error loading audio:",e)}},w=(e,t,n)=>{x(c(c({},v),{},{[e]:c(c({},v[e]),{},{[t]:parseFloat(n)})}))};return(0,d.jsx)("div",{className:"audio-effects-overlay",children:(0,d.jsxs)("div",{className:"audio-effects-modal",children:[(0,d.jsxs)("div",{className:"effects-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),"Audio Effects & Mixing"]}),(0,d.jsx)("button",{className:"close-btn",onClick:s,disabled:u,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"effects-tabs",children:[(0,d.jsx)("button",{className:"tab ".concat("effects"===r?"active":""),onClick:()=>i("effects"),children:"Effects"}),(0,d.jsx)("button",{className:"tab ".concat("presets"===r?"active":""),onClick:()=>i("presets"),children:"Presets"})]}),(0,d.jsxs)("div",{className:"effects-content",children:["effects"===r&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"effects-grid",children:b.map(e=>(0,d.jsxs)("div",{className:"effect-card ".concat(l.includes(e.id)?"selected":""),onClick:()=>{return t=e.id,void(l.includes(t)?o(l.filter(e=>e!==t)):o([...l,t]));var t},style:{"--effect-color":e.color},children:[(0,d.jsx)("div",{className:"effect-icon",children:e.icon}),(0,d.jsxs)("div",{className:"effect-info",children:[(0,d.jsx)("h4",{children:e.name}),(0,d.jsx)("p",{children:e.description})]}),l.includes(e.id)&&(0,d.jsx)("div",{className:"effect-check",children:"\u2713"})]},e.id))}),l.length>0&&(0,d.jsxs)("div",{className:"effect-settings",children:[(0,d.jsx)("h3",{children:"Effect Settings"}),l.includes("noiseReduction")&&(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("h4",{children:"\ud83d\udd07 Noise Reduction"}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Threshold: ",v.noiseReduction.threshold," dB"]}),(0,d.jsx)("input",{type:"range",min:"-60",max:"-30",step:"1",value:v.noiseReduction.threshold,onChange:e=>w("noiseReduction","threshold",e.target.value)})]}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Reduction: ",v.noiseReduction.reduction," dB"]}),(0,d.jsx)("input",{type:"range",min:"0",max:"40",step:"1",value:v.noiseReduction.reduction,onChange:e=>w("noiseReduction","reduction",e.target.value)})]})]}),l.includes("echo")&&(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("h4",{children:"\ud83d\udd0a Echo"}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Delay: ",v.echo.delay.toFixed(2),"s"]}),(0,d.jsx)("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:v.echo.delay,onChange:e=>w("echo","delay",e.target.value)})]}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Feedback: ",(100*v.echo.feedback).toFixed(0),"%"]}),(0,d.jsx)("input",{type:"range",min:"0",max:"0.9",step:"0.1",value:v.echo.feedback,onChange:e=>w("echo","feedback",e.target.value)})]}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Mix: ",(100*v.echo.mix).toFixed(0),"%"]}),(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:v.echo.mix,onChange:e=>w("echo","mix",e.target.value)})]})]}),l.includes("reverb")&&(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("h4",{children:"\ud83c\udfb5 Reverb"}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Decay: ",v.reverb.decay.toFixed(1),"s"]}),(0,d.jsx)("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:v.reverb.decay,onChange:e=>w("reverb","decay",e.target.value)})]}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Mix: ",(100*v.reverb.mix).toFixed(0),"%"]}),(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:v.reverb.mix,onChange:e=>w("reverb","mix",e.target.value)})]})]}),l.includes("equalization")&&(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("h4",{children:"\ud83c\udf9a\ufe0f Equalization"}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Low (250Hz): ",v.equalization.lowGain>0?"+":"",v.equalization.lowGain," dB"]}),(0,d.jsx)("input",{type:"range",min:"-12",max:"12",step:"1",value:v.equalization.lowGain,onChange:e=>w("equalization","lowGain",e.target.value)})]}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Mid (1kHz): ",v.equalization.midGain>0?"+":"",v.equalization.midGain," dB"]}),(0,d.jsx)("input",{type:"range",min:"-12",max:"12",step:"1",value:v.equalization.midGain,onChange:e=>w("equalization","midGain",e.target.value)})]}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["High (4kHz): ",v.equalization.highGain>0?"+":"",v.equalization.highGain," dB"]}),(0,d.jsx)("input",{type:"range",min:"-12",max:"12",step:"1",value:v.equalization.highGain,onChange:e=>w("equalization","highGain",e.target.value)})]})]}),l.includes("fade")&&(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("h4",{children:"\ud83d\udd04 Fade In/Out"}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Fade In: ",v.fade.inDuration.toFixed(1),"s"]}),(0,d.jsx)("input",{type:"range",min:"0",max:"5",step:"0.5",value:v.fade.inDuration,onChange:e=>w("fade","inDuration",e.target.value)})]}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("label",{children:["Fade Out: ",v.fade.outDuration.toFixed(1),"s"]}),(0,d.jsx)("input",{type:"range",min:"0",max:"5",step:"0.5",value:v.fade.outDuration,onChange:e=>w("fade","outDuration",e.target.value)})]})]})]})]}),"presets"===r&&(0,d.jsx)("div",{className:"presets-grid",children:Object.entries(j).map(e=>{let[t,n]=e;return(0,d.jsxs)("button",{className:"preset-card",onClick:()=>(e=>{const t=j[e],n=[],a=c({},v);Object.keys(t).forEach(e=>{l.includes(e)||n.push(e),a[e]=c(c({},a[e]),t[e])}),o([...l,...n]),x(a)})(t),disabled:u,children:[(0,d.jsx)("h4",{children:t.charAt(0).toUpperCase()+t.slice(1)}),(0,d.jsx)("p",{children:Object.keys(n).map(e=>{var t;return(null===(t=b.find(t=>t.id===e))||void 0===t?void 0:t.icon)||"\ud83c\udfb5"}).join(" ")}),(0,d.jsxs)("span",{className:"preset-effects",children:[Object.keys(n).length," effect",1!==Object.keys(n).length?"s":""]})]},t)})}),u&&(0,d.jsxs)("div",{className:"processing-indicator",children:[(0,d.jsx)("div",{className:"spinner"}),(0,d.jsxs)("span",{children:["Processing audio... ",m,"%"]}),(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(m,"%")}})})]})]}),(0,d.jsxs)("div",{className:"effects-actions",children:[(0,d.jsx)("button",{className:"cancel-btn",onClick:s,disabled:u,children:"Cancel"}),(0,d.jsx)("button",{className:"apply-btn",onClick:async()=>{if(f&&0!==l.length){h(!0),p(0);try{const e=l.map(e=>({type:e,settings:v[e]})),t=await Me.processAudio(f,e);p(100);const a=await Me.audioBufferToBlob(t);h(!1),n(a)}catch(e){console.error("Error processing audio:",e),alert("Failed to process audio: "+e.message),h(!1)}}else alert("Please select at least one effect")},disabled:u||0===l.length,children:u?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner-small"}),"Processing..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply Effects"]})})]})]})})};const Ee=new class{constructor(){this.transitionTypes={fade:"Fade",dissolve:"Dissolve",wipeLeft:"Wipe Left",wipeRight:"Wipe Right",wipeUp:"Wipe Up",wipeDown:"Wipe Down",slideLeft:"Slide Left",slideRight:"Slide Right",slideUp:"Slide Up",slideDown:"Slide Down",crossfade:"Crossfade",fadeToBlack:"Fade to Black",fadeToWhite:"Fade to White"},this.defaultDuration=1}async applyTransition(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.defaultDuration,s=arguments.length>4?arguments[4]:void 0;if(!(e instanceof Blob))throw new Error("clip1Blob is not a valid Blob object");if(!(t instanceof Blob))throw new Error("clip2Blob is not a valid Blob object");const r=await this.loadVideo(e),i=await this.loadVideo(t),l=Math.min(1920/Math.max(r.videoWidth,i.videoWidth),1080/Math.max(r.videoHeight,i.videoHeight),1),o=document.createElement("canvas");o.width=Math.floor(Math.max(r.videoWidth,i.videoWidth)*l),o.height=Math.floor(Math.max(r.videoHeight,i.videoHeight)*l);const c=o.getContext("2d",{alpha:!1,desynchronized:!0}),d=Math.floor(30*a),u=o.captureStream(30),h=MediaRecorder.isTypeSupported("video/webm;codecs=vp8")?"video/webm;codecs=vp8":"video/webm",m=new MediaRecorder(u,{mimeType:h,videoBitsPerSecond:25e5}),p=[];return m.ondataavailable=e=>{e.data.size>0&&p.push(e.data)},new Promise((e,t)=>{m.onstop=()=>{const t=new Blob(p,{type:"video/webm"});e(t)},m.onerror=t,m.start(100),this.renderTransition(r,i,o,c,n,d,30,s).then(()=>{m.stop()}).catch(t)})}async renderTransition(e,t,n,a,s,r,i,l){const o=e.duration,c=t.duration,d=r/i;let u=0,h=Math.floor((o+c-d)*i);const m=1e3/i;let p=performance.now();await(()=>new Promise(r=>{const c=async()=>{if(u>=h)return void r();const f=u/i,g=o-d;if(f<g)e.currentTime=Math.min(f,e.duration-.01),await new Promise(t=>{e.onseeked=()=>t(),e.readyState>=2&&t()}),a.drawImage(e,0,0,n.width,n.height);else if(f<o){const r=(f-g)/d,i=Math.min(f,e.duration-.01),l=Math.max(0,f-g);e.currentTime=i,t.currentTime=Math.min(l,t.duration-.01),await Promise.all([new Promise(t=>{e.onseeked=()=>t(),e.readyState>=2&&t()}),new Promise(e=>{t.onseeked=()=>e(),t.readyState>=2&&e()})]),this.renderTransitionFrame(a,e,t,n.width,n.height,s,r)}else{const e=Math.min(f-g,t.duration-.01);t.currentTime=e,await new Promise(e=>{t.onseeked=()=>e(),t.readyState>=2&&e()}),a.drawImage(t,0,0,n.width,n.height)}u++,l&&u%10===0&&l(Math.floor(u/h*100));const v=performance.now(),x=v-p,b=Math.max(0,m-x);p=v+b,setTimeout(()=>{c()},0)};c()}))()}renderTransitionFrame(e,t,n,a,s,r,i){switch(e.clearRect(0,0,a,s),r){case"fade":case"dissolve":case"crossfade":default:this.renderFade(e,t,n,a,s,i);break;case"wipeLeft":this.renderWipe(e,t,n,a,s,i,"left");break;case"wipeRight":this.renderWipe(e,t,n,a,s,i,"right");break;case"wipeUp":this.renderWipe(e,t,n,a,s,i,"up");break;case"wipeDown":this.renderWipe(e,t,n,a,s,i,"down");break;case"slideLeft":this.renderSlide(e,t,n,a,s,i,"left");break;case"slideRight":this.renderSlide(e,t,n,a,s,i,"right");break;case"slideUp":this.renderSlide(e,t,n,a,s,i,"up");break;case"slideDown":this.renderSlide(e,t,n,a,s,i,"down");break;case"fadeToBlack":this.renderFadeToColor(e,t,n,a,s,i,"#000000");break;case"fadeToWhite":this.renderFadeToColor(e,t,n,a,s,i,"#FFFFFF")}}renderFade(e,t,n,a,s,r){e.globalAlpha=1-r,e.drawImage(t,0,0,a,s),e.globalAlpha=r,e.drawImage(n,0,0,a,s),e.globalAlpha=1}renderWipe(e,t,n,a,s,r,i){switch(e.drawImage(n,0,0,a,s),e.save(),i){case"left":e.rect(a*r,0,a*(1-r),s);break;case"right":e.rect(0,0,a*(1-r),s);break;case"up":e.rect(0,s*r,a,s*(1-r));break;case"down":e.rect(0,0,a,s*(1-r))}e.clip(),e.drawImage(t,0,0,a,s),e.restore()}renderSlide(e,t,n,a,s,r,i){let l=0,o=0,c=0,d=0;switch(i){case"left":l=-a*r,c=a*(1-r);break;case"right":l=a*r,c=-a*(1-r);break;case"up":o=-s*r,d=s*(1-r);break;case"down":o=s*r,d=-s*(1-r)}e.drawImage(t,l,o,a,s),e.drawImage(n,c,d,a,s)}renderFadeToColor(e,t,n,a,s,r,i){r<.5?(e.drawImage(t,0,0,a,s),e.globalAlpha=2*r,e.fillStyle=i,e.fillRect(0,0,a,s),e.globalAlpha=1):(e.fillStyle=i,e.fillRect(0,0,a,s),e.globalAlpha=2*(r-.5),e.drawImage(n,0,0,a,s),e.globalAlpha=1)}loadVideo(e){return new Promise((t,n)=>{if(!(e instanceof Blob))return void n(new Error("Invalid blob: Expected Blob object"));const a=document.createElement("video");let s=!1,r=!1;try{a.src=URL.createObjectURL(e)}catch(o){return void n(new Error("Failed to create object URL: ".concat(o.message)))}a.muted=!0,a.preload="metadata";const i=async()=>{if(!r&&!s){r=!0,console.log("\u26a0\ufe0f Video has Infinity duration, attempting workaround...");try{a.currentTime=1e101,await new Promise(e=>{const t=()=>{a.removeEventListener("seeked",t),e()};a.addEventListener("seeked",t),setTimeout(e,500)});const e=a.currentTime;console.log("\ud83d\udccf Estimated duration from seek:",e),e>0&&isFinite(e)&&(a.currentTime=0,Object.defineProperty(a,"duration",{value:e,writable:!1,configurable:!0}),s||(s=!0,console.log("\u2705 Video loaded with estimated duration:",e),t(a)))}catch(o){console.error("Failed to estimate duration:",o)}}},l=()=>{s||(console.log("Checking video ready:",{duration:a.duration,readyState:a.readyState,isFinite:isFinite(a.duration)}),isFinite(a.duration)&&a.duration>0&&a.readyState>=1?(s=!0,console.log("\u2705 Video loaded successfully, duration:",a.duration),t(a)):a.duration===1/0&&a.readyState>=2&&!r&&i())};a.onloadedmetadata=()=>{console.log("loadedmetadata event fired"),l()},a.onloadeddata=()=>{console.log("loadeddata event fired"),l()},a.oncanplay=()=>{console.log("canplay event fired"),l()},a.onerror=e=>{var t;s||(s=!0,n(new Error("Failed to load video: ".concat((null===(t=a.error)||void 0===t?void 0:t.message)||"Unknown error"))))},setTimeout(()=>{if(!s)if(a.duration!==1/0||r){s=!0;const e="Timeout loading video: duration=".concat(a.duration,", readyState=").concat(a.readyState);console.error(e),n(new Error(e))}else i(),setTimeout(()=>{if(!s){s=!0;const e="Timeout loading video: duration=".concat(a.duration,", readyState=").concat(a.readyState);console.error(e),n(new Error(e))}},2e3)},1e4)})}async createPreview(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!(e instanceof Blob))throw new Error("clip1Blob is not a valid Blob object");if(!(t instanceof Blob))throw new Error("clip2Blob is not a valid Blob object");console.log("Loading video clips for preview...");const s=await this.loadVideo(e),r=await this.loadVideo(t);if(console.log("Video 1 duration:",s.duration,"readyState:",s.readyState),console.log("Video 2 duration:",r.duration,"readyState:",r.readyState),!isFinite(s.duration)||s.duration<=0)throw new Error("Invalid duration for first video clip: ".concat(s.duration));if(!isFinite(r.duration)||r.duration<=0)throw new Error("Invalid duration for second video clip: ".concat(r.duration));const i=document.createElement("canvas");i.width=320,i.height=180;const l=i.getContext("2d"),o=[];for(let c=0;c<=10;c++){const e=c/10,t=Math.max(0,Math.min(s.duration-a,s.duration-.1));s.currentTime=t,r.currentTime=0,await new Promise(e=>setTimeout(e,100)),this.renderTransitionFrame(l,s,r,i.width,i.height,n,e),o.push(i.toDataURL("image/jpeg",.7))}return o}getPresets(){return{quick:{duration:.5,type:"fade"},standard:{duration:1,type:"crossfade"},smooth:{duration:1.5,type:"dissolve"},dramatic:{duration:2,type:"fadeToBlack"},slideshow:{duration:.8,type:"slideLeft"},cinematic:{duration:2.5,type:"fadeToBlack"}}}async applyTransitionsToClips(e,t,n,a){if(!e||0===e.length)throw new Error("No clips provided");if(1===e.length)return a&&a(100),[e[0]];for(let i=0;i<e.length;i++)if(!(e[i]instanceof Blob))throw new Error("Clip ".concat(i," is not a valid Blob"));let s=e[0];const r=e.length-1;for(let i=1;i<e.length;i++){const l=e=>{if(a){const t=Math.floor((i-1)/r*100+e/r);a(t)}};s=await this.applyTransition(s,e[i],t,n,l)}return a&&a(100),[s]}getTransitionTypes(){return this.transitionTypes}};const Te=new class{constructor(){this.module=null,this.processor=null,this.isReady=!1}async init(){if(!this.isReady)try{const t="".concat("","/wasm/video-transitions.js"),n="".concat("","/wasm/video-transitions.wasm");console.log("\ud83d\udd04 Loading WASM module from:",t);try{const e=await fetch(n,{method:"HEAD"});if(!e.ok)throw new Error("WASM file not accessible: ".concat(e.status," ").concat(e.statusText));console.log("\u2705 WASM binary is accessible")}catch(e){throw console.error("\u274c Cannot access WASM binary:",e),new Error("WASM binary not found at ".concat(n,": ").concat(e.message))}if(window.createVideoTransitionsModule||await new Promise((e,n)=>{const a=document.createElement("script");a.src=t,a.onload=()=>{console.log("\u2705 WASM script loaded"),e()},a.onerror=e=>{console.error("\u274c Failed to load WASM script:",e),n(new Error("Failed to load WASM module from ".concat(t)))},document.head.appendChild(a)}),!window.createVideoTransitionsModule)throw new Error("createVideoTransitionsModule not found after loading script");if(console.log("\ud83d\udd04 Initializing WASM module..."),this.module=await window.createVideoTransitionsModule({locateFile:e=>{const t=e.endsWith(".wasm")?"".concat("","/wasm/").concat(e):e;return console.log("\ud83d\udd0d locateFile called:",e,"->",t),t},print:e=>console.log("[WASM stdout]",e),printErr:e=>console.error("[WASM stderr]",e)}),console.log("\u2705 WASM module created"),!this.module.VideoTransitions)throw new Error("VideoTransitions class not found in WASM module");this.processor=new this.module.VideoTransitions,this.isReady=!0,console.log("\u2705 WASM Transitions Module Initialized")}catch(t){throw console.error("\u274c Failed to initialize WASM transitions:",t),console.error("Error stack:",t.stack),t}}async ensureReady(){this.isReady||await this.init()}setDimensions(e,t){this.processor&&this.processor.setDimensions(e,t)}allocateFrame(e){const t=e.data.length,n=this.module._malloc(t);return this.module.HEAPU8.set(e.data,n),n}freeFrame(e){this.module._free(e)}async applyTransition(e,t,n,a){await this.ensureReady(),this.setDimensions(t.width,t.height);const s=this.allocateFrame(t),r=this.allocateFrame(n);try{let t;switch(e.toLowerCase()){case"fade":default:t=this.processor.fade(s,r,a);break;case"crossfade":t=this.processor.crossfade(s,r,a);break;case"wipe-left":case"wipeleft":t=this.processor.wipeLeft(s,r,a);break;case"wipe-right":case"wiperight":t=this.processor.wipeRight(s,r,a);break;case"wipe-up":case"wipeup":t=this.processor.wipeUp(s,r,a);break;case"wipe-down":case"wipedown":t=this.processor.wipeDown(s,r,a);break;case"slide-left":case"slideleft":t=this.processor.slideLeft(s,r,a);break;case"dissolve":t=this.processor.dissolve(s,r,a);break;case"fade-to-black":case"fadetoblack":t=this.processor.fadeToBlack(s,r,a)}return new Uint8ClampedArray(t)}finally{this.freeFrame(s),this.freeFrame(r)}}async applyTransitionToClips(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;await this.ensureReady();const r=document.createElement("video"),i=document.createElement("video");r.src=URL.createObjectURL(e),i.src=URL.createObjectURL(t),r.muted=!0,i.muted=!0,await Promise.all([new Promise(e=>{r.onloadedmetadata=e,r.load()}),new Promise(e=>{i.onloadedmetadata=e,i.load()})]);let l=Math.max(r.videoWidth,i.videoWidth),o=Math.max(r.videoHeight,i.videoHeight);if(l>1920||o>1080){const e=Math.min(1920/l,1080/o);l=Math.floor(l*e),o=Math.floor(o*e)}this.setDimensions(l,o);const c=document.createElement("canvas");c.width=l,c.height=o;const d=c.getContext("2d",{alpha:!1,desynchronized:!0}),u=30,h=r.duration,m=i.duration,p=Math.ceil(a*u),f=Math.ceil((h-a)*u),g=f+p+Math.ceil(m*u),v=c.captureStream(u),x=new MediaRecorder(v,{mimeType:"video/webm;codecs=vp8",videoBitsPerSecond:25e5}),b=[];x.ondataavailable=e=>b.push(e.data);const j=new Promise(e=>{x.onstop=()=>{e(new Blob(b,{type:"video/webm"})),URL.revokeObjectURL(r.src),URL.revokeObjectURL(i.src)}});x.start();let y=0;for(let k=0;k<f;k++){const e=k/u;r.currentTime=e,await new Promise(e=>{r.onseeked=e,setTimeout(e,100)}),d.drawImage(r,0,0,l,o),y++,s&&y%10===0&&s(y/g),await new Promise(e=>setTimeout(e,0))}for(let k=0;k<p;k++){const e=k/(p-1),t=h-a+a*e,c=a*e;r.currentTime=t,i.currentTime=c,await Promise.all([new Promise(e=>{r.onseeked=e,setTimeout(e,100)}),new Promise(e=>{i.onseeked=e,setTimeout(e,100)})]),d.drawImage(r,0,0,l,o);const u=d.getImageData(0,0,l,o);d.drawImage(i,0,0,l,o);const m=d.getImageData(0,0,l,o),f=await this.applyTransition(n,u,m,e),v=new ImageData(f,l,o);d.putImageData(v,0,0),y++,s&&y%10===0&&s(y/g),await new Promise(e=>setTimeout(e,0))}const w=a,S=m,N=Math.ceil((S-w)*u);for(let k=0;k<N;k++){const e=w+k/u;i.currentTime=e,await new Promise(e=>{i.onseeked=e,setTimeout(e,100)}),d.drawImage(i,0,0,l,o),y++,s&&y%10===0&&s(y/g),await new Promise(e=>setTimeout(e,0))}return x.stop(),j}getAvailableTransitions(){return[{value:"fade",label:"Fade"},{value:"crossfade",label:"Crossfade"},{value:"wipe-left",label:"Wipe Left"},{value:"wipe-right",label:"Wipe Right"},{value:"wipe-up",label:"Wipe Up"},{value:"wipe-down",label:"Wipe Down"},{value:"slide-left",label:"Slide Left"},{value:"dissolve",label:"Dissolve"},{value:"fade-to-black",label:"Fade to Black"}]}},Pe=e=>{let{clips:t,getClipsBlobs:n,onApply:s,onClose:r}=e;const[i,l]=(0,a.useState)("fade"),[o,c]=(0,a.useState)(1),[u,h]=(0,a.useState)([]),[m,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[v,x]=(0,a.useState)(null),[b,j]=(0,a.useState)(0),[y,w]=(0,a.useState)(0),[S,N]=(0,a.useState)([]),[k,C]=(0,a.useState)(!0),[M,z]=(0,a.useState)(!1),E=Object.entries(Ee.getTransitionTypes()).map(e=>{let[t,n]=e;return{id:t,name:n,icon:P(t)}}),T=Ee.getPresets();function P(e){return{fade:"\ud83c\udf05",dissolve:"\u2728",wipeLeft:"\u25c0\ufe0f",wipeRight:"\u25b6\ufe0f",wipeUp:"\ud83d\udd3c",wipeDown:"\ud83d\udd3d",slideLeft:"\u2b05\ufe0f",slideRight:"\u27a1\ufe0f",slideUp:"\u2b06\ufe0f",slideDown:"\u2b07\ufe0f",crossfade:"\ud83c\udf20",fadeToBlack:"\ud83c\udf11",fadeToWhite:"\u2600\ufe0f"}[e]||"\ud83c\udfac"}(0,a.useEffect)(()=>{(async()=>{try{await Te.init(),z(!0),console.log("\u2705 WASM transitions ready - 10-20x faster processing!")}catch(e){console.warn("\u26a0\ufe0f WASM not available, using JavaScript fallback:",e),C(!1)}})()},[]),(0,a.useEffect)(()=>{(async()=>{if(n){g(!0),x(null);try{const e=await n();N(e)}catch(e){console.error("Error loading clip blobs:",e),x(e.message)}finally{g(!1)}}})()},[]),(0,a.useEffect)(()=>{S.length>=2&&R()},[i,S]);const R=async()=>{try{const e=await Ee.createPreview(S[y],S[y+1]||S[y],i,o);h(e)}catch(e){console.error("Error loading preview:",e)}};return(0,d.jsx)("div",{className:"transitions-overlay",children:(0,d.jsxs)("div",{className:"transitions-modal",children:[(0,d.jsxs)("div",{className:"transitions-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}),"Video Transitions"]}),(0,d.jsx)("button",{className:"close-btn",onClick:r,disabled:m||f,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f?(0,d.jsxs)("div",{className:"loading-section",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("p",{children:"Loading clips..."})]}):v?(0,d.jsxs)("div",{className:"error-section",children:[(0,d.jsxs)("p",{className:"error-message",children:["\u274c ",v]}),(0,d.jsx)("button",{onClick:r,className:"error-close-btn",children:"Close"})]}):(0,d.jsxs)("div",{className:"transitions-content",children:[u.length>0&&(0,d.jsxs)("div",{className:"preview-section",children:[(0,d.jsx)("h3",{children:"Preview"}),(0,d.jsx)("div",{className:"preview-frames",children:u.map((e,t)=>(0,d.jsx)("img",{src:e,alt:"Frame ".concat(t),className:"preview-frame"},t))}),(0,d.jsxs)("div",{className:"preview-info",children:[(0,d.jsxs)("span",{children:["Transition between Clip ",y+1," and Clip ",y+2]}),t.length>2&&(0,d.jsx)("select",{value:y,onChange:e=>w(parseInt(e.target.value)),disabled:m,children:t.slice(0,-1).map((e,t)=>(0,d.jsxs)("option",{value:t,children:["Clip ",t+1," \u2192 Clip ",t+2]},t))})]})]}),(0,d.jsxs)("div",{className:"section",children:[(0,d.jsx)("h3",{children:"Select Transition"}),(0,d.jsx)("div",{className:"transitions-grid",children:E.map(e=>(0,d.jsxs)("button",{className:"transition-card ".concat(i===e.id?"selected":""),onClick:()=>l(e.id),disabled:m,children:[(0,d.jsx)("div",{className:"transition-icon",children:e.icon}),(0,d.jsx)("span",{className:"transition-name",children:e.name}),i===e.id&&(0,d.jsx)("div",{className:"transition-check",children:"\u2713"})]},e.id))})]}),(0,d.jsxs)("div",{className:"section",children:[(0,d.jsx)("h3",{children:"Transition Duration"}),(0,d.jsxs)("div",{className:"duration-control",children:[(0,d.jsxs)("label",{children:["Duration: ",o.toFixed(1),"s"]}),(0,d.jsx)("input",{type:"range",min:"0.3",max:"3",step:"0.1",value:o,onChange:e=>c(parseFloat(e.target.value)),disabled:m}),(0,d.jsxs)("div",{className:"duration-markers",children:[(0,d.jsx)("span",{children:"Fast (0.3s)"}),(0,d.jsx)("span",{children:"Normal (1.5s)"}),(0,d.jsx)("span",{children:"Slow (3.0s)"})]})]})]}),(0,d.jsxs)("div",{className:"section",children:[(0,d.jsx)("h3",{children:"Quick Presets"}),(0,d.jsx)("div",{className:"presets-row",children:Object.entries(T).map(e=>{let[t,n]=e;return(0,d.jsxs)("button",{className:"preset-btn",onClick:()=>(e=>{const t=T[e];l(t.type),c(t.duration)})(t),disabled:m,children:[(0,d.jsx)("span",{className:"preset-name",children:t.charAt(0).toUpperCase()+t.slice(1)}),(0,d.jsxs)("span",{className:"preset-details",children:[n.duration,"s ",n.type]})]},t)})})]}),(0,d.jsxs)("div",{className:"clips-info",children:[(0,d.jsxs)("h4",{children:["\ud83d\udcf9 ",t.length," clip",1!==t.length?"s":""," selected"]}),(0,d.jsx)("p",{children:t.length<2?"Add at least 2 clips to apply transitions":"".concat(t.length-1," transition").concat(t.length-1!==1?"s":""," will be applied")}),M&&k&&(0,d.jsxs)("div",{className:"wasm-status",children:[(0,d.jsx)("span",{className:"wasm-badge",children:"\u26a1 C++ WASM"}),(0,d.jsx)("span",{className:"wasm-info",children:"10-20x faster processing"})]}),!k&&(0,d.jsxs)("div",{className:"wasm-status fallback",children:[(0,d.jsx)("span",{className:"wasm-badge",children:"\u26a0\ufe0f JavaScript"}),(0,d.jsx)("span",{className:"wasm-info",children:"WASM not available"})]})]}),m&&(0,d.jsxs)("div",{className:"processing-indicator",children:[(0,d.jsx)("div",{className:"spinner"}),(0,d.jsxs)("div",{className:"processing-info",children:[(0,d.jsx)("span",{className:"processing-text",children:"Rendering transition..."}),(0,d.jsxs)("span",{className:"processing-percentage",children:[b,"%"]})]}),(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(b,"%")}})}),(0,d.jsxs)("p",{className:"processing-hint",children:[b<30&&(k&&M?"\u26a1 C++ WASM: Initializing...":"\ud83c\udfac Initializing video processing..."),b>=30&&b<70&&(k&&M?"\u26a1 C++ WASM: Applying effects...":"\u2728 Applying transition effects..."),b>=70&&b<95&&"\ud83d\udd04 Encoding merged video...",b>=95&&"\u2705 Finalizing..."]})]})]}),(0,d.jsxs)("div",{className:"transitions-actions",children:[(0,d.jsx)("button",{className:"cancel-btn",onClick:r,disabled:m||f,children:"Cancel"}),(0,d.jsx)("button",{className:"apply-btn",onClick:async()=>{if(S.length<2)alert("Please provide at least 2 video clips");else{p(!0),j(0);try{let e;k&&M?(console.log("\ud83d\ude80 Using C++ WASM transitions (10-20x faster)"),e=await Te.applyTransitionToClips(S[0],S[1],i,o,e=>{j(100*e)}),e=[e]):(console.log("\u26a0\ufe0f Using JavaScript transitions (fallback)"),e=await Ee.applyTransitionsToClips(S,i,o,e=>{j(e)})),j(100),setTimeout(()=>{p(!1),s(e)},300)}catch(e){console.error("Error applying transition:",e),alert("Failed to apply transition: "+e.message),p(!1),j(0)}}},disabled:m||f||S.length<2,children:m?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner-small"}),"Processing..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply Transition"]})})]})]})})};const Re=new class{constructor(){this.module=null,this.processor=null,this.isReady=!1}async init(){if(!this.isReady)try{const t="".concat("","/wasm/video-filters.js"),n="".concat("","/wasm/video-filters.wasm");console.log("\ud83d\udd04 Loading WASM Filters module from:",t);try{const e=await fetch(n,{method:"HEAD"});if(!e.ok)throw new Error("WASM file not accessible: ".concat(e.status));console.log("\u2705 WASM Filters binary is accessible")}catch(e){throw console.error("\u274c Cannot access WASM Filters binary:",e),new Error("WASM binary not found at ".concat(n))}if(window.createVideoFiltersModule||await new Promise((e,n)=>{const a=document.createElement("script");a.src=t,a.onload=()=>{console.log("\u2705 WASM Filters script loaded"),e()},a.onerror=e=>{console.error("\u274c Failed to load WASM Filters script:",e),n(new Error("Failed to load WASM module from ".concat(t)))},document.head.appendChild(a)}),!window.createVideoFiltersModule)throw new Error("createVideoFiltersModule not found after loading script");if(console.log("\ud83d\udd04 Initializing WASM Filters module..."),this.module=await window.createVideoFiltersModule({locateFile:e=>{const t=e.endsWith(".wasm")?"".concat("","/wasm/").concat(e):e;return console.log("\ud83d\udd0d locateFile called:",e,"->",t),t},print:e=>console.log("[WASM Filters]",e),printErr:e=>console.error("[WASM Filters]",e)}),console.log("\u2705 WASM Filters module created"),!this.module.VideoFilters)throw new Error("VideoFilters class not found in WASM module");this.processor=new this.module.VideoFilters,this.isReady=!0,console.log("\u2705 WASM Filters Module Initialized - 10-20x faster processing!")}catch(t){throw console.error("\u274c Failed to initialize WASM filters:",t),t}}async ensureReady(){this.isReady||await this.init()}setDimensions(e,t){this.processor&&this.processor.setDimensions(e,t)}allocateFrame(e){const t=e.data.length,n=this.module._malloc(t);return this.module.HEAPU8.set(e.data,n),n}freeFrame(e){this.module._free(e)}copyFromWasm(e,t){t.data.set(this.module.HEAPU8.subarray(e,e+t.data.length))}async applyChromaKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.ensureReady();const{color:n="#00ff00",tolerance:a=.4,softness:s=.1,spillSuppression:r=.3}=t,i=n.replace("#",""),l=parseInt(i.substr(0,2),16),o=parseInt(i.substr(2,2),16),c=parseInt(i.substr(4,2),16);this.setDimensions(e.width,e.height);const d=this.allocateFrame(e);try{return this.processor.chromaKey(d,l,o,c,a,s,r),this.copyFromWasm(d,e),e}finally{this.freeFrame(d)}}async applyColorGrade(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.ensureReady();const{brightness:n=0,contrast:a=0,saturation:s=0,hue:r=0}=t;this.setDimensions(e.width,e.height);const i=this.allocateFrame(e);try{return this.processor.colorGrade(i,n,a,s,r),this.copyFromWasm(i,e),e}finally{this.freeFrame(i)}}async applyBlur(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;await this.ensureReady(),this.setDimensions(e.width,e.height);const n=this.allocateFrame(e);try{return this.processor.blur(n,Math.round(t)),this.copyFromWasm(n,e),e}finally{this.freeFrame(n)}}async applySharpen(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;await this.ensureReady(),this.setDimensions(e.width,e.height);const n=this.allocateFrame(e);try{return this.processor.sharpen(n,t),this.copyFromWasm(n,e),e}finally{this.freeFrame(n)}}async applyVignette(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.ensureReady();const{intensity:n=.5,radius:a=.5}=t;this.setDimensions(e.width,e.height);const s=this.allocateFrame(e);try{return this.processor.vignette(s,n,a),this.copyFromWasm(s,e),e}finally{this.freeFrame(s)}}async applyNoiseReduction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;await this.ensureReady(),this.setDimensions(e.width,e.height);const n=this.allocateFrame(e);try{return this.processor.noiseReduction(n,Math.round(t)),this.copyFromWasm(n,e),e}finally{this.freeFrame(n)}}async applyLUT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.ensureReady();const{temperature:n=0,warmth:a=0,contrast:s=1,saturation:r=1,intensity:i=1}=t;this.setDimensions(e.width,e.height);const l=this.allocateFrame(e);try{return this.processor.applyLUT(l,n,a,s,r,i),this.copyFromWasm(l,e),e}finally{this.freeFrame(l)}}async applyFilters(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const n of t)switch(n.type){case"chromaKey":await this.applyChromaKey(e,n.options);break;case"colorGrade":await this.applyColorGrade(e,n.options);break;case"blur":await this.applyBlur(e,n.radius);break;case"sharpen":await this.applySharpen(e,n.amount);break;case"vignette":await this.applyVignette(e,n.options);break;case"noiseReduction":await this.applyNoiseReduction(e,n.strength);break;case"lut":await this.applyLUT(e,n.options)}return e}},Le=e=>{var t,n;let{recordings:s,onClose:r,onSave:i}=e;const[l,o]=(0,a.useState)([]),[u,h]=(0,a.useState)(null),[m,p]=(0,a.useState)([]),[f,g]=(0,a.useState)(0),[v,x]=(0,a.useState)(!1),[b,j]=(0,a.useState)(1),[y,w]=(0,a.useState)("select"),[S,N]=(0,a.useState)(!1),[k,C]=(0,a.useState)(0),[M,z]=(0,a.useState)(!1),[E,T]=(0,a.useState)(!1),[P,R]=(0,a.useState)(30),[L,D]=(0,a.useState)(0),[A,F]=(0,a.useState)([]),[B,I]=(0,a.useState)(-1),[O,V]=(0,a.useState)([]),[H,U]=(0,a.useState)(null),[_,q]=(0,a.useState)("none"),[W,Q]=(0,a.useState)({}),[G,K]=(0,a.useState)(!0),[$,Y]=(0,a.useState)(!0),[X,J]=(0,a.useState)(1),[Z,ee]=(0,a.useState)({resolution:"1920x1080",fps:30,bitrate:8e6,format:"mp4",codec:"h264"}),[te,ne]=(0,a.useState)({brightness:100,contrast:100,saturation:100,hue:0,blur:0,sharpen:0,vignette:0}),[ae,se]=(0,a.useState)({}),[re,ie]=(0,a.useState)(!0),[le,oe]=(0,a.useState)(!1),[ce,de]=(0,a.useState)(null),[ue,he]=(0,a.useState)(250),[me,pe]=(0,a.useState)(!1),[fe,ge]=(0,a.useState)(0),[ve,xe]=(0,a.useState)(0),[be,je]=(0,a.useState)([]),[ye,we]=(0,a.useState)(!1),[Se,Ne]=(0,a.useState)(10),[ke,Ce]=(0,a.useState)("16:9"),[Me,Ee]=(0,a.useState)(!1),[Te,Le]=(0,a.useState)(!1),[De,Ae]=(0,a.useState)(!1),[Fe,Be]=(0,a.useState)([]),[Ie,Oe]=(0,a.useState)(!1),[Ve,He]=(0,a.useState)(!0),[Ue,_e]=(0,a.useState)("Untitled Project"),[qe,We]=(0,a.useState)([{id:"video-1",type:"video",name:"Video Track 1",clips:[],visible:!0,locked:!1},{id:"audio-1",type:"audio",name:"Audio Track 1",clips:[],visible:!0,locked:!1},{id:"overlay-1",type:"overlay",name:"Overlay Track 1",clips:[],visible:!0,locked:!1}]),[Qe,Ge]=(0,a.useState)("video-1"),[Ke,$e]=(0,a.useState)(!1),[Ye,Xe]=(0,a.useState)([]),[Je,Ze]=(0,a.useState)({enabled:!1,color:"#00ff00",tolerance:.4,softness:.1}),[et,tt]=(0,a.useState)([]),[nt,at]=(0,a.useState)(!0),[st,rt]=(0,a.useState)(!1),[it,lt]=(0,a.useState)({fontSize:24,fontFamily:"Arial",color:"#ffffff",backgroundColor:"rgba(0,0,0,0.7)",position:"bottom"}),[ot,ct]=(0,a.useState)(!0),[dt,ut]=(0,a.useState)(!1),[ht,mt]=(0,a.useState)({enabled:!1,threshold:-20,reduction:.3,musicTrack:null}),[pt,ft]=(0,a.useState)([]),[gt,vt]=(0,a.useState)(null),[xt,bt]=(0,a.useState)([]),[jt,yt]=(0,a.useState)(null),[wt,St]=(0,a.useState)("rectangle"),[Nt,kt]=(0,a.useState)({}),[Ct,Mt]=(0,a.useState)(!1),[zt,Et]=(0,a.useState)(!0),[Tt,Pt]=(0,a.useState)({}),[Rt,Lt]=(0,a.useState)({enabled:!1,amount:.5,type:"spectral"}),[Dt,At]=(0,a.useState)("custom"),[Ft,Bt]=(0,a.useState)(!1),[It,Ot]=(0,a.useState)("move"),[Vt,Ht]=(0,a.useState)({}),[Ut,_t]=(0,a.useState)(!1),[qt,Wt]=(0,a.useState)(null),[Qt,Gt]=(0,a.useState)("linear"),[Kt,$t]=(0,a.useState)({}),[Yt,Xt]=(0,a.useState)({}),[Jt,Zt]=(0,a.useState)({}),[en,tn]=(0,a.useState)(!1),[nn,an]=(0,a.useState)(!0),[sn,rn]=(0,a.useState)(.1),[ln,on]=(0,a.useState)("select"),[cn,dn]=(0,a.useState)({}),[un,hn]=(0,a.useState)({}),[mn,pn]=(0,a.useState)(!1),[fn,gn]=(0,a.useState)(null),[vn,xn]=(0,a.useState)(!0),[bn,jn]=(0,a.useState)(.1),[yn,wn]=(0,a.useState)(!0),[Sn,Nn]=(0,a.useState)(0),[kn,Cn]=(0,a.useState)(60),[Mn,zn]=(0,a.useState)({enabled:!1,preset:"none",intensity:1,customLutUrl:null}),[En,Tn]=(0,a.useState)({spillSuppression:.5,edgeSmoothing:.3,lightWrap:!1,lightWrapIntensity:.2}),[Pn,Rn]=(0,a.useState)({enabled:!1,intensity:.5,samples:8,direction:"auto"}),[Ln,Dn]=(0,a.useState)({enabled:!1,regions:[],autoFaceDetect:!1,blockSize:16}),[An,Fn]=(0,a.useState)({enabled:!1,startZoom:1,endZoom:1.2,startX:0,startY:0,endX:0,endY:0,easing:"ease-in-out"}),[Bn,In]=(0,a.useState)({animations:[],shadows:!0,borders:!0,borderColor:"#ffffff",borderWidth:2}),[On,Vn]=(0,a.useState)({enabled:!1,type:"glitch",intensity:.5,frequency:.1,colorSeparation:!0,scanlines:!0,noise:.3}),[Hn,Un]=(0,a.useState)({enabled:!1,intensity:.3,size:1,colored:!1,vignette:!1,vignetteIntensity:.5}),_n={video:"#8b5cf6",audio:"#10b981",text:"#f59e0b",overlay:"#3b82f6",image:"#ec4899",effect:"#6366f1"},qn=((0,a.useRef)(null),(0,a.useRef)(null)),Wn=(0,a.useRef)(null),Qn=(0,a.useRef)(null),Gn=(0,a.useRef)(null),Kn=(0,a.useRef)(null),$n=(0,a.useRef)(null),Yn=[{id:"none",name:"None",filters:{brightness:100,contrast:100,saturation:100,hue:0}},{id:"cinematic",name:"Cinematic",filters:{brightness:95,contrast:110,saturation:85,hue:5}},{id:"vibrant",name:"Vibrant",filters:{brightness:105,contrast:115,saturation:130,hue:0}},{id:"vintage",name:"Vintage",filters:{brightness:110,contrast:90,saturation:70,hue:15}},{id:"blackwhite",name:"B&W",filters:{brightness:100,contrast:120,saturation:0,hue:0}},{id:"warm",name:"Warm Tone",filters:{brightness:105,contrast:100,saturation:110,hue:10}},{id:"cool",name:"Cool Tone",filters:{brightness:100,contrast:105,saturation:105,hue:-15}},{id:"dramatic",name:"Dramatic",filters:{brightness:85,contrast:140,saturation:90,hue:0}},{id:"pastel",name:"Pastel",filters:{brightness:115,contrast:80,saturation:60,hue:5}},{id:"high-contrast",name:"High Contrast",filters:{brightness:100,contrast:150,saturation:120,hue:0}}],Xn={custom:{name:"Custom",resolution:"1920x1080",fps:30,bitrate:8e6,format:"mp4",aspectRatio:"16:9"},youtube:{name:"YouTube 1080p",resolution:"1920x1080",fps:30,bitrate:8e6,format:"mp4",aspectRatio:"16:9"},youtube4k:{name:"YouTube 4K",resolution:"3840x2160",fps:60,bitrate:35e6,format:"mp4",aspectRatio:"16:9"},instagram:{name:"Instagram Post",resolution:"1080x1080",fps:30,bitrate:5e6,format:"mp4",aspectRatio:"1:1"},instagramStory:{name:"Instagram Story",resolution:"1080x1920",fps:30,bitrate:5e6,format:"mp4",aspectRatio:"9:16"},tiktok:{name:"TikTok",resolution:"1080x1920",fps:30,bitrate:5e6,format:"mp4",aspectRatio:"9:16"},twitter:{name:"Twitter",resolution:"1280x720",fps:30,bitrate:5e6,format:"mp4",aspectRatio:"16:9"},facebook:{name:"Facebook",resolution:"1280x720",fps:30,bitrate:4e6,format:"mp4",aspectRatio:"16:9"},linkedin:{name:"LinkedIn",resolution:"1920x1080",fps:30,bitrate:5e6,format:"mp4",aspectRatio:"16:9"},discord:{name:"Discord",resolution:"1920x1080",fps:30,bitrate:8e6,format:"mp4",aspectRatio:"16:9"}};(0,a.useEffect)(()=>{(async()=>{try{await Re.init(),ut(!0),console.log("\u2705 WASM Filters ready - 10-20x faster video processing!")}catch(e){console.warn("\u26a0\ufe0f WASM Filters not available, using JavaScript fallback:",e),ct(!1)}})()},[]),(0,a.useEffect)(()=>{if(s&&s.length>0&&0===l.length){const e=[{id:Date.now(),recording:s[0],startTime:0,endTime:s[0].duration||10,trimStart:0,trimEnd:s[0].duration||10,filters:c({},te),volume:100,speed:1}];o(e),ta(e)}Wn.current||(Wn.current=new(window.AudioContext||window.webkitAudioContext))},[s]),(0,a.useEffect)(()=>{const e=e=>{"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&(" "===e.key?(e.preventDefault(),x(e=>!e)):"<"===e.key||","===e.key?(e.preventDefault(),wa()):">"===e.key||"."===e.key?(e.preventDefault(),ya()):"ArrowLeft"===e.key?(e.preventDefault(),g(Math.max(0,f-(e.shiftKey?5:1)))):"ArrowRight"===e.key?(e.preventDefault(),g(Math.min(oa(),f+(e.shiftKey?5:1)))):"j"===e.key?(e.preventDefault(),x(!1),g(Math.max(0,f-.1))):"k"===e.key?(e.preventDefault(),x(!1)):"l"===e.key?(e.preventDefault(),x(!0)):"a"===e.key||"A"===e.key?(e.preventDefault(),on("select")):"b"===e.key||"B"===e.key?(e.preventDefault(),on("ripple")):"n"===e.key||"N"===e.key?(e.preventDefault(),on("roll")):"y"===e.key||"Y"===e.key?(e.preventDefault(),on("slip")):"u"===e.key||"U"===e.key?(e.preventDefault(),on("slide")):"m"===e.key||"M"===e.key?(e.preventDefault(),an(e=>!e)):"\\"===e.key||"|"===e.key?(e.preventDefault(),wn(e=>!e)):e.ctrlKey||e.metaKey?"z"!==e.key||e.shiftKey?"z"===e.key&&e.shiftKey||"y"===e.key?(e.preventDefault(),aa()):"s"===e.key?(e.preventDefault(),da()):"g"===e.key&&(e.preventDefault(),u&&za([u.id])):(e.preventDefault(),na()):"Delete"!==e.key&&"Backspace"!==e.key||u&&(e.preventDefault(),sa(u.id)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,u,v]),(0,a.useEffect)(()=>{if(!v)return;let e,t=Date.now();const n=()=>{const a=Date.now(),s=(a-t)/1e3;t=a,g(e=>{const t=e+s*X;let n=0;return l.forEach(e=>{n+=e.trimEnd-e.trimStart}),t>=n?(x(!1),n):t}),e=requestAnimationFrame(n)};return e=requestAnimationFrame(n),()=>{e&&cancelAnimationFrame(e)}},[v,X,l]),(0,a.useEffect)(()=>{D(Math.floor(f*P)),qn.current&&l.length>0&&Jn()},[l,f,te,ce,P]);const Jn=()=>{const e=qn.current;if(!e)return;const t=e.getContext("2d");e.width=1920,e.height=1080;let n=0,a=null,s=0;for(const i of l){const e=i.trimEnd-i.trimStart;if(f>=n&&f<n+e){a=i,s=f-n+i.trimStart;break}n+=e}if(!a)return;const r=document.createElement("video");r.src=a.recording.url,r.currentTime=s,r.onseeked=()=>{t.clearRect(0,0,e.width,e.height);const n=a.filters||te;t.filter="\n        brightness(".concat(n.brightness,"%)\n        contrast(").concat(n.contrast,"%)\n        saturate(").concat(n.saturation,"%)\n        hue-rotate(").concat(n.hue,"deg)\n        blur(").concat(n.blur,"px)\n      "),t.drawImage(r,0,0,e.width,e.height),n.vignette>0&&Zn(t,e.width,e.height,n.vignette),ce&&ea(t,e.width,e.height),t.filter="none"}},Zn=(e,t,n,a)=>{const s=e.createRadialGradient(t/2,n/2,0,t/2,n/2,Math.sqrt(t*t+n*n)/2);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, ".concat(a/100,")")),e.fillStyle=s,e.fillRect(0,0,t,n)},ea=(e,t,n)=>{if(!ce)return;let a,s;e.save(),e.globalAlpha=ce.opacity/100,e.font="".concat(ce.size,"px ").concat(ce.font||"Arial"),e.fillStyle=ce.color||"#ffffff",e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=4,e.shadowOffsetX=2,e.shadowOffsetY=2;const r=20,i=e.measureText(ce.text).width;switch(ce.position){case"top-left":a=r,s=r+ce.size;break;case"top-right":a=t-i-r,s=r+ce.size;break;case"bottom-left":a=r,s=n-r;break;case"bottom-right":a=t-i-r,s=n-r;break;default:a=(t-i)/2,s=n/2}e.fillText(ce.text,a,s),e.restore()},ta=e=>{const t=A.slice(0,B+1);t.push(JSON.parse(JSON.stringify(e))),t.length>50&&t.shift(),F(t),I(t.length-1)},na=()=>{B>0&&(I(B-1),o(JSON.parse(JSON.stringify(A[B-1]))))},aa=()=>{B<A.length-1&&(I(B+1),o(JSON.parse(JSON.stringify(A[B+1]))))},sa=e=>{const t=l.filter(t=>t.id!==e);o(t),ta(t),(null===u||void 0===u?void 0:u.id)===e&&h(null),p(t=>t.filter(t=>t!==e))},ra=()=>{const e={id:Date.now(),text:"Your Text Here",startTime:f,endTime:f+3,position:{x:50,y:50},style:{fontSize:48,fontFamily:"Arial",color:"#ffffff",backgroundColor:"transparent",bold:!1,italic:!1,underline:!1,shadow:!0,outline:!1,opacity:100},animation:"none"};V([...O,e]),U(e)},ia=(e,t)=>{V(O.map(n=>n.id===e?c(c({},n),t):n))},la=(e,t)=>{const n=l.map(n=>{if(n.id===e){const e=(n.trimEnd-n.trimStart)/t;return c(c({},n),{},{speed:t,endTime:n.startTime+e})}return n});o(n),ta(n)},oa=()=>l.reduce((e,t)=>e+(t.trimEnd-t.trimStart),0),ca=async e=>new Promise(t=>{new Audio(e).addEventListener("loadedmetadata",()=>{t(80+40*Math.random())})}),da=async()=>{N(!0),C(0);const e=document.createElement("canvas"),t=e.getContext("2d");e.width=1920,e.height=1080;const n=e.captureStream(30),a=new MediaRecorder(n,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:8e6}),s=[];a.ondataavailable=e=>s.push(e.data),a.onstop=()=>{const e=new Blob(s,{type:"video/webm"}),t={blob:e,url:URL.createObjectURL(e),name:"edited_video",timestamp:Date.now(),size:e.size,duration:oa()};N(!1),i(t)},a.start();let r=0;const o=oa(),c=async()=>{if(r>=o)return void a.stop();let n=0,s=null,i=0,d=null,u=0;for(let e=0;e<l.length;e++){const t=l[e],a=t.trimEnd-t.trimStart;if(r>=n&&r<n+a){s=t,i=r-n+t.trimStart;const o=ae[t.id];if(o&&e<l.length-1){const t=r-n;a-t<o.duration&&(d=l[e+1],u=(o.duration-(a-t))/o.duration)}break}n+=a}s&&(await ua(t,e,s,i,d,u),C(r/o*100),r+=1/30,requestAnimationFrame(c))};c()},ua=async(e,t,n,a,s,r)=>{const i=document.createElement("video");i.src=n.recording.url,i.currentTime=a,await new Promise(e=>{i.onseeked=e});const l=n.filters||te;if(e.filter="\n      brightness(".concat(l.brightness,"%)\n      contrast(").concat(l.contrast,"%)\n      saturate(").concat(l.saturation,"%)\n      hue-rotate(").concat(l.hue,"deg)\n      blur(").concat(l.blur,"px)\n    "),s&&r>0){const n=document.createElement("video");n.src=s.recording.url,n.currentTime=s.trimStart,await new Promise(e=>{n.onseeked=e}),e.globalAlpha=1-r,e.drawImage(i,0,0,t.width,t.height),e.globalAlpha=r,e.drawImage(n,0,0,t.width,t.height),e.globalAlpha=1}else{if(An.enabled){const s=(a-n.trimStart)/(n.trimEnd-n.trimStart);Ba(e,t.width,t.height,s,An.startZoom,An.endZoom,An.startX,An.startY,An.endX,An.endY,An.easing)}e.drawImage(i,0,0,t.width,t.height)}e.filter="none",Mn.enabled&&"none"!==Mn.preset&&await La(e,t.width,t.height,Mn.preset,Mn.intensity),Je.enabled&&await Da(e,t.width,t.height,Je.color,Je.tolerance,Je.softness,En),Pn.enabled&&Aa(e,t.width,t.height,Pn.intensity,Pn.samples,Pn.direction),On.enabled&&Ia(e,t.width,t.height,On.type,On.intensity,On.colorSeparation,On.scanlines,On.noise),Hn.enabled&&Oa(e,t.width,t.height,Hn.intensity,Hn.size,Hn.colored,Hn.vignette,Hn.vignetteIntensity),Ln.enabled&&Ln.regions.length>0&&Fa(e,t.width,t.height,Ln.regions,Ln.blockSize),l.vignette>0&&Zn(e,t.width,t.height,l.vignette),ce&&ea(e,t.width,t.height)},ha=e=>{const t=Math.floor(e/60),n=Math.floor(e%60),a=Math.floor(e%1*100);return"".concat(t,":").concat(n.toString().padStart(2,"0"),".").concat(a.toString().padStart(2,"0"))},ma=()=>Math.floor(oa()*P),pa=e=>{je(be.filter(t=>t.id!==e))},fa=e=>{if(!me)return;const t=fe-e.clientY,n=Math.max(150,Math.min(600,ve+t));he(n)},ga=()=>{pe(!1)};(0,a.useEffect)(()=>{if(me)return window.addEventListener("mousemove",fa),window.addEventListener("mouseup",ga),document.body.style.cursor="ns-resize",document.body.style.userSelect="none",()=>{window.removeEventListener("mousemove",fa),window.removeEventListener("mouseup",ga),document.body.style.cursor="",document.body.style.userSelect=""}},[me,fe,ve,ue]);const va=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video";const t={id:"".concat(e,"-").concat(Date.now()),type:e,name:"".concat(e.charAt(0).toUpperCase()+e.slice(1)," Track ").concat(qe.filter(t=>t.type===e).length+1),clips:[],visible:!0,locked:!1};We([...qe,t])},xa=e=>{const t=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:255,b:0}},ba=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rectangle";const t={id:Date.now(),type:e,x:100,y:100,width:"line"===e||"arrow"===e?150:100,height:"line"===e||"arrow"===e?2:100,color:"#8b5cf6",strokeWidth:3,filled:"line"!==e&&"arrow"!==e,opacity:.8,startTime:f,endTime:f+5,rotation:0};bt([...xt,t]),yt(t.id)},ja=(e,t)=>{bt(xt.map(n=>n.id===e?c(c({},n),t):n))},ya=()=>{const e=1/P,t=Math.min(oa(),f+e);g(t),D(Math.floor(t*P))},wa=()=>{const e=1/P,t=Math.max(0,f-e);g(t),D(Math.floor(t*P))},Sa=e=>{const t=Math.floor(e*P),n=t%P,a=Math.floor(t/P),s=a%60,r=Math.floor(a/60),i=r%60,l=Math.floor(r/60);return"".concat(String(l).padStart(2,"0"),":").concat(String(i).padStart(2,"0"),":").concat(String(s).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))},Na=(e,t,n,a)=>{const s=c({},W);s[e]||(s[e]={}),s[e][t]||(s[e][t]=[]),s[e][t].push({id:Date.now(),time:n,value:a,curve:Qt,handleIn:{x:-.5,y:0},handleOut:{x:.5,y:0}}),s[e][t].sort((e,t)=>e.time-t.time),Q(s)},ka=(e,t)=>{Xt(n=>c(c({},n),{},{[e]:((n[e]||0)+t)%360}))},Ca=(e,t)=>{Zt(n=>{const a=n[e]||{horizontal:!1,vertical:!1};return c(c({},n),{},{[e]:c(c({},a),{},{[t]:!a[t]})})})},Ma=(e,t)=>{Ht(n=>c(c({},n),{},{[e]:c(c({},n[e]||{}),t)}))},za=e=>{const t="group-".concat(Date.now()),n=c(c({},cn),{},{[t]:{id:t,name:"Group ".concat(Object.keys(cn).length+1),clipIds:e,color:"hsl(".concat(360*Math.random(),", 70%, 60%)")}});return dn(n),t},Ea=e=>{const t=c({},cn);delete t[e],dn(t)},Ta=e=>Object.values(cn).find(t=>t.clipIds.includes(e)),Pa=async(e,t)=>{if(!t.current)return;const n=t.current.getBoundingClientRect(),a=e.clientX-n.left,s=oa(),r=a/n.width*s;let i=0,o=null,d=0;for(const c of l){const e=c.trimEnd-c.trimStart;if(r>=i&&r<i+e){o=c,d=c.trimStart+(r-i);break}i+=e}let u=null;if(o){const e="".concat(o.id,"-").concat(Math.floor(10*d));Tt[e]?u=Tt[e]:(async(e,t)=>{const n="".concat(e.id,"-").concat(Math.floor(10*t));if(Tt[n])return Tt[n];try{const a=document.createElement("video");return a.src=e.recording.url,a.muted=!0,a.playsInline=!0,await new Promise((e,s)=>{const r=setTimeout(()=>{a.src="",s(new Error("Thumbnail generation timeout"))},3e3),i=()=>{clearTimeout(r),a.src="",a.load()};a.addEventListener("loadeddata",()=>{const e=Math.min(Math.max(0,t),a.duration-.1);a.currentTime=e},{once:!0}),a.addEventListener("seeked",()=>{try{const t=document.createElement("canvas");t.width=160,t.height=90,t.getContext("2d").drawImage(a,0,0,160,90);const s=t.toDataURL("image/jpeg",.7);Pt(e=>c(c({},e),{},{[n]:s})),i(),e(s)}catch(t){i(),s(t)}},{once:!0}),a.addEventListener("error",e=>{i(),s(new Error("Failed to load video"))},{once:!0}),a.load()})}catch(a){return console.warn("Thumbnail generation failed:",a.message),null}})(o,d).then(e=>{e&&gn(t=>{var n;return t&&(null===(n=t.clip)||void 0===n?void 0:n.id)===o.id?c(c({},t),{},{thumbnail:e}):t})}).catch(e=>{console.debug("Thumbnail generation failed:",e.message)})}gn({time:r,x:e.clientX,y:e.clientY,clip:o,thumbnail:u})},Ra={cinematic:{name:"Cinematic",description:"Film-like color grading",adjustments:{contrast:1.2,saturation:1.1,shadows:-10,highlights:10}},vintage:{name:"Vintage",description:"Retro film look",adjustments:{contrast:.9,saturation:.7,warmth:15,grain:.3}},cool:{name:"Cool",description:"Blue/cyan tint",adjustments:{temperature:-15,tint:5,saturation:1.1}},warm:{name:"Warm",description:"Orange/yellow tint",adjustments:{temperature:15,tint:-5,saturation:1.15}},dramatic:{name:"Dramatic",description:"High contrast, desaturated",adjustments:{contrast:1.4,saturation:.6,blacks:-20,highlights:15}}},La=async(e,t,n,a,s)=>{var r;if(!a||"none"===a)return;if(ot&&dt)try{var i;const r=e.getImageData(0,0,t,n),l=(null===(i=Ra[a])||void 0===i?void 0:i.adjustments)||{};return await Re.applyLUT(r,{temperature:l.temperature||0,warmth:l.warmth||0,contrast:l.contrast||1,saturation:l.saturation||1,intensity:s}),void e.putImageData(r,0,0)}catch(d){console.warn("WASM LUT failed, falling back to JS:",d)}const l=e.getImageData(0,0,t,n),o=l.data,c=(null===(r=Ra[a])||void 0===r?void 0:r.adjustments)||{};for(let u=0;u<o.length;u+=4){let e=o[u],t=o[u+1],n=o[u+2];if(c.contrast){const a=c.contrast;e=255*((e/255-.5)*a+.5),t=255*((t/255-.5)*a+.5),n=255*((n/255-.5)*a+.5)}if(c.saturation){const a=.2989*e+.587*t+.114*n,s=c.saturation;e=a+s*(e-a),t=a+s*(t-a),n=a+s*(n-a)}if(c.temperature){const t=c.temperature/100;e+=50*t,n-=50*t}if(c.warmth){const n=c.warmth/100;e+=30*n,t+=15*n}o[u]=e*s+o[u]*(1-s),o[u+1]=t*s+o[u+1]*(1-s),o[u+2]=n*s+o[u+2]*(1-s),o[u]=Math.max(0,Math.min(255,o[u])),o[u+1]=Math.max(0,Math.min(255,o[u+1])),o[u+2]=Math.max(0,Math.min(255,o[u+2]))}e.putImageData(l,0,0)},Da=async(e,t,n,a,s,r,i)=>{if(ot&&dt)try{const l=e.getImageData(0,0,t,n);return await Re.applyChromaKey(l,{color:a,tolerance:s,softness:r,spillSuppression:(null===i||void 0===i?void 0:i.spillSuppression)||.3}),void e.putImageData(l,0,0)}catch(d){console.warn("WASM chroma key failed, falling back to JS:",d)}const l=e.getImageData(0,0,t,n),o=l.data,c=xa(a);for(let u=0;u<o.length;u+=4){const e=o[u],t=o[u+1],n=o[u+2],l=Math.sqrt(Math.pow(e-c.r,2)+Math.pow(t-c.g,2)+Math.pow(n-c.b,2))/441.67;let d=1;if(l<s?d=0:l<s+r&&(d=(l-s)/r),i.spillSuppression>0&&d>0){const e=Math.max(0,1-l/s)*i.spillSuppression;a.toLowerCase().includes("00ff00")||a.toLowerCase().includes("green")?o[u+1]=o[u+1]*(1-.5*e):(a.toLowerCase().includes("0000ff")||a.toLowerCase().includes("blue"))&&(o[u+2]=o[u+2]*(1-.5*e))}i.edgeSmoothing>0&&d>0&&d<1&&(d=Math.pow(d,1/(1+i.edgeSmoothing))),o[u+3]=255*d}e.putImageData(l,0,0)},Aa=(e,t,n,a,s,r)=>{const i=e.getImageData(0,0,t,n),l=e.createImageData(t,n),o=20*a;for(let c=0;c<n;c++)for(let e=0;e<t;e++){let a=0,d=0,u=0,h=0;for(let l=0;l<s;l++){const m=l/(s-1)-.5;let p=e,f=c;"horizontal"!==r&&"auto"!==r||(p+=m*o),"vertical"!==r&&"auto"!==r||(f+=m*o*.5),p=Math.max(0,Math.min(t-1,Math.floor(p))),f=Math.max(0,Math.min(n-1,Math.floor(f)));const g=4*(f*t+p);a+=i.data[g],d+=i.data[g+1],u+=i.data[g+2],h+=i.data[g+3]}const m=4*(c*t+e);l.data[m]=a/s,l.data[m+1]=d/s,l.data[m+2]=u/s,l.data[m+3]=h/s}e.putImageData(l,0,0)},Fa=(e,t,n,a,s)=>{a.forEach(a=>{const r=a.x*t,i=a.y*n,l=a.width*t,o=a.height*n,c=a.blockSize||s;for(let t=i;t<i+o;t+=c)for(let n=r;n<r+l;n+=c){const a=e.getImageData(n,t,Math.min(c,r+l-n),Math.min(c,i+o-t));let s=0,d=0,u=0,h=0;for(let e=0;e<a.data.length;e+=4)s+=a.data[e],d+=a.data[e+1],u+=a.data[e+2],h++;s=Math.floor(s/h),d=Math.floor(d/h),u=Math.floor(u/h),e.fillStyle="rgb(".concat(s,", ").concat(d,", ").concat(u,")"),e.fillRect(n,t,Math.min(c,r+l-n),Math.min(c,i+o-t))}})},Ba=(e,t,n,a,s,r,i,l,o,c,d)=>{let u=a;"ease-in"===d?u*=u:"ease-out"===d?u=1-Math.pow(1-u,2):"ease-in-out"===d&&(u=u<.5?2*u*u:1-Math.pow(-2*u+2,2)/2);const h=s+(r-s)*u,m=i+(o-i)*u,p=l+(c-l)*u,f=e.getImageData(0,0,t,n);e.clearRect(0,0,t,n),e.save(),e.translate(t/2+m,n/2+p),e.scale(h,h),e.translate(-t/2,-n/2);const g=document.createElement("canvas");g.width=t,g.height=n;g.getContext("2d").putImageData(f,0,0),e.drawImage(g,0,0),e.restore()},Ia=(e,t,n,a,s,r,i,l)=>{const o=e.getImageData(0,0,t,n),c=o.data;if(r){const e=Math.floor(10*s),t=new Uint8ClampedArray(c);for(let n=0;n<c.length;n+=4){const a=Math.min(c.length-4,Math.max(0,n+4*e));t[n]=c[a],t[n+2]=c[Math.max(0,n-4*e)+2]}c.set(t)}if("glitch"===a&&Math.random()<.5*s){const e=Math.floor(20*Math.random()+5),a=Math.floor(Math.random()*n),r=Math.floor(50*(Math.random()-.5)*s);for(let s=a;s<Math.min(a+e,n);s++)for(let e=0;e<t;e++){const n=4*(s*t+Math.max(0,Math.min(t-1,e+r))),a=4*(s*t+e);c[a]=c[n],c[a+1]=c[n+1],c[a+2]=c[n+2]}}if(i&&"vhs"===a)for(let d=0;d<n;d+=2)for(let e=0;e<t;e++){const n=4*(d*t+e);c[n]*=.8,c[n+1]*=.8,c[n+2]*=.8}if(l>0)for(let d=0;d<c.length;d+=4)if(Math.random()<.1*l){const e=100*(Math.random()-.5);c[d]+=e,c[d+1]+=e,c[d+2]+=e}e.putImageData(o,0,0)},Oa=(e,t,n,a,s,r,i,l)=>{const o=e.getImageData(0,0,t,n),c=o.data;for(let d=0;d<c.length;d+=4){const e=(Math.random()-.5)*a*50;r?(c[d]+=e*(.5*Math.random()+.5),c[d+1]+=e*(.5*Math.random()+.5),c[d+2]+=e*(.5*Math.random()+.5)):(c[d]+=e,c[d+1]+=e,c[d+2]+=e)}if(i){const e=t/2,a=n/2,s=Math.sqrt(e*e+a*a);for(let r=0;r<n;r++)for(let n=0;n<t;n++){const i=n-e,o=r-a,d=1-Math.sqrt(i*i+o*o)/s*l,u=4*(r*t+n);c[u]*=d,c[u+1]*=d,c[u+2]*=d}}e.putImageData(o,0,0)},Va=[{value:"16:9",label:"16:9 (Widescreen)",width:16,height:9},{value:"9:16",label:"9:16 (Vertical)",width:9,height:16},{value:"1:1",label:"1:1 (Square)",width:1,height:1},{value:"4:3",label:"4:3 (Standard)",width:4,height:3},{value:"21:9",label:"21:9 (Ultrawide)",width:21,height:9},{value:"2.35:1",label:"2.35:1 (Cinematic)",width:2.35,height:1}];(0,a.useEffect)(()=>{if(!Ve)return;const e=setInterval(()=>{const e={name:Ue,timeline:l,markers:be,filters:te,textOverlays:O,watermark:ce,aspectRatio:ke,exportSettings:Z,lastSaved:(new Date).toISOString()};localStorage.setItem("avep_autosave",JSON.stringify(e)),console.log("\u2705 Project auto-saved")},3e4);return()=>clearInterval(e)},[Ve,Ue,l,be,te,O,ce,ke,Z]);const Ha=e=>{oe(!0),qa(e)},Ua=e=>{le&&qa(e)},_a=()=>{oe(!1)},qa=e=>{if(!Qn.current)return;const t=Qn.current.getBoundingClientRect(),n=Math.max(0,Math.min(e.clientX-t.left,t.width))/t.width*oa();g(Math.max(0,Math.min(oa(),n)))};a.useEffect(()=>{if(le)return document.addEventListener("mousemove",Ua),document.addEventListener("mouseup",_a),document.body.style.cursor="grabbing",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",Ua),document.removeEventListener("mouseup",_a),document.body.style.cursor="",document.body.style.userSelect=""}},[le]);return(0,d.jsxs)("div",{className:"advanced-video-editor-overlay",children:[(0,d.jsxs)("div",{className:"advanced-video-editor",children:[(0,d.jsxs)("div",{className:"editor-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Advanced Video Editor Pro",(0,d.jsx)("span",{className:"project-name-badge",children:Ue}),dt&&ot&&(0,d.jsx)("span",{className:"wasm-badge",title:"C++ WASM Acceleration Active - 10-20x Faster",children:"\u26a1 C++ WASM"}),!dt&&(0,d.jsx)("span",{className:"wasm-badge fallback",title:"Using JavaScript - WASM not available",children:"\u26a0\ufe0f JavaScript"})]}),(0,d.jsxs)("div",{className:"editor-toolbar",children:[(0,d.jsxs)("div",{className:"toolbar-group",children:[(0,d.jsx)("button",{onClick:()=>we(!ye),className:"toolbar-btn ".concat(ye?"active":""),title:"Toggle Grid",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 3v8h8V3H3zm6 6H5V5h4v4zm-6 4v8h8v-8H3zm6 6H5v-4h4v4zm4-16v8h8V3h-8zm6 6h-4V5h4v4zm-6 4v8h8v-8h-8zm6 6h-4v-4h4v4z"})})}),(0,d.jsx)("button",{onClick:()=>Ee(!Me),className:"toolbar-btn ".concat(Me?"active":""),title:"Toggle Safe Zones",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M21 5v6.59l-3-3.01-4 4.01-4-4-4 4-3-3.01V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2zm-3 6.42l3 3.01V19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-6.58l3 2.99 4-4 4 4 4-3.99z"})})}),(0,d.jsx)("button",{onClick:()=>Le(!Te),className:"toolbar-btn ".concat(Te?"active":""),title:"Split View",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 3h8v18H3V3zm10 0h8v18h-8V3z"})})}),(0,d.jsx)("button",{onClick:()=>Ae(!De),className:"toolbar-btn ".concat(De?"active":""),title:"Compare Mode",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2v2zm0 15H5l5-6v6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})})]}),(0,d.jsx)("div",{className:"toolbar-group",children:(0,d.jsx)("select",{value:ke,onChange:e=>Ce(e.target.value),className:"aspect-ratio-select",children:Va.map(e=>(0,d.jsx)("option",{value:e.value,children:e.label},e.value))})}),(0,d.jsxs)("div",{className:"toolbar-group",children:[(0,d.jsxs)("button",{onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#8b5cf6";const a={id:Date.now(),time:e||f,label:t||"Marker ".concat(be.length+1),color:n};je([...be,a].sort((e,t)=>e.time-t.time))}(),className:"toolbar-btn",title:"Add Marker (M)",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Add Marker"]}),(0,d.jsxs)("label",{className:"toolbar-checkbox",children:[(0,d.jsx)("input",{type:"checkbox",checked:Ve,onChange:e=>He(e.target.checked)}),"Auto-save"]})]})]}),(0,d.jsxs)("div",{className:"editor-actions",children:[(0,d.jsx)("button",{className:"sidebar-toggle-btn",onClick:()=>wn(!yn),title:yn?"Hide Tools Panel":"Show Tools Panel",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),(0,d.jsxs)("div",{className:"history-controls",children:[(0,d.jsx)("button",{className:"undo-btn",onClick:na,disabled:B<=0,title:"Undo (Ctrl+Z)",children:"\u21b6"}),(0,d.jsx)("button",{className:"redo-btn",onClick:aa,disabled:B>=A.length-1,title:"Redo (Ctrl+Y)",children:"\u21b7"})]}),(0,d.jsx)("button",{className:"export-btn",onClick:da,disabled:S,children:S?"Exporting... ".concat(Math.round(k),"%"):"\ud83d\udce4 Export Video"}),(0,d.jsx)("button",{className:"close-btn",onClick:r,children:"\u2715"})]})]}),(0,d.jsxs)("div",{className:"editor-workspace ".concat(yn?"":"sidebar-collapsed"),children:[(0,d.jsx)("div",{className:"preview-section",children:(0,d.jsxs)("div",{className:"preview-container",style:(()=>{const e=Va.find(e=>e.value===ke);if(!e)return{};const t=e.height/e.width*100;return{paddingBottom:"".concat(t,"%")}})(),children:[(0,d.jsx)("canvas",{ref:qn,className:"preview-canvas"}),ye&&(0,d.jsx)("div",{className:"grid-overlay",style:{backgroundImage:"\n                    repeating-linear-gradient(0deg, rgba(255,255,255,0.1) 0px, transparent 1px, transparent ".concat(Se,"%, rgba(255,255,255,0.1) ").concat(Se,"%),\n                    repeating-linear-gradient(90deg, rgba(255,255,255,0.1) 0px, transparent 1px, transparent ").concat(Se,"%, rgba(255,255,255,0.1) ").concat(Se,"%)\n                  ")}}),Me&&(0,d.jsxs)("div",{className:"safe-zones",children:[(0,d.jsx)("div",{className:"action-safe"}),(0,d.jsx)("div",{className:"title-safe"}),(0,d.jsx)("div",{className:"center-marker"})]}),Te&&(0,d.jsx)("div",{className:"split-divider"})]})}),yn&&(0,d.jsxs)("div",{className:"tools-sidebar",children:[(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udcc1 Import Media"}),(0,d.jsxs)("div",{className:"import-buttons",children:[(0,d.jsx)("button",{className:"import-btn import-video-btn",onClick:()=>{var e;return null===(e=Kn.current)||void 0===e?void 0:e.click()},title:"Import Video Files",children:"\ud83c\udfa5 Import Video"}),(0,d.jsx)("button",{className:"import-btn import-image-btn",onClick:()=>{var e;return null===(e=$n.current)||void 0===e?void 0:e.click()},title:"Import Image Files",children:"\ud83d\uddbc\ufe0f Import Image"})]}),(0,d.jsx)("input",{ref:Kn,type:"file",accept:"video/*",multiple:!0,style:{display:"none"},onChange:async e=>{const t=Array.from(e.target.files);for(const a of t)if(a.type.startsWith("video/"))try{const e=URL.createObjectURL(a),t=document.createElement("video");t.src=e,await new Promise(n=>{t.onloadedmetadata=()=>{const s={id:Date.now()+Math.random(),type:"video",name:a.name,file:a,blob:a,url:e,duration:t.duration,width:t.videoWidth,height:t.videoHeight,size:a.size,importedAt:(new Date).toISOString()};Xe(e=>[...e,s]),n()}})}catch(n){console.error("Error importing video:",n),alert("Failed to import ".concat(a.name))}e.target.value=""}}),(0,d.jsx)("input",{ref:$n,type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:async e=>{const t=Array.from(e.target.files);for(const a of t)if(a.type.startsWith("image/"))try{const e=URL.createObjectURL(a),t=new Image;t.src=e,await new Promise(n=>{t.onload=()=>{const s={id:Date.now()+Math.random(),type:"image",name:a.name,file:a,url:e,duration:5,width:t.width,height:t.height,size:a.size,importedAt:(new Date).toISOString()};Xe(e=>[...e,s]),n()}})}catch(n){console.error("Error importing image:",n),alert("Failed to import ".concat(a.name))}e.target.value=""}}),Ye.length>0&&(0,d.jsxs)("div",{className:"imported-media-library",children:[(0,d.jsxs)("h4",{children:["Media Library (",Ye.length,")"]}),(0,d.jsx)("div",{className:"media-grid",children:Ye.map(e=>(0,d.jsxs)("div",{className:"media-item",children:[(0,d.jsxs)("div",{className:"media-preview",children:["video"===e.type?(0,d.jsx)("video",{src:e.url}):(0,d.jsx)("img",{src:e.url,alt:e.name}),(0,d.jsxs)("div",{className:"media-overlay",children:[(0,d.jsx)("button",{className:"add-to-timeline-btn",onClick:()=>(e=>{const t={id:Date.now()+Math.random(),recording:{url:e.url,duration:e.duration,name:e.name,type:e.type},trimStart:0,trimEnd:e.duration,filters:c({},te),volume:100,speed:1,startTime:oa(),mediaType:e.type,width:e.width,height:e.height};o([...l,t])})(e),title:"Add to Timeline",children:"\u2795"}),(0,d.jsx)("button",{className:"remove-media-btn",onClick:()=>(e=>{const t=Ye.find(t=>t.id===e);t&&(URL.revokeObjectURL(t.url),Xe(Ye.filter(t=>t.id!==e)))})(e.id),title:"Remove",children:"\ud83d\uddd1\ufe0f"})]})]}),(0,d.jsxs)("div",{className:"media-info",children:[(0,d.jsx)("div",{className:"media-name",title:e.name,children:e.name.length>15?e.name.substring(0,15)+"...":e.name}),(0,d.jsxs)("div",{className:"media-meta",children:["video"===e.type?"\ud83c\udfa5":"\ud83d\uddbc\ufe0f"," ",Math.round(e.duration),"s"]})]})]},e.id))})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"Tools"}),(0,d.jsxs)("div",{className:"tool-buttons",children:[(0,d.jsx)("button",{className:"select"===y?"active":"",onClick:()=>w("select"),title:"Select (V) - Click: Select one, Ctrl+Click: Multi-select, Shift+Click: Range select",children:"\u27a4"}),(0,d.jsx)("button",{className:"cut"===y?"active":"",onClick:()=>w("cut"),title:"Cut (C)",children:"\u2702"}),(0,d.jsx)("button",{className:"trim"===y?"active":"",onClick:()=>w("trim"),title:"Trim (T)",children:"\u2702"}),(0,d.jsx)("button",{className:"text"===y?"active":"",onClick:()=>{w("text"),ra()},title:"Add Text (X)",children:"T"}),(0,d.jsx)("button",{onClick:()=>z(!0),title:"Audio Effects",children:"\ud83c\udfb5"}),(0,d.jsx)("button",{onClick:()=>T(!0),title:"Transitions ".concat(m.length>=2?"(".concat(m.length," clips selected)"):"(select 2+ clips)"),disabled:m.length<2,style:{opacity:m.length<2?.5:1},children:"\ud83c\udfac"})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"Color Grading"}),(0,d.jsx)("select",{className:"preset-select",value:_,onChange:e=>(e=>{const t=Yn.find(t=>t.id===e);if(t&&(ne(c(c({},te),t.filters)),q(e),u)){const e=l.map(e=>e.id===u.id?c(c({},e),{},{filters:c(c({},e.filters),t.filters)}):e);o(e),ta(e)}})(e.target.value),children:Yn.map(e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"Filters & Effects"}),(0,d.jsxs)("div",{className:"filter-controls",children:[(0,d.jsxs)("label",{children:["Brightness: ",te.brightness,"%",(0,d.jsx)("input",{type:"range",min:"0",max:"200",value:te.brightness,onChange:e=>ne(c(c({},te),{},{brightness:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Contrast: ",te.contrast,"%",(0,d.jsx)("input",{type:"range",min:"0",max:"200",value:te.contrast,onChange:e=>ne(c(c({},te),{},{contrast:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Saturation: ",te.saturation,"%",(0,d.jsx)("input",{type:"range",min:"0",max:"200",value:te.saturation,onChange:e=>ne(c(c({},te),{},{saturation:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Hue: ",te.hue,"\xb0",(0,d.jsx)("input",{type:"range",min:"-180",max:"180",value:te.hue,onChange:e=>ne(c(c({},te),{},{hue:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Blur: ",te.blur,"px",(0,d.jsx)("input",{type:"range",min:"0",max:"20",value:te.blur,onChange:e=>ne(c(c({},te),{},{blur:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Vignette: ",te.vignette,"%",(0,d.jsx)("input",{type:"range",min:"0",max:"100",value:te.vignette,onChange:e=>ne(c(c({},te),{},{vignette:parseInt(e.target.value)}))})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"Watermark"}),(0,d.jsx)("button",{onClick:()=>de(ce?null:{text:"Nebula",position:"bottom-right",size:24,color:"#ffffff",opacity:80}),children:ce?"Remove Watermark":"Add Watermark"}),ce&&(0,d.jsxs)("div",{className:"watermark-controls",children:[(0,d.jsx)("input",{type:"text",value:ce.text,onChange:e=>de(c(c({},ce),{},{text:e.target.value})),placeholder:"Watermark text"}),(0,d.jsxs)("select",{value:ce.position,onChange:e=>de(c(c({},ce),{},{position:e.target.value})),children:[(0,d.jsx)("option",{value:"top-left",children:"Top Left"}),(0,d.jsx)("option",{value:"top-right",children:"Top Right"}),(0,d.jsx)("option",{value:"bottom-left",children:"Bottom Left"}),(0,d.jsx)("option",{value:"bottom-right",children:"Bottom Right"}),(0,d.jsx)("option",{value:"center",children:"Center"})]}),(0,d.jsxs)("label",{children:["Opacity: ",ce.opacity,"%",(0,d.jsx)("input",{type:"range",min:"0",max:"100",value:ce.opacity,onChange:e=>de(c(c({},ce),{},{opacity:parseInt(e.target.value)}))})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"Audio"}),(0,d.jsx)("button",{onClick:async()=>{if(!Wn.current)return;Wn.current;const e=await Promise.all(l.map(e=>ca(e.recording.url))),t=e.reduce((e,t)=>e+t,0)/e.length,n=l.map((n,a)=>c(c({},n),{},{volume:t/e[a]*100}));o(n)},children:"\ud83c\udf9a Normalize Audio"})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"Clip Speed"}),u&&(0,d.jsxs)("div",{className:"speed-controls",children:[(0,d.jsxs)("label",{children:["Speed: ",u.speed,"x",(0,d.jsx)("input",{type:"range",min:"0.25",max:"4",step:"0.25",value:u.speed,onChange:e=>la(u.id,parseFloat(e.target.value))})]}),(0,d.jsxs)("div",{className:"speed-presets",children:[(0,d.jsx)("button",{onClick:()=>la(u.id,.5),children:"0.5x"}),(0,d.jsx)("button",{onClick:()=>la(u.id,1),children:"1x"}),(0,d.jsx)("button",{onClick:()=>la(u.id,1.5),children:"1.5x"}),(0,d.jsx)("button",{onClick:()=>la(u.id,2),children:"2x"})]})]}),!u&&(0,d.jsx)("p",{style:{fontSize:"0.875rem",color:"#9ca3af",margin:0},children:"Select a clip to adjust speed"})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"Text Overlays"}),(0,d.jsx)("button",{onClick:ra,children:"\u2795 Add Text"}),O.length>0&&(0,d.jsx)("div",{className:"overlay-list",children:O.map(e=>(0,d.jsxs)("div",{className:"overlay-item ".concat((null===H||void 0===H?void 0:H.id)===e.id?"selected":""),onClick:()=>U(e),children:[(0,d.jsx)("span",{children:e.text}),(0,d.jsx)("button",{onClick:t=>{var n;t.stopPropagation(),n=e.id,V(O.filter(e=>e.id!==n)),(null===H||void 0===H?void 0:H.id)===n&&U(null)},children:"\xd7"})]},e.id))})]}),H&&(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\u270f\ufe0f Edit Text Overlay"}),(0,d.jsxs)("div",{className:"text-editor-controls",children:[(0,d.jsxs)("label",{children:["Text Content:",(0,d.jsx)("textarea",{value:H.text,onChange:e=>ia(H.id,{text:e.target.value}),placeholder:"Enter your text here...",rows:"3",style:{width:"100%",padding:"0.5rem",backgroundColor:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(139, 92, 246, 0.4)",borderRadius:"8px",color:"#fff",fontSize:"0.875rem",fontFamily:"inherit",resize:"vertical"}})]}),(0,d.jsxs)("label",{children:["Font Size: ",H.style.fontSize,"px",(0,d.jsx)("input",{type:"range",min:"12",max:"120",value:H.style.fontSize,onChange:e=>ia(H.id,{style:c(c({},H.style),{},{fontSize:parseInt(e.target.value)})})})]}),(0,d.jsxs)("label",{children:["Font Family:",(0,d.jsxs)("select",{value:H.style.fontFamily,onChange:e=>ia(H.id,{style:c(c({},H.style),{},{fontFamily:e.target.value})}),children:[(0,d.jsx)("option",{value:"Arial",children:"Arial"}),(0,d.jsx)("option",{value:"Helvetica",children:"Helvetica"}),(0,d.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,d.jsx)("option",{value:"Courier New",children:"Courier New"}),(0,d.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,d.jsx)("option",{value:"Verdana",children:"Verdana"}),(0,d.jsx)("option",{value:"Impact",children:"Impact"})]})]}),(0,d.jsxs)("label",{children:["Text Color:",(0,d.jsx)("input",{type:"color",value:H.style.color,onChange:e=>ia(H.id,{style:c(c({},H.style),{},{color:e.target.value})})})]}),(0,d.jsxs)("label",{children:["Opacity: ",H.style.opacity,"%",(0,d.jsx)("input",{type:"range",min:"0",max:"100",value:H.style.opacity,onChange:e=>ia(H.id,{style:c(c({},H.style),{},{opacity:parseInt(e.target.value)})})})]}),(0,d.jsxs)("div",{className:"text-style-toggles",children:[(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:H.style.bold,onChange:e=>ia(H.id,{style:c(c({},H.style),{},{bold:e.target.checked})})}),"Bold"]}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:H.style.italic,onChange:e=>ia(H.id,{style:c(c({},H.style),{},{italic:e.target.checked})})}),"Italic"]}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:H.style.shadow,onChange:e=>ia(H.id,{style:c(c({},H.style),{},{shadow:e.target.checked})})}),"Shadow"]})]}),(0,d.jsxs)("label",{children:["Animation:",(0,d.jsxs)("select",{value:H.animation,onChange:e=>ia(H.id,{animation:e.target.value}),children:[(0,d.jsx)("option",{value:"none",children:"None"}),(0,d.jsx)("option",{value:"fadeIn",children:"Fade In"}),(0,d.jsx)("option",{value:"fadeOut",children:"Fade Out"}),(0,d.jsx)("option",{value:"slideIn",children:"Slide In"}),(0,d.jsx)("option",{value:"slideOut",children:"Slide Out"}),(0,d.jsx)("option",{value:"bounce",children:"Bounce"})]})]}),(0,d.jsxs)("div",{className:"time-controls",children:[(0,d.jsxs)("label",{children:["Start Time: ",H.startTime.toFixed(2),"s",(0,d.jsx)("input",{type:"number",min:"0",step:"0.1",value:H.startTime,onChange:e=>ia(H.id,{startTime:parseFloat(e.target.value)})})]}),(0,d.jsxs)("label",{children:["End Time: ",H.endTime.toFixed(2),"s",(0,d.jsx)("input",{type:"number",min:"0",step:"0.1",value:H.endTime,onChange:e=>ia(H.id,{endTime:parseFloat(e.target.value)})})]})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"Timeline Options"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:G,onChange:e=>K(e.target.checked)}),"Snap to Grid"]}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:$,onChange:e=>Y(e.target.checked)}),"Show Waveform"]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udfac Multi-Track Timeline"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Ke,onChange:e=>$e(e.target.checked)}),"Enable Multi-Track"]}),Ke&&(0,d.jsxs)("div",{className:"multitrack-controls",children:[(0,d.jsx)("button",{onClick:()=>va("video"),className:"add-track-btn",children:"\u2795 Add Video Track"}),(0,d.jsx)("button",{onClick:()=>va("audio"),className:"add-track-btn",children:"\u2795 Add Audio Track"}),(0,d.jsx)("button",{onClick:()=>va("overlay"),className:"add-track-btn",children:"\u2795 Add Overlay Track"}),(0,d.jsx)("div",{className:"track-list",children:qe.map(e=>(0,d.jsxs)("div",{className:"track-item",children:[(0,d.jsx)("span",{children:e.name}),(0,d.jsxs)("div",{className:"track-actions",children:[(0,d.jsx)("button",{onClick:()=>{return t=e.id,void We(qe.map(e=>e.id===t?c(c({},e),{},{visible:!e.visible}):e));var t},title:"Toggle visibility",children:e.visible?"\ud83d\udc41":"\ud83d\udc41\u200d\ud83d\udde8"}),(0,d.jsx)("button",{onClick:()=>{return t=e.id,void We(qe.map(e=>e.id===t?c(c({},e),{},{locked:!e.locked}):e));var t},title:"Toggle lock",children:e.locked?"\ud83d\udd12":"\ud83d\udd13"}),(0,d.jsx)("button",{onClick:()=>{return t=e.id,void(qe.length<=1?alert("Must have at least one track"):We(qe.filter(e=>e.id!==t)));var t},title:"Remove track",children:"\u274c"})]})]},e.id))})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udfad Chroma Key (Green Screen)"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Je.enabled,onChange:e=>Ze(c(c({},Je),{},{enabled:e.target.checked}))}),"Enable Chroma Key"]}),Je.enabled&&(0,d.jsxs)("div",{className:"chromakey-controls",children:[(0,d.jsxs)("label",{children:["Key Color:",(0,d.jsx)("input",{type:"color",value:Je.color,onChange:e=>Ze(c(c({},Je),{},{color:e.target.value}))})]}),(0,d.jsxs)("label",{children:["Tolerance: ",Math.round(100*Je.tolerance),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:Je.tolerance,onChange:e=>Ze(c(c({},Je),{},{tolerance:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Softness: ",Math.round(100*Je.softness),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:Je.softness,onChange:e=>Ze(c(c({},Je),{},{softness:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("div",{className:"preset-colors",children:[(0,d.jsx)("button",{onClick:()=>Ze(c(c({},Je),{},{color:"#00ff00"})),children:"Green"}),(0,d.jsx)("button",{onClick:()=>Ze(c(c({},Je),{},{color:"#0000ff"})),children:"Blue"})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udcdd Auto-Captions"}),(0,d.jsx)("button",{onClick:async()=>{rt(!0),await new Promise(e=>setTimeout(e,2e3));tt([{id:1,startTime:0,endTime:2,text:"Welcome to our video tutorial"},{id:2,startTime:2,endTime:5,text:"Today we will learn about video editing"},{id:3,startTime:5,endTime:8,text:"Let's explore the advanced features"},{id:4,startTime:8,endTime:11,text:"These tools will help you create professional content"},{id:5,startTime:11,endTime:15,text:"Thank you for watching!"}]),rt(!1)},disabled:st,className:"generate-btn",children:st?"\u23f3 Generating...":"\ud83e\udd16 Generate Captions"}),et.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:nt,onChange:e=>at(e.target.checked)}),"Show Captions"]}),(0,d.jsxs)("div",{className:"caption-style",children:[(0,d.jsxs)("label",{children:["Font Size: ",it.fontSize,"px",(0,d.jsx)("input",{type:"range",min:"12",max:"48",value:it.fontSize,onChange:e=>lt(c(c({},it),{},{fontSize:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Position:",(0,d.jsxs)("select",{value:it.position,onChange:e=>lt(c(c({},it),{},{position:e.target.value})),children:[(0,d.jsx)("option",{value:"top",children:"Top"}),(0,d.jsx)("option",{value:"center",children:"Center"}),(0,d.jsx)("option",{value:"bottom",children:"Bottom"})]})]})]}),(0,d.jsx)("div",{className:"caption-list",children:(0,d.jsxs)("p",{children:[et.length," captions generated"]})})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udf9a Audio Ducking"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:ht.enabled,onChange:e=>mt(c(c({},ht),{},{enabled:e.target.checked}))}),"Enable Audio Ducking"]}),ht.enabled&&(0,d.jsxs)("div",{className:"ducking-controls",children:[(0,d.jsxs)("label",{children:["Threshold: ",ht.threshold,"dB",(0,d.jsx)("input",{type:"range",min:"-60",max:"0",value:ht.threshold,onChange:e=>mt(c(c({},ht),{},{threshold:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Reduction: ",Math.round(100*ht.reduction),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:ht.reduction,onChange:e=>mt(c(c({},ht),{},{reduction:parseFloat(e.target.value)}))})]}),(0,d.jsx)("p",{className:"helper-text",children:"Auto-lower background music when voice is detected"})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udcfa Picture-in-Picture"}),(0,d.jsx)("button",{onClick:()=>s.length>0&&(e=>{const t={id:Date.now(),recording:e,x:50,y:50,width:200,height:150,startTime:f,endTime:f+(e.duration||5),opacity:1,borderRadius:8};ft([...pt,t])})(s[0]),className:"add-pip-btn",children:"\u2795 Add PiP Layer"}),pt.length>0&&(0,d.jsx)("div",{className:"pip-list",children:pt.map(e=>(0,d.jsxs)("div",{className:"pip-item",children:[(0,d.jsx)("span",{children:"PiP Layer"}),(0,d.jsxs)("div",{className:"pip-controls",children:[(0,d.jsxs)("label",{children:["Opacity: ",Math.round(100*e.opacity),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:e.opacity,onChange:t=>{return n=e.id,a={opacity:parseFloat(t.target.value)},void ft(pt.map(e=>e.id===n?c(c({},e),a):e));var n,a}})]}),(0,d.jsx)("button",{onClick:()=>{return t=e.id,void ft(pt.filter(e=>e.id!==t));var t},children:"Remove"})]})]},e.id))})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\u270f\ufe0f Shapes & Arrows"}),(0,d.jsxs)("div",{className:"shape-buttons",children:[(0,d.jsx)("button",{onClick:()=>ba("rectangle"),title:"Rectangle",children:"\u25ad"}),(0,d.jsx)("button",{onClick:()=>ba("circle"),title:"Circle",children:"\u25cb"}),(0,d.jsx)("button",{onClick:()=>ba("arrow"),title:"Arrow",children:"\u2192"}),(0,d.jsx)("button",{onClick:()=>ba("line"),title:"Line",children:"\u2500"})]}),xt.length>0&&jt&&(0,d.jsx)("div",{className:"shape-controls",children:xt.filter(e=>e.id===jt).map(e=>(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{children:["Color:",(0,d.jsx)("input",{type:"color",value:e.color,onChange:t=>ja(e.id,{color:t.target.value})})]}),(0,d.jsxs)("label",{children:["Opacity: ",Math.round(100*e.opacity),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:e.opacity,onChange:t=>ja(e.id,{opacity:parseFloat(t.target.value)})})]}),(0,d.jsxs)("label",{children:["Stroke Width: ",e.strokeWidth,"px",(0,d.jsx)("input",{type:"range",min:"1",max:"10",value:e.strokeWidth,onChange:t=>ja(e.id,{strokeWidth:parseInt(t.target.value)})})]}),(0,d.jsx)("button",{onClick:()=>{return t=e.id,bt(xt.filter(e=>e.id!==t)),void(jt===t&&yt(null));var t},children:"Remove Shape"})]},e.id))})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\u26a1 Speed Ramping"}),u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Ct,onChange:e=>Mt(e.target.checked)}),"Enable Speed Ramp"]}),Ct&&(0,d.jsxs)("div",{className:"speedramp-controls",children:[(0,d.jsx)("button",{onClick:()=>((e,t)=>{kt(c(c({},Nt),{},{[e]:t}))})(u.id,[{time:0,speed:1},{time:1,speed:.5},{time:2,speed:2},{time:3,speed:1}]),children:"Add Demo Ramp"}),(0,d.jsx)("p",{className:"helper-text",children:"Create smooth speed transitions"})]})]}),!u&&(0,d.jsx)("p",{className:"helper-text",children:"Select a clip to add speed ramping"})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\uddbc Timeline Thumbnails"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:zt,onChange:e=>Et(e.target.checked)}),"Show Thumbnails"]}),(0,d.jsx)("p",{className:"helper-text",children:"Display preview thumbnails in timeline"})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udd07 Noise Reduction"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Rt.enabled,onChange:e=>Lt(c(c({},Rt),{},{enabled:e.target.checked}))}),"Enable Noise Reduction"]}),Rt.enabled&&(0,d.jsxs)("div",{className:"noise-controls",children:[(0,d.jsxs)("label",{children:["Amount: ",Math.round(100*Rt.amount),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:Rt.amount,onChange:e=>Lt(c(c({},Rt),{},{amount:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Type:",(0,d.jsxs)("select",{value:Rt.type,onChange:e=>Lt(c(c({},Rt),{},{type:e.target.value})),children:[(0,d.jsx)("option",{value:"spectral",children:"Spectral"}),(0,d.jsx)("option",{value:"gate",children:"Noise Gate"}),(0,d.jsx)("option",{value:"adaptive",children:"Adaptive"})]})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udce4 Export Presets"}),(0,d.jsx)("select",{className:"preset-select",value:Dt,onChange:e=>(e=>{const t=Xn[e];t&&(ee({resolution:t.resolution,fps:t.fps,bitrate:t.bitrate,format:t.format,codec:"h264"}),At(e),t.aspectRatio&&Ce(t.aspectRatio))})(e.target.value),children:Object.entries(Xn).map(e=>{let[t,n]=e;return(0,d.jsx)("option",{value:t,children:n.name},t)})}),(0,d.jsx)("div",{className:"export-info",children:(0,d.jsxs)("p",{className:"helper-text",children:[Xn[Dt].resolution," @ ",Xn[Dt].fps,"fps"]})})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udfaf Transform Controls"}),u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Ft,onChange:e=>{var t;Bt(e.target.checked),e.target.checked&&(t=u.id,Vt[t]||Ht(e=>c(c({},e),{},{[t]:{x:0,y:0,scaleX:1,scaleY:1,rotation:0,anchorX:.5,anchorY:.5}})))}}),"Enable Transform"]}),Ft&&Vt[u.id]&&(0,d.jsxs)("div",{className:"transform-controls",children:[(0,d.jsxs)("div",{className:"transform-modes",children:[(0,d.jsx)("button",{className:"move"===It?"active":"",onClick:()=>Ot("move"),title:"Move (V)",children:"\u2194\ufe0f Move"}),(0,d.jsx)("button",{className:"scale"===It?"active":"",onClick:()=>Ot("scale"),title:"Scale (S)",children:"\u2922 Scale"}),(0,d.jsx)("button",{className:"rotate"===It?"active":"",onClick:()=>Ot("rotate"),title:"Rotate (R)",children:"\u21bb Rotate"})]}),(0,d.jsxs)("div",{className:"transform-values",children:[(0,d.jsxs)("label",{children:["Position X: ",Vt[u.id].x,"px",(0,d.jsx)("input",{type:"range",min:"-500",max:"500",value:Vt[u.id].x,onChange:e=>Ma(u.id,{x:parseInt(e.target.value)})})]}),(0,d.jsxs)("label",{children:["Position Y: ",Vt[u.id].y,"px",(0,d.jsx)("input",{type:"range",min:"-500",max:"500",value:Vt[u.id].y,onChange:e=>Ma(u.id,{y:parseInt(e.target.value)})})]}),(0,d.jsxs)("label",{children:["Scale X: ",Vt[u.id].scaleX.toFixed(2),(0,d.jsx)("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:Vt[u.id].scaleX,onChange:e=>Ma(u.id,{scaleX:parseFloat(e.target.value)})})]}),(0,d.jsxs)("label",{children:["Scale Y: ",Vt[u.id].scaleY.toFixed(2),(0,d.jsx)("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:Vt[u.id].scaleY,onChange:e=>Ma(u.id,{scaleY:parseFloat(e.target.value)})})]}),(0,d.jsxs)("label",{children:["Rotation: ",Vt[u.id].rotation,"\xb0",(0,d.jsx)("input",{type:"range",min:"0",max:"360",value:Vt[u.id].rotation,onChange:e=>Ma(u.id,{rotation:parseInt(e.target.value)})})]})]}),(0,d.jsx)("button",{onClick:()=>{return e=u.id,void Ht(t=>c(c({},t),{},{[e]:{x:0,y:0,scaleX:1,scaleY:1,rotation:0,anchorX:.5,anchorY:.5}}));var e},className:"reset-transform-btn",children:"\ud83d\udd04 Reset Transform"})]})]}),!u&&(0,d.jsx)("p",{className:"helper-text",children:"Select a clip to apply transforms"})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udd04 Rotation & Flip"}),u&&(0,d.jsxs)("div",{className:"rotation-controls",children:[(0,d.jsxs)("div",{className:"rotation-buttons",children:[(0,d.jsx)("button",{onClick:()=>ka(u.id,90),title:"Rotate 90\xb0 CW",children:"\u21bb 90\xb0"}),(0,d.jsx)("button",{onClick:()=>ka(u.id,180),title:"Rotate 180\xb0",children:"\u21bb 180\xb0"}),(0,d.jsx)("button",{onClick:()=>ka(u.id,-90),title:"Rotate 90\xb0 CCW",children:"\u21ba 90\xb0"}),(0,d.jsx)("button",{onClick:()=>ka(u.id,-(Yt[u.id]||0)),title:"Reset",children:"Reset"})]}),(0,d.jsxs)("div",{className:"flip-buttons",children:[(0,d.jsx)("button",{onClick:()=>Ca(u.id,"horizontal"),className:null!==(t=Jt[u.id])&&void 0!==t&&t.horizontal?"active":"",children:"\u21c4 Flip Horizontal"}),(0,d.jsx)("button",{onClick:()=>Ca(u.id,"vertical"),className:null!==(n=Jt[u.id])&&void 0!==n&&n.vertical?"active":"",children:"\u21c5 Flip Vertical"})]}),(0,d.jsxs)("div",{className:"rotation-display",children:["Current Rotation: ",Yt[u.id]||0,"\xb0"]})]}),!u&&(0,d.jsx)("p",{className:"helper-text",children:"Select a clip to rotate or flip"})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udcc8 Curve Editor"}),u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Ut,onChange:e=>_t(e.target.checked)}),"Enable Curve Editor"]}),Ut&&(0,d.jsxs)("div",{className:"curve-editor-controls",children:[(0,d.jsxs)("label",{children:["Curve Type:",(0,d.jsxs)("select",{value:Qt,onChange:e=>Gt(e.target.value),children:[(0,d.jsx)("option",{value:"linear",children:"Linear"}),(0,d.jsx)("option",{value:"ease-in",children:"Ease In"}),(0,d.jsx)("option",{value:"ease-out",children:"Ease Out"}),(0,d.jsx)("option",{value:"ease-in-out",children:"Ease In-Out"}),(0,d.jsx)("option",{value:"bezier",children:"Bezier"})]})]}),(0,d.jsxs)("div",{className:"keyframe-buttons",children:[(0,d.jsx)("button",{onClick:()=>Na(u.id,"opacity",f,1),children:"\u2795 Add Opacity Keyframe"}),(0,d.jsx)("button",{onClick:()=>Na(u.id,"scale",f,1),children:"\u2795 Add Scale Keyframe"}),(0,d.jsx)("button",{onClick:()=>Na(u.id,"position",f,0),children:"\u2795 Add Position Keyframe"})]}),(0,d.jsx)("div",{className:"keyframe-list",children:W[u.id]&&Object.entries(W[u.id]).map(e=>{let[t,n]=e;return(0,d.jsxs)("div",{className:"keyframe-property",children:[(0,d.jsxs)("strong",{children:[t,":"]})," ",n.length," keyframe(s)"]},t)})})]})]}),!u&&(0,d.jsx)("p",{className:"helper-text",children:"Select a clip to edit animation curves"})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udf9e Frame Navigation"}),(0,d.jsxs)("div",{className:"frame-controls",children:[(0,d.jsx)("div",{className:"frame-input",children:(0,d.jsxs)("label",{children:["Go to Frame:",(0,d.jsx)("input",{type:"number",min:"0",max:ma(),value:L,onChange:e=>(e=>{const t=e*(1/P);g(Math.max(0,Math.min(oa(),t))),D(e)})(parseInt(e.target.value)||0),className:"frame-number-input"})]})}),(0,d.jsxs)("div",{className:"frame-buttons",children:[(0,d.jsx)("button",{onClick:wa,title:"Previous Frame (<)",children:"\u23ee Previous"}),(0,d.jsx)("button",{onClick:ya,title:"Next Frame (>)",children:"Next \u23ed"})]}),(0,d.jsx)("div",{className:"timecode-input",children:(0,d.jsxs)("label",{children:["Timecode (HH:MM:SS:FF):",(0,d.jsx)("input",{type:"text",value:Sa(f),onChange:e=>{const t=(e=>{const t=e.split(":");if(4!==t.length)return 0;const[n,a,s,r]=t.map(e=>parseInt(e)||0);return 3600*n+60*a+s+r/P})(e.target.value);isNaN(t)||g(t)},className:"timecode-text-input",placeholder:"00:00:00:00"})]})}),(0,d.jsx)("p",{className:"helper-text",children:"Use < and > keys for frame-by-frame stepping"})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\u23ea Reverse Playback"}),u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Kt[u.id]||!1,onChange:()=>{return e=u.id,void $t(t=>c(c({},t),{},{[e]:!t[e]}));var e}}),"Enable Reverse Playback"]}),(0,d.jsx)("p",{className:"helper-text",children:"Play this clip in reverse. Use J/K/L keys for playback control."})]}),!u&&(0,d.jsx)("p",{className:"helper-text",children:"Select a clip to enable reverse playback"})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\u2328\ufe0f Precision Shortcuts"}),(0,d.jsxs)("div",{className:"shortcuts-list",children:[(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"<"})," or ",(0,d.jsx)("kbd",{children:","})," ",(0,d.jsx)("span",{children:"Previous Frame"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:">"})," or ",(0,d.jsx)("kbd",{children:"."})," ",(0,d.jsx)("span",{children:"Next Frame"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"J"})," ",(0,d.jsx)("span",{children:"Reverse"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"K"})," ",(0,d.jsx)("span",{children:"Pause"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"L"})," ",(0,d.jsx)("span",{children:"Play Forward"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"Space"})," ",(0,d.jsx)("span",{children:"Play/Pause"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"\u2190"})," / ",(0,d.jsx)("kbd",{children:"\u2192"})," ",(0,d.jsx)("span",{children:"Skip 1s (Shift: 5s)"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"A"})," ",(0,d.jsx)("span",{children:"Select Mode"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"B"})," ",(0,d.jsx)("span",{children:"Ripple Edit"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"N"})," ",(0,d.jsx)("span",{children:"Roll Edit"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"Y"})," ",(0,d.jsx)("span",{children:"Slip Edit"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"U"})," ",(0,d.jsx)("span",{children:"Slide Edit"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"M"})," ",(0,d.jsx)("span",{children:"Toggle Magnetic Timeline"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("kbd",{children:"Ctrl"})," + ",(0,d.jsx)("kbd",{children:"G"})," ",(0,d.jsx)("span",{children:"Group Selected"})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"Timeline Options"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:G,onChange:e=>K(e.target.checked)}),"Snap to Grid"]}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:$,onChange:e=>Y(e.target.checked)}),"Show Waveform"]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udfa8 LUT Color Grading"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Mn.enabled,onChange:e=>zn(c(c({},Mn),{},{enabled:e.target.checked}))}),"Enable LUT"]}),Mn.enabled&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("select",{className:"lut-select",value:Mn.preset,onChange:e=>zn(c(c({},Mn),{},{preset:e.target.value})),children:[(0,d.jsx)("option",{value:"none",children:"None"}),Object.entries(Ra).map(e=>{let[t,n]=e;return(0,d.jsxs)("option",{value:t,children:[n.name," - ",n.description]},t)})]}),(0,d.jsxs)("label",{children:["Intensity: ",(100*Mn.intensity).toFixed(0),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:Mn.intensity,onChange:e=>zn(c(c({},Mn),{},{intensity:parseFloat(e.target.value)}))})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udca8 Motion Blur"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Pn.enabled,onChange:e=>Rn(c(c({},Pn),{},{enabled:e.target.checked}))}),"Enable Motion Blur"]}),Pn.enabled&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{children:["Intensity: ",(100*Pn.intensity).toFixed(0),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:Pn.intensity,onChange:e=>Rn(c(c({},Pn),{},{intensity:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Quality (Samples): ",Pn.samples,(0,d.jsx)("input",{type:"range",min:"4",max:"16",step:"2",value:Pn.samples,onChange:e=>Rn(c(c({},Pn),{},{samples:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Direction:",(0,d.jsxs)("select",{value:Pn.direction,onChange:e=>Rn(c(c({},Pn),{},{direction:e.target.value})),children:[(0,d.jsx)("option",{value:"auto",children:"Auto"}),(0,d.jsx)("option",{value:"horizontal",children:"Horizontal"}),(0,d.jsx)("option",{value:"vertical",children:"Vertical"}),(0,d.jsx)("option",{value:"radial",children:"Radial"})]})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udd12 Privacy Pixelation"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Ln.enabled,onChange:e=>Dn(c(c({},Ln),{},{enabled:e.target.checked}))}),"Enable Pixelation"]}),Ln.enabled&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{children:["Block Size: ",Ln.blockSize,"px",(0,d.jsx)("input",{type:"range",min:"4",max:"48",step:"2",value:Ln.blockSize,onChange:e=>Dn(c(c({},Ln),{},{blockSize:parseInt(e.target.value)}))})]}),(0,d.jsx)("button",{className:"add-region-btn",onClick:()=>((e,t,n,a)=>{const s={id:"region-".concat(Date.now()),x:e,y:t,width:n,height:a,blockSize:Ln.blockSize,tracking:!1};Dn(c(c({},Ln),{},{regions:[...Ln.regions,s]}))})(.3,.3,.4,.4),children:"\u2795 Add Region"}),(0,d.jsxs)("div",{className:"pixelation-regions",children:[Ln.regions.map(e=>(0,d.jsxs)("div",{className:"region-item",children:[(0,d.jsxs)("span",{children:["Region (",(100*e.width).toFixed(0),"x",(100*e.height).toFixed(0),"%)"]}),(0,d.jsx)("button",{onClick:()=>{return t=e.id,void Dn(c(c({},Ln),{},{regions:Ln.regions.filter(e=>e.id!==t)}));var t},children:"\u2715"})]},e.id)),0===Ln.regions.length&&(0,d.jsx)("p",{className:"helper-text",children:'Click "Add Region" to blur areas'})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udfa5 Ken Burns (Zoom & Pan)"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:An.enabled,onChange:e=>Fn(c(c({},An),{},{enabled:e.target.checked}))}),"Enable Ken Burns"]}),An.enabled&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"ken-burns-controls",children:[(0,d.jsx)("h4",{children:"Start Position"}),(0,d.jsxs)("label",{children:["Zoom: ",An.startZoom.toFixed(2),"x",(0,d.jsx)("input",{type:"range",min:"1",max:"3",step:"0.1",value:An.startZoom,onChange:e=>Fn(c(c({},An),{},{startZoom:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Pan X: ",An.startX,"px",(0,d.jsx)("input",{type:"range",min:"-200",max:"200",step:"10",value:An.startX,onChange:e=>Fn(c(c({},An),{},{startX:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Pan Y: ",An.startY,"px",(0,d.jsx)("input",{type:"range",min:"-200",max:"200",step:"10",value:An.startY,onChange:e=>Fn(c(c({},An),{},{startY:parseInt(e.target.value)}))})]})]}),(0,d.jsxs)("div",{className:"ken-burns-controls",children:[(0,d.jsx)("h4",{children:"End Position"}),(0,d.jsxs)("label",{children:["Zoom: ",An.endZoom.toFixed(2),"x",(0,d.jsx)("input",{type:"range",min:"1",max:"3",step:"0.1",value:An.endZoom,onChange:e=>Fn(c(c({},An),{},{endZoom:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Pan X: ",An.endX,"px",(0,d.jsx)("input",{type:"range",min:"-200",max:"200",step:"10",value:An.endX,onChange:e=>Fn(c(c({},An),{},{endX:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Pan Y: ",An.endY,"px",(0,d.jsx)("input",{type:"range",min:"-200",max:"200",step:"10",value:An.endY,onChange:e=>Fn(c(c({},An),{},{endY:parseInt(e.target.value)}))})]})]}),(0,d.jsxs)("label",{children:["Easing:",(0,d.jsxs)("select",{value:An.easing,onChange:e=>Fn(c(c({},An),{},{easing:e.target.value})),children:[(0,d.jsx)("option",{value:"linear",children:"Linear"}),(0,d.jsx)("option",{value:"ease-in",children:"Ease In"}),(0,d.jsx)("option",{value:"ease-out",children:"Ease Out"}),(0,d.jsx)("option",{value:"ease-in-out",children:"Ease In-Out"})]})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83d\udcfc Glitch & VHS"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:On.enabled,onChange:e=>Vn(c(c({},On),{},{enabled:e.target.checked}))}),"Enable Glitch/VHS"]}),On.enabled&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{children:["Effect Type:",(0,d.jsxs)("select",{value:On.type,onChange:e=>Vn(c(c({},On),{},{type:e.target.value})),children:[(0,d.jsx)("option",{value:"glitch",children:"Digital Glitch"}),(0,d.jsx)("option",{value:"vhs",children:"VHS Tape"}),(0,d.jsx)("option",{value:"datamosh",children:"Data Moshing"}),(0,d.jsx)("option",{value:"scanlines",children:"Scanlines Only"})]})]}),(0,d.jsxs)("label",{children:["Intensity: ",(100*On.intensity).toFixed(0),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:On.intensity,onChange:e=>Vn(c(c({},On),{},{intensity:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Frequency: ",(100*On.frequency).toFixed(0),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:On.frequency,onChange:e=>Vn(c(c({},On),{},{frequency:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:On.colorSeparation,onChange:e=>Vn(c(c({},On),{},{colorSeparation:e.target.checked}))}),"RGB Color Separation"]}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:On.scanlines,onChange:e=>Vn(c(c({},On),{},{scanlines:e.target.checked}))}),"Scanlines"]}),(0,d.jsxs)("label",{children:["Noise: ",(100*On.noise).toFixed(0),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:On.noise,onChange:e=>Vn(c(c({},On),{},{noise:parseFloat(e.target.value)}))})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udf9e\ufe0f Film Grain"}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Hn.enabled,onChange:e=>Un(c(c({},Hn),{},{enabled:e.target.checked}))}),"Enable Film Grain"]}),Hn.enabled&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{children:["Intensity: ",(100*Hn.intensity).toFixed(0),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:Hn.intensity,onChange:e=>Un(c(c({},Hn),{},{intensity:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Grain Size: ",Hn.size.toFixed(1),"x",(0,d.jsx)("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:Hn.size,onChange:e=>Un(c(c({},Hn),{},{size:parseFloat(e.target.value)}))})]}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Hn.colored,onChange:e=>Un(c(c({},Hn),{},{colored:e.target.checked}))}),"Colored Grain"]}),(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:Hn.vignette,onChange:e=>Un(c(c({},Hn),{},{vignette:e.target.checked}))}),"Add Vignette"]}),Hn.vignette&&(0,d.jsxs)("label",{children:["Vignette Intensity: ",(100*Hn.vignetteIntensity).toFixed(0),"%",(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:Hn.vignetteIntensity,onChange:e=>Un(c(c({},Hn),{},{vignetteIntensity:parseFloat(e.target.value)}))})]})]})]}),(0,d.jsxs)("div",{className:"tool-section",children:[(0,d.jsx)("h3",{children:"\ud83c\udfac Advanced Timeline"}),(0,d.jsxs)("div",{className:"timeline-feature",children:[(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:nn,onChange:e=>an(e.target.checked)}),"\ud83e\uddf2 Magnetic Timeline"]}),nn&&(0,d.jsxs)("label",{children:["Snap Threshold: ",sn.toFixed(2),"s",(0,d.jsx)("input",{type:"range",min:"0.01",max:"0.5",step:"0.01",value:sn,onChange:e=>rn(parseFloat(e.target.value))})]})]}),(0,d.jsxs)("div",{className:"timeline-feature",children:[(0,d.jsx)("label",{className:"feature-label",children:"Editing Mode:"}),(0,d.jsxs)("div",{className:"editing-modes",children:[(0,d.jsx)("button",{className:"select"===ln?"mode-btn active":"mode-btn",onClick:()=>on("select"),title:"Select Mode (A)",children:"\ud83d\udc46 Select"}),(0,d.jsx)("button",{className:"ripple"===ln?"mode-btn active":"mode-btn",onClick:()=>on("ripple"),title:"Ripple Edit (B)",children:"\ud83c\udf0a Ripple"}),(0,d.jsx)("button",{className:"roll"===ln?"mode-btn active":"mode-btn",onClick:()=>on("roll"),title:"Roll Edit (N)",children:"\ud83c\udf9e\ufe0f Roll"}),(0,d.jsx)("button",{className:"slip"===ln?"mode-btn active":"mode-btn",onClick:()=>on("slip"),title:"Slip Edit (Y)",children:"\ud83d\udccd Slip"}),(0,d.jsx)("button",{className:"slide"===ln?"mode-btn active":"mode-btn",onClick:()=>on("slide"),title:"Slide Edit (U)",children:"\u2194\ufe0f Slide"})]}),(0,d.jsxs)("p",{className:"mode-description",children:["select"===ln&&"Standard selection and movement","ripple"===ln&&"Move clip and shift all following clips","roll"===ln&&"Adjust edit point between adjacent clips","slip"===ln&&"Change clip content without moving position","slide"===ln&&"Move clip and push adjacent clips"]})]}),(0,d.jsxs)("div",{className:"timeline-feature",children:[(0,d.jsx)("label",{className:"feature-label",children:"Clip Groups:"}),u&&(0,d.jsxs)("div",{className:"group-controls",children:[(0,d.jsx)("button",{className:"action-btn",onClick:()=>{var e;const t=za([u.id]);alert("Created group: ".concat((null===(e=cn[t])||void 0===e?void 0:e.name)||"New Group"))},disabled:Ta(u.id),children:"\u2795 Create Group"}),Ta(u.id)&&(0,d.jsx)("button",{className:"action-btn",onClick:()=>Ea(Ta(u.id).id),children:"\u2796 Ungroup"})]}),(0,d.jsxs)("div",{className:"groups-list",children:[Object.values(cn).map(e=>(0,d.jsxs)("div",{className:"group-item",style:{borderLeft:"4px solid ".concat(e.color)},children:[(0,d.jsx)("span",{children:e.name}),(0,d.jsxs)("span",{className:"group-count",children:["(",e.clipIds.length," clips)"]}),(0,d.jsx)("button",{className:"remove-btn",onClick:()=>Ea(e.id),children:"\u2715"})]},e.id)),0===Object.keys(cn).length&&(0,d.jsx)("p",{className:"empty-message",children:"No groups created"})]})]}),(0,d.jsx)("div",{className:"timeline-feature",children:(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:vn,onChange:e=>xn(e.target.checked)}),"\ud83d\uddfa\ufe0f Show Mini-Map"]})}),(0,d.jsxs)("div",{className:"timeline-feature",children:[(0,d.jsx)("label",{className:"feature-label",children:"Track Colors:"}),(0,d.jsx)("div",{className:"color-legend",children:Object.entries(_n).map(e=>{let[t,n]=e;return(0,d.jsxs)("div",{className:"color-item",children:[(0,d.jsx)("div",{className:"color-swatch",style:{backgroundColor:n}}),(0,d.jsx)("span",{children:t.charAt(0).toUpperCase()+t.slice(1)})]},t)})})]})]})]}),(0,d.jsx)("div",{className:"timeline-resize-handle ".concat(me?"resizing":""),onMouseDown:e=>{e.preventDefault(),pe(!0),ge(e.clientY),xe(ue)},title:"Drag to resize timeline",children:(0,d.jsx)("div",{className:"resize-handle-bar",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:(0,d.jsx)("path",{d:"M8 4h8v2H8V4zm0 7h8v2H8v-2zm0 7h8v2H8v-2z"})})})}),vn&&oa()>0&&(0,d.jsxs)("div",{className:"timeline-minimap",children:[(0,d.jsxs)("div",{className:"minimap-header",children:[(0,d.jsx)("span",{children:"\ud83d\udccd Project Overview"}),(0,d.jsx)("button",{className:"minimap-close",onClick:()=>xn(!1),title:"Hide Mini-Map",children:"\u2715"})]}),(0,d.jsxs)("div",{className:"minimap-track",onClick:e=>{const t=e.currentTarget.getBoundingClientRect();((e,t)=>{const n=e/t*oa();g(n)})(e.clientX-t.left,t.width)},children:[l.map(e=>{const t=Ta(e.id),n=t?t.color:_n[e.type]||"#8b5cf6";return(0,d.jsx)("div",{className:"minimap-clip",style:{left:"".concat(e.startTime/oa()*100,"%"),width:"".concat(e.duration/oa()*100,"%"),backgroundColor:n,opacity:.7},title:e.name},e.id)}),(0,d.jsx)("div",{className:"minimap-viewport",style:{left:"".concat(Sn/oa()*100,"%"),width:"".concat((kn-Sn)/oa()*100,"%")}}),(0,d.jsx)("div",{className:"minimap-playhead",style:{left:"".concat(f/oa()*100,"%")}}),be.map(e=>(0,d.jsx)("div",{className:"minimap-marker",style:{left:"".concat(e.time/oa()*100,"%"),backgroundColor:e.color},title:e.label},e.id))]})]}),(0,d.jsxs)("div",{className:"timeline-section",ref:Gn,style:{height:"".concat(ue,"px")},onMouseMove:e=>{mn||Pa(e,Qn)},onMouseEnter:()=>pn(!1),onMouseLeave:()=>{gn(null)},children:[(0,d.jsxs)("div",{className:"timeline-header",children:[(0,d.jsx)("h3",{children:"Timeline"}),(0,d.jsxs)("div",{className:"timeline-transport-controls",children:[(0,d.jsx)("button",{onClick:()=>{g(0)},className:"timeline-transport-btn",title:"Go to Start",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"})})}),(0,d.jsx)("button",{onClick:()=>{const e=Math.max(0,f-5);g(e)},className:"timeline-transport-btn",title:"Skip Backward 5s",children:(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M11.99 5V1l-5 5 5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6h-2c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),(0,d.jsx)("text",{x:"12",y:"16",fontSize:"10",fill:"currentColor",textAnchor:"middle",children:"5"})]})}),(0,d.jsx)("button",{onClick:wa,className:"timeline-transport-btn frame-btn",title:"Previous Frame",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})})}),(0,d.jsx)("button",{onClick:()=>x(!v),className:"timeline-transport-btn play-btn",title:v?"Pause (Space)":"Play (Space)",children:v?(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,d.jsx)("button",{onClick:ya,className:"timeline-transport-btn frame-btn",title:"Next Frame",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})}),(0,d.jsx)("button",{onClick:()=>{const e=Math.min(oa(),f+5);g(e)},className:"timeline-transport-btn",title:"Skip Forward 5s",children:(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z"}),(0,d.jsx)("text",{x:"12",y:"16",fontSize:"10",fill:"currentColor",textAnchor:"middle",children:"5"})]})}),(0,d.jsx)("button",{onClick:()=>{g(oa())},className:"timeline-transport-btn",title:"Go to End",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M16 18h2V6h-2v12zM6 18l8.5-6L6 6v12z"})})})]}),(0,d.jsxs)("div",{className:"timeline-timecode-display",children:[(0,d.jsxs)("div",{className:"timeline-timecode-group",children:[(0,d.jsx)("span",{className:"timeline-timecode-value",children:Sa(f)}),(0,d.jsx)("span",{className:"timeline-timecode-separator",children:"/"}),(0,d.jsx)("span",{className:"timeline-timecode-value",children:Sa(oa())})]}),(0,d.jsxs)("div",{className:"timeline-frame-counter",children:["Frame ",L," / ",ma()]})]}),(0,d.jsxs)("div",{className:"timeline-playback-settings",children:[(0,d.jsxs)("div",{className:"timeline-fps-control",children:[(0,d.jsx)("label",{children:"FPS:"}),(0,d.jsxs)("select",{value:P,onChange:e=>R(parseInt(e.target.value)),children:[(0,d.jsx)("option",{value:"24",children:"24"}),(0,d.jsx)("option",{value:"30",children:"30"}),(0,d.jsx)("option",{value:"60",children:"60"})]})]}),(0,d.jsxs)("div",{className:"timeline-speed-control",children:[(0,d.jsx)("label",{children:"Speed:"}),(0,d.jsxs)("select",{value:X,onChange:e=>J(parseFloat(e.target.value)),children:[(0,d.jsx)("option",{value:"0.25",children:"0.25x"}),(0,d.jsx)("option",{value:"0.5",children:"0.5x"}),(0,d.jsx)("option",{value:"0.75",children:"0.75x"}),(0,d.jsx)("option",{value:"1",children:"1x"}),(0,d.jsx)("option",{value:"1.25",children:"1.25x"}),(0,d.jsx)("option",{value:"1.5",children:"1.5x"}),(0,d.jsx)("option",{value:"2",children:"2x"})]})]})]}),(0,d.jsxs)("div",{className:"timeline-zoom-controls",children:[(0,d.jsx)("button",{onClick:()=>j(Math.max(.5,b-.5)),children:"\u2212"}),(0,d.jsxs)("span",{children:[b,"x"]}),(0,d.jsx)("button",{onClick:()=>j(Math.min(4,b+.5)),children:"+"})]})]}),m.length>0&&(0,d.jsxs)("div",{className:"timeline-selection-info",children:[(0,d.jsxs)("span",{children:[m.length," clip",m.length>1?"s":""," selected"]}),m.length>=2&&(0,d.jsx)("span",{className:"transition-hint",children:"\ud83d\udca1 Click the \ud83c\udfac Transitions button to merge these clips"}),(0,d.jsx)("button",{onClick:()=>{h(null),p([])},className:"clear-selection-btn",title:"Clear selection",children:"\u2715"})]}),fn&&(0,d.jsxs)("div",{className:"scrub-preview",style:{left:"".concat(fn.x,"px"),top:"".concat(fn.y-150,"px")},children:[fn.thumbnail?(0,d.jsx)("img",{src:fn.thumbnail,alt:"Preview"}):(0,d.jsx)("div",{className:"no-preview",children:"No preview"}),(0,d.jsx)("div",{className:"scrub-timecode",children:Sa(fn.time)}),fn.clip&&(0,d.jsx)("div",{className:"scrub-clip-name",children:fn.clip.name})]}),(0,d.jsxs)("div",{ref:Qn,className:"timeline-ruler-track",onMouseDown:Ha,style:{cursor:le?"grabbing":"pointer"},children:[(()=>{const e=oa();if(0===e)return null;const t=[];let n,a;b>=5?(n=1,a=.2):b>=3?(n=2,a=.5):b>=2?(n=5,a=1):b>=1?(n=10,a=2):(n=30,a=5);for(let s=0;s<=e;s+=a){const a=Math.abs(s%n)<.001,r=Math.floor(s*P);t.push((0,d.jsxs)("div",{className:"timeline-marker ".concat(a?"major":"minor"),style:{left:"".concat(s/e*100,"%")},children:[(0,d.jsx)("div",{className:"marker-tick"}),a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"marker-time",children:b>=5&&s>0?ha(s)+".".concat(Math.floor(s%1*10)):ha(s)}),b>=4&&(0,d.jsxs)("div",{className:"marker-frame",children:["f",r]})]})]},"marker-".concat(s)))}return t})(),be.map(e=>(0,d.jsxs)("div",{className:"user-marker",style:{left:"".concat(e.time/oa()*100,"%"),borderColor:e.color},onClick:t=>{var n;t.stopPropagation(),n=e.time,g(n)},onContextMenu:t=>{t.preventDefault(),t.stopPropagation(),window.confirm('Remove marker "'.concat(e.label,'"?'))&&pa(e.id)},title:"".concat(e.label," (Right-click to delete)"),children:[(0,d.jsx)("div",{className:"marker-flag",style:{background:e.color},children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"white",width:"12",height:"12",children:(0,d.jsx)("path",{d:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"})})}),(0,d.jsx)("button",{className:"marker-delete-btn",onClick:t=>{t.stopPropagation(),pa(e.id)},title:"Delete marker",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"10",height:"10",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),(0,d.jsx)("div",{className:"marker-label-popup",children:e.label})]},e.id)),oa()>0&&(0,d.jsxs)("div",{className:"timeline-playhead-track",style:{left:"".concat(f/oa()*100,"%")},onMouseDown:e=>{e.stopPropagation(),Ha(e)},children:[(0,d.jsx)("div",{className:"playhead-line-track"}),(0,d.jsx)("div",{className:"playhead-handle-track",style:{cursor:le?"grabbing":"grab"}})]})]}),(0,d.jsx)("div",{className:"timeline-tracks",children:l.map((e,t)=>{const n=Ta(e.id),a=n?n.color:_n[e.type]||_n.video;return(0,d.jsxs)("div",{className:"timeline-clip ".concat(m.includes(e.id)?"selected":""," ").concat(n?"grouped":""),style:{width:"".concat((e.trimEnd-e.trimStart)*b*50,"px"),borderLeft:"4px solid ".concat(a),background:"linear-gradient(135deg, ".concat(a,"20, ").concat(a,"10)")},onClick:t=>((e,t)=>{if(t.stopPropagation(),t.ctrlKey||t.metaKey)p(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id]),h(e);else if(t.shiftKey&&u){const t=l.findIndex(e=>e.id===u.id),n=l.findIndex(t=>t.id===e.id),a=Math.min(t,n),s=Math.max(t,n),r=l.slice(a,s+1).map(e=>e.id);p(r),h(e)}else h(e),p([e.id])})(e,t),title:n?"Group: ".concat(n.name):"Click to select, Ctrl+Click to multi-select, Shift+Click for range",children:[n&&(0,d.jsx)("div",{className:"group-badge",style:{background:n.color},title:n.name,children:"\ud83d\udd17"}),zt&&Tt[e.id]&&(0,d.jsx)("div",{className:"clip-thumbnail-preview",children:(0,d.jsx)("img",{src:Tt[e.id],alt:"Clip preview"})}),(0,d.jsxs)("div",{className:"clip-info",children:[(0,d.jsx)("span",{children:e.recording.name||"Clip ".concat(t+1)}),(0,d.jsx)("span",{children:ha(e.trimEnd-e.trimStart)})]}),(0,d.jsxs)("div",{className:"clip-actions",children:[(0,d.jsx)("button",{onClick:t=>{t.stopPropagation(),((e,t)=>{const n=l.findIndex(t=>t.id===e);if(-1===n)return;const a=l[n],s=(a.trimEnd,a.trimStart,c(c({},a),{},{id:Date.now(),trimEnd:a.trimStart+t})),r=c(c({},a),{},{id:Date.now()+1,trimStart:a.trimStart+t,startTime:a.startTime+t}),i=[...l];i.splice(n,1,s,r),o(i)})(e.id,(e.trimEnd-e.trimStart)/2)},children:"\u2702"}),(0,d.jsx)("button",{onClick:t=>{t.stopPropagation(),sa(e.id)},children:"\ud83d\uddd1"})]}),ae[e.id]&&(0,d.jsx)("div",{className:"transition-indicator",children:ae[e.id].type})]},e.id)})}),(0,d.jsxs)("div",{className:"available-clips",children:[(0,d.jsx)("h4",{children:"Available Recordings"}),(0,d.jsx)("div",{className:"clips-list",children:s.map(e=>(0,d.jsxs)("div",{className:"available-clip",onClick:()=>(e=>{const t={id:Date.now(),recording:e,blob:e.blob,startTime:oa(),endTime:oa()+(e.duration||10),trimStart:0,trimEnd:e.duration||10,filters:c({},te),volume:100,speed:1},n=[...l,t];o(n),ta(n)})(e),title:"".concat(e.name||"Untitled"," - ").concat(ha(e.duration||0)),children:[(0,d.jsxs)("div",{className:"clip-thumbnail",children:[(0,d.jsx)("video",{src:e.url,className:"thumbnail-video",muted:!0,playsInline:!0}),(0,d.jsx)("div",{className:"clip-duration",children:ha(e.duration||0)})]}),(0,d.jsx)("div",{className:"clip-name",children:e.name||"Untitled"})]},e.timestamp))})]})]})]})]}),M&&(0,d.jsx)(ze,{audioBlob:null===u||void 0===u?void 0:u.audioBlob,onApply:e=>{if(u){const t=l.map(t=>t.id===u.id?c(c({},t),{},{audioBlob:e}):t);o(t)}z(!1)},onClose:()=>z(!1)}),E&&m.length>=2&&(0,d.jsx)(Pe,{clips:l.filter(e=>m.includes(e.id)),getClipsBlobs:async()=>l.filter(e=>m.includes(e.id)).map(e=>{var t;if(e.blob&&e.blob instanceof Blob)return e.blob;if(null!==(t=e.recording)&&void 0!==t&&t.blob&&e.recording.blob instanceof Blob)return e.recording.blob;throw new Error("Clip ".concat(e.id," does not have a valid blob"))}),onApply:e=>{if(1===e.length){const t=l.filter(e=>m.includes(e.id)),n=c(c({},t[0]),{},{id:Date.now(),blob:e[0],recording:{url:URL.createObjectURL(e[0]),name:"Merged ".concat(m.length," clips with Transitions"),duration:0},trimStart:0,trimEnd:0,name:"Merged ".concat(m.length," clips")}),a=l.findIndex(e=>e.id===t[0].id),s=l.filter(e=>!m.includes(e.id));s.splice(a,0,n),o(s),p([n.id]),h(n)}else{const t=l.map(t=>{const n=m.indexOf(t.id);return-1!==n&&e[n]?c(c({},t),{},{blob:e[n],recording:{url:URL.createObjectURL(e[n]),name:t.recording.name,duration:t.recording.duration}}):t});o(t)}T(!1)},onClose:()=>T(!1)})]})},De=e=>{let{recording:t,onClose:n,onSave:s}=e;const[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)([]),[u,h]=(0,a.useState)(""),[m,p]=(0,a.useState)("en-US"),[f,g]=(0,a.useState)(null),[v,x]=(0,a.useState)(0),[b,j]=(0,a.useState)(""),y=(0,a.useRef)(null),w=(0,a.useRef)(null),S=(0,a.useRef)(0);(0,a.useEffect)(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;w.current=new e,w.current.continuous=!0,w.current.interimResults=!0,w.current.lang=m,w.current.maxAlternatives=1,w.current.onresult=e=>{const t=e.results[e.results.length-1],n=t[0].transcript;if(t.isFinal){const e=y.current?y.current.currentTime:0,a={id:S.current++,text:n,startTime:e,endTime:e+3,confidence:t[0].confidence};o(e=>[...e,a]),h("")}else h(n)},w.current.onerror=e=>{console.error("Speech recognition error:",e.error),j("Recognition error: ".concat(e.error)),i(!1)},w.current.onend=()=>{if(r)try{w.current.start()}catch(e){console.error("Error restarting recognition:",e)}}}else j("Speech recognition not supported in this browser. Please use Chrome or Edge.");return()=>{w.current&&w.current.stop()}},[m]);const N=()=>{w.current&&w.current.stop(),i(!1),x(100),y.current&&y.current.pause()},k=(e,t,n)=>{o(a=>a.map((a,s)=>s===e?c(c({},a),{},{[t]:n}):a))},C=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%60),s=Math.floor(e%1*1e3);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"),",").concat(s.toString().padStart(3,"0"))};return(0,d.jsx)("div",{className:"auto-captions-overlay",children:(0,d.jsxs)("div",{className:"auto-captions-modal",children:[(0,d.jsxs)("div",{className:"captions-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),"AI Auto-Captions"]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,"aria-label":"Close",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"captions-content",children:[(0,d.jsxs)("div",{className:"video-section",children:[(0,d.jsx)("video",{ref:y,src:t.url,className:"caption-video",controls:!0}),r&&(0,d.jsxs)("div",{className:"transcription-progress",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(v,"%")}})}),(0,d.jsxs)("p",{children:["Transcribing... ",Math.round(v),"%"]})]}),u&&(0,d.jsx)("div",{className:"interim-caption",children:u})]}),(0,d.jsxs)("div",{className:"controls-section",children:[(0,d.jsxs)("div",{className:"language-selector",children:[(0,d.jsx)("label",{children:"Language:"}),(0,d.jsx)("select",{value:m,onChange:e=>p(e.target.value),disabled:r,children:[{code:"en-US",name:"English (US)"},{code:"en-GB",name:"English (UK)"},{code:"es-ES",name:"Spanish"},{code:"fr-FR",name:"French"},{code:"de-DE",name:"German"},{code:"it-IT",name:"Italian"},{code:"pt-BR",name:"Portuguese"},{code:"ru-RU",name:"Russian"},{code:"ja-JP",name:"Japanese"},{code:"zh-CN",name:"Chinese"},{code:"ko-KR",name:"Korean"},{code:"ar-SA",name:"Arabic"},{code:"hi-IN",name:"Hindi"}].map(e=>(0,d.jsx)("option",{value:e.code,children:e.name},e.code))})]}),(0,d.jsx)("div",{className:"transcription-controls",children:r?(0,d.jsxs)("button",{className:"stop-transcription-btn",onClick:N,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop"]}):(0,d.jsxs)("button",{className:"start-transcription-btn",onClick:()=>{if(w.current){j(""),i(!0),o([]),h(""),S.current=0;try{if(w.current.lang=m,w.current.start(),y.current){y.current.currentTime=0,y.current.play();const e=setInterval(()=>{if(y.current){const t=y.current.currentTime/y.current.duration*100;x(t),y.current.currentTime>=y.current.duration&&(N(),clearInterval(e))}},100)}}catch(e){j("Failed to start transcription: ".concat(e.message)),i(!1)}}else j("Speech recognition not available")},children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),(0,d.jsx)("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),"Start Transcription"]})}),b&&(0,d.jsx)("div",{className:"error-message",children:b})]}),(0,d.jsxs)("div",{className:"captions-list-section",children:[(0,d.jsxs)("div",{className:"captions-list-header",children:[(0,d.jsxs)("h3",{children:["Captions (",l.length,")"]}),(0,d.jsxs)("div",{className:"export-buttons",children:[(0,d.jsx)("button",{onClick:()=>{let e="";l.forEach((t,n)=>{e+="".concat(n+1,"\n"),e+="".concat(C(t.startTime)," --\x3e ").concat(C(t.endTime),"\n"),e+="".concat(t.text,"\n\n")});const n=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download="".concat(t.name||"recording","_captions.srt"),s.click(),URL.revokeObjectURL(a)},disabled:0===l.length,children:"Export SRT"}),(0,d.jsx)("button",{onClick:()=>{let e="WEBVTT\n\n";l.forEach((t,n)=>{e+="".concat(n+1,"\n"),e+="".concat(C(t.startTime).replace(",",".")," --\x3e ").concat(C(t.endTime).replace(",","."),"\n"),e+="".concat(t.text,"\n\n")});const n=new Blob([e],{type:"text/vtt"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download="".concat(t.name||"recording","_captions.vtt"),s.click(),URL.revokeObjectURL(a)},disabled:0===l.length,children:"Export VTT"}),(0,d.jsx)("button",{onClick:async()=>{if(0!==l.length)try{const e=document.createElement("canvas"),n=y.current;e.width=n.videoWidth,e.height=n.videoHeight;const a=e.getContext("2d"),r=e.captureStream(30),i=new MediaRecorder(r,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:5e6}),o=[];i.ondataavailable=e=>o.push(e.data),i.onstop=()=>{const e=new Blob(o,{type:"video/webm"}),n=c(c({},t),{},{blob:e,url:URL.createObjectURL(e),name:"".concat(t.name||"recording","_captioned"),timestamp:Date.now(),size:e.size});s(n)},i.start(),n.currentTime=0,n.play();const d=()=>{if(n.currentTime>=n.duration)return i.stop(),void n.pause();a.drawImage(n,0,0,e.width,e.height);const t=n.currentTime;l.filter(e=>t>=e.startTime&&t<=e.endTime).forEach(t=>{a.font="bold 48px Arial";const n=a.measureText(t.text),s=(e.width-n.width)/2,r=e.height-100;a.fillStyle="rgba(0, 0, 0, 0.8)",a.fillRect(s-20,r-48-20,n.width+40,88),a.fillStyle="#ffffff",a.textAlign="center",a.textBaseline="bottom",a.fillText(t.text,e.width/2,r)}),requestAnimationFrame(d)};d()}catch(e){j("Failed to apply captions: ".concat(e.message))}else j("No captions to apply")},disabled:0===l.length,className:"apply-btn",children:"Apply to Video"})]})]}),(0,d.jsx)("div",{className:"captions-list",children:0===l.length?(0,d.jsx)("div",{className:"empty-captions",children:(0,d.jsx)("p",{children:"No captions yet. Start transcription to generate captions automatically."})}):l.map((e,t)=>(0,d.jsxs)("div",{className:"caption-item",children:[(0,d.jsxs)("div",{className:"caption-time",children:[(0,d.jsx)("input",{type:"number",value:e.startTime.toFixed(2),onChange:e=>k(t,"startTime",parseFloat(e.target.value)),step:"0.1"}),(0,d.jsx)("span",{children:"\u2192"}),(0,d.jsx)("input",{type:"number",value:e.endTime.toFixed(2),onChange:e=>k(t,"endTime",parseFloat(e.target.value)),step:"0.1"})]}),(0,d.jsx)("div",{className:"caption-text",children:f===t?(0,d.jsx)("textarea",{value:e.text,onChange:e=>k(t,"text",e.target.value),onBlur:()=>g(null),autoFocus:!0}):(0,d.jsx)("p",{onClick:()=>g(t),children:e.text})}),(0,d.jsxs)("div",{className:"caption-actions",children:[(0,d.jsx)("button",{onClick:()=>(e=>{e<l.length-1&&o(t=>{const n=[...t];return n[e]=c(c({},n[e]),{},{text:"".concat(n[e].text," ").concat(n[e+1].text),endTime:n[e+1].endTime}),n.splice(e+1,1),n})})(t),disabled:t===l.length-1,title:"Merge with next",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})}),(0,d.jsx)("button",{onClick:()=>(e=>{o(t=>t.filter((t,n)=>n!==e))})(t),title:"Delete",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.confidence&&(0,d.jsxs)("div",{className:"caption-confidence",children:["Confidence: ",(100*e.confidence).toFixed(0),"%"]})]},e.id))})]})]})]})})},Ae=e=>{let{recording:t,onClose:n,onSave:s}=e;const[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)([]),[u,h]=(0,a.useState)(0),[m,p]=(0,a.useState)("en-US"),[f,g]=(0,a.useState)(!0),[v,x]=(0,a.useState)(!0),[b,j]=(0,a.useState)("srt"),y=(0,a.useRef)(null),w=(0,a.useRef)(null);(0,a.useEffect)(()=>{window.SpeechRecognition||window.webkitSpeechRecognition||alert("Speech recognition is not supported in your browser. Please use Chrome or Edge.")},[]);const S=()=>{y.current&&(y.current.stop(),y.current=null),w.current&&w.current.pause(),i(!1)},N=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%60),s=Math.floor(e%1*1e3);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"),",").concat(s.toString().padStart(3,"0"))};return(0,d.jsx)("div",{className:"auto-transcription-overlay",children:(0,d.jsxs)("div",{className:"auto-transcription-modal",children:[(0,d.jsxs)("div",{className:"transcription-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),(0,d.jsx)("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),"Auto-Transcription"]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,children:"\u2715"})]}),(0,d.jsxs)("div",{className:"transcription-content",children:[(0,d.jsxs)("div",{className:"settings-panel",children:[(0,d.jsx)("h3",{children:"Settings"}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Language"}),(0,d.jsx)("select",{value:m,onChange:e=>p(e.target.value),children:[{code:"en-US",name:"English (US)"},{code:"en-GB",name:"English (UK)"},{code:"es-ES",name:"Spanish"},{code:"fr-FR",name:"French"},{code:"de-DE",name:"German"},{code:"it-IT",name:"Italian"},{code:"pt-BR",name:"Portuguese (Brazil)"},{code:"ja-JP",name:"Japanese"},{code:"zh-CN",name:"Chinese (Simplified)"},{code:"ko-KR",name:"Korean"},{code:"ru-RU",name:"Russian"},{code:"ar-SA",name:"Arabic"},{code:"hi-IN",name:"Hindi"}].map(e=>(0,d.jsx)("option",{value:e.code,children:e.name},e.code))})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Export Format"}),(0,d.jsxs)("select",{value:b,onChange:e=>j(e.target.value),children:[(0,d.jsx)("option",{value:"srt",children:"SubRip (.srt)"}),(0,d.jsx)("option",{value:"vtt",children:"WebVTT (.vtt)"}),(0,d.jsx)("option",{value:"txt",children:"Plain Text (.txt)"}),(0,d.jsx)("option",{value:"json",children:"JSON (.json)"})]})]}),(0,d.jsx)("div",{className:"setting-group checkbox",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:f,onChange:e=>g(e.target.checked)}),"Auto-capitalize sentences"]})}),(0,d.jsx)("div",{className:"setting-group checkbox",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:v,onChange:e=>x(e.target.checked)}),"Auto-add punctuation"]})}),(0,d.jsxs)("div",{className:"action-buttons",children:[r?(0,d.jsxs)("button",{className:"stop-btn",onClick:S,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop"]}):(0,d.jsxs)("button",{className:"start-btn",onClick:async()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return;i(!0),o([]),h(0);const n=new e;n.continuous=!0,n.interimResults=!0,n.lang=m;const a=w.current;a.src=t.url,a.currentTime=0;let s={text:"",startTime:0,endTime:0};const l=[];n.onresult=e=>{let t="",n="";for(let a=e.resultIndex;a<e.results.length;a++){const s=e.results[a][0].transcript;e.results[a].isFinal?n+=s+" ":t+=s}if(n){let t=n.trim();f&&(t=t.charAt(0).toUpperCase()+t.slice(1)),v&&!t.match(/[.!?]$/)&&(t+=".");const r={text:t,startTime:s.startTime,endTime:a.currentTime,confidence:e.results[e.resultIndex][0].confidence};l.push(r),o([...l]),s={text:"",startTime:a.currentTime,endTime:0}}},n.onerror=e=>{console.error("Speech recognition error:",e.error),i(!1)},n.onend=()=>{a.currentTime<a.duration&&r?n.start():(i(!1),h(100))},a.play(),n.start(),y.current=n;const c=setInterval(()=>{if(a.duration){const e=a.currentTime/a.duration*100;h(e),a.currentTime>=a.duration&&(clearInterval(c),S())}},100)},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M8 5v14l11-7z"})}),"Start Transcription"]}),l.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{className:"download-btn",onClick:()=>{let e,n,a;switch(b){case"srt":e=(()=>{let e="";return l.forEach((t,n)=>{e+="".concat(n+1,"\n"),e+="".concat(N(t.startTime)," --\x3e ").concat(N(t.endTime),"\n"),e+="".concat(t.text,"\n\n")}),e})(),n="".concat(t.name||"transcript",".srt"),a="text/plain";break;case"vtt":e=(()=>{let e="WEBVTT\n\n";return l.forEach((t,n)=>{e+="".concat(n+1,"\n"),e+="".concat(N(t.startTime).replace(",",".")," --\x3e ").concat(N(t.endTime).replace(",","."),"\n"),e+="".concat(t.text,"\n\n")}),e})(),n="".concat(t.name||"transcript",".vtt"),a="text/vtt";break;case"txt":e=l.map(e=>e.text).join(" "),n="".concat(t.name||"transcript",".txt"),a="text/plain";break;case"json":e=JSON.stringify(l,null,2),n="".concat(t.name||"transcript",".json"),a="application/json";break;default:return}const s=new Blob([e],{type:a}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=n,i.click(),URL.revokeObjectURL(r)},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),"Download"]}),(0,d.jsxs)("button",{className:"save-btn",onClick:()=>{s&&s(c(c({},t),{},{transcription:l,transcriptionLanguage:m})),n()},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"})}),"Save with Video"]})]})]}),r&&(0,d.jsxs)("div",{className:"progress-container",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(u,"%")}})}),(0,d.jsxs)("span",{className:"progress-text",children:[Math.round(u),"% Complete"]})]})]}),(0,d.jsxs)("div",{className:"transcript-panel",children:[(0,d.jsxs)("h3",{children:["Transcript (",l.length," segments)"]}),(0,d.jsx)("div",{className:"transcript-list",children:0===l.length?(0,d.jsxs)("div",{className:"empty-state",children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),(0,d.jsx)("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),(0,d.jsx)("p",{children:"No transcription yet"}),(0,d.jsx)("p",{className:"hint",children:'Click "Start Transcription" to begin'})]}):l.map((e,t)=>(0,d.jsxs)("div",{className:"transcript-item",children:[(0,d.jsxs)("div",{className:"transcript-time",children:[N(e.startTime)," \u2192 ",N(e.endTime)]}),(0,d.jsx)("div",{className:"transcript-text",children:e.text}),e.confidence&&(0,d.jsxs)("div",{className:"confidence-badge",children:[Math.round(100*e.confidence),"% confidence"]})]},t))})]})]}),(0,d.jsx)("video",{ref:w,style:{display:"none"}})]})})},Fe=e=>{let{recording:t,onClose:n,onSave:s}=e;const[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)([]),[u,h]=(0,a.useState)(0),[m,p]=(0,a.useState)(30),[f,g]=(0,a.useState)(5),[v,x]=(0,a.useState)(null),b=(0,a.useRef)(null),j=(0,a.useRef)(null),y=(0,a.useCallback)(async()=>{i(!0),h(0),o([]);const e=j.current,n=b.current,a=n.getContext("2d");e.src=t.url,await new Promise(t=>{e.onloadedmetadata=t}),n.width=160,n.height=90;const s=[];let r=null;const l=m/100;let d=0;for(;d<e.duration;){e.currentTime=d,await new Promise(t=>{e.onseeked=t}),a.drawImage(e,0,0,n.width,n.height);const t=a.getImageData(0,0,n.width,n.height);if(r){const e=w(r,t);if(e>l){const t=s[s.length-1];(!t||d-t.time>=f)&&s.push({time:d,difference:e,title:"Chapter ".concat(s.length+1)})}}r=t,d+=.25,h(d/e.duration*100)}(0===s.length||s[0].time>0)&&s.unshift({time:0,difference:0,title:"Introduction"}),s[s.length-1].time<e.duration-1&&s.push({time:e.duration,difference:0,title:"Conclusion"});const u=await Promise.all(s.map(async(t,n)=>{e.currentTime=t.time,await new Promise(t=>{e.onseeked=t});const a=document.createElement("canvas");a.width=320,a.height=180;return a.getContext("2d").drawImage(e,0,0,a.width,a.height),c(c({},t),{},{id:Date.now()+n,thumbnail:a.toDataURL("image/jpeg",.7)})}));o(u),i(!1),h(100)},[t,m,f]),w=(e,t)=>{const n=e.data,a=t.data;let s=0;for(let r=0;r<n.length;r+=4){const e=n[r]-a[r],t=n[r+1]-a[r+1],i=n[r+2]-a[r+2];s+=Math.sqrt(e*e+t*t+i*i)}return s/(n.length/4)/441.67},S=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))},N=(e,t)=>{o(l.map(n=>n.id===e?c(c({},n),{},{title:t}):n)),x(null)},k=function(){let e,n,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";"json"===s?(e=JSON.stringify(l.map(e=>({time:e.time,title:e.title})),null,2),n="".concat(t.name||"chapters",".json"),a="application/json"):"youtube"===s&&(e=l.map(e=>"".concat(S(e.time)," ").concat(e.title)).join("\n"),n="".concat(t.name||"chapters",".txt"),a="text/plain");const r=new Blob([e],{type:a}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=n,o.click(),URL.revokeObjectURL(i)};return(0,d.jsx)("div",{className:"auto-chapters-overlay",children:(0,d.jsxs)("div",{className:"auto-chapters-modal",children:[(0,d.jsxs)("div",{className:"chapters-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"})}),"Auto-Chapters"]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,children:"\u2715"})]}),(0,d.jsxs)("div",{className:"chapters-content",children:[(0,d.jsxs)("div",{className:"settings-panel",children:[(0,d.jsx)("h3",{children:"Detection Settings"}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsxs)("label",{children:["Sensitivity: ",m,"%",(0,d.jsx)("span",{className:"hint",children:"Higher = More chapters"})]}),(0,d.jsx)("input",{type:"range",min:"10",max:"90",value:m,onChange:e=>p(parseInt(e.target.value)),className:"sensitivity-slider"})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsxs)("label",{children:["Min Chapter Length: ",f,"s",(0,d.jsx)("span",{className:"hint",children:"Minimum duration between chapters"})]}),(0,d.jsx)("input",{type:"range",min:"2",max:"30",value:f,onChange:e=>g(parseInt(e.target.value)),className:"sensitivity-slider"})]}),(0,d.jsxs)("div",{className:"action-buttons",children:[r?(0,d.jsxs)("button",{className:"analyzing-btn",disabled:!0,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"spin",children:(0,d.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8z"})}),"Analyzing..."]}):(0,d.jsxs)("button",{className:"analyze-btn",onClick:y,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"})}),"Analyze Video"]}),(0,d.jsxs)("button",{className:"add-chapter-btn",onClick:()=>{var e;const t={id:Date.now(),time:(null===(e=j.current)||void 0===e?void 0:e.currentTime)||0,title:"Chapter ".concat(l.length+1),thumbnail:null,difference:0};o([...l,t].sort((e,t)=>e.time-t.time))},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Chapter Manually"]}),l.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{className:"download-btn",onClick:()=>k("json"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),"Export JSON"]}),(0,d.jsxs)("button",{className:"download-btn",onClick:()=>k("youtube"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),"Export YouTube Format"]}),(0,d.jsxs)("button",{className:"save-btn",onClick:()=>{s&&s(c(c({},t),{},{chapters:l.map(e=>({time:e.time,title:e.title,thumbnail:e.thumbnail}))})),n()},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"})}),"Save with Video"]})]})]}),r&&(0,d.jsxs)("div",{className:"progress-container",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(u,"%")}})}),(0,d.jsxs)("span",{className:"progress-text",children:[Math.round(u),"% Complete"]})]}),(0,d.jsxs)("div",{className:"info-box",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"How it works:"}),(0,d.jsx)("p",{children:"Analyzes video frames to detect significant visual changes indicating scene transitions."})]})]})]}),(0,d.jsxs)("div",{className:"chapters-panel",children:[(0,d.jsx)("div",{className:"chapters-list-header",children:(0,d.jsxs)("h3",{children:["Chapters (",l.length,")"]})}),(0,d.jsx)("div",{className:"chapters-list",children:0===l.length?(0,d.jsxs)("div",{className:"empty-state",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"})}),(0,d.jsx)("p",{children:"No chapters detected"}),(0,d.jsx)("p",{className:"hint",children:'Click "Analyze Video" to detect chapters automatically'})]}):l.map((e,t)=>(0,d.jsxs)("div",{className:"chapter-item",children:[e.thumbnail&&(0,d.jsx)("img",{src:e.thumbnail,alt:e.title,className:"chapter-thumbnail"}),(0,d.jsxs)("div",{className:"chapter-info",children:[(0,d.jsxs)("div",{className:"chapter-number",children:["Chapter ",t+1]}),(0,d.jsx)("div",{className:"chapter-time",children:S(e.time)}),v===e.id?(0,d.jsx)("input",{type:"text",defaultValue:e.title,onBlur:t=>N(e.id,t.target.value),onKeyPress:t=>{"Enter"===t.key&&N(e.id,t.target.value)},autoFocus:!0,className:"chapter-title-input"}):(0,d.jsx)("div",{className:"chapter-title",onClick:()=>x(e.id),children:e.title})]}),(0,d.jsxs)("div",{className:"chapter-actions",children:[(0,d.jsx)("button",{className:"edit-chapter-btn",onClick:()=>x(e.id),title:"Edit title",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),(0,d.jsx)("button",{className:"delete-chapter-btn",onClick:()=>{return t=e.id,void o(l.filter(e=>e.id!==t));var t},title:"Delete chapter",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]},e.id))})]})]}),(0,d.jsx)("canvas",{ref:b,style:{display:"none"}}),(0,d.jsx)("video",{ref:j,style:{display:"none"}})]})})},Be=e=>{let{recording:t,onClose:n,onSave:s}=e;const[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)([]),[u,h]=(0,a.useState)(0),[m,p]=(0,a.useState)(30),[f,g]=(0,a.useState)(2),[v,x]=(0,a.useState)(null),[b,j]=(0,a.useState)("chapters"),y=(0,a.useRef)(null),w=(0,a.useRef)(null),S=(0,a.useRef)(null),N=(0,a.useRef)(null);(0,a.useEffect)(()=>{(async()=>{try{window.FrameDiffer&&(N.current=new window.FrameDiffer,console.log("Frame-differ WASM loaded"))}catch(e){console.log("WASM not available, using JavaScript fallback")}})()},[]);const k=(e,t)=>{try{return N.current.compare(e,t)}catch(n){return C(e.data,t.data)}},C=(e,t)=>{let n=0;const a=e.length/4;for(let s=0;s<e.length;s+=4){n+=(Math.abs(e[s]-t[s])+Math.abs(e[s+1]-t[s+1])+Math.abs(e[s+2]-t[s+2]))/3}return n/a*100/255},M=(e,t)=>{const n=document.createElement("canvas");n.width=160,n.height=90;const a=n.getContext("2d"),s=e.currentTime;return e.currentTime=t,a.drawImage(e,0,0,n.width,n.height),e.currentTime=s,n.toDataURL("image/jpeg",.7)},z=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%60);return t>0?"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(n,":").concat(a.toString().padStart(2,"0"))};return(0,d.jsx)("div",{className:"scene-detection-overlay",children:(0,d.jsxs)("div",{className:"scene-detection-modal",children:[(0,d.jsxs)("div",{className:"scene-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}),"AI Scene Detection"]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,"aria-label":"Close",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"scene-content",children:[(0,d.jsxs)("div",{className:"video-preview-section",children:[(0,d.jsx)("video",{ref:y,src:t.url,className:"preview-video",controls:!0}),(0,d.jsx)("canvas",{ref:w,style:{display:"none"}}),r&&(0,d.jsxs)("div",{className:"analysis-progress",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(u,"%")}})}),(0,d.jsxs)("p",{children:["Analyzing scenes... ",Math.round(u),"%"]})]})]}),(0,d.jsxs)("div",{className:"controls-panel",children:[(0,d.jsxs)("div",{className:"settings-group",children:[(0,d.jsxs)("label",{children:["Sensitivity: ",m,"%",(0,d.jsx)("input",{type:"range",min:"10",max:"80",value:m,onChange:e=>p(parseInt(e.target.value)),disabled:r}),(0,d.jsx)("span",{className:"range-hint",children:"Higher = more scene cuts detected"})]}),(0,d.jsxs)("label",{children:["Min Scene Duration: ",f,"s",(0,d.jsx)("input",{type:"range",min:"0.5",max:"10",step:"0.5",value:f,onChange:e=>g(parseFloat(e.target.value)),disabled:r}),(0,d.jsx)("span",{className:"range-hint",children:"Minimum length of each scene"})]})]}),(0,d.jsx)("div",{className:"action-buttons",children:r?(0,d.jsxs)("button",{className:"stop-analysis-btn",onClick:()=>i(!1),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop Analysis"]}):(0,d.jsxs)("button",{className:"analyze-btn",onClick:async()=>{if(!y.current)return;i(!0),o([]),h(0);const e=y.current,t=w.current,n=t.getContext("2d",{willReadFrequently:!0});t.width=320,t.height=180;const a=[];let s=0;return e.currentTime=0,new Promise(r=>{const l=()=>{if(e.currentTime>=e.duration)return e.duration-s>=f&&a.push({id:a.length,startTime:s,endTime:e.duration,duration:e.duration-s,thumbnail:M(e,s)}),o(a),i(!1),h(100),void r(a);n.drawImage(e,0,0,t.width,t.height);const c=n.getImageData(0,0,t.width,t.height);if(S.current){const t=N.current?k(S.current,c):C(S.current.data,c.data);if(t>m){const n=e.currentTime-s;n>=f&&(a.push({id:a.length,startTime:s,endTime:e.currentTime,duration:n,thumbnail:M(e,s),changeScore:t}),s=e.currentTime)}}S.current=c;const d=e.currentTime/e.duration*100;h(d),e.currentTime=Math.min(e.currentTime+.2,e.duration),requestAnimationFrame(l)};e.onseeked=()=>{l(),e.onseeked=null},e.currentTime=0})},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M14.25 2.1l-.35.32L8.5 7.83l-.35.32h1.07l3.87 3.87.52.52-.52.52-3.87 3.87H8.15l.35.32 5.4 5.41.35.32v-1.07l.52-.52 3.87-3.87.32-.35h-1.07l-.52-.52-3.87-3.87-.32-.35v1.07l-.52.52-3.87 3.87H7.08l.35-.32 5.4-5.41.32-.35v1.07l.52-.52 3.87-3.87.32-.35h-1.07l-.52-.52L12.4 3.17V2.1z"})}),"Analyze Scenes"]})}),l.length>0&&(0,d.jsxs)("div",{className:"export-section",children:[(0,d.jsx)("h3",{children:"Export Options"}),(0,d.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"export-format-select",children:[(0,d.jsx)("option",{value:"chapters",children:"YouTube Chapters"}),(0,d.jsx)("option",{value:"json",children:"JSON Data"}),(0,d.jsx)("option",{value:"edl",children:"Edit Decision List"})]}),(0,d.jsxs)("div",{className:"export-actions",children:[(0,d.jsxs)("button",{onClick:()=>{let e="";"chapters"===b?(e="Chapters:\n",l.forEach((t,n)=>{e+="".concat(z(t.startTime)," - Scene ").concat(n+1,"\n")})):"json"===b?e=JSON.stringify(l,null,2):"edl"===b&&l.forEach((t,n)=>{e+="".concat(n+1,"  001  V  C  ").concat(z(t.startTime)," ").concat(z(t.endTime)," ").concat(z(t.startTime)," ").concat(z(t.endTime),"\n")});const n=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download="".concat(t.name||"recording","_scenes.").concat("json"===b?"json":"txt"),s.click(),URL.revokeObjectURL(a)},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Scenes"]}),(0,d.jsxs)("button",{onClick:()=>{const e=c(c({},t),{},{chapters:l.map(e=>({time:e.startTime,title:"Scene ".concat(e.id+1)}))});s(e)},className:"save-btn",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save with Chapters"]})]})]})]}),(0,d.jsxs)("div",{className:"scenes-timeline",children:[(0,d.jsxs)("div",{className:"timeline-header",children:[(0,d.jsxs)("h3",{children:["Detected Scenes (",l.length,")"]}),l.length>0&&(0,d.jsxs)("span",{className:"total-duration",children:["Total: ",z(t.duration||0)]})]}),0===l.length?(0,d.jsx)("div",{className:"empty-scenes",children:(0,d.jsx)("p",{children:'No scenes detected yet. Click "Analyze Scenes" to start.'})}):(0,d.jsx)("div",{className:"scenes-grid",children:l.map((e,t)=>(0,d.jsxs)("div",{className:"scene-card ".concat((null===v||void 0===v?void 0:v.id)===e.id?"selected":""),onClick:()=>(e=>{y.current&&(y.current.currentTime=e.startTime,x(e))})(e),children:[(0,d.jsxs)("div",{className:"scene-thumbnail",children:[e.thumbnail&&(0,d.jsx)("img",{src:e.thumbnail,alt:"Scene ".concat(t+1)}),(0,d.jsxs)("div",{className:"scene-number",children:["#",t+1]})]}),(0,d.jsxs)("div",{className:"scene-info",children:[(0,d.jsxs)("div",{className:"scene-time",children:[z(e.startTime)," - ",z(e.endTime)]}),(0,d.jsxs)("div",{className:"scene-duration",children:["Duration: ",e.duration.toFixed(1),"s"]}),e.changeScore&&(0,d.jsxs)("div",{className:"scene-score",children:["Change: ",e.changeScore.toFixed(1),"%"]})]}),(0,d.jsxs)("div",{className:"scene-actions",children:[t<l.length-1&&(0,d.jsx)("button",{onClick:e=>{e.stopPropagation(),((e,t)=>{const n=[...l],a=c(c({},n[e]),{},{endTime:n[t].endTime,duration:n[t].endTime-n[e].startTime});n[e]=a,n.splice(t,1),n.forEach((e,t)=>e.id=t),o(n)})(t,t+1)},title:"Merge with next",className:"action-btn",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})}),(0,d.jsx)("button",{onClick:n=>{n.stopPropagation();const a=(e.startTime+e.endTime)/2;((e,t)=>{const n=[...l],a=n[e],s={id:a.id,startTime:a.startTime,endTime:t,duration:t-a.startTime,thumbnail:a.thumbnail},r={id:a.id+1,startTime:t,endTime:a.endTime,duration:a.endTime-t,thumbnail:M(y.current,t)};n[e]=s,n.splice(e+1,0,r),n.forEach((e,t)=>e.id=t),o(n)})(t,a)},title:"Split scene",className:"action-btn",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})}),(0,d.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{const t=l.filter((t,n)=>n!==e);t.forEach((e,t)=>e.id=t),o(t)})(t)},title:"Delete scene",className:"action-btn delete",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))})]})]})]})})},Ie=e=>{let{recording:t,onClose:n,onSave:s}=e;const[r,i]=(0,a.useState)("greenscreen"),[l,o]=(0,a.useState)(!1),[u,h]=(0,a.useState)(0),[m,p]=(0,a.useState)(30),[f,g]=(0,a.useState)(10),[v,x]=(0,a.useState)(null),[b,j]=(0,a.useState)("#000000"),[y,w]=(0,a.useState)(.5),[S,N]=(0,a.useState)(!0),k=(0,a.useRef)(null),C=(0,a.useRef)(null),M=(0,a.useRef)(null),z=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(S&&k.current&&M.current){const e=k.current,t=M.current,n=t.getContext("2d");t.width=e.videoWidth||640,t.height=e.videoHeight||480;const a=()=>{S&&e.paused||(n.drawImage(e,0,0,t.width,t.height),E(n,t.width,t.height),requestAnimationFrame(a))};return e.addEventListener("play",a),e.play(),()=>{e.removeEventListener("play",a)}}},[S,r,m,f,b,v,y]);const E=(e,t,n)=>{const a=e.getImageData(0,0,t,n),s=a.data;if("greenscreen"===r?T(s,m):"auto"===r&&P(s,y),e.putImageData(a,0,0),"blur"===r)e.filter="blur(".concat(f,"px)"),e.drawImage(M.current,0,0),e.filter="none";else if("replace"===r)if(v){const a=new Image;a.src=v,e.globalCompositeOperation="destination-over",e.drawImage(a,0,0,t,n),e.globalCompositeOperation="source-over"}else e.globalCompositeOperation="destination-over",e.fillStyle=b,e.fillRect(0,0,t,n),e.globalCompositeOperation="source-over"},T=(e,t)=>{const n=t/100;for(let a=0;a<e.length;a+=4){const t=e[a],s=e[a+1],r=e[a+2];s>t*(1+n)&&s>r*(1+n)&&(e[a+3]=0)}},P=(e,t)=>{const n=M.current.width,a=M.current.height,s=[];for(let d=0;d<n;d+=10)s.push({r:e[4*d],g:e[4*d+1],b:e[4*d+2]});const r=(a-1)*n*4;for(let d=0;d<n;d+=10){const t=r+4*d;s.push({r:e[t],g:e[t+1],b:e[t+2]})}for(let d=0;d<a;d+=10){const t=d*n*4;s.push({r:e[t],g:e[t+1],b:e[t+2]})}for(let d=0;d<a;d+=10){const t=4*(d*n+n-1);s.push({r:e[t],g:e[t+1],b:e[t+2]})}const i=s.reduce((e,t)=>e+t.r,0)/s.length,l=s.reduce((e,t)=>e+t.g,0)/s.length,o=s.reduce((e,t)=>e+t.b,0)/s.length,c=100*t;for(let d=0;d<e.length;d+=4){const t=e[d],n=e[d+1],a=e[d+2];Math.abs(t-i)+Math.abs(n-l)+Math.abs(a-o)<c&&(e[d+3]=0)}};return(0,d.jsx)("div",{className:"background-removal-overlay",children:(0,d.jsxs)("div",{className:"background-removal-modal",children:[(0,d.jsxs)("div",{className:"removal-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"AI Background Removal"]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,"aria-label":"Close",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"removal-content",children:[(0,d.jsxs)("div",{className:"preview-section",children:[(0,d.jsxs)("div",{className:"preview-container",children:[(0,d.jsx)("video",{ref:k,src:t.url,className:"source-video",style:{display:"none"},loop:!0,muted:!0}),(0,d.jsx)("canvas",{ref:M,className:"preview-canvas"}),(0,d.jsx)("canvas",{ref:C,style:{display:"none"}})]}),l&&(0,d.jsxs)("div",{className:"processing-progress",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(u,"%")}})}),(0,d.jsxs)("p",{children:["Processing video... ",Math.round(u),"%"]})]}),(0,d.jsx)("div",{className:"preview-controls",children:(0,d.jsxs)("button",{onClick:()=>N(!S),className:S?"active":"",children:[S?"Hide":"Show"," Preview"]})})]}),(0,d.jsxs)("div",{className:"settings-panel",children:[(0,d.jsxs)("div",{className:"mode-selector",children:[(0,d.jsx)("h3",{children:"Removal Mode"}),(0,d.jsxs)("div",{className:"mode-buttons",children:[(0,d.jsxs)("button",{className:"greenscreen"===r?"active":"",onClick:()=>i("greenscreen"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"})}),"Green Screen"]}),(0,d.jsxs)("button",{className:"auto"===r?"active":"",onClick:()=>i("auto"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Auto Detect"]}),(0,d.jsxs)("button",{className:"blur"===r?"active":"",onClick:()=>i("blur"),children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Blur"]}),(0,d.jsxs)("button",{className:"replace"===r?"active":"",onClick:()=>i("replace"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Replace"]})]})]}),("greenscreen"===r||"auto"===r)&&(0,d.jsx)("div",{className:"settings-group",children:(0,d.jsxs)("label",{children:["greenscreen"===r?"Sensitivity":"Threshold",": ","greenscreen"===r?m:Math.round(100*y),"%",(0,d.jsx)("input",{type:"range",min:"greenscreen"===r?10:0,max:"greenscreen"===r?80:100,step:1,value:"greenscreen"===r?m:100*y,onChange:e=>"greenscreen"===r?p(parseInt(e.target.value)):w(parseInt(e.target.value)/100)}),(0,d.jsx)("span",{className:"range-hint",children:"greenscreen"===r?"How much green variation to remove":"How different from background to keep"})]})}),"blur"===r&&(0,d.jsx)("div",{className:"settings-group",children:(0,d.jsxs)("label",{children:["Blur Amount: ",f,"px",(0,d.jsx)("input",{type:"range",min:"2",max:"30",value:f,onChange:e=>g(parseInt(e.target.value))}),(0,d.jsx)("span",{className:"range-hint",children:"Blur intensity for background"})]})}),"replace"===r&&(0,d.jsxs)("div",{className:"background-options",children:[(0,d.jsx)("h3",{children:"Background Options"}),(0,d.jsx)("div",{className:"preset-backgrounds",children:[{name:"Black",color:"#000000"},{name:"White",color:"#ffffff"},{name:"Blue",color:"#0ea5e9"},{name:"Green",color:"#10b981"},{name:"Purple",color:"#8b5cf6"},{name:"Gradient 1",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{name:"Gradient 2",gradient:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},{name:"Gradient 3",gradient:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}].map((e,t)=>(0,d.jsx)("button",{className:"preset-bg",style:{background:e.gradient||e.color},onClick:()=>{j(e.color||e.gradient),x(null)},title:e.name},t))}),(0,d.jsxs)("div",{className:"custom-background",children:[(0,d.jsxs)("label",{children:["Custom Color:",(0,d.jsx)("input",{type:"color",value:b,onChange:e=>{j(e.target.value),x(null)}})]}),(0,d.jsxs)("button",{className:"upload-bg-btn",onClick:()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.click()},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Image"]}),(0,d.jsx)("input",{ref:z,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{x(e.target.result)},e.readAsDataURL(t)}},style:{display:"none"}})]})]}),(0,d.jsx)("div",{className:"action-section",children:(0,d.jsx)("button",{className:"process-btn",onClick:async()=>{if(!k.current)return;o(!0),h(0);const e=k.current,n=C.current,a=n.getContext("2d");n.width=e.videoWidth,n.height=e.videoHeight;const r=n.captureStream(30),i=new MediaRecorder(r,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:5e6}),l=[];i.ondataavailable=e=>l.push(e.data),i.onstop=()=>{const e=new Blob(l,{type:"video/webm"}),n=c(c({},t),{},{blob:e,url:URL.createObjectURL(e),name:"".concat(t.name||"recording","_bg_removed"),timestamp:Date.now(),size:e.size});o(!1),s(n)},i.start(),e.currentTime=0,e.play();const d=()=>{if(e.currentTime>=e.duration)return i.stop(),void e.pause();a.drawImage(e,0,0,n.width,n.height),E(a,n.width,n.height);const t=e.currentTime/e.duration*100;h(t),requestAnimationFrame(d)};d()},disabled:l,children:l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner"}),"Processing..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply & Save"]})})})]})]})]})})},Oe=e=>{let{recording:t,onClose:n,onSave:s}=e;const[r,i]=(0,a.useState)("16:9"),[l,o]=(0,a.useState)("center"),[u,h]=(0,a.useState)(1),[m,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(0),[v,x]=(0,a.useState)({x:0,y:0,width:100,height:100}),[b,j]=(0,a.useState)(!1),[y,w]=(0,a.useState)({x:0,y:0}),S=(0,a.useRef)(null),N=(0,a.useRef)(null),k=(0,a.useRef)(null),C=((0,a.useRef)(null),[{name:"16:9",ratio:16/9,label:"Landscape (YouTube, TV)"},{name:"9:16",ratio:9/16,label:"Portrait (TikTok, Stories)"},{name:"1:1",ratio:1,label:"Square (Instagram)"},{name:"4:3",ratio:4/3,label:"Classic"},{name:"21:9",ratio:21/9,label:"Cinematic"},{name:"4:5",ratio:.8,label:"Instagram Portrait"}]);(0,a.useEffect)(()=>{if(S.current&&k.current){const e=S.current,t=k.current,n=t.getContext("2d"),a=C.find(e=>e.name===r),s=800,i=600;a.ratio>1?(t.width=Math.min(s,i*a.ratio),t.height=t.width/a.ratio):(t.height=Math.min(i,s/a.ratio),t.width=t.height*a.ratio);const o=()=>{if(e.paused&&e.currentTime>0)return;const s=e.videoWidth/e.videoHeight,r=a.ratio;let i,c,d,h;if("manual"===l)i=v.x/100*e.videoWidth,c=v.y/100*e.videoHeight,d=v.width/100*e.videoWidth,h=v.height/100*e.videoHeight;else if("auto"===l)i=.25*e.videoWidth,c=.25*e.videoHeight,d=.5*e.videoWidth,h=.5*e.videoHeight;else if(s>r)switch(h=e.videoHeight,d=e.videoHeight*r,c=0,l){case"left":i=0;break;case"right":i=e.videoWidth-d;break;default:i=(e.videoWidth-d)/2}else switch(d=e.videoWidth,h=e.videoWidth/r,i=0,l){case"top":c=0;break;case"bottom":c=e.videoHeight-h;break;default:c=(e.videoHeight-h)/2}const m=(1-1/u)/2;i+=d*m,c+=h*m,d/=u,h/=u,n.clearRect(0,0,t.width,t.height),n.drawImage(e,i,c,d,h,0,0,t.width,t.height),requestAnimationFrame(o)};return e.addEventListener("play",o),e.paused||o(),()=>{e.removeEventListener("play",o)}}},[r,l,u,v]);const M=()=>{j(!1)};return(0,d.jsx)("div",{className:"smart-crop-overlay",children:(0,d.jsxs)("div",{className:"smart-crop-modal",children:[(0,d.jsxs)("div",{className:"crop-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),"Smart Crop & Zoom"]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,"aria-label":"Close",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"crop-content",children:[(0,d.jsxs)("div",{className:"preview-section",children:[(0,d.jsxs)("div",{className:"preview-wrapper",children:[(0,d.jsx)("video",{ref:S,src:t.url,className:"source-video",style:{display:"none"},loop:!0,muted:!0,autoPlay:!0}),(0,d.jsx)("canvas",{ref:k,className:"preview-canvas",onMouseDown:e=>{"manual"===l&&(j(!0),w({x:e.clientX,y:e.clientY}))},onMouseMove:e=>{if(!b||"manual"!==l)return;const t=e.clientX-y.x,n=e.clientY-y.y;x(e=>c(c({},e),{},{x:Math.max(0,Math.min(100-e.width,e.x+t/5)),y:Math.max(0,Math.min(100-e.height,e.y+n/5))})),w({x:e.clientX,y:e.clientY})},onMouseUp:M,onMouseLeave:M}),(0,d.jsx)("canvas",{ref:N,style:{display:"none"}}),"manual"===l&&(0,d.jsx)("div",{className:"manual-crop-hint",children:"Click and drag to adjust crop position"})]}),m&&(0,d.jsxs)("div",{className:"processing-progress",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(f,"%")}})}),(0,d.jsxs)("p",{children:["Processing video... ",Math.round(f),"%"]})]})]}),(0,d.jsxs)("div",{className:"settings-panel",children:[(0,d.jsxs)("div",{className:"aspect-ratio-selector",children:[(0,d.jsx)("h3",{children:"Aspect Ratio"}),(0,d.jsx)("div",{className:"ratio-grid",children:C.map(e=>(0,d.jsxs)("button",{className:"ratio-btn ".concat(r===e.name?"active":""),onClick:()=>i(e.name),children:[(0,d.jsx)("div",{className:"ratio-preview",style:{aspectRatio:e.ratio}}),(0,d.jsx)("span",{className:"ratio-name",children:e.name}),(0,d.jsx)("span",{className:"ratio-label",children:e.label})]},e.name))})]}),(0,d.jsxs)("div",{className:"crop-mode-selector",children:[(0,d.jsx)("h3",{children:"Crop Position"}),(0,d.jsx)("div",{className:"mode-grid",children:[{id:"center",name:"Center",icon:"\u22a1"},{id:"top",name:"Top",icon:"\u2b06"},{id:"bottom",name:"Bottom",icon:"\u2b07"},{id:"left",name:"Left",icon:"\u2b05"},{id:"right",name:"Right",icon:"\u27a1"},{id:"auto",name:"Auto",icon:"\ud83c\udfaf"},{id:"manual",name:"Manual",icon:"\u270b"}].map(e=>(0,d.jsxs)("button",{className:"mode-btn ".concat(l===e.id?"active":""),onClick:()=>o(e.id),children:[(0,d.jsx)("span",{className:"mode-icon",children:e.icon}),(0,d.jsx)("span",{className:"mode-name",children:e.name})]},e.id))})]}),(0,d.jsx)("div",{className:"zoom-control",children:(0,d.jsxs)("label",{children:["Zoom: ",u.toFixed(1),"x",(0,d.jsx)("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:u,onChange:e=>h(parseFloat(e.target.value))}),(0,d.jsx)("span",{className:"range-hint",children:"Zoom into the video"})]})}),"manual"===l&&(0,d.jsxs)("div",{className:"manual-controls",children:[(0,d.jsx)("h3",{children:"Manual Adjustment"}),(0,d.jsxs)("div",{className:"manual-inputs",children:[(0,d.jsxs)("label",{children:["Width: ",v.width,"%",(0,d.jsx)("input",{type:"range",min:"20",max:"100",value:v.width,onChange:e=>x(t=>c(c({},t),{},{width:parseInt(e.target.value)}))})]}),(0,d.jsxs)("label",{children:["Height: ",v.height,"%",(0,d.jsx)("input",{type:"range",min:"20",max:"100",value:v.height,onChange:e=>x(t=>c(c({},t),{},{height:parseInt(e.target.value)}))})]})]})]}),(0,d.jsx)("div",{className:"action-section",children:(0,d.jsx)("button",{className:"process-btn",onClick:async()=>{if(!S.current)return;p(!0),g(0);const e=S.current,n=N.current,a=n.getContext("2d"),i=C.find(e=>e.name===r);i.ratio>1?(n.width=1920,n.height=1920/i.ratio):(n.height=1920,n.width=1920*i.ratio);const o=n.captureStream(30),d=new MediaRecorder(o,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:5e6}),h=[];d.ondataavailable=e=>h.push(e.data),d.onstop=()=>{const e=new Blob(h,{type:"video/webm"}),n=c(c({},t),{},{blob:e,url:URL.createObjectURL(e),name:"".concat(t.name||"recording","_").concat(r.replace(":","x")),timestamp:Date.now(),size:e.size,aspectRatio:r});p(!1),s(n)},d.start(),e.currentTime=0,e.play();const m=()=>{if(e.currentTime>=e.duration)return d.stop(),void e.pause();const t=e.videoWidth/e.videoHeight,s=i.ratio;let r,o,c,h;if("manual"===l)r=v.x/100*e.videoWidth,o=v.y/100*e.videoHeight,c=v.width/100*e.videoWidth,h=v.height/100*e.videoHeight;else if("auto"===l)r=.25*e.videoWidth,o=.25*e.videoHeight,c=.5*e.videoWidth,h=.5*e.videoHeight;else if(t>s)switch(h=e.videoHeight,c=e.videoHeight*s,o=0,l){case"left":r=0;break;case"right":r=e.videoWidth-c;break;default:r=(e.videoWidth-c)/2}else switch(c=e.videoWidth,h=e.videoWidth/s,r=0,l){case"top":o=0;break;case"bottom":o=e.videoHeight-h;break;default:o=(e.videoHeight-h)/2}const p=(1-1/u)/2;r+=c*p,o+=h*p,c/=u,h/=u,a.clearRect(0,0,n.width,n.height),a.drawImage(e,r,o,c,h,0,0,n.width,n.height);const f=e.currentTime/e.duration*100;g(f),requestAnimationFrame(m)};m()},disabled:m,children:m?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner"}),"Processing..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply & Save"]})})})]})]})]})})};const Ve=new class{constructor(){this.supportedFormats={mp4:{name:"MP4",mimeType:"video/mp4",extension:".mp4",codecs:["h264","h265"],description:"Universal format, best compatibility",platforms:["YouTube","Instagram","Facebook","TikTok"],quality:"high",compression:"good"},webm:{name:"WebM",mimeType:"video/webm",extension:".webm",codecs:["vp8","vp9","av1"],description:"Open format, excellent compression",platforms:["Web","Chrome","Firefox"],quality:"high",compression:"excellent"},mov:{name:"MOV",mimeType:"video/quicktime",extension:".mov",codecs:["h264","h265"],description:"Apple format, professional editing",platforms:["Final Cut Pro","iMovie","Mac"],quality:"very high",compression:"low"},avi:{name:"AVI",mimeType:"video/x-msvideo",extension:".avi",codecs:["h264","xvid"],description:"Legacy format, wide compatibility",platforms:["Windows","VLC","Legacy systems"],quality:"medium",compression:"low"},mkv:{name:"MKV",mimeType:"video/x-matroska",extension:".mkv",codecs:["h264","h265","vp9"],description:"Container format, supports multiple tracks",platforms:["VLC","MPC","Professional use"],quality:"very high",compression:"variable"}},this.codecs={h264:{name:"H.264 (AVC)",description:"Industry standard, universal compatibility",profile:"main",level:"4.0",quality:"high",compression:"good",speed:"fast",fileSize:"medium",cpuUsage:"medium",compatibility:"excellent"},h265:{name:"H.265 (HEVC)",description:"Next-gen codec, 50% better compression",profile:"main",level:"5.0",quality:"very high",compression:"excellent",speed:"slow",fileSize:"small",cpuUsage:"high",compatibility:"good"},vp8:{name:"VP8",description:"Open codec, good for web",quality:"good",compression:"good",speed:"medium",fileSize:"medium",cpuUsage:"medium",compatibility:"good"},vp9:{name:"VP9",description:"Google codec, excellent quality",quality:"very high",compression:"excellent",speed:"slow",fileSize:"small",cpuUsage:"high",compatibility:"good"},av1:{name:"AV1",description:"Future codec, best compression",quality:"excellent",compression:"best",speed:"very slow",fileSize:"very small",cpuUsage:"very high",compatibility:"limited"}},this.qualityPresets={low:{name:"Low (480p)",resolution:"854x480",bitrate:1e3,fps:24,audioBitrate:96,description:"Small file size, mobile viewing"},medium:{name:"Medium (720p)",resolution:"1280x720",bitrate:2500,fps:30,audioBitrate:128,description:"Balanced quality and size"},high:{name:"High (1080p)",resolution:"1920x1080",bitrate:5e3,fps:30,audioBitrate:192,description:"Full HD quality"},veryhigh:{name:"Very High (1080p 60fps)",resolution:"1920x1080",bitrate:8e3,fps:60,audioBitrate:256,description:"Premium quality, smooth motion"},ultra:{name:"Ultra (4K)",resolution:"3840x2160",bitrate:16e3,fps:30,audioBitrate:320,description:"4K resolution, maximum quality"},custom:{name:"Custom",resolution:"1920x1080",bitrate:5e3,fps:30,audioBitrate:192,description:"Define your own settings"}},this.batchQueue=[],this.batchProgress={},this.onBatchProgressUpdate=null}async exportVideo(e,t){const{format:n="mp4",codec:a="h264",quality:s="high",filename:r="recording",customSettings:i={}}=t,l=this.supportedFormats[n],o=this.codecs[a],c=this.qualityPresets[s];if(!l||!o)throw new Error("Unsupported format or codec");const d=document.createElement("video");d.src=URL.createObjectURL(e),await new Promise(e=>{d.onloadedmetadata=e});const[u,h]=(i.resolution||c.resolution).split("x").map(Number),m=document.createElement("canvas");m.width=u,m.height=h;const p=m.getContext("2d"),f=i.fps||c.fps,g=m.captureStream(f),v=this.getMimeType(n,a),x=1e3*(i.bitrate||c.bitrate),b=new MediaRecorder(g,{mimeType:v,videoBitsPerSecond:x,audioBitsPerSecond:1e3*(i.audioBitrate||c.audioBitrate)}),j=[];return b.ondataavailable=e=>j.push(e.data),new Promise((e,t)=>{b.onstop=()=>{const t=new Blob(j,{type:v}),i={blob:t,url:URL.createObjectURL(t),filename:"".concat(r).concat(l.extension),format:n,codec:a,quality:s,size:t.size,timestamp:Date.now(),settings:{resolution:"".concat(u,"x").concat(h),bitrate:x,fps:f,codec:o.name}};e(i)},b.onerror=t,b.start(),d.currentTime=0,d.play();const i=()=>{if(d.ended||d.paused)return b.stop(),d.pause(),void URL.revokeObjectURL(d.src);const e=d.videoWidth/d.videoHeight,t=m.width/m.height;let n,a,s,r;e>t?(r=d.videoHeight,s=d.videoHeight*t,n=(d.videoWidth-s)/2,a=0):(s=d.videoWidth,r=d.videoWidth/t,n=0,a=(d.videoHeight-r)/2),p.drawImage(d,n,a,s,r,0,0,m.width,m.height),requestAnimationFrame(i)};i()})}getMimeType(e,t){return{"mp4-h264":"video/mp4;codecs=avc1.42E01E","mp4-h265":"video/mp4;codecs=hev1.1.6.L93.B0","webm-vp8":"video/webm;codecs=vp8","webm-vp9":"video/webm;codecs=vp9","webm-av1":"video/webm;codecs=av01","mov-h264":"video/mp4;codecs=avc1.42E01E","mov-h265":"video/mp4;codecs=hev1.1.6.L93.B0","avi-h264":"video/mp4;codecs=avc1.42E01E","mkv-h264":"video/webm;codecs=vp9"}["".concat(e,"-").concat(t)]||"video/webm;codecs=vp9"}isCodecSupported(e,t){const n=this.getMimeType(e,t);return MediaRecorder.isTypeSupported(n)}getSupportedCodecs(e){const t=this.supportedFormats[e];return t?t.codecs.filter(t=>this.isCodecSupported(e,t)):[]}addToBatch(e,t){const n="batch_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));return this.batchQueue.push({id:n,videoBlob:e,settings:t,status:"pending",progress:0,result:null,error:null}),this.batchProgress[n]={status:"pending",progress:0},n}async processBatch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=this.batchQueue.filter(e=>"pending"===e.status);if(0===t.length)return[];const n=[];for(let a=0;a<t.length;a+=e){const s=t.slice(a,a+e).map(e=>this.processBatchItem(e)),r=await Promise.allSettled(s);n.push(...r)}return n}async processBatchItem(e){e.status="processing",this.updateBatchProgress(e.id,"processing",0);try{const t=await this.exportVideo(e.videoBlob,e.settings);return e.status="completed",e.result=t,e.progress=100,this.updateBatchProgress(e.id,"completed",100,t),t}catch(t){throw e.status="failed",e.error=t.message,this.updateBatchProgress(e.id,"failed",0,null,t.message),t}}updateBatchProgress(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.batchProgress[e]={status:t,progress:n,result:a,error:s},this.onBatchProgressUpdate&&this.onBatchProgressUpdate(e,this.batchProgress[e])}getBatchStatus(){return{total:this.batchQueue.length,pending:this.batchQueue.filter(e=>"pending"===e.status).length,processing:this.batchQueue.filter(e=>"processing"===e.status).length,completed:this.batchQueue.filter(e=>"completed"===e.status).length,failed:this.batchQueue.filter(e=>"failed"===e.status).length,progress:this.batchProgress}}clearBatch(){this.batchQueue=[],this.batchProgress={}}removeBatchItem(e){this.batchQueue=this.batchQueue.filter(t=>t.id!==e),delete this.batchProgress[e]}estimateFileSize(e,t){const n=this.qualityPresets[t.quality||"high"];return(1e3*(t.bitrate||n.bitrate)+1e3*(t.audioBitrate||n.audioBitrate))*e/8}formatBytes(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB","TB"][t]}getRecommendations(e){const t={"social-media":{format:"mp4",codec:"h264",quality:"high",description:"Best compatibility for social platforms"},professional:{format:"mov",codec:"h265",quality:"ultra",description:"High quality for professional editing"},web:{format:"webm",codec:"vp9",quality:"high",description:"Optimized for web streaming"},archive:{format:"mkv",codec:"h265",quality:"veryhigh",description:"Long-term storage with good compression"},"quick-share":{format:"mp4",codec:"h264",quality:"medium",description:"Small file size for quick sharing"},mobile:{format:"mp4",codec:"h264",quality:"medium",description:"Optimized for mobile devices"}};return t[e]||t["social-media"]}},He=e=>{let{recording:t,onClose:n,onSave:s}=e;const[r,i]=(0,a.useState)("youtube"),[l,o]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(0),[f,g]=(0,a.useState)("mp4"),[v,x]=(0,a.useState)("h264"),[b,j]=(0,a.useState)("high"),[y,w]=(0,a.useState)({format:"mp4",quality:"high",bitrate:5e3,fps:30,resolution:"1920x1080",codec:"h264"}),S=(0,a.useRef)(null),N=[{id:"youtube",name:"YouTube",icon:"\ud83d\udcfa",color:"#FF0000",recommended:{aspectRatio:"16:9",resolution:"1920x1080",format:"mp4",codec:"h264",bitrate:8e3,fps:30,maxDuration:null,maxSize:274877906944},description:"Optimized for YouTube uploads (1080p, 30fps)"},{id:"instagram",name:"Instagram Feed",icon:"\ud83d\udcf7",color:"#E4405F",recommended:{aspectRatio:"1:1",resolution:"1080x1080",format:"mp4",codec:"h264",bitrate:5e3,fps:30,maxDuration:60,maxSize:104857600},description:"Square format, max 60s, optimized compression"},{id:"instagram-story",name:"Instagram Story",icon:"\ud83d\udcf1",color:"#C13584",recommended:{aspectRatio:"9:16",resolution:"1080x1920",format:"mp4",codec:"h264",bitrate:4e3,fps:30,maxDuration:15,maxSize:52428800},description:"Vertical format, max 15s, mobile-optimized"},{id:"tiktok",name:"TikTok",icon:"\ud83c\udfb5",color:"#000000",recommended:{aspectRatio:"9:16",resolution:"1080x1920",format:"mp4",codec:"h264",bitrate:4e3,fps:30,maxDuration:180,maxSize:301570457.6},description:"Vertical format, max 3min, high engagement"},{id:"twitter",name:"Twitter/X",icon:"\ud83d\udc26",color:"#1DA1F2",recommended:{aspectRatio:"16:9",resolution:"1280x720",format:"mp4",codec:"h264",bitrate:5e3,fps:30,maxDuration:140,maxSize:536870912},description:"Landscape format, max 2:20, quick loading"},{id:"linkedin",name:"LinkedIn",icon:"\ud83d\udcbc",color:"#0077B5",recommended:{aspectRatio:"16:9",resolution:"1920x1080",format:"mp4",codec:"h264",bitrate:5e3,fps:30,maxDuration:600,maxSize:5368709120},description:"Professional quality, max 10min"},{id:"discord",name:"Discord",icon:"\ud83d\udcac",color:"#5865F2",recommended:{aspectRatio:"16:9",resolution:"1280x720",format:"mp4",codec:"h264",bitrate:2500,fps:30,maxDuration:null,maxSize:8388608},description:"Compressed for quick sharing (8MB limit)"},{id:"custom",name:"Custom",icon:"\u2699\ufe0f",color:"#6366f1",recommended:{aspectRatio:"16:9",resolution:"1920x1080",format:"mp4",codec:"h264",bitrate:5e3,fps:30,maxDuration:null,maxSize:null},description:"Customize all export settings"}],k=N.find(e=>e.id===r),C=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]},M=e=>{if(!e)return"No limit";const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))};return(0,d.jsx)("div",{className:"export-optimizer-overlay",children:(0,d.jsxs)("div",{className:"export-optimizer-modal",children:[(0,d.jsxs)("div",{className:"optimizer-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"AI Export Optimizer"]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,"aria-label":"Close",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"optimizer-content",children:[(0,d.jsxs)("div",{className:"platforms-section",children:[(0,d.jsx)("h3",{children:"Select Platform"}),(0,d.jsx)("div",{className:"platforms-grid",children:N.map(e=>(0,d.jsxs)("button",{className:"platform-card ".concat(r===e.id?"active":""),onClick:()=>i(e.id),style:{"--platform-color":e.color},children:[(0,d.jsx)("div",{className:"platform-icon",children:e.icon}),(0,d.jsxs)("div",{className:"platform-info",children:[(0,d.jsx)("h4",{children:e.name}),(0,d.jsx)("p",{children:e.description})]}),r===e.id&&(0,d.jsx)("div",{className:"selected-indicator",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})})]},e.id))})]}),(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsxs)("div",{className:"format-codec-section",children:[(0,d.jsx)("h3",{children:"Export Format & Codec"}),(0,d.jsxs)("div",{className:"format-codec-grid",children:[(0,d.jsxs)("div",{className:"format-selector",children:[(0,d.jsx)("label",{children:"Format"}),(0,d.jsx)("select",{value:f,onChange:e=>{const t=e.target.value;g(t);const n=Ve.getSupportedCodecs(t);n.includes(v)||x(n[0]||"h264")},disabled:u,children:Object.entries(Ve.supportedFormats).map(e=>{let[t,n]=e;return(0,d.jsxs)("option",{value:t,children:[n.name," - ",n.description]},t)})}),(0,d.jsx)("div",{className:"format-details",children:Ve.supportedFormats[f]&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{className:"detail-badge",children:[Ve.supportedFormats[f].quality," quality"]}),(0,d.jsxs)("span",{className:"detail-badge",children:[Ve.supportedFormats[f].compression," compression"]})]})})]}),(0,d.jsxs)("div",{className:"codec-selector",children:[(0,d.jsx)("label",{children:"Codec"}),(0,d.jsx)("select",{value:v,onChange:e=>x(e.target.value),disabled:u,children:Ve.getSupportedCodecs(f).map(e=>{const t=Ve.codecs[e];return(0,d.jsxs)("option",{value:e,children:[t.name," - ",t.description]},e)})}),(0,d.jsx)("div",{className:"codec-details",children:Ve.codecs[v]&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{className:"detail-badge",children:["Compression: ",Ve.codecs[v].compression]}),(0,d.jsxs)("span",{className:"detail-badge",children:["File Size: ",Ve.codecs[v].fileSize]}),(0,d.jsxs)("span",{className:"detail-badge",children:["CPU: ",Ve.codecs[v].cpuUsage]})]})})]}),(0,d.jsxs)("div",{className:"quality-selector",children:[(0,d.jsx)("label",{children:"Quality Preset"}),(0,d.jsx)("select",{value:b,onChange:e=>j(e.target.value),disabled:u,children:Object.entries(Ve.qualityPresets).map(e=>{let[t,n]=e;return(0,d.jsxs)("option",{value:t,children:[n.name," - ",n.description]},t)})}),(0,d.jsx)("div",{className:"quality-details",children:Ve.qualityPresets[b]&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"detail-badge",children:Ve.qualityPresets[b].resolution}),(0,d.jsxs)("span",{className:"detail-badge",children:[Ve.qualityPresets[b].fps," fps"]}),(0,d.jsxs)("span",{className:"detail-badge",children:[Ve.qualityPresets[b].bitrate," kbps"]})]})})]})]})]}),(0,d.jsxs)("div",{className:"recommended-settings",children:[(0,d.jsxs)("h3",{children:["Platform Settings for ",k.name]}),(0,d.jsxs)("div",{className:"settings-grid",children:[(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsx)("span",{className:"setting-label",children:"Aspect Ratio"}),(0,d.jsx)("span",{className:"setting-value",children:k.recommended.aspectRatio})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsx)("span",{className:"setting-label",children:"Resolution"}),(0,d.jsx)("span",{className:"setting-value",children:k.recommended.resolution})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsx)("span",{className:"setting-label",children:"Format"}),(0,d.jsx)("span",{className:"setting-value",children:k.recommended.format.toUpperCase()})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsx)("span",{className:"setting-label",children:"Bitrate"}),(0,d.jsxs)("span",{className:"setting-value",children:[k.recommended.bitrate," kbps"]})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsx)("span",{className:"setting-label",children:"Frame Rate"}),(0,d.jsxs)("span",{className:"setting-value",children:[k.recommended.fps," fps"]})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsx)("span",{className:"setting-label",children:"Max Duration"}),(0,d.jsx)("span",{className:"setting-value",children:M(k.recommended.maxDuration)})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsx)("span",{className:"setting-label",children:"Max File Size"}),(0,d.jsx)("span",{className:"setting-value",children:k.recommended.maxSize?C(k.recommended.maxSize):"No limit"})]}),(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsx)("span",{className:"setting-label",children:"Estimated Size"}),(0,d.jsx)("span",{className:"setting-value highlight",children:(()=>{const e=t.duration||60,n=k.recommended.bitrate;return C(1e3*n*e/8)})()})]})]})]}),(0,d.jsxs)("div",{className:"preview-info",children:[(0,d.jsx)("h4",{children:"Current Video"}),(0,d.jsx)("video",{ref:S,src:t.url,style:{display:"none"}}),(0,d.jsxs)("div",{className:"video-stats",children:[(0,d.jsxs)("span",{children:["Duration: ",t.duration?t.duration.toFixed(1):"0","s"]}),(0,d.jsxs)("span",{children:["Size: ",C(t.size||0)]})]}),k.recommended.maxDuration&&t.duration>k.recommended.maxDuration&&(0,d.jsxs)("div",{className:"warning-message",children:["\u26a0\ufe0f Video will be trimmed to ",M(k.recommended.maxDuration)," for ",k.name]}),k.recommended.maxSize&&t.size>k.recommended.maxSize&&(0,d.jsxs)("div",{className:"warning-message",children:["\u26a0\ufe0f Video will be compressed to meet ",k.name,"'s ",C(k.recommended.maxSize)," limit"]})]}),(0,d.jsx)("div",{className:"export-actions",children:(0,d.jsx)("button",{className:"export-btn",onClick:async()=>{if(S.current){h(!0),p(0);try{const e={format:f,codec:v,quality:b,filename:t.name||"recording_".concat(r),customSettings:l?y:{}},n=await Ve.exportVideo(t.blob,e);h(!1),p(100);const a=document.createElement("a");return a.href=n.url,a.download=n.filename,a.click(),void s(c(c({},t),{},{blob:n.blob,url:n.url,name:n.filename,exportSettings:n.settings}))}catch(e){return console.error("Export error:",e),alert("Export failed: "+e.message),void h(!1)}}},disabled:u,children:u?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner"}),"Exporting... ",Math.round(m),"%"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export for ",k.name]})})}),u&&(0,d.jsx)("div",{className:"export-progress",children:(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(m,"%")}})})})]})]})]})})},Ue="recordings",_e="screenshots",qe="settings",We="userData";const Qe=new class{constructor(){this.db=null,this.isReady=!1}async initialize(){if(!this.isReady)return new Promise((e,t)=>{const n=indexedDB.open("NebulaScreenCapture",1);n.onerror=()=>{console.error("Failed to open IndexedDB:",n.error),t(n.error)},n.onsuccess=async()=>{this.db=n.result,this.isReady=!0;try{const e=await this.getStorageStats();console.log("\u2705 IndexedDB initialized successfully"),console.log("\ud83d\udcca Storage: ".concat(e.recordings," recordings, ").concat(e.screenshots," screenshots (").concat(e.totalSizeMB," MB)"))}catch(t){console.log("\u2705 IndexedDB initialized successfully")}e()},n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(Ue)){const e=t.createObjectStore(Ue,{keyPath:"id"});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("filename","filename",{unique:!1})}if(!t.objectStoreNames.contains(_e)){t.createObjectStore(_e,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1})}t.objectStoreNames.contains(qe)||t.createObjectStore(qe,{keyPath:"key"}),t.objectStoreNames.contains(We)||t.createObjectStore(We,{keyPath:"key"}),console.log("\u2705 IndexedDB stores created")}})}async saveRecording(e){return await this.ensureInitialized(),new Promise((t,n)=>{const a=this.db.transaction([Ue],"readwrite").objectStore(Ue),s=c(c({},e),{},{id:e.id||"rec_".concat(Date.now()),timestamp:e.timestamp||(new Date).toISOString(),savedAt:(new Date).toISOString()}),r=a.put(s);r.onsuccess=()=>{console.log("\u2705 Recording saved:",s.filename),t(s)},r.onerror=()=>{console.error("Failed to save recording:",r.error),n(r.error)}})}async getAllRecordings(){return await this.ensureInitialized(),new Promise((e,t)=>{const n=this.db.transaction([Ue],"readonly").objectStore(Ue).getAll();n.onsuccess=()=>{const t=n.result.map(e=>{let t=e.url;if(e.blob&&e.blob instanceof Blob){if(t&&t.startsWith("blob:"))try{URL.revokeObjectURL(t)}catch(n){}t=URL.createObjectURL(e.blob),console.log("\ud83d\udd17 Recreated blob URL for ".concat(e.filename))}return c(c({},e),{},{url:t,timestamp:new Date(e.timestamp)})});console.log("\ud83d\udcc2 Loaded ".concat(t.length," recordings from storage")),e(t)},n.onerror=()=>{console.error("Failed to load recordings:",n.error),t(n.error)}})}async deleteRecording(e){return await this.ensureInitialized(),new Promise((t,n)=>{const a=this.db.transaction([Ue],"readwrite").objectStore(Ue).delete(e);a.onsuccess=()=>{console.log("\ud83d\uddd1\ufe0f Recording deleted:",e),t()},a.onerror=()=>{console.error("Failed to delete recording:",a.error),n(a.error)}})}async saveScreenshot(e){return await this.ensureInitialized(),new Promise((t,n)=>{const a=this.db.transaction([_e],"readwrite").objectStore(_e),s=c(c({},e),{},{id:e.id||"shot_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),timestamp:e.timestamp||(new Date).toISOString(),savedAt:(new Date).toISOString(),dataUrl:e.dataUrl,filename:e.filename||"screenshot-".concat(Date.now(),".png"),size:e.size||0,width:e.width||0,height:e.height||0,captureMode:e.captureMode||"unknown"}),r=a.put(s);r.onsuccess=()=>{const e=(s.size/1024).toFixed(2);console.log("\u2705 Screenshot saved: ".concat(s.filename," (").concat(e," KB)")),t(s)},r.onerror=()=>{console.error("Failed to save screenshot:",r.error),n(r.error)}})}async getAllScreenshots(){return await this.ensureInitialized(),new Promise((e,t)=>{const n=this.db.transaction([_e],"readonly").objectStore(_e).getAll();n.onsuccess=()=>{const t=n.result.map(e=>c(c({},e),{},{timestamp:new Date(e.timestamp)})),a=(t.reduce((e,t)=>e+(t.size||0),0)/1048576).toFixed(2);console.log("\ud83d\udcf7 Loaded ".concat(t.length," screenshots from storage (").concat(a," MB total)")),e(t)},n.onerror=()=>{console.error("Failed to load screenshots:",n.error),t(n.error)}})}async getScreenshot(e){return await this.ensureInitialized(),new Promise((t,n)=>{const a=this.db.transaction([_e],"readonly").objectStore(_e).get(e);a.onsuccess=()=>{if(a.result){const e=c(c({},a.result),{},{timestamp:new Date(a.result.timestamp)});t(e)}else t(null)},a.onerror=()=>{console.error("Failed to get screenshot:",a.error),n(a.error)}})}async deleteScreenshot(e){return await this.ensureInitialized(),new Promise((t,n)=>{const a=this.db.transaction([_e],"readwrite").objectStore(_e).delete(e);a.onsuccess=()=>{console.log("\ud83d\uddd1\ufe0f Screenshot deleted:",e),t()},a.onerror=()=>{console.error("Failed to delete screenshot:",a.error),n(a.error)}})}async saveSettings(e){return await this.ensureInitialized(),new Promise((t,n)=>{const a=this.db.transaction([qe],"readwrite").objectStore(qe),s={key:"recordingOptions",value:e,updatedAt:(new Date).toISOString()},r=a.put(s);r.onsuccess=()=>{console.log("\u2705 Settings saved"),t()},r.onerror=()=>{console.error("Failed to save settings:",r.error),n(r.error)}})}async loadSettings(){return await this.ensureInitialized(),new Promise((e,t)=>{const n=this.db.transaction([qe],"readonly").objectStore(qe).get("recordingOptions");n.onsuccess=()=>{n.result?(console.log("\u2699\ufe0f Settings loaded from storage"),e(n.result.value)):e(null)},n.onerror=()=>{console.error("Failed to load settings:",n.error),t(n.error)}})}async getStorageStats(){await this.ensureInitialized();try{const e=await this.getAllRecordings(),t=await this.getAllScreenshots(),n=e.length,a=t.length,s=e.reduce((e,t)=>e+(t.size||0),0)+t.reduce((e,t)=>e+(t.size||0),0);return{recordings:n,screenshots:a,totalSize:s,totalSizeMB:(s/1048576).toFixed(2)}}catch(e){return console.error("Failed to get storage stats:",e),{recordings:0,screenshots:0,totalSize:0,totalSizeMB:"0"}}}async clearAll(){await this.ensureInitialized();const e=[Ue,_e,qe];for(const t of e)await new Promise((e,n)=>{const a=this.db.transaction([t],"readwrite").objectStore(t).clear();a.onsuccess=()=>e(),a.onerror=()=>n(a.error)});console.log("\ud83d\uddd1\ufe0f All storage cleared")}async ensureInitialized(){this.isReady||await this.initialize()}async exportAllData(){await this.ensureInitialized();const e=await this.getAllRecordings(),t=await this.getAllScreenshots(),n=await this.loadSettings();return{recordings:e.map(e=>c(c({},e),{},{url:void 0,blob:void 0})),screenshots:t.map(e=>c({},e)),settings:n,exportedAt:(new Date).toISOString(),version:1}}};const Ge=class{constructor(){this.templates=[],this.loadTemplates()}loadTemplates(){try{const e=localStorage.getItem("nebula_recording_templates");e?this.templates=JSON.parse(e):(this.templates=this.getDefaultTemplates(),this.saveTemplates())}catch(e){console.error("Failed to load templates:",e),this.templates=this.getDefaultTemplates()}}saveTemplates(){try{localStorage.setItem("nebula_recording_templates",JSON.stringify(this.templates))}catch(e){console.error("Failed to save templates:",e)}}getDefaultTemplates(){return[{id:"quick-demo",name:"\ud83c\udfac Quick Demo",description:"Fast 720p recording for quick demos",icon:"\ud83c\udfac",settings:{resolution:"1280x720",quality:"medium",frameRate:30,audioSource:"system",countdown:3,showCursor:!0,highlightClicks:!0},isDefault:!0},{id:"high-quality",name:"\ud83c\udfa5 High Quality",description:"1080p 60fps for professional content",icon:"\ud83c\udfa5",settings:{resolution:"1920x1080",quality:"high",frameRate:60,audioSource:"both",countdown:5,showCursor:!0,highlightClicks:!0,separateAudioTracks:!0},isDefault:!0},{id:"tutorial",name:"\ud83d\udcda Tutorial",description:"Perfect for instructional videos",icon:"\ud83d\udcda",settings:{resolution:"1920x1080",quality:"high",frameRate:30,audioSource:"microphone",countdown:5,showCursor:!0,highlightClicks:!0,enableDrawing:!0},isDefault:!0},{id:"gaming",name:"\ud83c\udfae Gaming",description:"60fps with system audio",icon:"\ud83c\udfae",settings:{resolution:"1920x1080",quality:"high",frameRate:60,audioSource:"system",countdown:3,showCursor:!1,highlightClicks:!1},isDefault:!0},{id:"presentation",name:"\ud83d\udcca Presentation",description:"Optimized for slides and talks",icon:"\ud83d\udcca",settings:{resolution:"1920x1080",quality:"medium",frameRate:30,audioSource:"microphone",countdown:10,showCursor:!0,highlightClicks:!0,enableDrawing:!0},isDefault:!0},{id:"silent",name:"\ud83d\udd07 Silent",description:"No audio, perfect for GIFs",icon:"\ud83d\udd07",settings:{resolution:"1280x720",quality:"medium",frameRate:30,audioSource:"none",countdown:3,showCursor:!0,highlightClicks:!0},isDefault:!0}]}getAll(){return this.templates}getById(e){return this.templates.find(t=>t.id===e)}create(e){const t={id:Date.now().toString(),name:e.name||"Untitled Template",description:e.description||"",icon:e.icon||"\u2b50",settings:e.settings,created:(new Date).toISOString(),isDefault:!1};return this.templates.push(t),this.saveTemplates(),t}update(e,t){const n=this.templates.findIndex(t=>t.id===e);if(-1===n)return!1;if(this.templates[n].isDefault)throw new Error("Cannot modify default templates");return this.templates[n]=c(c(c({},this.templates[n]),t),{},{id:e,isDefault:!1}),this.saveTemplates(),!0}delete(e){const t=this.templates.findIndex(t=>t.id===e);if(-1===t)return!1;if(this.templates[t].isDefault)throw new Error("Cannot delete default templates");return this.templates.splice(t,1),this.saveTemplates(),!0}duplicate(e){const t=this.getById(e);if(!t)return null;const n=c(c({},t),{},{id:Date.now().toString(),name:"".concat(t.name," (Copy)"),isDefault:!1,created:(new Date).toISOString()});return this.templates.push(n),this.saveTemplates(),n}export(){const e=this.templates.filter(e=>!e.isDefault);return JSON.stringify(e,null,2)}import(e){try{const t=JSON.parse(e);if(!Array.isArray(t))throw new Error("Invalid template format");return t.forEach(e=>{this.create(c(c({},e),{},{name:"".concat(e.name," (Imported)")}))}),!0}catch(t){return console.error("Failed to import templates:",t),!1}}applyTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getById(e);return n?c(c(c({},t),n.settings),{},{templateId:e,templateName:n.name}):null}saveCurrentSettings(e,t,n,a){return this.create({name:e,description:t,icon:n,settings:a})}};const Ke=class{constructor(){this.schedules=[],this.timers=new Map,this.onRecordingStart=null,this.onRecordingStop=null}async loadSchedules(){try{const e=localStorage.getItem("nebula_scheduled_recordings");e&&(this.schedules=JSON.parse(e),this.setupTimers())}catch(e){console.error("Failed to load schedules:",e)}}saveSchedules(){try{localStorage.setItem("nebula_scheduled_recordings",JSON.stringify(this.schedules))}catch(e){console.error("Failed to save schedules:",e)}}addSchedule(e){const t=c(c({id:Date.now().toString()},e),{},{created:(new Date).toISOString(),enabled:!0,lastRun:null});return this.schedules.push(t),this.saveSchedules(),this.setupTimer(t),t}updateSchedule(e,t){const n=this.schedules.findIndex(t=>t.id===e);return-1!==n&&(this.schedules[n]=c(c({},this.schedules[n]),t),this.saveSchedules(),this.timers.has(e)&&(clearTimeout(this.timers.get(e)),this.timers.delete(e)),this.setupTimer(this.schedules[n]),!0)}removeSchedule(e){const t=this.schedules.findIndex(t=>t.id===e);return-1!==t&&(this.timers.has(e)&&(clearTimeout(this.timers.get(e)),this.timers.delete(e)),this.schedules.splice(t,1),this.saveSchedules(),!0)}toggleSchedule(e){const t=this.schedules.find(t=>t.id===e);return!!t&&(t.enabled=!t.enabled,this.saveSchedules(),t.enabled?this.setupTimer(t):this.timers.has(e)&&(clearTimeout(this.timers.get(e)),this.timers.delete(e)),!0)}setupTimers(){this.schedules.forEach(e=>{e.enabled&&this.setupTimer(e)})}setupTimer(e){const t=new Date,n=this.getNextRunTime(e,t);if(!n)return;const a=n.getTime()-t.getTime();if(a>0){const t=setTimeout(()=>{this.executeSchedule(e)},a);this.timers.set(e.id,t)}}getNextRunTime(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;const{type:n,time:a,days:s,date:r}=e;switch(n){case"once":const e=new Date(r);return e>t?e:null;case"daily":const[n,i]=a.split(":").map(Number);let l=new Date(t);return l.setHours(n,i,0,0),l<=t&&l.setDate(l.getDate()+1),l;case"weekly":const[o,c]=a.split(":").map(Number);let d=new Date(t);d.setHours(o,c,0,0);const u=d.getDay();let h=0;for(let a=0;a<7;a++){const e=(u+a)%7;if(s.includes(e)){if(0===a&&d>t){h=0;break}if(a>0){h=a;break}}}return d.setDate(d.getDate()+h),d;default:return null}}async executeSchedule(e){console.log("Executing scheduled recording:",e.name),e.lastRun=(new Date).toISOString(),this.saveSchedules(),this.onRecordingStart&&await this.onRecordingStart(e.settings),e.duration&&this.onRecordingStop&&setTimeout(()=>{this.onRecordingStop()},1e3*e.duration),"once"!==e.type&&this.setupTimer(e),this.sendNotification(e)}async sendNotification(e){if("Notification"in window)if("granted"===Notification.permission)new Notification("Nebula Recording Started",{body:'Scheduled recording "'.concat(e.name,'" has started'),icon:"/logo192.png",badge:"/logo192.png"});else if("denied"!==Notification.permission){"granted"===await Notification.requestPermission()&&this.sendNotification(e)}}getUpcoming(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=new Date;return this.schedules.filter(e=>e.enabled).map(e=>c(c({},e),{},{nextRun:this.getNextRunTime(e,t)})).filter(e=>e.nextRun).sort((e,t)=>e.nextRun-t.nextRun).slice(0,e)}cleanup(){this.timers.forEach(e=>clearTimeout(e)),this.timers.clear()}},$e=e=>{let{onSave:t,onCancel:n}=e;const[s,r]=(0,a.useState)({name:"",type:"once",date:"",time:"12:00",days:[],duration:60,settings:{}});return(0,d.jsxs)("form",{className:"schedule-form",onSubmit:e=>{e.preventDefault(),t(s)},children:[(0,d.jsx)("input",{type:"text",placeholder:"Recording Name",value:s.name,onChange:e=>r(c(c({},s),{},{name:e.target.value})),required:!0}),(0,d.jsxs)("select",{value:s.type,onChange:e=>r(c(c({},s),{},{type:e.target.value})),children:[(0,d.jsx)("option",{value:"once",children:"One Time"}),(0,d.jsx)("option",{value:"daily",children:"Daily"}),(0,d.jsx)("option",{value:"weekly",children:"Weekly"})]}),"once"===s.type&&(0,d.jsx)("input",{type:"datetime-local",value:s.date,onChange:e=>r(c(c({},s),{},{date:e.target.value})),required:!0}),("daily"===s.type||"weekly"===s.type)&&(0,d.jsx)("input",{type:"time",value:s.time,onChange:e=>r(c(c({},s),{},{time:e.target.value})),required:!0}),"weekly"===s.type&&(0,d.jsx)("div",{className:"day-selector",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e,t)=>(0,d.jsx)("button",{type:"button",className:s.days.includes(t)?"active":"",onClick:()=>(e=>{const t=s.days.includes(e)?s.days.filter(t=>t!==e):[...s.days,e];r(c(c({},s),{},{days:t}))})(t),children:e},t))}),(0,d.jsxs)("label",{children:["Duration (seconds): ",s.duration,(0,d.jsx)("input",{type:"range",min:"10",max:"3600",value:s.duration,onChange:e=>r(c(c({},s),{},{duration:parseInt(e.target.value)}))})]}),(0,d.jsxs)("div",{className:"form-actions",children:[(0,d.jsx)("button",{type:"submit",className:"btn-primary",children:"Save Schedule"}),(0,d.jsx)("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancel"})]})]})},Ye=e=>{let{onSettingsChange:t,currentSettings:n={}}=e;const[s,r]=(0,a.useState)("quick"),[i]=(0,a.useState)(()=>new Ge),[l]=(0,a.useState)(()=>new Ke),[o,u]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[p,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{u(i.getAll()),l.loadSchedules().then(()=>{m(l.schedules)})},[i,l]);return(0,d.jsxs)("div",{className:"advanced-recording-options",children:[(0,d.jsxs)("div",{className:"aro-tabs",children:[(0,d.jsxs)("button",{className:"quick"===s?"active":"",onClick:()=>r("quick"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Quick Start"]}),(0,d.jsxs)("button",{className:"presets"===s?"active":"",onClick:()=>r("presets"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Presets"]}),(0,d.jsxs)("button",{className:"templates"===s?"active":"",onClick:()=>r("templates"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})}),"Templates"]}),(0,d.jsxs)("button",{className:"scheduled"===s?"active":"",onClick:()=>r("scheduled"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})}),"Scheduled"]}),(0,d.jsxs)("button",{className:"advanced"===s?"active":"",onClick:()=>r("advanced"),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),"Advanced"]})]}),(0,d.jsxs)("div",{className:"aro-content",children:["quick"===s&&(0,d.jsxs)("div",{className:"aro-quick",children:[(0,d.jsx)("h3",{children:"Quick Recording Settings"}),(0,d.jsxs)("div",{className:"setting-row",children:[(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsxs)("label",{children:["Video Quality",(0,d.jsx)("span",{className:"tooltip",title:"Higher quality = larger file size",children:"\u2139\ufe0f"})]}),(0,d.jsxs)("select",{value:n.videoQuality||"1080p",onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{videoQuality:e.target.value})),children:[(0,d.jsx)("option",{value:"4k",children:"4K Ultra HD (3840\xd72160)"}),(0,d.jsx)("option",{value:"1440p",children:"1440p QHD (2560\xd71440)"}),(0,d.jsx)("option",{value:"1080p",children:"1080p Full HD (1920\xd71080)"}),(0,d.jsx)("option",{value:"720p",children:"720p HD (1280\xd7720)"}),(0,d.jsx)("option",{value:"480p",children:"480p SD (854\xd7480)"})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsxs)("label",{children:["Frame Rate",(0,d.jsx)("span",{className:"tooltip",title:"Higher FPS for smoother motion",children:"\u2139\ufe0f"})]}),(0,d.jsxs)("select",{value:n.frameRate||"30",onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{frameRate:e.target.value})),children:[(0,d.jsx)("option",{value:"120",children:"120 FPS (Gaming)"}),(0,d.jsx)("option",{value:"60",children:"60 FPS (Smooth)"}),(0,d.jsx)("option",{value:"30",children:"30 FPS (Standard)"}),(0,d.jsx)("option",{value:"24",children:"24 FPS (Cinematic)"}),(0,d.jsx)("option",{value:"15",children:"15 FPS (Lower Size)"})]})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Countdown Duration"}),(0,d.jsx)("div",{className:"countdown-options",children:[0,3,5,10].map(e=>(0,d.jsx)("button",{className:n.countdown===e?"active":"",onClick:()=>null===t||void 0===t?void 0:t(c(c({},n),{},{countdown:e})),children:0===e?"None":"".concat(e,"s")},e))})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Audio Source"}),(0,d.jsxs)("select",{value:n.audioSource||"system",onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{audioSource:e.target.value})),children:[(0,d.jsx)("option",{value:"none",children:"\ud83d\udd07 No Audio"}),(0,d.jsx)("option",{value:"system",children:"\ud83d\udd0a System Audio"}),(0,d.jsx)("option",{value:"microphone",children:"\ud83c\udfa4 Microphone"}),(0,d.jsx)("option",{value:"both",children:"\ud83c\udfb5 Both (Separate Tracks)"})]})]}),(0,d.jsx)("div",{className:"setting-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:n.enableDrawing||!1,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{enableDrawing:e.target.checked}))}),"\u270f\ufe0f Enable Drawing Tools"]})}),(0,d.jsx)("div",{className:"setting-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:n.trimOnTheFly||!1,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{trimOnTheFly:e.target.checked}))}),"\u2702\ufe0f Enable Trim Markers (Ctrl+[ / Ctrl+])"]})}),(0,d.jsx)("div",{className:"setting-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:!1!==n.autoResume,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{autoResume:e.target.checked}))}),"\ud83d\udd04 Auto-Resume Interrupted Recordings"]})}),(0,d.jsx)("div",{className:"setting-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:n.showMouseClicks||!1,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{showMouseClicks:e.target.checked}))}),"\ud83d\uddb1\ufe0f Highlight Mouse Clicks"]})})]}),"presets"===s&&(0,d.jsxs)("div",{className:"aro-presets",children:[(0,d.jsx)("h3",{children:"Quick Presets"}),(0,d.jsx)("p",{className:"setting-description",children:"Choose a preset optimized for your recording scenario"}),(0,d.jsxs)("div",{className:"presets-grid",children:[(0,d.jsxs)("div",{className:"preset-card",onClick:()=>null===t||void 0===t?void 0:t(c(c({},n),{},{videoQuality:"1080p",frameRate:"30",audioSource:"both",countdown:3,enableDrawing:!1,trimOnTheFly:!1,countdownStyle:"modern"})),children:[(0,d.jsx)("div",{className:"preset-icon",children:"\ud83c\udfac"}),(0,d.jsx)("div",{className:"preset-name",children:"YouTube Video"}),(0,d.jsx)("div",{className:"preset-specs",children:"1080p \u2022 30fps \u2022 Both Audio"}),(0,d.jsx)("div",{className:"preset-description",children:"Perfect for YouTube tutorials and content creation"})]}),(0,d.jsxs)("div",{className:"preset-card",onClick:()=>null===t||void 0===t?void 0:t(c(c({},n),{},{videoQuality:"1080p",frameRate:"60",audioSource:"system",countdown:5,enableDrawing:!1,trimOnTheFly:!0,showMouseClicks:!0})),children:[(0,d.jsx)("div",{className:"preset-icon",children:"\ud83c\udfae"}),(0,d.jsx)("div",{className:"preset-name",children:"Gaming"}),(0,d.jsx)("div",{className:"preset-specs",children:"1080p \u2022 60fps \u2022 System Audio"}),(0,d.jsx)("div",{className:"preset-description",children:"High frame rate for smooth gameplay recording"})]}),(0,d.jsxs)("div",{className:"preset-card",onClick:()=>null===t||void 0===t?void 0:t(c(c({},n),{},{videoQuality:"720p",frameRate:"30",audioSource:"microphone",countdown:3,enableDrawing:!0,trimOnTheFly:!1,showMouseClicks:!0})),children:[(0,d.jsx)("div",{className:"preset-icon",children:"\ud83d\udc68\u200d\ud83c\udfeb"}),(0,d.jsx)("div",{className:"preset-name",children:"Tutorial/Demo"}),(0,d.jsx)("div",{className:"preset-specs",children:"720p \u2022 30fps \u2022 Microphone"}),(0,d.jsx)("div",{className:"preset-description",children:"Optimized for screen demos with voice narration"})]}),(0,d.jsxs)("div",{className:"preset-card",onClick:()=>null===t||void 0===t?void 0:t(c(c({},n),{},{videoQuality:"1080p",frameRate:"30",audioSource:"both",countdown:5,enableDrawing:!1,trimOnTheFly:!1,enableWatermark:!0})),children:[(0,d.jsx)("div",{className:"preset-icon",children:"\ud83d\udcbc"}),(0,d.jsx)("div",{className:"preset-name",children:"Professional"}),(0,d.jsx)("div",{className:"preset-specs",children:"1080p \u2022 30fps \u2022 Both Audio"}),(0,d.jsx)("div",{className:"preset-description",children:"High quality for business presentations"})]}),(0,d.jsxs)("div",{className:"preset-card",onClick:()=>null===t||void 0===t?void 0:t(c(c({},n),{},{videoQuality:"480p",frameRate:"15",audioSource:"none",countdown:0,enableDrawing:!1,trimOnTheFly:!1})),children:[(0,d.jsx)("div",{className:"preset-icon",children:"\u26a1"}),(0,d.jsx)("div",{className:"preset-name",children:"Quick Capture"}),(0,d.jsx)("div",{className:"preset-specs",children:"480p \u2022 15fps \u2022 No Audio"}),(0,d.jsx)("div",{className:"preset-description",children:"Smallest file size for quick sharing"})]}),(0,d.jsxs)("div",{className:"preset-card",onClick:()=>null===t||void 0===t?void 0:t(c(c({},n),{},{videoQuality:"4k",frameRate:"60",audioSource:"both",countdown:10,enableDrawing:!1,trimOnTheFly:!0,separateAudioTracks:!0})),children:[(0,d.jsx)("div",{className:"preset-icon",children:"\ud83c\udfaf"}),(0,d.jsx)("div",{className:"preset-name",children:"Ultra Quality"}),(0,d.jsx)("div",{className:"preset-specs",children:"4K \u2022 60fps \u2022 Multi-track Audio"}),(0,d.jsx)("div",{className:"preset-description",children:"Maximum quality for professional editing"})]}),(0,d.jsxs)("div",{className:"preset-card",onClick:()=>null===t||void 0===t?void 0:t(c(c({},n),{},{videoQuality:"1080p",frameRate:"30",audioSource:"microphone",countdown:3,enableDrawing:!0,trimOnTheFly:!0,showMouseClicks:!0})),children:[(0,d.jsx)("div",{className:"preset-icon",children:"\ud83c\udf93"}),(0,d.jsx)("div",{className:"preset-name",children:"Educational"}),(0,d.jsx)("div",{className:"preset-specs",children:"1080p \u2022 30fps \u2022 Microphone"}),(0,d.jsx)("div",{className:"preset-description",children:"Ideal for lectures and online courses"})]}),(0,d.jsxs)("div",{className:"preset-card",onClick:()=>null===t||void 0===t?void 0:t(c(c({},n),{},{videoQuality:"1080p",frameRate:"120",audioSource:"system",countdown:5,enableDrawing:!1,trimOnTheFly:!0})),children:[(0,d.jsx)("div",{className:"preset-icon",children:"\ud83c\udfc3"}),(0,d.jsx)("div",{className:"preset-name",children:"High-FPS Gaming"}),(0,d.jsx)("div",{className:"preset-specs",children:"1080p \u2022 120fps \u2022 System Audio"}),(0,d.jsx)("div",{className:"preset-description",children:"Ultra-smooth for competitive gaming"})]})]})]}),"templates"===s&&(0,d.jsxs)("div",{className:"aro-templates",children:[(0,d.jsxs)("div",{className:"templates-header",children:[(0,d.jsx)("h3",{children:"Recording Templates"}),(0,d.jsxs)("button",{onClick:()=>{const e=prompt("Template name:");if(!e)return;const t=prompt("Description (optional):")||"",a=prompt("Icon (emoji):")||"\u2b50";i.saveCurrentSettings(e,t,a,n),u(i.getAll())},className:"btn-save-template",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"})}),"Save Current as Template"]})]}),(0,d.jsx)("div",{className:"templates-grid",children:o.map(e=>(0,d.jsxs)("div",{className:"template-card ".concat(n.templateId===e.id?"active":""),onClick:()=>(e=>{const a=i.applyTemplate(e,n);null===t||void 0===t||t(a)})(e.id),children:[(0,d.jsx)("div",{className:"template-icon",children:e.icon}),(0,d.jsx)("div",{className:"template-name",children:e.name}),(0,d.jsx)("div",{className:"template-description",children:e.description}),!e.isDefault&&(0,d.jsx)("button",{className:"template-delete",onClick:t=>{t.stopPropagation(),window.confirm("Delete this template?")&&(i.delete(e.id),u(i.getAll()))},children:"\xd7"})]},e.id))})]}),"scheduled"===s&&(0,d.jsxs)("div",{className:"aro-scheduled",children:[(0,d.jsxs)("div",{className:"scheduled-header",children:[(0,d.jsx)("h3",{children:"Scheduled Recordings"}),(0,d.jsxs)("button",{onClick:()=>f(!0),className:"btn-add-schedule",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Schedule"]})]}),p&&(0,d.jsx)($e,{onSave:e=>{l.addSchedule(e),m([...l.schedules]),f(!1)},onCancel:()=>f(!1)}),(0,d.jsxs)("div",{className:"schedules-list",children:[h.map(e=>(0,d.jsxs)("div",{className:"schedule-item",children:[(0,d.jsxs)("div",{className:"schedule-info",children:[(0,d.jsx)("div",{className:"schedule-name",children:e.name}),(0,d.jsxs)("div",{className:"schedule-time",children:["once"===e.type&&"Once: ".concat(new Date(e.date).toLocaleString()),"daily"===e.type&&"Daily at ".concat(e.time),"weekly"===e.type&&"Weekly on ".concat(e.days.map(e=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e]).join(", ")," at ").concat(e.time)]})]}),(0,d.jsxs)("div",{className:"schedule-actions",children:[(0,d.jsx)("button",{className:e.enabled?"active":"",onClick:()=>{return t=e.id,l.toggleSchedule(t),void m([...l.schedules]);var t},title:e.enabled?"Disable":"Enable",children:e.enabled?"\u2713":"\u25cb"}),(0,d.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Delete this schedule?")&&(l.removeSchedule(t),m([...l.schedules])));var t},title:"Delete",children:"\ud83d\uddd1\ufe0f"})]})]},e.id)),0===h.length&&(0,d.jsx)("div",{className:"no-schedules",children:'No scheduled recordings. Click "Add Schedule" to create one.'})]})]}),"advanced"===s&&(0,d.jsxs)("div",{className:"aro-advanced",children:[(0,d.jsx)("h3",{children:"Advanced Settings"}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Countdown Style"}),(0,d.jsxs)("select",{value:n.countdownStyle||"modern",onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{countdownStyle:e.target.value})),children:[(0,d.jsx)("option",{value:"modern",children:"Modern (with progress bar)"}),(0,d.jsx)("option",{value:"minimal",children:"Minimal"}),(0,d.jsx)("option",{value:"circle",children:"Circular"}),(0,d.jsx)("option",{value:"pulse",children:"Pulse"})]})]}),(0,d.jsx)("div",{className:"setting-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:!1!==n.countdownSound,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{countdownSound:e.target.checked}))}),"\ud83d\udd14 Play Countdown Sound"]})}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Separate Audio Tracks"}),(0,d.jsx)("p",{className:"setting-description",children:"Record system audio and microphone as separate tracks for post-production mixing"}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:n.separateAudioTracks||!1,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{separateAudioTracks:e.target.checked}))}),"Enable Multi-Track Audio"]})]}),n.separateAudioTracks&&(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsxs)("label",{children:["System Audio Volume: ",n.systemVolume||70,"%"]}),(0,d.jsx)("input",{type:"range",min:"0",max:"100",value:n.systemVolume||70,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{systemVolume:parseInt(e.target.value)}))}),(0,d.jsxs)("label",{children:["Microphone Volume: ",n.micVolume||80,"%"]}),(0,d.jsx)("input",{type:"range",min:"0",max:"100",value:n.micVolume||80,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{micVolume:parseInt(e.target.value)}))})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Auto-Save Interval"}),(0,d.jsx)("p",{className:"setting-description",children:"Automatically save recording progress every X seconds"}),(0,d.jsxs)("select",{value:n.autoSaveInterval||"60",onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{autoSaveInterval:e.target.value})),children:[(0,d.jsx)("option",{value:"0",children:"Disabled"}),(0,d.jsx)("option",{value:"30",children:"Every 30 seconds"}),(0,d.jsx)("option",{value:"60",children:"Every 1 minute"}),(0,d.jsx)("option",{value:"120",children:"Every 2 minutes"}),(0,d.jsx)("option",{value:"300",children:"Every 5 minutes"})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Watermark"}),(0,d.jsx)("p",{className:"setting-description",children:"Add a custom watermark to your recordings"}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:n.enableWatermark||!1,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{enableWatermark:e.target.checked}))}),"Enable Watermark"]}),n.enableWatermark&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{type:"text",placeholder:"Watermark text",value:n.watermarkText||"",onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{watermarkText:e.target.value})),style:{marginTop:"8px",width:"100%"}}),(0,d.jsxs)("select",{value:n.watermarkPosition||"bottom-right",onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{watermarkPosition:e.target.value})),style:{marginTop:"8px"},children:[(0,d.jsx)("option",{value:"top-left",children:"Top Left"}),(0,d.jsx)("option",{value:"top-right",children:"Top Right"}),(0,d.jsx)("option",{value:"bottom-left",children:"Bottom Left"}),(0,d.jsx)("option",{value:"bottom-right",children:"Bottom Right"}),(0,d.jsx)("option",{value:"center",children:"Center"})]}),(0,d.jsxs)("label",{children:["Opacity: ",n.watermarkOpacity||50,"%"]}),(0,d.jsx)("input",{type:"range",min:"10",max:"100",value:n.watermarkOpacity||50,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{watermarkOpacity:parseInt(e.target.value)}))})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Keyboard Shortcuts"}),(0,d.jsxs)("div",{className:"shortcuts-list",children:[(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("span",{className:"shortcut-key",children:"Ctrl + ["}),(0,d.jsx)("span",{className:"shortcut-desc",children:"Mark Trim Start"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("span",{className:"shortcut-key",children:"Ctrl + ]"}),(0,d.jsx)("span",{className:"shortcut-desc",children:"Mark Trim End"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("span",{className:"shortcut-key",children:"Ctrl + P"}),(0,d.jsx)("span",{className:"shortcut-desc",children:"Pause/Resume"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("span",{className:"shortcut-key",children:"Ctrl + S"}),(0,d.jsx)("span",{className:"shortcut-desc",children:"Quick Save"})]}),(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("span",{className:"shortcut-key",children:"Esc"}),(0,d.jsx)("span",{className:"shortcut-desc",children:"Stop Recording"})]})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Export/Import Settings"}),(0,d.jsxs)("div",{className:"export-import-actions",children:[(0,d.jsx)("button",{className:"btn-export",onClick:()=>{const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="recording-settings.json",s.click(),URL.revokeObjectURL(a)},children:"\ud83d\udce5 Export Settings"}),(0,d.jsx)("button",{className:"btn-import",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{const n=e.target.files[0];if(n){const e=new FileReader;e.onload=e=>{try{const n=JSON.parse(e.target.result);null===t||void 0===t||t(n)}catch(n){alert("Invalid settings file")}},e.readAsText(n)}},e.click()},children:"\ud83d\udce4 Import Settings"})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Notification Preferences"}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:!1!==n.notifyOnStart,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{notifyOnStart:e.target.checked}))}),"Notify when recording starts"]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:!1!==n.notifyOnStop,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{notifyOnStop:e.target.checked}))}),"Notify when recording stops"]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:!1!==n.notifyOnError,onChange:e=>null===t||void 0===t?void 0:t(c(c({},n),{},{notifyOnError:e.target.checked}))}),"Notify on errors"]})]})]})]})]})},Xe=e=>{let{isActive:t,videoStream:n,onDrawingData:s}=e;const r=(0,a.useRef)(null),[i,l]=(0,a.useState)(!1),[o,u]=(0,a.useState)("pen"),[h,m]=(0,a.useState)("#FF0000"),[p,f]=(0,a.useState)(3),[g,v]=(0,a.useState)([]),[x,b]=(0,a.useState)(null),[j,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!t||!r.current)return;const e=r.current,a=e.getContext("2d");if(n){const t=n.getVideoTracks()[0].getSettings();e.width=t.width||1920,e.height=t.height||1080}a.clearRect(0,0,e.width,e.height),g.forEach(e=>w(a,e)),x&&w(a,x)},[g,x,t,n]);const w=(e,t)=>{switch(e.strokeStyle=t.color,e.fillStyle=t.color,e.lineWidth=t.lineWidth,e.lineCap="round",e.lineJoin="round",t.type){case"pen":if(t.points.length<2)return;e.beginPath(),e.moveTo(t.points[0].x,t.points[0].y),t.points.forEach(t=>e.lineTo(t.x,t.y)),e.stroke();break;case"line":e.beginPath(),e.moveTo(t.start.x,t.start.y),e.lineTo(t.end.x,t.end.y),e.stroke();break;case"arrow":S(e,t.start,t.end,t.lineWidth);break;case"rectangle":e.strokeRect(t.start.x,t.start.y,t.end.x-t.start.x,t.end.y-t.start.y);break;case"circle":const n=Math.sqrt(Math.pow(t.end.x-t.start.x,2)+Math.pow(t.end.y-t.start.y,2));e.beginPath(),e.arc(t.start.x,t.start.y,n,0,2*Math.PI),e.stroke();break;case"highlight":e.globalAlpha=.3,e.fillRect(t.start.x,t.start.y,t.end.x-t.start.x,t.end.y-t.start.y),e.globalAlpha=1;break;case"text":e.font="".concat(t.fontSize||24,"px Arial"),e.fillText(t.text,t.position.x,t.position.y)}},S=(e,t,n,a)=>{const s=4*a,r=Math.atan2(n.y-t.y,n.x-t.x);e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke(),e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(n.x-s*Math.cos(r-Math.PI/6),n.y-s*Math.sin(r-Math.PI/6)),e.lineTo(n.x-s*Math.cos(r+Math.PI/6),n.y-s*Math.sin(r+Math.PI/6)),e.closePath(),e.fill()},N=e=>{const t=r.current,n=t.getBoundingClientRect(),a=t.width/n.width,s=t.height/n.height;return{x:(e.clientX-n.left)*a,y:(e.clientY-n.top)*s}},k=()=>{i&&x&&(l(!1),v([...g,x]),null===s||void 0===s||s(x),b(null))};return t?(0,d.jsxs)("div",{className:"drawing-tools-container",children:[(0,d.jsx)("canvas",{ref:r,className:"drawing-canvas",onMouseDown:e=>{if(!t)return;l(!0);const n=N(e);if("pen"===o)b({type:"pen",points:[n],color:h,lineWidth:p});else if("text"===o){const e=prompt("Enter text:");if(e){const t={type:"text",text:e,position:n,color:h,fontSize:8*p};v([...g,t]),null===s||void 0===s||s(t)}}else b({type:o,start:n,end:n,color:h,lineWidth:p})},onMouseMove:e=>{if(!i||!x)return;const t=N(e);b(c(c({},x),{},"pen"===o?{points:[...x.points,t]}:{end:t}))},onMouseUp:k,onMouseLeave:k}),(0,d.jsx)("button",{className:"drawing-toggle-btn",onClick:()=>y(!j),title:"Toggle Drawing Tools",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),j&&(0,d.jsxs)("div",{className:"drawing-toolbar",children:[(0,d.jsxs)("div",{className:"tool-group",children:[(0,d.jsx)("button",{className:"pen"===o?"active":"",onClick:()=>u("pen"),title:"Pen",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),(0,d.jsx)("button",{className:"line"===o?"active":"",onClick:()=>u("line"),title:"Line",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 3l18 18M3 21L21 3"})})}),(0,d.jsx)("button",{className:"arrow"===o?"active":"",onClick:()=>u("arrow"),title:"Arrow",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M14 2l7 7-7 7M3 12h18"})})}),(0,d.jsx)("button",{className:"rectangle"===o?"active":"",onClick:()=>u("rectangle"),title:"Rectangle",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),(0,d.jsx)("button",{className:"circle"===o?"active":"",onClick:()=>u("circle"),title:"Circle",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),(0,d.jsx)("button",{className:"highlight"===o?"active":"",onClick:()=>u("highlight"),title:"Highlight",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 14l3 3-6 6h21v-2L6 14z"})})}),(0,d.jsx)("button",{className:"text"===o?"active":"",onClick:()=>u("text"),title:"Text",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M5 4v3h5.5v12h3V7H19V4z"})})})]}),(0,d.jsxs)("div",{className:"tool-group",children:[(0,d.jsxs)("label",{children:["Color:",(0,d.jsx)("input",{type:"color",value:h,onChange:e=>m(e.target.value)})]}),(0,d.jsxs)("label",{children:["Width:",(0,d.jsx)("input",{type:"range",min:"1",max:"20",value:p,onChange:e=>f(parseInt(e.target.value))}),(0,d.jsxs)("span",{children:[p,"px"]})]})]}),(0,d.jsxs)("div",{className:"tool-group",children:[(0,d.jsx)("button",{onClick:()=>{v(g.slice(0,-1))},title:"Undo",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"})})}),(0,d.jsx)("button",{onClick:()=>{v([]),b(null);const e=r.current;e.getContext("2d").clearRect(0,0,e.width,e.height)},title:"Clear All",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]})]}):null},Je=e=>{let{duration:t=3,onComplete:n,options:s={}}=e;const[r,i]=(0,a.useState)(t),[l,o]=(0,a.useState)(!1),c=(0,a.useRef)(n),u=(0,a.useRef)(!1);(0,a.useEffect)(()=>{c.current=n},[n]);const{showVisual:h=!0,playSound:m=!0,showProgress:p=!0,style:f="modern",color:g="#667eea",backgroundColor:v="rgba(0, 0, 0, 0.8)"}=s;(0,a.useEffect)(()=>{i(t),o(!0),u.current=!1;const e=setInterval(()=>{i(t=>t<=1?(clearInterval(e),u.current||(u.current=!0,setTimeout(()=>{var e;null===(e=c.current)||void 0===e||e.call(c),o(!1)},1e3)),0):(m&&t>1&&x(2===t?800:600),t-1))},1e3);return()=>{clearInterval(e)}},[t,m]);const x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600;try{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),a=t.createGain();n.connect(a),a.connect(t.destination),n.frequency.value=e,n.type="sine",a.gain.setValueAtTime(.3,t.currentTime),a.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),n.start(t.currentTime),n.stop(t.currentTime+.1)}catch(t){console.warn("Failed to play beep:",t)}};if(!l||!h)return null;const b=r>0?(t-r)/t*100:100;return(0,d.jsxs)("div",{className:"enhanced-countdown countdown-".concat(f),style:{backgroundColor:v},children:["modern"===f&&(0,d.jsxs)("div",{className:"countdown-modern",children:[(0,d.jsx)("div",{className:"countdown-number",style:{color:g},children:r>0?r:"\ud83c\udfac"}),p&&(0,d.jsx)("div",{className:"countdown-bar",children:(0,d.jsx)("div",{className:"countdown-bar-fill",style:{width:"".concat(b,"%"),backgroundColor:g}})}),(0,d.jsx)("div",{className:"countdown-message",children:r>0?"Recording starts in...":"Recording!"})]}),"minimal"===f&&(0,d.jsx)("div",{className:"countdown-minimal",children:(0,d.jsx)("div",{className:"countdown-number-minimal",style:{color:g},children:r>0?r:"\u25cf"})}),"circle"===f&&(0,d.jsxs)("div",{className:"countdown-circle",children:[(0,d.jsxs)("svg",{className:"countdown-circle-svg",viewBox:"0 0 200 200",children:[(0,d.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"8"}),(0,d.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:g,strokeWidth:"8",strokeDasharray:"".concat(5.65*b," 565"),strokeLinecap:"round",transform:"rotate(-90 100 100)",className:"countdown-circle-progress"})]}),(0,d.jsx)("div",{className:"countdown-circle-number",style:{color:g},children:r>0?r:"\u25b6"})]}),"pulse"===f&&(0,d.jsxs)("div",{className:"countdown-pulse",children:[(0,d.jsxs)("div",{className:"countdown-pulse-rings",children:[(0,d.jsx)("div",{className:"pulse-ring",style:{borderColor:g}}),(0,d.jsx)("div",{className:"pulse-ring",style:{borderColor:g}}),(0,d.jsx)("div",{className:"pulse-ring",style:{borderColor:g}})]}),(0,d.jsx)("div",{className:"countdown-pulse-number",style:{color:g},children:r>0?r:"\ud83d\udd34"})]})]})};const Ze=class{constructor(){this.markers=[],this.isRecording=!1,this.startTime=null,this.onMarkerAdded=null}startSession(){this.markers=[],this.isRecording=!0,this.startTime=Date.now()}stopSession(){return this.isRecording=!1,this.markers}addMarker(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!this.isRecording)return null;const a=(Date.now()-this.startTime)/1e3,s={id:Date.now().toString(),type:e,timestamp:a,label:n,created:(new Date).toISOString()};return this.markers.push(s),null===(t=this.onMarkerAdded)||void 0===t||t.call(this,s),s}markStart(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Start";return this.addMarker("start",e)}markEnd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"End";return this.addMarker("end",e)}removeMarker(e){const t=this.markers.findIndex(t=>t.id===e);return-1!==t&&(this.markers.splice(t,1),!0)}getMarkers(){return[...this.markers]}getTrimSegments(){if(0===this.markers.length)return[];const e=[...this.markers].sort((e,t)=>e.timestamp-t.timestamp),t=[];let n=null;return e.forEach((e,a)=>{"start"===e.type?n=e.timestamp:"end"===e.type&&null!==n&&(t.push({start:n,end:e.timestamp,duration:e.timestamp-n,label:e.label||"Segment ".concat(t.length+1)}),n=null)}),t}exportMarkers(){return{markers:this.markers,segments:this.getTrimSegments(),duration:this.isRecording?(Date.now()-this.startTime)/1e3:0}}importMarkers(e){return!(!e.markers||!Array.isArray(e.markers))&&(this.markers=e.markers,!0)}clear(){this.markers=[]}formatTimestamp(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%60);return[t>0?String(t).padStart(2,"0"):null,String(n).padStart(2,"0"),String(a).padStart(2,"0")].filter(Boolean).join(":")}getKeyboardShortcuts(){return{markStart:"Ctrl/Cmd + [",markEnd:"Ctrl/Cmd + ]",removeLastMarker:"Ctrl/Cmd + Backspace"}}};const et=new class{constructor(){this.shortcuts=new Map,this.defaultShortcuts=this.getDefaultShortcuts(),this.loadShortcuts(),this.enabled=!0,this.cheatSheetVisible=!1}getDefaultShortcuts(){return{"toggle-recording":{keys:["Ctrl+R","Meta+R"],description:"Start/Stop Recording",category:"Recording"},"pause-resume":{keys:["Space"],description:"Pause/Resume Recording",category:"Recording"},cancel:{keys:["Escape"],description:"Cancel/Close",category:"General"},screenshot:{keys:["Ctrl+Shift+S","Meta+Shift+S"],description:"Take Screenshot",category:"Capture"},"area-select":{keys:["Ctrl+Shift+A","Meta+Shift+A"],description:"Select Area",category:"Capture"},"webcam-toggle":{keys:["Ctrl+Shift+W","Meta+Shift+W"],description:"Toggle Webcam",category:"Recording"},"mic-toggle":{keys:["Ctrl+Shift+M","Meta+Shift+M"],description:"Toggle Microphone",category:"Recording"},download:{keys:["Ctrl+D","Meta+D"],description:"Download Recording",category:"Files"},delete:{keys:["Delete"],description:"Delete Recording",category:"Files"},rename:{keys:["F2"],description:"Rename Recording",category:"Files"},"select-all":{keys:["Ctrl+A","Meta+A"],description:"Select All",category:"Files"},"next-recording":{keys:["ArrowDown","J"],description:"Next Recording",category:"Navigation"},"prev-recording":{keys:["ArrowUp","K"],description:"Previous Recording",category:"Navigation"},"play-pause":{keys:["Space"],description:"Play/Pause Video",category:"Playback"},fullscreen:{keys:["F11"],description:"Toggle Fullscreen",category:"View"},settings:{keys:["Ctrl+,","Meta+,"],description:"Open Settings",category:"General"},help:{keys:["F1","Ctrl+/","Meta+/"],description:"Show Help",category:"General"},"shortcuts-cheat-sheet":{keys:["Ctrl+Shift+/","Meta+Shift+/"],description:"Show Shortcuts",category:"General"},"trim-video":{keys:["Ctrl+T","Meta+T"],description:"Trim Video",category:"Editor"},"add-watermark":{keys:["Ctrl+Shift+K","Meta+Shift+K"],description:"Add Watermark",category:"Editor"},"apply-filter":{keys:["Ctrl+F","Meta+F"],description:"Apply Filter",category:"Editor"},undo:{keys:["Ctrl+Z","Meta+Z"],description:"Undo",category:"Editor"},redo:{keys:["Ctrl+Y","Meta+Y","Ctrl+Shift+Z","Meta+Shift+Z"],description:"Redo",category:"Editor"},"batch-mode":{keys:["Ctrl+B","Meta+B"],description:"Toggle Batch Mode",category:"Batch"},"batch-download":{keys:["Ctrl+Shift+D","Meta+Shift+D"],description:"Batch Download",category:"Batch"},"batch-delete":{keys:["Ctrl+Shift+Delete","Meta+Shift+Delete"],description:"Batch Delete",category:"Batch"}}}loadShortcuts(){try{const e=localStorage.getItem("nebula-shortcuts");if(e){const t=JSON.parse(e);this.shortcuts=new Map(Object.entries(t))}else this.resetToDefaults()}catch(e){console.error("Failed to load shortcuts:",e),this.resetToDefaults()}}saveShortcuts(){try{const e=Object.fromEntries(this.shortcuts);localStorage.setItem("nebula-shortcuts",JSON.stringify(e))}catch(e){console.error("Failed to save shortcuts:",e)}}resetToDefaults(){this.shortcuts=new Map(Object.entries(this.defaultShortcuts)),this.saveShortcuts()}register(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Custom";Array.isArray(t)||(t=[t]);const s=this.checkConflicts(t,e);s.length>0&&console.warn("Shortcut conflict detected for ".concat(e,":"),s),this.shortcuts.set(e,{keys:t,description:n,category:a}),this.saveShortcuts()}unregister(e){this.shortcuts.delete(e),this.saveShortcuts()}checkConflicts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];for(const[a,s]of this.shortcuts.entries())if(a!==t)for(const t of e)s.keys.includes(t)&&n.push({action:a,key:t});return n}handleKeyEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.enabled)return!1;if(e.target.matches("input, textarea, select, [contenteditable]")&&"Escape"!==e.key)return!1;const n=this.getKeyCombo(e);for(const[a,s]of this.shortcuts.entries())if(s.keys.includes(n)){const n=t[a];if(n&&"function"===typeof n)return e.preventDefault(),n(e),!0}return!1}getKeyCombo(e){const t=[];e.ctrlKey&&t.push("Ctrl"),e.altKey&&t.push("Alt"),e.shiftKey&&t.push("Shift"),e.metaKey&&t.push("Meta");let n=e.key;const a={" ":"Space",Backspace:"Backspace",Delete:"Delete",Enter:"Enter",Tab:"Tab",Escape:"Escape",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",Home:"Home",End:"End",PageUp:"PageUp",PageDown:"PageDown"};return a[n]?n=a[n]:1===n.length&&(n=n.toUpperCase()),["Control","Alt","Shift","Meta"].includes(n)||t.push(n),t.join("+")}getShortcutByAction(e){return this.shortcuts.get(e)}getAllShortcuts(){return Array.from(this.shortcuts.entries()).map(e=>{let[t,n]=e;return c({action:t},n)})}getShortcutsByCategory(e){return this.getAllShortcuts().filter(t=>t.category===e)}getCategories(){const e=new Set;for(const t of this.shortcuts.values())e.add(t.category);return Array.from(e).sort()}enable(){this.enabled=!0}disable(){this.enabled=!1}toggle(){return this.enabled=!this.enabled,this.enabled}exportShortcuts(){const e={version:"1.0",shortcuts:Object.fromEntries(this.shortcuts),exportedAt:(new Date).toISOString()};return JSON.stringify(e,null,2)}importShortcuts(e){try{const t=JSON.parse(e);if(!t.shortcuts)throw new Error("Invalid format");return this.shortcuts=new Map(Object.entries(t.shortcuts)),this.saveShortcuts(),!0}catch(t){return console.error("Failed to import shortcuts:",t),!1}}generateCheatSheet(){const e=this.getCategories(),t={};for(const n of e)t[n]=this.getShortcutsByCategory(n);return t}},tt=e=>{let{isOpen:t,onClose:n}=e;const[s,r]=(0,a.useState)({}),[i,l]=(0,a.useState)(""),[o,c]=(0,a.useState)("All");if((0,a.useEffect)(()=>{if(t){const e=et.generateCheatSheet();r(e)}},[t]),!t)return null;const u=["All",...Object.keys(s)],h=e=>e.replace(/\+/g," + ");return(0,d.jsx)("div",{className:"keyboard-shortcuts-overlay",onClick:n,children:(0,d.jsxs)("div",{className:"shortcuts-panel",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"shortcuts-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("span",{className:"shortcuts-icon",children:"\u2328\ufe0f"}),"Keyboard Shortcuts"]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,title:"Close (Esc)",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("div",{className:"shortcuts-toolbar",children:[(0,d.jsx)("input",{type:"text",placeholder:"Search shortcuts...",value:i,onChange:e=>l(e.target.value),className:"shortcuts-search"}),(0,d.jsx)("select",{value:o,onChange:e=>c(e.target.value),className:"category-filter",children:u.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsx)("div",{className:"shortcuts-content",children:Object.entries((()=>{let e=s;if("All"!==o&&(e={[o]:s[o]}),i){const t={};for(const[n,a]of Object.entries(e)){const e=a.filter(e=>e.description.toLowerCase().includes(i.toLowerCase())||e.keys.some(e=>e.toLowerCase().includes(i.toLowerCase())));e.length>0&&(t[n]=e)}e=t}return e})()).map(e=>{let[t,n]=e;return(0,d.jsxs)("div",{className:"shortcuts-category",children:[(0,d.jsx)("h3",{className:"category-title",children:t}),(0,d.jsx)("div",{className:"shortcuts-list",children:n.map((e,t)=>(0,d.jsxs)("div",{className:"shortcut-item",children:[(0,d.jsx)("div",{className:"shortcut-keys",children:e.keys.map((e,t)=>(0,d.jsxs)(a.Fragment,{children:[t>0&&(0,d.jsx)("span",{className:"or-separator",children:"or"}),(0,d.jsx)("kbd",{className:"key-combo",children:h(e)})]},t))}),(0,d.jsx)("div",{className:"shortcut-description",children:e.description})]},t))})]},t)})}),(0,d.jsxs)("div",{className:"shortcuts-footer",children:[(0,d.jsxs)("div",{className:"footer-actions",children:[(0,d.jsxs)("button",{className:"footer-btn",onClick:()=>{const e=et.exportShortcuts(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="nebula-shortcuts.json",a.click(),URL.revokeObjectURL(n)},title:"Export shortcuts",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"})}),"Export"]}),(0,d.jsxs)("label",{className:"footer-btn",title:"Import shortcuts",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"})}),"Import",(0,d.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=e=>{if(et.importShortcuts(e.target.result)){const e=et.generateCheatSheet();r(e),alert("Shortcuts imported successfully!")}else alert("Failed to import shortcuts. Invalid format.")},n.readAsText(t)},style:{display:"none"}})]}),(0,d.jsxs)("button",{className:"footer-btn",onClick:()=>{if(window.confirm("Reset all shortcuts to defaults?")){et.resetToDefaults();const e=et.generateCheatSheet();r(e)}},title:"Reset to defaults",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})}),"Reset"]})]}),(0,d.jsxs)("div",{className:"footer-hint",children:["Press ",(0,d.jsx)("kbd",{children:"Ctrl + Shift + /"})," to toggle this panel"]})]})]})})};class nt{constructor(){this.streamKey=null,this.platform=null,this.rtmpUrl=null,this.isStreaming=!1,this.streamStartTime=null,this.websocket=null,this.healthCheckInterval=null,this.stats={bitrate:0,fps:0,droppedFrames:0,viewerCount:0,duration:0},this.onStatsUpdate=null,this.onError=null,this.onStatusChange=null}async initializeStream(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{if(this.platform=e,this.streamKey=t,"custom"===e&&n)this.rtmpUrl=n;else{const t=nt.PLATFORMS[e];if(!t)throw new Error("Unsupported platform: ".concat(e));this.rtmpUrl=t.rtmpUrl}if(!t||""===t.trim())throw new Error("Stream key is required");return{success:!0,platform:e,rtmpUrl:this.rtmpUrl}}catch(s){var a;return null===(a=this.onError)||void 0===a||a.call(this,s.message),{success:!1,error:s.message}}}async startStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n,a;if(this.isStreaming)throw new Error("Stream already active");if(!this.streamKey||!this.rtmpUrl)throw new Error("Stream not initialized. Call initializeStream first.");const{videoBitrate:s=25e5,audioBitrate:r=128e3,framerate:i=30,resolution:l="1920x1080"}=t;return this.isStreaming=!0,this.streamStartTime=Date.now(),null===(n=this.onStatusChange)||void 0===n||n.call(this,"live"),await this.simulateRTMPStream(e,{videoBitrate:s,audioBitrate:r}),this.startHealthMonitoring(),null!==(a=nt.PLATFORMS[this.platform])&&void 0!==a&&a.supportsViewerCount&&this.connectToplatformAPI(),{success:!0}}catch(r){var s;return this.isStreaming=!1,null===(s=this.onError)||void 0===s||s.call(this,r.message),{success:!1,error:r.message}}}async simulateRTMPStream(e,t){const n=MediaRecorder.isTypeSupported("video/webm;codecs=vp9")?"video/webm;codecs=vp9":"video/webm";this.mediaRecorder=new MediaRecorder(e,{mimeType:n,videoBitsPerSecond:t.videoBitrate,audioBitsPerSecond:t.audioBitrate});let a=0,s=Date.now();this.mediaRecorder.ondataavailable=e=>{if(e.data.size>0){a++;const n=Date.now();var t;if(n-s>=1e3)this.stats.fps=a,this.stats.bitrate=Math.round(8*e.data.size/1024),this.stats.duration=Math.floor((n-this.streamStartTime)/1e3),a=0,s=n,null===(t=this.onStatsUpdate)||void 0===t||t.call(this,this.stats)}},this.mediaRecorder.start(1e3)}async stopStream(){try{var e;return this.isStreaming?(this.isStreaming=!1,null===(e=this.onStatusChange)||void 0===e||e.call(this,"stopped"),this.mediaRecorder&&"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.stopHealthMonitoring(),this.disconnectFromPlatformAPI(),this.stats={bitrate:0,fps:0,droppedFrames:0,viewerCount:0,duration:0},{success:!0}):{success:!0}}catch(n){var t;return null===(t=this.onError)||void 0===t||t.call(this,n.message),{success:!1,error:n.message}}}startHealthMonitoring(){this.healthCheckInterval=setInterval(()=>{if(!this.isStreaming)return;const e=this.checkStreamHealth();var t;if("poor"===e.status)null===(t=this.onError)||void 0===t||t.call(this,"Poor stream quality detected. Consider lowering bitrate.");else if("disconnected"===e.status){var n;null===(n=this.onError)||void 0===n||n.call(this,"Stream disconnected. Attempting to reconnect..."),this.attemptReconnect()}},5e3)}stopHealthMonitoring(){this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null)}checkStreamHealth(){const{bitrate:e,fps:t,droppedFrames:n}=this.stats;return 0===t&&this.isStreaming?{status:"disconnected",message:"No frames being sent"}:n>.1*t?{status:"poor",message:"High frame drop rate"}:e<500?{status:"poor",message:"Low bitrate"}:{status:"good",message:"Stream healthy"}}async attemptReconnect(){var e;null===(e=this.onStatusChange)||void 0===e||e.call(this,"reconnecting"),setTimeout(()=>{var e;this.isStreaming&&(null===(e=this.onStatusChange)||void 0===e||e.call(this,"live"))},3e3)}connectToplatformAPI(){this.apiInterval=setInterval(()=>{var e;this.stats.viewerCount=Math.floor(100*Math.random())+10,null===(e=this.onStatsUpdate)||void 0===e||e.call(this,this.stats)},1e4)}disconnectFromPlatformAPI(){this.apiInterval&&(clearInterval(this.apiInterval),this.apiInterval=null)}getStats(){return c({},this.stats)}getStreamInfo(){return{platform:this.platform,rtmpUrl:this.rtmpUrl,isStreaming:this.isStreaming,startTime:this.streamStartTime,stats:this.getStats()}}static validateStreamKey(e,t){return!!nt.PLATFORMS[e]&&(!(!t||""===t.trim())&&(!("youtube"===e&&t.length<10)&&!("twitch"===e&&!t.startsWith("live_"))))}static getRecommendedSettings(e){const t={youtube:{videoBitrate:25e5,audioBitrate:128e3,framerate:30,resolution:"1920x1080",description:"Recommended for YouTube Live (1080p30)"},twitch:{videoBitrate:3e6,audioBitrate:16e4,framerate:30,resolution:"1920x1080",description:"Recommended for Twitch (1080p30)"},facebook:{videoBitrate:4e6,audioBitrate:128e3,framerate:30,resolution:"1280x720",description:"Recommended for Facebook Live (720p30)"},custom:{videoBitrate:25e5,audioBitrate:128e3,framerate:30,resolution:"1920x1080",description:"Default settings for custom RTMP"}};return t[e]||t.custom}}nt.PLATFORMS={youtube:{name:"YouTube",rtmpUrl:"rtmp://a.rtmp.youtube.com/live2",keyFormat:"xxxx-xxxx-xxxx-xxxx",icon:"\ud83d\udcfa",supportsChat:!0,supportsViewerCount:!0,requiresAuth:!0},twitch:{name:"Twitch",rtmpUrl:"rtmp://live.twitch.tv/app",keyFormat:"live_xxxxxxxxx",icon:"\ud83d\udc9c",supportsChat:!0,supportsViewerCount:!0,requiresAuth:!0},facebook:{name:"Facebook Live",rtmpUrl:"rtmps://live-api-s.facebook.com:443/rtmp",keyFormat:"xxxxxxxxxxxxxxxx",icon:"\ud83d\udc65",supportsChat:!1,supportsViewerCount:!0,requiresAuth:!0},custom:{name:"Custom RTMP",rtmpUrl:null,keyFormat:"varies",icon:"\ud83d\udd27",supportsChat:!1,supportsViewerCount:!1,requiresAuth:!1}};const at=new nt,st=e=>{var t;let{onClose:n,mediaStream:s}=e;const[r,i]=(0,a.useState)("setup"),[l,o]=(0,a.useState)("youtube"),[u,h]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[f,g]=(0,a.useState)(!1),[v,x]=(0,a.useState)("idle"),[b,j]=(0,a.useState)({bitrate:0,fps:0,droppedFrames:0,viewerCount:0,duration:0}),[y,w]=(0,a.useState)(null),[S,N]=(0,a.useState)(nt.getRecommendedSettings("youtube")),[k,C]=(0,a.useState)(!1);(0,a.useRef)(null);(0,a.useEffect)(()=>(at.onStatsUpdate=e=>{j(e)},at.onError=e=>{w(e)},at.onStatusChange=e=>{x(e)},()=>{f&&M()}),[f]),(0,a.useEffect)(()=>{const e=nt.getRecommendedSettings(l);N(e)},[l]);const M=async()=>{await at.stopStream(),g(!1),x("stopped")};return(0,d.jsx)("div",{className:"live-streaming-modal",onClick:n,children:(0,d.jsxs)("div",{className:"live-streaming-panel",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"streaming-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("span",{className:"streaming-icon",children:"\ud83d\udce1"}),"Live Streaming"]}),(0,d.jsx)("button",{className:"close-btn",onClick:n,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("div",{className:"streaming-tabs",children:[(0,d.jsx)("button",{className:"setup"===r?"active":"",onClick:()=>i("setup"),disabled:f,children:"Setup"}),(0,d.jsx)("button",{className:"monitor"===r?"active":"",onClick:()=>i("monitor"),disabled:!f,children:"Monitor"}),(0,d.jsx)("button",{className:"settings"===r?"active":"",onClick:()=>i("settings"),disabled:f,children:"Settings"})]}),(0,d.jsxs)("div",{className:"streaming-content",children:["setup"===r&&(0,d.jsxs)("div",{className:"setup-tab",children:[(0,d.jsx)("h3",{children:"Select Platform"}),(0,d.jsx)("div",{className:"platform-grid",children:Object.entries(nt.PLATFORMS).map(e=>{let[t,n]=e;return(0,d.jsxs)("button",{className:"platform-card ".concat(l===t?"selected":""),onClick:()=>(o(t),h(""),void w(null)),children:[(0,d.jsx)("div",{className:"platform-icon",children:n.icon}),(0,d.jsx)("div",{className:"platform-name",children:n.name})]},t)})}),(0,d.jsxs)("div",{className:"stream-key-section",children:[(0,d.jsxs)("label",{children:["Stream Key",(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsx)("input",{type:"password",placeholder:"Enter your ".concat(nt.PLATFORMS[l].name," stream key"),value:u,onChange:e=>h(e.target.value),className:"stream-key-input"}),(0,d.jsxs)("p",{className:"input-hint",children:["Format: ",nt.PLATFORMS[l].keyFormat]})]}),"custom"===l&&(0,d.jsxs)("div",{className:"rtmp-url-section",children:[(0,d.jsxs)("label",{children:["RTMP Server URL",(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsx)("input",{type:"text",placeholder:"rtmp://your-server.com/live",value:m,onChange:e=>p(e.target.value),className:"rtmp-url-input"}),(0,d.jsx)("p",{className:"input-hint",children:"Example: rtmp://live.example.com/stream"})]}),y&&(0,d.jsxs)("div",{className:"error-message",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),y]}),(0,d.jsx)("div",{className:"setup-actions",children:(0,d.jsx)("button",{className:"btn-start-stream",onClick:async()=>{if(w(null),!nt.validateStreamKey(l,u))return void w("Invalid stream key format for ".concat(nt.PLATFORMS[l].name));if("custom"===l&&!m)return void w("Custom RTMP URL is required");if(!s)return void w("No media stream available. Start recording first.");x("connecting");if(!(await at.initializeStream(l,u,"custom"===l?m:null)).success)return void x("idle");(await at.startStream(s,{videoBitrate:S.videoBitrate,audioBitrate:S.audioBitrate,framerate:S.framerate,resolution:S.resolution})).success?(g(!0),i("monitor")):x("idle")},disabled:f||!u||"custom"===l&&!m,children:"connecting"===v?"Connecting...":"\ud83d\udd34 Start Streaming"})}),(0,d.jsxs)("div",{className:"setup-help",children:[(0,d.jsx)("h4",{children:"How to get your stream key:"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"YouTube:"})," YouTube Studio \u2192 Create \u2192 Go Live \u2192 Stream key"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Twitch:"})," Dashboard \u2192 Settings \u2192 Stream \u2192 Primary Stream key"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Facebook:"})," Live Producer \u2192 Streaming Software \u2192 Stream Key"]})]})]})]}),"monitor"===r&&(0,d.jsxs)("div",{className:"monitor-tab",children:[(0,d.jsxs)("div",{className:"stream-status-bar",children:[(0,d.jsxs)("div",{className:"status-indicator ".concat(v),children:[(0,d.jsx)("span",{className:"status-dot"}),"live"===v&&"\ud83d\udd34 LIVE","connecting"===v&&"\u23f3 Connecting...","reconnecting"===v&&"\ud83d\udd04 Reconnecting...","stopped"===v&&"\u23f9\ufe0f Stopped"]}),(0,d.jsx)("div",{className:"stream-duration",children:(e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))})(b.duration)})]}),(0,d.jsxs)("div",{className:"stats-grid",children:[(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83d\udcca"}),(0,d.jsx)("div",{className:"stat-value",children:(z=b.bitrate,z>=1e3?"".concat((z/1e3).toFixed(2)," Mbps"):"".concat(z," kbps"))}),(0,d.jsx)("div",{className:"stat-label",children:"Bitrate"})]}),(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83c\udfac"}),(0,d.jsx)("div",{className:"stat-value",children:b.fps}),(0,d.jsx)("div",{className:"stat-label",children:"FPS"})]}),(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\u26a0\ufe0f"}),(0,d.jsx)("div",{className:"stat-value",children:b.droppedFrames}),(0,d.jsx)("div",{className:"stat-label",children:"Dropped Frames"})]}),(null===(t=nt.PLATFORMS[l])||void 0===t?void 0:t.supportsViewerCount)&&(0,d.jsxs)("div",{className:"stat-card",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,d.jsx)("div",{className:"stat-value",children:b.viewerCount}),(0,d.jsx)("div",{className:"stat-label",children:"Viewers"})]})]}),(0,d.jsxs)("div",{className:"stream-info",children:[(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"info-label",children:"Platform:"}),(0,d.jsxs)("span",{className:"info-value",children:[nt.PLATFORMS[l].icon," ",nt.PLATFORMS[l].name]})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"info-label",children:"Resolution:"}),(0,d.jsx)("span",{className:"info-value",children:S.resolution})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"info-label",children:"Framerate:"}),(0,d.jsxs)("span",{className:"info-value",children:[S.framerate," FPS"]})]})]}),(0,d.jsx)("div",{className:"monitor-actions",children:(0,d.jsx)("button",{className:"btn-stop-stream",onClick:M,children:"\u23f9\ufe0f Stop Streaming"})})]}),"settings"===r&&(0,d.jsxs)("div",{className:"settings-tab",children:[(0,d.jsx)("h3",{children:"Stream Settings"}),(0,d.jsx)("div",{className:"preset-buttons",children:(0,d.jsx)("button",{className:"preset-btn",onClick:()=>N(nt.getRecommendedSettings(l)),children:"Use Recommended"})}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Video Bitrate"}),(0,d.jsxs)("select",{value:S.videoBitrate,onChange:e=>N(c(c({},S),{},{videoBitrate:parseInt(e.target.value)})),children:[(0,d.jsx)("option",{value:"1000000",children:"1 Mbps (Low)"}),(0,d.jsx)("option",{value:"2500000",children:"2.5 Mbps (Medium)"}),(0,d.jsx)("option",{value:"3000000",children:"3 Mbps (High)"}),(0,d.jsx)("option",{value:"4000000",children:"4 Mbps (Ultra)"}),(0,d.jsx)("option",{value:"6000000",children:"6 Mbps (Professional)"})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Audio Bitrate"}),(0,d.jsxs)("select",{value:S.audioBitrate,onChange:e=>N(c(c({},S),{},{audioBitrate:parseInt(e.target.value)})),children:[(0,d.jsx)("option",{value:"96000",children:"96 kbps"}),(0,d.jsx)("option",{value:"128000",children:"128 kbps"}),(0,d.jsx)("option",{value:"160000",children:"160 kbps"}),(0,d.jsx)("option",{value:"192000",children:"192 kbps"})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Resolution"}),(0,d.jsxs)("select",{value:S.resolution,onChange:e=>N(c(c({},S),{},{resolution:e.target.value})),children:[(0,d.jsx)("option",{value:"1920x1080",children:"1920x1080 (1080p)"}),(0,d.jsx)("option",{value:"1280x720",children:"1280x720 (720p)"}),(0,d.jsx)("option",{value:"854x480",children:"854x480 (480p)"})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Framerate"}),(0,d.jsxs)("select",{value:S.framerate,onChange:e=>N(c(c({},S),{},{framerate:parseInt(e.target.value)})),children:[(0,d.jsx)("option",{value:"24",children:"24 FPS"}),(0,d.jsx)("option",{value:"30",children:"30 FPS"}),(0,d.jsx)("option",{value:"60",children:"60 FPS"})]})]}),(0,d.jsx)("div",{className:"settings-info",children:(0,d.jsxs)("p",{className:"info-text",children:["\ud83d\udca1 ",(0,d.jsx)("strong",{children:"Tip:"})," Higher bitrate = better quality but requires faster internet connection. Recommended upload speed: ",Math.ceil((S.videoBitrate+S.audioBitrate)/1e6*1.5)," Mbps minimum"]})})]})]})]})});var z},rt=e=>{var t;let{recordings:n=[],onClose:s,onComplete:r}=e;const[i,l]=(0,a.useState)([]),[o,u]=(0,a.useState)({format:"mp4",codec:"h264",quality:"high"}),[h,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(null),[g,v]=(0,a.useState)(2);(0,a.useEffect)(()=>(Ve.onBatchProgressUpdate=(e,t)=>{f(Ve.getBatchStatus())},()=>{Ve.onBatchProgressUpdate=null}),[]);const x=e=>Ve.formatBytes(e),b=()=>Ve.supportedFormats[o.format],j=()=>Ve.codecs[o.codec];return(0,d.jsx)("div",{className:"batch-export-overlay",children:(0,d.jsxs)("div",{className:"batch-export-modal",children:[(0,d.jsxs)("div",{className:"batch-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Batch Export"]}),(0,d.jsx)("button",{className:"close-btn",onClick:s,disabled:h,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"batch-content",children:[(0,d.jsxs)("div",{className:"selection-section",children:[(0,d.jsxs)("div",{className:"section-header",children:[(0,d.jsxs)("h3",{children:["Select Recordings (",i.length," / ",n.length,")"]}),(0,d.jsx)("button",{className:"select-all-btn",onClick:()=>{i.length===n.length?l([]):l(n.map(e=>e.id))},children:i.length===n.length?"Deselect All":"Select All"})]}),(0,d.jsx)("div",{className:"recordings-list",children:0===n.length?(0,d.jsxs)("div",{className:"empty-state",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,d.jsx)("p",{children:"No recordings available"})]}):n.map(e=>(0,d.jsxs)("div",{className:"recording-item ".concat(i.includes(e.id)?"selected":""),onClick:()=>{return t=e.id,void(i.includes(t)?l(i.filter(e=>e!==t)):l([...i,t]));var t},children:[(0,d.jsx)("div",{className:"recording-checkbox",children:(0,d.jsx)("input",{type:"checkbox",checked:i.includes(e.id),onChange:()=>{}})}),(0,d.jsxs)("div",{className:"recording-info",children:[(0,d.jsx)("h4",{children:e.name||"Recording ".concat(e.id)}),(0,d.jsxs)("div",{className:"recording-meta",children:[(0,d.jsx)("span",{children:e.duration?"".concat(e.duration.toFixed(1),"s"):"N/A"}),(0,d.jsx)("span",{children:"\u2022"}),(0,d.jsx)("span",{children:x(e.size||0)}),(0,d.jsx)("span",{children:"\u2022"}),(0,d.jsx)("span",{children:new Date(e.timestamp).toLocaleString()})]})]})]},e.id))})]}),(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsx)("h3",{children:"Export Settings"}),(0,d.jsxs)("div",{className:"settings-grid",children:[(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Format"}),(0,d.jsx)("select",{value:o.format,onChange:e=>{const t=e.target.value,n=Ve.getSupportedCodecs(t);u(c(c({},o),{},{format:t,codec:n[0]||"h264"}))},disabled:h,children:Object.entries(Ve.supportedFormats).map(e=>{let[t,n]=e;return(0,d.jsxs)("option",{value:t,children:[n.name," - ",n.description]},t)})}),b()&&(0,d.jsxs)("div",{className:"format-info",children:[(0,d.jsxs)("span",{className:"info-badge",children:[b().quality," quality"]}),(0,d.jsxs)("span",{className:"info-badge",children:[b().compression," compression"]})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Codec"}),(0,d.jsx)("select",{value:o.codec,onChange:e=>u(c(c({},o),{},{codec:e.target.value})),disabled:h,children:Ve.getSupportedCodecs(o.format).map(e=>{const t=Ve.codecs[e];return(0,d.jsxs)("option",{value:e,children:[t.name," - ",t.description]},e)})}),j()&&(0,d.jsxs)("div",{className:"codec-info",children:[(0,d.jsxs)("div",{className:"codec-stats",children:[(0,d.jsxs)("span",{children:["Quality: ",j().quality]}),(0,d.jsxs)("span",{children:["Compression: ",j().compression]}),(0,d.jsxs)("span",{children:["Speed: ",j().speed]})]}),(0,d.jsxs)("div",{className:"codec-details",children:[(0,d.jsxs)("span",{className:"detail-badge",children:["File Size: ",j().fileSize]}),(0,d.jsxs)("span",{className:"detail-badge",children:["CPU: ",j().cpuUsage]}),(0,d.jsxs)("span",{className:"detail-badge",children:["Support: ",j().compatibility]})]})]})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Quality Preset"}),(0,d.jsx)("select",{value:o.quality,onChange:e=>u(c(c({},o),{},{quality:e.target.value})),disabled:h,children:Object.entries(Ve.qualityPresets).map(e=>{let[t,n]=e;return(0,d.jsxs)("option",{value:t,children:[n.name," - ",n.description]},t)})})]}),(0,d.jsxs)("div",{className:"setting-group",children:[(0,d.jsx)("label",{children:"Concurrent Exports"}),(0,d.jsxs)("select",{value:g,onChange:e=>v(parseInt(e.target.value)),disabled:h,children:[(0,d.jsx)("option",{value:"1",children:"1 (Slower, less CPU)"}),(0,d.jsx)("option",{value:"2",children:"2 (Balanced)"}),(0,d.jsx)("option",{value:"3",children:"3 (Faster, more CPU)"}),(0,d.jsx)("option",{value:"4",children:"4 (Fastest, high CPU)"})]})]})]}),(0,d.jsxs)("div",{className:"recommendations",children:[(0,d.jsx)("h4",{children:"Quick Recommendations"}),(0,d.jsx)("div",{className:"recommendation-buttons",children:Object.entries({"Social Media":"social-media",Professional:"professional",Web:"web","Quick Share":"quick-share"}).map(e=>{let[t,n]=e;const a=Ve.getRecommendations(n);return(0,d.jsxs)("button",{className:"recommendation-btn",onClick:()=>u({format:a.format,codec:a.codec,quality:a.quality}),disabled:h,children:[(0,d.jsx)("span",{className:"rec-label",children:t}),(0,d.jsx)("span",{className:"rec-desc",children:a.description})]},n)})})]})]}),(0,d.jsxs)("div",{className:"summary-section",children:[(0,d.jsx)("h3",{children:"Export Summary"}),(0,d.jsxs)("div",{className:"summary-grid",children:[(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{className:"summary-label",children:"Selected Files"}),(0,d.jsx)("span",{className:"summary-value",children:i.length})]}),(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{className:"summary-label",children:"Estimated Total Size"}),(0,d.jsx)("span",{className:"summary-value",children:(()=>{let e=0;return i.forEach(t=>{const a=n.find(e=>e.id===t);if(a){const t=a.duration||60;e+=Ve.estimateFileSize(t,o)}}),x(e)})()})]}),(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{className:"summary-label",children:"Format"}),(0,d.jsx)("span",{className:"summary-value",children:o.format.toUpperCase()})]}),(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{className:"summary-label",children:"Codec"}),(0,d.jsx)("span",{className:"summary-value",children:(null===(t=j())||void 0===t?void 0:t.name)||"N/A"})]})]})]}),h&&p&&(0,d.jsxs)("div",{className:"progress-section",children:[(0,d.jsx)("h3",{children:"Processing..."}),(0,d.jsxs)("div",{className:"batch-progress-grid",children:[(0,d.jsxs)("div",{className:"progress-stat",children:[(0,d.jsx)("span",{className:"stat-label",children:"Completed"}),(0,d.jsx)("span",{className:"stat-value success",children:p.completed})]}),(0,d.jsxs)("div",{className:"progress-stat",children:[(0,d.jsx)("span",{className:"stat-label",children:"Processing"}),(0,d.jsx)("span",{className:"stat-value processing",children:p.processing})]}),(0,d.jsxs)("div",{className:"progress-stat",children:[(0,d.jsx)("span",{className:"stat-label",children:"Pending"}),(0,d.jsx)("span",{className:"stat-value pending",children:p.pending})]}),(0,d.jsxs)("div",{className:"progress-stat",children:[(0,d.jsx)("span",{className:"stat-label",children:"Failed"}),(0,d.jsx)("span",{className:"stat-value error",children:p.failed})]})]}),(0,d.jsxs)("div",{className:"overall-progress",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(p.completed/p.total*100,"%")}})}),(0,d.jsxs)("span",{className:"progress-text",children:[p.completed," / ",p.total," completed"]})]})]}),(0,d.jsxs)("div",{className:"batch-actions",children:[(0,d.jsx)("button",{className:"cancel-btn",onClick:s,disabled:h,children:h?"Processing...":"Cancel"}),(0,d.jsx)("button",{className:"export-btn",onClick:async()=>{if(0!==i.length){m(!0),Ve.clearBatch(),i.forEach(e=>{const t=n.find(t=>t.id===e);t&&Ve.addToBatch(t.blob,c(c({},o),{},{filename:t.name||"recording_".concat(e)}))}),f(Ve.getBatchStatus());try{const e=(await Ve.processBatch(g)).filter(e=>"fulfilled"===e.status).map(e=>e.value);m(!1),r&&r(e),e.forEach(e=>{const t=document.createElement("a");t.href=e.url,t.download=e.filename,t.click()})}catch(e){console.error("Batch export error:",e),m(!1),alert("Batch export failed: "+e.message)}}else alert("Please select at least one recording")},disabled:h||0===i.length,children:h?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner"}),"Exporting ",(null===p||void 0===p?void 0:p.completed)||0," / ",i.length]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export ",i.length," Recording",1!==i.length?"s":""]})})]})]})]})})},it=e=>{let{recordings:t,onClose:n,onMergeComplete:s}=e;const[r,i]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[c,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(0),[p,f]=(0,a.useState)(null),[g,v]=(0,a.useState)(null),x=(0,a.useRef)(null),b=(0,a.useRef)({}),j=()=>{v(null)},y=(e,t)=>{const n=[...l],a="up"===t?e-1:e+1;a<0||a>=n.length||([n[e],n[a]]=[n[a],n[e]],o(n))},w=l.reduce((e,t)=>e+(t.duration||0),0),S=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))},N=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB";return(0,d.jsx)("div",{className:"video-merger-overlay",children:(0,d.jsxs)("div",{className:"video-merger-modal",children:[(0,d.jsxs)("div",{className:"merger-header",children:[(0,d.jsx)("h2",{children:"\ud83c\udfac Merge Videos"}),(0,d.jsx)("button",{className:"close-btn",onClick:n,children:"\xd7"})]}),(0,d.jsxs)("div",{className:"merger-content",children:[(0,d.jsxs)("div",{className:"available-clips-section",children:[(0,d.jsxs)("h3",{children:["Available Clips (",t.length,")"]}),(0,d.jsx)("div",{className:"available-clips-grid",children:t.map(e=>(0,d.jsxs)("div",{className:"clip-card ".concat(r.find(t=>t.id===e.id)?"selected":""),onClick:()=>(e=>{r.find(t=>t.id===e.id)?(i(r.filter(t=>t.id!==e.id)),o(l.filter(t=>t.id!==e.id))):(i([...r,e]),o([...l,e]))})(e),children:[(0,d.jsx)("video",{ref:t=>b.current[e.id]=t,src:e.url,className:"clip-thumbnail",muted:!0,onMouseEnter:e=>{e.target.currentTime=0,e.target.play()},onMouseLeave:e=>{e.target.pause(),e.target.currentTime=0}}),(0,d.jsxs)("div",{className:"clip-info",children:[(0,d.jsx)("div",{className:"clip-name",children:e.filename}),(0,d.jsxs)("div",{className:"clip-meta",children:[S(e.duration||0)," \u2022 ",N(e.size)]})]}),r.find(t=>t.id===e.id)&&(0,d.jsx)("div",{className:"selected-badge",children:"\u2713"})]},e.id))})]}),(0,d.jsxs)("div",{className:"merge-sequence-section",children:[(0,d.jsxs)("h3",{children:["Merge Sequence (",l.length," clips)"]}),0===l.length?(0,d.jsx)("div",{className:"empty-sequence",children:(0,d.jsx)("p",{children:"\ud83d\udc46 Select clips above to add them to the sequence"})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"sequence-list",children:l.map((e,t)=>(0,d.jsxs)("div",{className:"sequence-item ".concat(g===t?"dragging":""),draggable:!0,onDragStart:e=>((e,t)=>{v(t),e.dataTransfer.effectAllowed="move"})(e,t),onDragOver:e=>((e,t)=>{if(e.preventDefault(),null===g||g===t)return;const n=[...l],a=n[g];n.splice(g,1),n.splice(t,0,a),o(n),v(t)})(e,t),onDragEnd:j,children:[(0,d.jsx)("div",{className:"sequence-number",children:t+1}),(0,d.jsx)("video",{src:e.url,className:"sequence-thumbnail",muted:!0}),(0,d.jsxs)("div",{className:"sequence-info",children:[(0,d.jsx)("div",{className:"sequence-name",children:e.filename}),(0,d.jsx)("div",{className:"sequence-meta",children:S(e.duration||0)})]}),(0,d.jsxs)("div",{className:"sequence-controls",children:[(0,d.jsx)("button",{className:"move-btn",onClick:()=>y(t,"up"),disabled:0===t,title:"Move up",children:"\u2191"}),(0,d.jsx)("button",{className:"move-btn",onClick:()=>y(t,"down"),disabled:t===l.length-1,title:"Move down",children:"\u2193"}),(0,d.jsx)("button",{className:"remove-btn",onClick:()=>{return t=e,o(l.filter(e=>e.id!==t.id)),void i(r.filter(e=>e.id!==t.id));var t},title:"Remove from sequence",children:"\xd7"})]})]},"".concat(e.id,"-").concat(t)))}),(0,d.jsxs)("div",{className:"sequence-summary",children:[(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{className:"summary-label",children:"Total Clips:"}),(0,d.jsx)("span",{className:"summary-value",children:l.length})]}),(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{className:"summary-label",children:"Total Duration:"}),(0,d.jsx)("span",{className:"summary-value",children:S(w)})]}),(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{className:"summary-label",children:"Estimated Size:"}),(0,d.jsx)("span",{className:"summary-value",children:N(l.reduce((e,t)=>e+t.size,0))})]})]})]})]})]}),c&&(0,d.jsxs)("div",{className:"merge-progress",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(h,"%")}})}),(0,d.jsxs)("div",{className:"progress-text",children:["Merging videos... ",Math.round(h),"%"]})]}),(0,d.jsxs)("div",{className:"merger-footer",children:[(0,d.jsx)("button",{className:"cancel-btn",onClick:n,disabled:c,children:"Cancel"}),(0,d.jsx)("button",{className:"merge-btn",onClick:async()=>{if(l.length<2)alert("Please select at least 2 clips to merge");else{u(!0),m(0);try{const e=x.current,t=e.getContext("2d"),n=b.current[l[0].id];e.width=n.videoWidth||1920,e.height=n.videoHeight||1080;const a=e.captureStream(30),r=new MediaRecorder(a,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:5e6}),i=[];r.ondataavailable=e=>{e.data.size>0&&i.push(e.data)},r.onstop=()=>{const e=new Blob(i,{type:"video/webm"}),t={id:Date.now(),filename:"merged_".concat(Date.now(),".webm"),blob:e,url:URL.createObjectURL(e),size:e.size,timestamp:(new Date).toISOString(),duration:l.reduce((e,t)=>e+(t.duration||0),0),type:"video/webm"};s(t),u(!1),m(100)},r.start();let o=0;const c=async()=>{if(o>=l.length)return void r.stop();const n=l[o],a=b.current[n.id];if(!a)return o++,void c();a.currentTime=0,await a.play();const s=()=>{if(a.paused||a.ended)return m((o+1)/l.length*100),o++,void c();t.drawImage(a,0,0,e.width,e.height),requestAnimationFrame(s)};a.onended=()=>{m((o+1)/l.length*100),o++,c()},s()};await c()}catch(e){console.error("Error merging videos:",e),alert("Failed to merge videos: "+e.message),u(!1)}}},disabled:l.length<2||c,children:c?"\ud83d\udd04 Merging...":"\ud83c\udfac Merge ".concat(l.length," Clips")})]}),(0,d.jsx)("canvas",{ref:x,style:{display:"none"}})]})})},lt=e=>{let{recording:t,onClose:n,onSpeedChange:s}=e;const[r,i]=(0,a.useState)(1),[l,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(0),[h,m]=(0,a.useState)(1),[p,f]=(0,a.useState)(!1),g=(0,a.useRef)(null),v=(0,a.useRef)(null);(0,a.useEffect)(()=>{g.current&&(g.current.playbackRate=h)},[h]);const x=()=>{g.current&&(p?g.current.pause():g.current.play(),f(!p))},b=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))},j=t.duration/r;return(0,d.jsx)("div",{className:"speed-control-overlay",children:(0,d.jsxs)("div",{className:"speed-control-modal",children:[(0,d.jsxs)("div",{className:"speed-control-header",children:[(0,d.jsx)("h2",{children:"\u26a1 Speed Control"}),(0,d.jsx)("button",{className:"close-btn",onClick:n,children:"\xd7"})]}),(0,d.jsxs)("div",{className:"speed-control-content",children:[(0,d.jsx)("div",{className:"preview-section",children:(0,d.jsxs)("div",{className:"video-preview-container",children:[(0,d.jsx)("video",{ref:g,src:t.url,className:"preview-video",loop:!0,onClick:x}),(0,d.jsxs)("div",{className:"preview-overlay",children:[(0,d.jsx)("button",{className:"play-pause-btn",onClick:x,children:p?"\u23f8":"\u25b6\ufe0f"}),(0,d.jsxs)("div",{className:"speed-indicator",children:[h,"x ",h<1?"\ud83d\udc22":h>1?"\ud83d\ude80":""]})]})]})}),(0,d.jsxs)("div",{className:"speed-presets-section",children:[(0,d.jsx)("h3",{children:"Quick Presets"}),(0,d.jsx)("div",{className:"speed-presets-grid",children:[{value:.25,label:"0.25x",icon:"\ud83d\udc0c",desc:"Ultra Slow"},{value:.5,label:"0.5x",icon:"\ud83d\udc22",desc:"Slow Motion"},{value:.75,label:"0.75x",icon:"\u23ea",desc:"Slower"},{value:1,label:"1x",icon:"\u25b6\ufe0f",desc:"Normal"},{value:1.25,label:"1.25x",icon:"\u23e9",desc:"Faster"},{value:1.5,label:"1.5x",icon:"\u26a1",desc:"Fast"},{value:2,label:"2x",icon:"\ud83d\ude80",desc:"Double Speed"},{value:3,label:"3x",icon:"\ud83d\udca8",desc:"Time-lapse"},{value:4,label:"4x",icon:"\ud83c\udf2a\ufe0f",desc:"Ultra Fast"}].map(e=>(0,d.jsxs)("button",{className:"speed-preset ".concat(r===e.value?"active":""," ").concat(e.value<1?"slow":e.value>1?"fast":"normal"),onClick:()=>{i(e.value),m(e.value)},children:[(0,d.jsx)("div",{className:"preset-icon",children:e.icon}),(0,d.jsx)("div",{className:"preset-label",children:e.label}),(0,d.jsx)("div",{className:"preset-desc",children:e.desc})]},e.value))})]}),(0,d.jsxs)("div",{className:"custom-speed-section",children:[(0,d.jsx)("h3",{children:"Custom Speed"}),(0,d.jsxs)("div",{className:"speed-slider-container",children:[(0,d.jsxs)("div",{className:"speed-slider-labels",children:[(0,d.jsx)("span",{children:"0.25x"}),(0,d.jsx)("span",{children:"1x"}),(0,d.jsx)("span",{children:"4x"})]}),(0,d.jsx)("input",{type:"range",min:"0.25",max:"4",step:"0.05",value:r,onChange:e=>{const t=parseFloat(e.target.value);i(t),m(t)},className:"speed-slider"}),(0,d.jsxs)("div",{className:"speed-value-display",children:[(0,d.jsxs)("span",{className:"speed-value",children:[r.toFixed(2),"x"]}),r<.5&&(0,d.jsx)("span",{className:"speed-effect",children:"Ultra Slow Motion"}),r>=.5&&r<1&&(0,d.jsx)("span",{className:"speed-effect",children:"Slow Motion"}),1===r&&(0,d.jsx)("span",{className:"speed-effect",children:"Normal Speed"}),r>1&&r<=2&&(0,d.jsx)("span",{className:"speed-effect",children:"Fast Forward"}),r>2&&(0,d.jsx)("span",{className:"speed-effect",children:"Time-lapse"})]})]})]}),(0,d.jsxs)("div",{className:"duration-info",children:[(0,d.jsxs)("div",{className:"info-card",children:[(0,d.jsx)("div",{className:"info-label",children:"Original Duration"}),(0,d.jsx)("div",{className:"info-value",children:b(t.duration)})]}),(0,d.jsx)("div",{className:"info-arrow",children:"\u2192"}),(0,d.jsxs)("div",{className:"info-card highlight",children:[(0,d.jsx)("div",{className:"info-label",children:"New Duration"}),(0,d.jsx)("div",{className:"info-value",children:b(j)})]}),(0,d.jsxs)("div",{className:"info-card",children:[(0,d.jsxs)("div",{className:"info-label",children:["Time ",r>1?"Saved":"Added"]}),(0,d.jsx)("div",{className:"info-value",children:b(Math.abs(t.duration-j))})]})]})]}),l&&(0,d.jsxs)("div",{className:"processing-progress",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(c,"%")}})}),(0,d.jsxs)("div",{className:"progress-text",children:["Processing video at ",r,"x speed... ",Math.round(c),"%"]})]}),(0,d.jsxs)("div",{className:"speed-control-footer",children:[(0,d.jsx)("button",{className:"cancel-btn",onClick:n,disabled:l,children:"Cancel"}),(0,d.jsx)("button",{className:"apply-btn",onClick:async()=>{if(1!==r){o(!0),u(0);try{const n=g.current,a=v.current,i=a.getContext("2d");a.width=n.videoWidth,a.height=n.videoHeight;const l=t.duration/r,c=30,d=1/c,h=a.captureStream(c);let m,p;if(n.capturedStream||t.blob)try{m=new AudioContext;const e=t.blob,n=await m.decodeAudioData(await e.arrayBuffer()),a=new OfflineAudioContext(n.numberOfChannels,n.length/r,n.sampleRate);p=a.createBufferSource(),p.buffer=n,p.playbackRate.value=r,p.connect(a.destination),p.start(0);const s=await a.startRendering(),i=m.createMediaStreamDestination(),l=m.createBufferSource();l.buffer=s,l.connect(i),i.stream.getAudioTracks().length>0&&h.addTrack(i.stream.getAudioTracks()[0])}catch(e){console.warn("Audio processing failed, continuing with video only:",e)}const f=new MediaRecorder(h,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:5e6}),x=[];f.ondataavailable=e=>{e.data.size>0&&x.push(e.data)},f.onstop=()=>{const e=new Blob(x,{type:"video/webm"}),n={id:Date.now(),filename:"".concat(t.filename.replace(/\.\w+$/,""),"_").concat(r,"x.webm"),blob:e,url:URL.createObjectURL(e),size:e.size,timestamp:(new Date).toISOString(),duration:l,type:"video/webm",metadata:{originalSpeed:1,appliedSpeed:r,effect:r<1?"slow-motion":"time-lapse"}};s(n),o(!1),u(100),m&&m.close()},f.start(),n.currentTime=0;let b=0;const j=n.duration,y=()=>{b>=j?f.stop():(n.currentTime=b,n.onseeked=()=>{i.drawImage(n,0,0,a.width,a.height);u(b/j*100),b+=d*r,requestAnimationFrame(y)})};y()}catch(n){console.error("Error processing speed change:",n),alert("Failed to apply speed change: "+n.message),o(!1)}}else alert("Speed is already at 1x (normal). Please select a different speed.")},disabled:l||1===r,children:l?"\u23f3 Processing...":"\u26a1 Apply ".concat(r,"x Speed")})]}),(0,d.jsx)("canvas",{ref:v,style:{display:"none"}})]})})},ot=e=>{let{recording:t,onClose:n,onApplyEffect:s}=e;const[r,i]=(0,a.useState)([{time:0,zoom:1,x:0,y:0}]),[l,o]=(0,a.useState)(0),[u,h]=(0,a.useState)(0),[m,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[v,x]=(0,a.useState)(0),[b,j]=(0,a.useState)(null),y=(0,a.useRef)(null),w=(0,a.useRef)(null),S=(0,a.useRef)(null);(0,a.useEffect)(()=>{N()},[l,r]),(0,a.useEffect)(()=>{if(m&&y.current){const e=setInterval(()=>{const e=y.current,t=e.currentTime/e.duration*100;h(t),N()},33);return()=>clearInterval(e)}},[m]);const N=()=>{const e=S.current,t=y.current;if(!e||!t||t.readyState<2)return;const n=e.getContext("2d");e.width=t.videoWidth,e.height=t.videoHeight;const a=r[l];if(!a)return;const s=a.zoom,i=a.x,o=a.y;n.clearRect(0,0,e.width,e.height),n.save();const c=e.width/2,d=e.height/2;n.translate(c,d),n.scale(s,s),n.translate(-c+i*e.width/100,-d+o*e.height/100),n.drawImage(t,0,0,e.width,e.height),n.restore(),n.strokeStyle="#667eea",n.lineWidth=3,n.setLineDash([10,5]),n.strokeRect(c-e.width/(2*s),d-e.height/(2*s),e.width/s,e.height/s)},k=(e,t)=>{const n=[...r];n[l]=c(c({},n[l]),{},{[e]:parseFloat(t)}),i(n)},C=r[l]||r[0];return(0,d.jsx)("div",{className:"zoompan-overlay",children:(0,d.jsxs)("div",{className:"zoompan-modal",children:[(0,d.jsxs)("div",{className:"zoompan-header",children:[(0,d.jsx)("h2",{children:"\ud83c\udfac Zoom & Pan Editor"}),(0,d.jsx)("button",{className:"close-btn",onClick:n,children:"\xd7"})]}),(0,d.jsxs)("div",{className:"zoompan-content",children:[(0,d.jsx)("div",{className:"preview-panel",children:(0,d.jsxs)("div",{className:"preview-container",children:[(0,d.jsx)("canvas",{ref:S,className:"preview-canvas"}),(0,d.jsx)("video",{ref:y,src:t.url,className:"hidden-video",onLoadedMetadata:N,onTimeUpdate:N}),(0,d.jsx)("button",{className:"preview-play-btn",onClick:()=>{y.current&&(m?y.current.pause():y.current.play(),p(!m))},children:m?"\u23f8":"\u25b6\ufe0f"})]})}),(0,d.jsxs)("div",{className:"controls-panel",children:[(0,d.jsxs)("div",{className:"section",children:[(0,d.jsx)("h3",{children:"Effect Presets"}),(0,d.jsx)("div",{className:"presets-grid",children:[{id:"ken-burns-zoom-in",name:"Ken Burns - Zoom In",icon:"\ud83d\udd0d",keyframes:[{time:0,zoom:1,x:0,y:0},{time:100,zoom:1.5,x:0,y:0}]},{id:"ken-burns-zoom-out",name:"Ken Burns - Zoom Out",icon:"\ud83d\udd0e",keyframes:[{time:0,zoom:1.5,x:0,y:0},{time:100,zoom:1,x:0,y:0}]},{id:"pan-right",name:"Pan Right",icon:"\u27a1\ufe0f",keyframes:[{time:0,zoom:1.3,x:-20,y:0},{time:100,zoom:1.3,x:20,y:0}]},{id:"pan-left",name:"Pan Left",icon:"\u2b05\ufe0f",keyframes:[{time:0,zoom:1.3,x:20,y:0},{time:100,zoom:1.3,x:-20,y:0}]},{id:"zoom-focus",name:"Zoom Focus",icon:"\ud83c\udfaf",keyframes:[{time:0,zoom:1,x:0,y:0},{time:30,zoom:2,x:0,y:0},{time:70,zoom:2,x:0,y:0},{time:100,zoom:1,x:0,y:0}]},{id:"dramatic-reveal",name:"Dramatic Reveal",icon:"\u2728",keyframes:[{time:0,zoom:3,x:-30,y:-30},{time:50,zoom:1.5,x:0,y:0},{time:100,zoom:1,x:0,y:0}]}].map(e=>(0,d.jsxs)("button",{className:"preset-btn ".concat(b===e.id?"active":""),onClick:()=>(e=>{var t;const n=(null===(t=y.current)||void 0===t?void 0:t.duration)||10,a=e.keyframes.map(e=>c(c({},e),{},{time:e.time/100*n}));i(a),o(0),j(e.id)})(e),children:[(0,d.jsx)("span",{className:"preset-icon",children:e.icon}),(0,d.jsx)("span",{className:"preset-name",children:e.name})]},e.id))})]}),(0,d.jsxs)("div",{className:"section",children:[(0,d.jsxs)("h3",{children:["Keyframes (",r.length,")"]}),(0,d.jsx)("div",{className:"keyframe-list",children:r.map((e,t)=>(0,d.jsx)("div",{className:"keyframe-item ".concat(l===t?"selected":""),onClick:()=>o(t),children:(0,d.jsxs)("div",{className:"keyframe-info",children:[(0,d.jsxs)("div",{className:"keyframe-time",children:[e.time.toFixed(1),"s"]}),(0,d.jsxs)("div",{className:"keyframe-params",children:["Zoom: ",e.zoom.toFixed(2),"x"]})]})},t))}),(0,d.jsxs)("div",{className:"keyframe-actions",children:[(0,d.jsx)("button",{className:"action-btn add",onClick:()=>{const e={time:u,zoom:1,x:0,y:0},t=[...r,e].sort((e,t)=>e.time-t.time);i(t),o(t.indexOf(e))},children:"+ Add Keyframe"}),(0,d.jsx)("button",{className:"action-btn delete",onClick:()=>{if(r.length<=1)return;const e=r.filter((e,t)=>t!==l);i(e),o(Math.max(0,l-1))},disabled:r.length<=1,children:"\ud83d\uddd1 Delete"})]})]}),(0,d.jsxs)("div",{className:"section",children:[(0,d.jsx)("h3",{children:"Transform"}),(0,d.jsxs)("div",{className:"control-group",children:[(0,d.jsxs)("label",{children:["Zoom: ",C.zoom.toFixed(2),"x",(0,d.jsx)("input",{type:"range",min:"0.5",max:"5",step:"0.1",value:C.zoom,onChange:e=>k("zoom",e.target.value)})]}),(0,d.jsxs)("label",{children:["Pan X: ",C.x.toFixed(0),"%",(0,d.jsx)("input",{type:"range",min:"-50",max:"50",step:"1",value:C.x,onChange:e=>k("x",e.target.value)})]}),(0,d.jsxs)("label",{children:["Pan Y: ",C.y.toFixed(0),"%",(0,d.jsx)("input",{type:"range",min:"-50",max:"50",step:"1",value:C.y,onChange:e=>k("y",e.target.value)})]})]})]})]})]}),f&&(0,d.jsxs)("div",{className:"processing-section",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(v,"%")}})}),(0,d.jsxs)("div",{className:"progress-text",children:["Applying zoom/pan effect... ",Math.round(v),"%"]})]}),(0,d.jsxs)("div",{className:"zoompan-footer",children:[(0,d.jsx)("button",{className:"cancel-btn",onClick:n,disabled:f,children:"Cancel"}),(0,d.jsx)("button",{className:"apply-btn",onClick:async()=>{g(!0),x(0);try{const e=y.current,n=w.current,a=n.getContext("2d");n.width=e.videoWidth,n.height=e.videoHeight;const i=n.captureStream(30),l=new MediaRecorder(i,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:5e6}),o=[];l.ondataavailable=e=>{e.data.size>0&&o.push(e.data)},l.onstop=()=>{const e=new Blob(o,{type:"video/webm"}),n={id:Date.now(),filename:"".concat(t.filename.replace(/\.\w+$/,""),"_zoompan.webm"),blob:e,url:URL.createObjectURL(e),size:e.size,timestamp:(new Date).toISOString(),duration:t.duration,type:"video/webm",metadata:{effect:"zoom-pan",preset:b,keyframes:r}};s(n),g(!1),x(100)},l.start(),e.currentTime=0;const c=e.duration,d=1/30;let u=0;const h=()=>{u>=c?l.stop():e.currentTime=u};e.onseeked=()=>{const t=((e,t)=>{const n=e/t*100;let a=r[0],s=r[r.length-1];for(let l=0;l<r.length-1;l++)if(r[l].time<=n&&r[l+1].time>=n){a=r[l],s=r[l+1];break}if(a.time===s.time)return a;const i=(n-a.time)/(s.time-a.time);return{zoom:a.zoom+(s.zoom-a.zoom)*i,x:a.x+(s.x-a.x)*i,y:a.y+(s.y-a.y)*i}})(u,c);a.clearRect(0,0,n.width,n.height),a.save();const s=n.width/2,i=n.height/2;a.translate(s,i),a.scale(t.zoom,t.zoom),a.translate(-s+t.x*n.width/100,-i+t.y*n.height/100),a.drawImage(e,0,0,n.width,n.height),a.restore(),x(u/c*100),u+=d,requestAnimationFrame(h)},h()}catch(e){console.error("Error applying zoom/pan effect:",e),alert("Failed to apply effect: "+e.message),g(!1)}},disabled:f,children:f?"\u23f3 Processing...":"\u2728 Apply Effect"})]}),(0,d.jsx)("canvas",{ref:w,style:{display:"none"}})]})})},ct=e=>{let{user:t,onLogout:n}=e;const[s,r]=(0,a.useState)("record"),[i,l]=(0,a.useState)(!1),[o,h]=(0,a.useState)(!1),[x,b]=(0,a.useState)([]),[j,k]=(0,a.useState)([]),[C,M]=(0,a.useState)(null),[z,E]=(0,a.useState)(!1),[T,P]=(0,a.useState)(0),[R,L]=(0,a.useState)(!1),[D,A]=(0,a.useState)(!1),[F,B]=(0,a.useState)(!1),[I,O]=(0,a.useState)(!1),[V,H]=(0,a.useState)(!1),[U,_]=(0,a.useState)(!1),[q,W]=(0,a.useState)(!1),[Q,G]=(0,a.useState)(!1),[K,$]=(0,a.useState)(!1),[Y,X]=(0,a.useState)(!1),[J,Z]=(0,a.useState)(null),[ee,te]=(0,a.useState)(null),[ne,ae]=(0,a.useState)([]),[se,re]=(0,a.useState)(!1),[ie,le]=(0,a.useState)(!1),[de,ue]=(0,a.useState)(!1),[he,me]=(0,a.useState)(""),[pe,fe]=(0,a.useState)(!1),[ge,ve]=(0,a.useState)(null),[we,Se]=(0,a.useState)(null),[Me,ze]=(0,a.useState)(!1),[Ee,Te]=(0,a.useState)(!1),[Pe,Re]=(0,a.useState)(0),[Ve,Ue]=(0,a.useState)(!1),[_e,qe]=(0,a.useState)(!1),[We,Ge]=(0,a.useState)(!1),[Ke,$e]=(0,a.useState)(!1),[et,nt]=(0,a.useState)(!1),[at,ct]=(0,a.useState)(!0),[dt,ut]=(0,a.useState)({videoQuality:"1080p",frameRate:30,audioSource:"system",includeWebcam:!1,captureArea:"fullscreen",countdown:3,countdownStyle:"modern",countdownSound:!0,enableDrawing:!1,trimOnTheFly:!1,separateAudioTracks:!1,systemVolume:70,micVolume:80,autoResume:!0,audio:{source:"system",quality:"high",noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0,microphoneVolume:50,microphoneId:""}}),ht=(0,a.useRef)(null),mt=(0,a.useRef)(null),pt=(0,a.useRef)(null),ft=(0,a.useRef)([]),gt=(0,a.useRef)(new Ne),vt=((0,a.useRef)(null),(0,a.useRef)(new Ze),()=>"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))),xt=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n={id:vt(),message:e,type:t,timestamp:new Date};ae(e=>[n,...e.slice(0,4)]),setTimeout(()=>{ae(e=>e.filter(e=>e.id!==n.id))},5e3)},[]),bt=(0,a.useCallback)(async e=>{try{const t=await Qe.saveScreenshot(e);console.log("\u2705 Screenshot persisted to storage:",t.id),k(e=>[t,...e]),xt("Screenshot saved! (".concat((t.size/1024).toFixed(1)," KB)"),"success")}catch(t){console.error("Failed to save screenshot to storage:",t),k(t=>[e,...t]),xt("Warning: Screenshot saved to memory only","warning")}},[xt]),jt=()=>({"720p":25e5,"1080p":5e6,"1440p":8e6,"4K":15e6}[dt.videoQuality]||5e6),yt=()=>({low:32e3,medium:64e3,high:128e3,"very-high":192e3}[dt.audio.quality]||128e3),wt="admin"===(St=t.plan)?m.admin:m[St]||m.free;var St;const Nt=()=>{if(-1!==wt.recordingsPerDay){const e=(new Date).toDateString();if(x.filter(t=>new Date(t.timestamp).toDateString()===e).length>=wt.recordingsPerDay)return xt("Daily recording limit reached (".concat(wt.recordingsPerDay,"). Upgrade for unlimited recordings."),"warning"),!1}return!0};var kt;(0,a.useEffect)(()=>{if("memory"in performance){const e=setInterval(()=>{const e=performance.memory;console.log("Memory Usage:",{used:Math.round(e.usedJSHeapSize/1024/1024)+" MB",total:Math.round(e.totalJSHeapSize/1024/1024)+" MB",limit:Math.round(e.jsHeapSizeLimit/1024/1024)+" MB"})},3e4);return()=>clearInterval(e)}},[]),(0,a.useEffect)(()=>{(async()=>{const e=(()=>{const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,t="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,n=e||t,a={mediaRecorder:"undefined"!==typeof MediaRecorder,getDisplayMedia:navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getDisplayMedia,getUserMedia:navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getUserMedia,webRTC:!!(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection),isIOS:n},s=!n&&Object.values(a).every(Boolean);return{isSupported:s,support:a,platform:n?"iOS":"other",message:n?"iOS Safari does not support screen recording. Please use iOS native screen recording or access on a desktop/Android device.":s?"Browser fully supported":"Some features may not be available in this browser"}})();te(e),e.isSupported||xt("Your browser may not support all screen recording features. Please use a modern browser for the best experience.","warning");try{await Qe.initialize();const e=await Qe.getAllRecordings();e.length>0&&(b(e),xt("Loaded ".concat(e.length," saved recording(s)"),"success"));const t=await Qe.getAllScreenshots();if(t.length>0){k(t);const e=t.reduce((e,t)=>e+(t.size||0),0);console.log("\u2705 Loaded ".concat(t.length," screenshots from storage (").concat((e/1048576).toFixed(2)," MB)")),console.log("\ud83d\udcf7 Screenshot details:",t.map(e=>({id:e.id,filename:e.filename,size:"".concat((e.size/1024).toFixed(1)," KB"),resolution:"".concat(e.width,"x").concat(e.height)})))}else console.log("\ud83d\udcf7 No screenshots found in storage");const n=await Qe.loadSettings();if(n&&ut(n),Ne.hasRecoverableRecording()){const e=Ne.getRecoveryMetadata();ve(e),fe(!0)}}catch(t){console.error("Failed to load saved data:",t),xt("Failed to load saved data. Starting fresh.","warning")}})()},[xt]),(0,a.useEffect)(()=>{const e=setTimeout(async()=>{try{await Qe.saveSettings(dt)}catch(e){console.error("Failed to save settings:",e)}},500);return()=>clearTimeout(e)},[dt]),(0,a.useEffect)(()=>()=>{x.forEach(e=>{if(e.url&&e.url.startsWith("blob:"))try{URL.revokeObjectURL(e.url),console.log("\ud83e\uddf9 Cleaned up blob URL for ".concat(e.filename))}catch(t){}})},[x]),kt={onToggleRecording:()=>{i?Rt():Et()},onTogglePause:()=>{i&&Lt()},onShowShortcuts:()=>{Ue(e=>!e)},onCancel:()=>{Ve?Ue(!1):Y?Pt():i&&Rt()},onDownload:()=>{C&&At(C)}},(0,a.useEffect)(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"r"===e.key&&(e.preventDefault(),kt.onToggleRecording&&kt.onToggleRecording()),"Space"!==e.code||e.target.matches("input, textarea, select")||(e.preventDefault(),kt.onTogglePause&&kt.onTogglePause()),"Escape"===e.key&&kt.onCancel&&kt.onCancel(),(e.ctrlKey||e.metaKey)&&"d"===e.key&&(e.preventDefault(),kt.onDownload&&kt.onDownload()),(e.ctrlKey||e.metaKey)&&e.shiftKey&&"?"===e.key&&(e.preventDefault(),kt.onShowShortcuts&&kt.onShowShortcuts())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[kt]);const Ct=(0,a.useCallback)(()=>{pt.current=setInterval(()=>{P(e=>e+1)},1e3)},[]),Mt=(0,a.useCallback)(()=>{pt.current&&(clearInterval(pt.current),pt.current=null)},[]),zt=(0,a.useCallback)(async()=>{try{let n={video:{mediaSource:"screen",width:{ideal:"4K"===dt.videoQuality?3840:"1440p"===dt.videoQuality?2560:"1080p"===dt.videoQuality?1920:1280},height:{ideal:"4K"===dt.videoQuality?2160:"1440p"===dt.videoQuality?1440:"1080p"===dt.videoQuality?1080:720},frameRate:{ideal:dt.frameRate}},audio:"none"!==dt.audio.source};"area"===dt.captureArea&&J&&(n.video.width={exact:J.width},n.video.height={exact:J.height});const a=await navigator.mediaDevices.getDisplayMedia(n);if("microphone"===dt.audio.source||"both"===dt.audio.source)try{const e={audio:{deviceId:dt.audio.microphoneId||void 0,noiseSuppression:dt.audio.noiseSuppression,echoCancellation:dt.audio.echoCancellation,autoGainControl:dt.audio.autoGainControl}},t=await navigator.mediaDevices.getUserMedia(e),n=[...a.getAudioTracks(),...t.getAudioTracks()];a.getAudioTracks().forEach(e=>a.removeTrack(e)),n.forEach(e=>a.addTrack(e))}catch(e){console.warn("Failed to access microphone:",e)}if(dt.includeWebcam)try{const e=await navigator.mediaDevices.getUserMedia({video:{width:320,height:240},audio:!1});a.addTrack(...e.getVideoTracks())}catch(t){console.warn("Failed to access webcam:",t)}return a}catch(n){throw console.error("Error accessing display media:",n),n}},[dt,J]),Et=(0,a.useCallback)(async()=>{try{if(!Nt())return;if("area"===dt.captureArea&&!J)return p(t.plan,"areaSelection")?void X(!0):void le(!0);if(!he)return void ue(!0);const e=((e,t)=>{const n=document.createElement("canvas");let a={videoQuality:e,frameRate:t};if(n.getContext("webgl")||n.getContext("experimental-webgl")||("4K"===e&&(a.videoQuality="1080p"),t>30&&(a.frameRate=30)),"memory"in performance){const n=performance.memory;n.jsHeapSizeLimit-n.usedJSHeapSize<104857600&&("4K"===e&&(a.videoQuality="1080p"),"1440p"===e&&(a.videoQuality="1080p"),t>30&&(a.frameRate=30))}return a})(dt.videoQuality,dt.frameRate);e.videoQuality!==dt.videoQuality&&xt("Video quality adjusted to ".concat(e.videoQuality," for better performance"),"info");const n=await zt();mt.current=n,ft.current=[];let a="video/webm;codecs=vp9";MediaRecorder.isTypeSupported(a)||(a="video/webm;codecs=vp8",MediaRecorder.isTypeSupported(a)||(a="video/webm"));const s=new MediaRecorder(n,{mimeType:a,videoBitsPerSecond:jt(),audioBitsPerSecond:yt()});gt.current.startAutoSave({name:he,settings:dt,mimeType:a}),s.ondataavailable=e=>{e.data.size>0&&(ft.current.push(e.data),gt.current.addChunks([e.data]))},s.onstop=()=>{const e=new Blob(ft.current,{type:a}),t=URL.createObjectURL(e),s=a.includes("webm")?"webm":"mp4",r="".concat(he,".").concat(s),i={id:vt(),filename:r,url:t,blob:e,duration:T,size:e.size,timestamp:new Date,settings:c({},dt)};Qe.saveRecording(i).catch(e=>{console.error("Failed to save recording to storage:",e),xt("Warning: Recording saved to memory only","warning")}),b(e=>[i,...e]),M(i),xt("Recording saved: ".concat(r),"success"),gt.current.stopAutoSave(),n.getTracks().forEach(e=>e.stop()),mt.current=null,P(0),me("")},s.onerror=e=>{console.error("MediaRecorder error:",e.error),Se(e.error),gt.current.stopAutoSave()},ht.current=s,s.start(1e3),l(!0),h(!1),Ct(),xt("Recording started! Press Ctrl+R to stop, Space to pause.","success")}catch(e){console.error("Failed to start recording:",e),Se(e),gt.current.stopAutoSave()}},[zt,T,Ct,dt,J,xt,jt,yt,he,t.plan,Nt]),Tt=(0,a.useCallback)(e=>{Z(e),X(!1),setTimeout(()=>{Et()},100)},[Et]),Pt=(0,a.useCallback)(()=>{X(!1),Z(null)},[]),Rt=(0,a.useCallback)(()=>{ht.current&&i&&(ht.current.stop(),l(!1),h(!1),Mt())},[i,Mt]),Lt=(0,a.useCallback)(()=>{ht.current&&i&&(o?(ht.current.resume(),Ct(),h(!1)):(ht.current.pause(),Mt(),h(!0)))},[i,o,Ct,Mt]),Dt=(0,a.useCallback)(async e=>{try{await Qe.deleteRecording(e)}catch(t){console.error("Failed to delete from storage:",t)}b(t=>{const n=t.filter(t=>t.id!==e),a=t.find(t=>t.id===e);return a&&URL.revokeObjectURL(a.url),n}),C&&C.id===e&&M(null),xt("Recording deleted","success")},[C,xt]),At=((0,a.useCallback)(async e=>{try{await Qe.deleteScreenshot(e),console.log("\ud83d\uddd1\ufe0f Screenshot deleted from storage:",e)}catch(t){console.error("Failed to delete screenshot from storage:",t)}k(t=>t.filter(t=>t.id!==e)),xt("Screenshot deleted","success")},[xt]),(0,a.useCallback)(e=>{const t=document.createElement("a");t.href=e.dataUrl,t.download=e.filename,document.body.appendChild(t),t.click(),document.body.removeChild(t),xt("Screenshot downloaded","success")},[xt]),(0,a.useCallback)(e=>{const t=document.createElement("a");t.href=e.url,t.download=e.filename,document.body.appendChild(t),t.click(),document.body.removeChild(t)},[])),Ft=(0,a.useCallback)(e=>{me(e),ue(!1),setTimeout(()=>{Bt()},100)},[]),Bt=(0,a.useCallback)(()=>{const e=dt.countdown||0;e>0?(Re(e),Te(!0)):Et()},[dt.countdown,Et]),It=(0,a.useCallback)(()=>{Te(!1),Et()},[Et]),Ot=(0,a.useCallback)(e=>{console.log("Drawing data:",e)},[]),Vt=(0,a.useCallback)(()=>{fe(!1),xt("Recording recovery is not fully implemented yet. Starting fresh recording.","info"),Ne.clearRecovery()},[xt]),Ht=(0,a.useCallback)(()=>{fe(!1),Ne.clearRecovery(),xt("Previous recording discarded.","info")},[xt]),Ut=(0,a.useCallback)(()=>{Se(null),setTimeout(()=>{Et()},100)},[Et]);return(0,d.jsxs)("div",{className:"screen-recorder",children:[(0,d.jsx)(xe,{user:t,onLogout:n,isRecording:i,isPaused:o,recordingTime:T,notifications:ne,onShowHelp:()=>re(!0),onShowShortcuts:()=>Ue(!0),onShowUpgrade:()=>le(!0),recordedVideos:x,currentRecording:C}),(0,d.jsxs)("div",{className:"mobile-view-toggle",children:[(0,d.jsxs)("button",{className:"view-toggle-btn ".concat(at?"":"active"),onClick:()=>ct(!1),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:(0,d.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})}),"Main"]}),(0,d.jsxs)("button",{className:"view-toggle-btn ".concat(at?"active":""),onClick:()=>ct(!0),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:(0,d.jsx)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"})}),"Recordings",x.length>0&&(0,d.jsx)("span",{className:"recording-badge",children:x.length})]})]}),(0,d.jsxs)("div",{className:"recorder-content",children:[(0,d.jsxs)("div",{className:"recorder-main ".concat(at?"mobile-hidden":"mobile-visible"),children:[(0,d.jsxs)("div",{className:"mode-toggle-tabs",children:[(0,d.jsxs)("button",{className:"mode-tab ".concat("record"===s?"active":""),onClick:()=>r("record"),disabled:i,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("circle",{cx:"12",cy:"12",r:"8"})}),"Record Video"]}),(0,d.jsxs)("button",{className:"mode-tab ".concat("screenshot"===s?"active":""),onClick:()=>r("screenshot"),disabled:i,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})}),"Take Screenshot"]})]}),"record"===s?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u,{isRecording:i,isPaused:o,recordingTime:T,onStart:Bt,onStop:Rt,onPause:Lt}),(0,d.jsxs)("div",{className:"advanced-options-toggle",children:[(0,d.jsxs)("button",{className:"btn-advanced-options ".concat(Me?"active":""),onClick:()=>ze(!Me),disabled:i,children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),"Advanced Options \u2699\ufe0f"]}),(0,d.jsxs)("button",{className:"btn-live-streaming",onClick:()=>qe(!0),disabled:!i,title:i?"Start live streaming":"Start recording first",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}),"Live Stream \ud83d\udce1"]})]}),Me&&(0,d.jsx)(Ye,{onSettingsChange:ut,currentSettings:dt}),(0,d.jsx)(g,{options:dt,onChange:ut,disabled:i,selectedArea:J,onAreaSelect:()=>X(!0),userPlan:t.plan,onUpgrade:()=>le(!0)})]}):(0,d.jsx)(be,{standalone:!0,onScreenshotTaken:bt,planLimits:wt}),C&&(0,d.jsx)(f,{feature:"videoEditing",userPlan:t.plan,onUpgrade:()=>le(!0),showUpgradePrompt:!1,children:(0,d.jsx)(v,{recording:C,recordings:x,onDownload:At,onDelete:Dt,onNavigate:M,userPlan:t.plan,onUpgrade:()=>le(!0),onOpenAdvancedEditor:()=>L(!0),onOpenAutoCaptions:()=>A(!0),onOpenAutoTranscription:()=>B(!0),onOpenAutoChapters:()=>O(!0),onOpenSceneDetection:()=>H(!0),onOpenBackgroundRemoval:()=>_(!0),onOpenSmartCrop:()=>W(!0),onOpenExportOptimizer:()=>G(!0)})}),(0,d.jsx)(ce,{recordings:x,userPlan:t.plan,onUpgrade:()=>le(!0)})]}),(0,d.jsxs)("div",{className:"recorder-sidebar ".concat(at?"mobile-visible":"mobile-hidden"),children:[(0,d.jsxs)("div",{className:"sidebar-header",children:[(0,d.jsx)("h3",{children:"Recordings"}),(0,d.jsxs)("div",{className:"storage-info",children:[(0,d.jsxs)("span",{className:"recordings-count",children:[x.length," videos"]}),j.length>0&&(0,d.jsxs)("span",{className:"screenshots-count",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:(0,d.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})}),j.length]})]}),(0,d.jsx)("div",{className:"sidebar-actions",children:x.length>1&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{className:"batch-export-btn",onClick:()=>Ge(!0),title:"Merge Multiple Videos",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Merge"]}),(0,d.jsxs)("button",{className:"batch-export-btn",onClick:()=>$(!0),title:"Batch Export Multiple Recordings",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]})]})})]}),(0,d.jsx)(y,{recordings:x,onSelect:e=>{M(e),E(!0)},onDownload:At,onDelete:Dt,onEdit:e=>{M(e),L(!0)},currentRecording:C})]})]}),Y&&(0,d.jsx)(w,{isVisible:Y,onAreaSelected:Tt,onCancel:Pt}),de&&(0,d.jsx)(je,{onConfirm:Ft,onCancel:()=>ue(!1)}),pe&&ge&&(0,d.jsx)(ke,{metadata:ge,onRecover:Vt,onDiscard:Ht}),we&&(0,d.jsx)(Ce,{error:we,onRetry:Ut,onDismiss:()=>Se(null)}),(0,d.jsx)(ye,{stream:mt.current,isRecording:i,isPaused:o,recordingTime:T}),Ke&&C&&(0,d.jsx)(lt,{recording:C,onClose:()=>$e(!1),onSpeedChange:async e=>{try{await Qe.saveRecording(e),b(t=>[e,...t]),$e(!1),xt("Speed adjusted to ".concat(e.metadata.appliedSpeed,"x! \ud83d\ude80"),"success"),M(e),E(!0)}catch(t){console.error("Error saving speed-adjusted video:",t),xt("Failed to save video","error")}}}),et&&C&&(0,d.jsx)(ot,{recording:C,onClose:()=>nt(!1),onApplyEffect:async e=>{try{await Qe.saveRecording(e),b(t=>[e,...t]),nt(!1),xt("Zoom/Pan effect applied! \u2728","success"),M(e),E(!0)}catch(t){console.error("Error saving zoom/pan video:",t),xt("Failed to save video","error")}}}),(0,d.jsx)(S,{notifications:ne}),et&&C&&(0,d.jsx)(ot,{recording:C,onClose:()=>nt(!1),onApplyEffect:async e=>{try{await Qe.saveRecording(e),b(t=>[e,...t]),nt(!1),xt("Zoom/Pan effect applied! \u2728","success"),M(e),E(!0)}catch(t){console.error("Error saving zoom/pan video:",t),xt("Failed to save video","error")}}}),(0,d.jsx)(S,{notifications:ne}),(0,d.jsx)(N,{isVisible:se,onClose:()=>re(!1)}),ie&&(0,d.jsx)(oe,{currentPlan:t.plan,onClose:()=>le(!1),onUpgrade:e=>{console.log("\u2705 Payment successful - upgrading user to:",e);const n=c(c({},t),{},{plan:e});localStorage.setItem("nebulaUser",JSON.stringify(n)),le(!1),xt("Successfully upgraded to ".concat(e.charAt(0).toUpperCase()+e.slice(1)," plan!"),"success"),window.location.reload()}}),R&&(0,d.jsx)(Le,{recordings:x,onClose:()=>L(!1),onSave:e=>{b(t=>[e,...t]),L(!1),xt("Video exported successfully!","success")}}),D&&C&&(0,d.jsx)(De,{recording:C,onClose:()=>A(!1),onSave:e=>{b(t=>t.map(t=>t.id===e.id?e:t)),M(e),A(!1),xt("Captions applied successfully!","success")}}),F&&C&&(0,d.jsx)(Ae,{recording:C,onClose:()=>B(!1),onSave:e=>{b(t=>t.map(t=>t.id===e.id?e:t)),M(e),B(!1),xt("Transcription saved successfully!","success")}}),I&&C&&(0,d.jsx)(Fe,{recording:C,onClose:()=>O(!1),onSave:e=>{b(t=>t.map(t=>t.id===e.id?e:t)),M(e),O(!1),xt("Chapters saved successfully!","success")}}),V&&C&&(0,d.jsx)(Be,{recording:C,onClose:()=>H(!1),onExport:e=>{xt("Chapters exported successfully!","success"),H(!1)}}),U&&C&&(0,d.jsx)(Ie,{recording:C,onClose:()=>_(!1),onSave:e=>{b(t=>[e,...t]),_(!1),xt("Background removed successfully!","success")}}),q&&C&&(0,d.jsx)(Oe,{recording:C,onClose:()=>W(!1),onExport:e=>{b(t=>[e,...t]),W(!1),xt("Video cropped successfully!","success")}}),Q&&C&&(0,d.jsx)(He,{recording:C,onClose:()=>G(!1),onExport:e=>{At(e),G(!1),xt("Video optimized and exported!","success")}}),Ee&&(0,d.jsx)(Je,{duration:Pe,onComplete:It,options:{showVisual:!0,playSound:dt.countdownSound,showProgress:!0,style:dt.countdownStyle||"modern",color:"#667eea",backgroundColor:"rgba(0, 0, 0, 0.8)"}}),dt.enableDrawing&&i&&(0,d.jsx)(Xe,{isActive:i,videoStream:mt.current,onDrawingData:Ot}),(0,d.jsx)(tt,{isOpen:Ve,onClose:()=>Ue(!1)}),_e&&(0,d.jsx)(st,{onClose:()=>qe(!1),mediaStream:mt.current}),K&&(0,d.jsx)(rt,{recordings:x,onClose:()=>$(!1),onComplete:e=>{$(!1),xt("Successfully exported ".concat(e.length," recording(s)!"),"success")}}),We&&(0,d.jsx)(it,{recordings:x,onClose:()=>Ge(!1),onMergeComplete:async e=>{try{await Qe.saveRecording(e),b(t=>[e,...t]),Ge(!1),xt("Videos merged successfully! \ud83c\udfac","success"),M(e),E(!0)}catch(t){console.error("Error saving merged video:",t),xt("Failed to save merged video","error")}}}),z&&C&&(0,d.jsx)("div",{className:"video-player-modal-overlay",onClick:()=>E(!1),children:(0,d.jsxs)("div",{className:"video-player-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"video-player-header",children:[(0,d.jsx)("h3",{children:C.filename}),(0,d.jsx)("button",{className:"close-player-btn",onClick:()=>E(!1),children:"\u2715"})]}),(0,d.jsx)("div",{className:"video-player-content",children:(0,d.jsx)("video",{src:C.url,controls:!0,autoPlay:!0,className:"video-player"})}),(0,d.jsxs)("div",{className:"video-player-info",children:[(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"info-label",children:"Size:"}),(0,d.jsxs)("span",{children:[(C.size/1048576).toFixed(2)," MB"]})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"info-label",children:"Duration:"}),(0,d.jsxs)("span",{children:[Math.floor(C.duration/60),":",(C.duration%60).toString().padStart(2,"0")]})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"info-label",children:"Date:"}),(0,d.jsx)("span",{children:new Date(C.timestamp).toLocaleString()})]})]}),(0,d.jsxs)("div",{className:"video-player-actions",children:[(0,d.jsxs)("button",{className:"player-action-btn edit-btn",onClick:()=>{E(!1),L(!0)},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),"Edit Video"]}),(0,d.jsxs)("button",{className:"player-action-btn speed-btn",onClick:()=>{E(!1),$e(!0)},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:(0,d.jsx)("path",{d:"M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z"})}),"Speed"]}),(0,d.jsxs)("button",{className:"player-action-btn zoom-btn",onClick:()=>{E(!1),nt(!0)},children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:[(0,d.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),(0,d.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})]}),"Zoom/Pan"]}),(0,d.jsxs)("button",{className:"player-action-btn download-btn",onClick:()=>At(C),children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:(0,d.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),"Download"]}),(0,d.jsxs)("button",{className:"player-action-btn delete-btn",onClick:()=>{window.confirm("Delete this recording?")&&(Dt(C.id),E(!1))},children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:(0,d.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),"Delete"]})]})]})})]})},dt=e=>{let{onClose:t,onAdminLogin:n}=e;const[s,r]=(0,a.useState)({username:"",password:""}),[i,l]=(0,a.useState)(""),[o,u]=(0,a.useState)(!1),h={username:"admin",password:"Nebula@Admin2025!",email:"colinnebula@gmail.com"},m=(e,t)=>{r(n=>c(c({},n),{},{[e]:t})),l("")},p=e=>{e.preventDefault(),u(!0),l(""),setTimeout(()=>{const e=s.username===h.username||s.username===h.email,a=s.password===h.password;if(e&&a){const e={id:"admin-001",name:"Colin Nebula",email:h.email,avatar:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23dc2626" width="100" height="100"/%3E%3Ctext fill="white" font-size="45" font-weight="bold" x="50%25" y="50%25" text-anchor="middle" dy=".35em"%3EA%3C/text%3E%3C/svg%3E',plan:"admin",isAdmin:!0,privileges:{unlimitedRecordings:!0,unlimitedStorage:!0,maxQuality:"4K",accessAllFeatures:!0,manageUsers:!0,viewAnalytics:!0,exportData:!0,systemSettings:!0},recordingsCount:0,storageUsed:0,maxStorage:1/0};n(e),t()}else l("Invalid username or password"),u(!1)},800)},f=e=>{"Enter"===e.key&&p(e)};return(0,z.createPortal)((0,d.jsx)("div",{className:"modal-overlay admin-overlay",onClick:t,children:(0,d.jsxs)("div",{className:"modal-content admin-login-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"admin-header",children:[(0,d.jsx)("div",{className:"admin-shield",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})})}),(0,d.jsx)("h2",{children:"Administrator Login"}),(0,d.jsx)("p",{children:"Access to administrative controls and system settings"}),(0,d.jsx)("button",{className:"modal-close",onClick:t,"aria-label":"Close",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("form",{onSubmit:p,className:"admin-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{htmlFor:"admin-username",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})}),"Username"]}),(0,d.jsx)("input",{id:"admin-username",type:"text",value:s.username,onChange:e=>m("username",e.target.value),onKeyPress:f,placeholder:"Enter admin username",required:!0,autoComplete:"username",autoFocus:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{htmlFor:"admin-password",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})}),"Password"]}),(0,d.jsx)("input",{id:"admin-password",type:"password",value:s.password,onChange:e=>m("password",e.target.value),onKeyPress:f,placeholder:"Enter admin password",required:!0,autoComplete:"current-password"})]}),i&&(0,d.jsxs)("div",{className:"admin-error",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),i]}),(0,d.jsx)("button",{type:"submit",className:"admin-submit-btn",disabled:o,children:o?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner"}),"Authenticating..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})}),"Sign In as Admin"]})}),(0,d.jsxs)("div",{className:"admin-info",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})}),(0,d.jsx)("span",{children:"Admin access grants full system privileges including unlimited storage, 4K recording, and user management."})]})]}),(0,d.jsx)("div",{className:"admin-credentials-hint",children:(0,d.jsxs)("details",{children:[(0,d.jsx)("summary",{children:"Current Credentials"}),(0,d.jsxs)("div",{className:"credentials-box",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Username:"})," ",h.username]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Password:"})," ",h.password.replace(/./g,"\u2022")]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Email:"})," ",h.email]}),(0,d.jsx)("small",{children:"\u26a0\ufe0f Credentials are loaded from .env file"})]})]})})]})}),document.body)},ut=e=>{let{onLogin:t,onSwitchToRegister:n}=e;const[s,r]=(0,a.useState)({email:"",password:""}),[i,l]=(0,a.useState)({}),[o,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(0),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=e=>{e.altKey&&"o"===e.key.toLowerCase()&&(e.preventDefault(),m(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);(0,a.useEffect)(()=>{p>=5&&(f(0),m(!0))},[p]),(0,a.useEffect)(()=>()=>{g.current&&clearTimeout(g.current)},[]);const v=e=>{const{name:t,value:n}=e.target;r(e=>c(c({},e),{},{[t]:n})),i[t]&&l(e=>c(c({},e),{},{[t]:""}))};return(0,d.jsxs)("div",{className:"login-form",children:[(0,d.jsxs)("div",{className:"login-header",children:[(0,d.jsxs)("div",{className:"logo-tap-container",onTouchStart:()=>{f(e=>e+1),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{f(0)},2e3)},style:{position:"relative",display:"inline-block"},children:[(0,d.jsx)(x,{size:64,color:"#667eea",animated:!0}),p>0&&p<5&&(0,d.jsxs)("div",{className:"tap-indicator",children:[p,"/5"]})]}),(0,d.jsx)("h2",{children:"Welcome back"}),(0,d.jsx)("p",{children:"Sign in to your Nebula Screen Capture account"})]}),i.general&&(0,d.jsx)("div",{className:"error-banner",children:i.general}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const n=(()=>{const e={};return s.email?/\S+@\S+\.\S+/.test(s.email)||(e.email="Email is invalid"):e.email="Email is required",s.password?s.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",e})();if(Object.keys(n).length>0)l(n);else{u(!0);try{await new Promise(e=>setTimeout(e,1e3));const e={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),email:s.email,name:s.email.split("@")[0],avatar:"https://ui-avatars.com/api/?name=".concat(s.email.split("@")[0],"&background=667eea&color=fff"),plan:"free",recordingsCount:0,storageUsed:0,maxStorage:5120};t(e)}catch(a){l({general:"Login failed. Please try again."})}finally{u(!1)}}},className:"auth-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"email",children:"Email address"}),(0,d.jsx)("input",{type:"email",id:"email",name:"email",value:s.email,onChange:v,className:i.email?"error":"",placeholder:"Enter your email",disabled:o}),i.email&&(0,d.jsx)("span",{className:"error-text",children:i.email})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"password",children:"Password"}),(0,d.jsx)("input",{type:"password",id:"password",name:"password",value:s.password,onChange:v,className:i.password?"error":"",placeholder:"Enter your password",disabled:o}),i.password&&(0,d.jsx)("span",{className:"error-text",children:i.password})]}),(0,d.jsxs)("div",{className:"form-options",children:[(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox"}),(0,d.jsx)("span",{className:"checkmark"}),"Remember me"]}),(0,d.jsx)("button",{type:"button",className:"link-button",children:"Forgot password?"})]}),(0,d.jsx)("button",{type:"submit",className:"auth-button primary",disabled:o,children:o?(0,d.jsxs)("div",{className:"loading-spinner-small",children:[(0,d.jsx)(x,{size:20,color:"#ffffff",animated:!0}),"Signing in..."]}):"Sign in"})]}),(0,d.jsx)("div",{className:"auth-footer",children:(0,d.jsxs)("p",{children:["Don't have an account?"," ",(0,d.jsx)("button",{onClick:n,className:"link-button",children:"Sign up"})]})}),h&&(0,d.jsx)(dt,{onClose:()=>m(!1),onAdminLogin:t})]})},ht="nebula_email_verifications",mt=864e5;const pt=new class{generateToken(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9),"-").concat(Math.random().toString(36).substr(2,9))}async sendVerificationEmail(e){const t=this.generateToken(),n=Date.now()+mt,a=this.getStoredVerifications();a[e.email]={token:t,expiresAt:n,email:e.email,name:e.name,userId:e.id,createdAt:Date.now(),verified:!1},localStorage.setItem(ht,JSON.stringify(a));const s=window.location.origin+window.location.pathname,r="".concat(s,"#/verify-email?token=").concat(t,"&email=").concat(encodeURIComponent(e.email));try{if(!(await fetch("".concat("http://localhost:3000","/sendVerificationEmail"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,name:e.name,verificationUrl:r,token:t})})).ok)throw new Error("Failed to send verification email");return console.log("\ud83d\udce7 Verification email sent to:",e.email),console.log("\ud83d\udd17 Verification URL:",r),{success:!0,token:t,verificationUrl:r,message:"Verification email sent successfully"}}catch(i){return console.error("Email sending failed:",i),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udce7 EMAIL VERIFICATION (Demo Mode)"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("To: ".concat(e.email)),console.log("Name: ".concat(e.name)),console.log("Subject: Verify your Nebula Screen Capture account"),console.log(""),console.log("Click the link below to verify your email:"),console.log(r),console.log(""),console.log("Or use this code:",t.split("-")[1]),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),{success:!0,token:t,verificationUrl:r,message:"Verification link logged to console (demo mode)",isDemoMode:!0}}}async verifyEmail(e,t){const n=this.getStoredVerifications(),a=n[e];return a?a.verified?{success:!1,error:"Email already verified"}:a.token!==t?{success:!1,error:"Invalid verification token"}:Date.now()>a.expiresAt?{success:!1,error:"Verification link has expired. Please request a new one."}:(a.verified=!0,a.verifiedAt=Date.now(),n[e]=a,localStorage.setItem(ht,JSON.stringify(n)),await this.sendWelcomeEmail(a),console.log("\u2705 Email verified successfully:",e),{success:!0,message:"Email verified successfully!",userId:a.userId}):{success:!1,error:"No verification found for this email"}}isEmailVerified(e){const t=this.getStoredVerifications()[e];return t&&t.verified}async resendVerificationEmail(e){const t=this.getStoredVerifications(),n=t[e];if(!n)return{success:!1,error:"No account found with this email"};if(n.verified)return{success:!1,error:"Email already verified"};const a=this.generateToken(),s=Date.now()+mt;return n.token=a,n.expiresAt=s,n.resendCount=(n.resendCount||0)+1,n.lastResendAt=Date.now(),t[e]=n,localStorage.setItem(ht,JSON.stringify(t)),await this.sendVerificationEmail({email:n.email,name:n.name,id:n.userId})}async sendWelcomeEmail(e){try{if(!(await fetch("".concat("http://localhost:3000","/sendWelcomeEmail"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,name:e.name})})).ok)throw new Error("Failed to send welcome email");return console.log("\ud83c\udf89 Welcome email sent to:",e.email),{success:!0}}catch(t){return console.error("Welcome email failed:",t),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83c\udf89 WELCOME EMAIL (Demo Mode)"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("To: ".concat(e.email)),console.log("Name: ".concat(e.name)),console.log("Subject: Welcome to Nebula Screen Capture!"),console.log(""),console.log("Hi ".concat(e.name,",")),console.log(""),console.log("Welcome to Nebula Screen Capture! Your account is now active."),console.log("Start recording professional screen captures today!"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),{success:!0,isDemoMode:!0}}}getStoredVerifications(){try{const e=localStorage.getItem(ht);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading verifications:",e),{}}}cleanupExpiredVerifications(){const e=this.getStoredVerifications(),t=Date.now();let n=0;return Object.keys(e).forEach(a=>{const s=e[a];!s.verified&&t>s.expiresAt&&(delete e[a],n++)}),n>0&&(localStorage.setItem(ht,JSON.stringify(e)),console.log("\ud83e\uddf9 Cleaned up ".concat(n," expired verifications"))),n}getVerificationStatus(e){const t=this.getStoredVerifications()[e];return t?t.verified?{status:"verified",verifiedAt:t.verifiedAt}:Date.now()>t.expiresAt?{status:"expired",expiresAt:t.expiresAt}:{status:"pending",expiresAt:t.expiresAt,createdAt:t.createdAt}:{status:"not_found"}}};pt.cleanupExpiredVerifications();const ft=pt,gt=e=>{let{onRegister:t,onSwitchToLogin:n}=e;const[s,r]=(0,a.useState)({name:"",email:"",password:"",confirmPassword:""}),[i,l]=(0,a.useState)({}),[o,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(0),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=e=>{e.altKey&&"o"===e.key.toLowerCase()&&(e.preventDefault(),m(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);(0,a.useEffect)(()=>{p>=5&&(f(0),m(!0))},[p]),(0,a.useEffect)(()=>()=>{g.current&&clearTimeout(g.current)},[]);const v=e=>{const{name:t,value:n}=e.target;r(e=>c(c({},e),{},{[t]:n})),i[t]&&l(e=>c(c({},e),{},{[t]:""}))};return(0,d.jsxs)("div",{className:"login-form register-form",children:[(0,d.jsxs)("div",{className:"login-header",children:[(0,d.jsxs)("div",{className:"logo-tap-container",onTouchStart:()=>{f(e=>e+1),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{f(0)},2e3)},style:{position:"relative",display:"inline-block"},children:[(0,d.jsx)(x,{size:64,color:"#667eea",animated:!0}),p>0&&p<5&&(0,d.jsxs)("div",{className:"tap-indicator",children:[p,"/5"]})]}),(0,d.jsx)("h2",{children:"Create your account"}),(0,d.jsx)("p",{children:"Join Nebula Screen Capture for professional recording"})]}),i.general&&(0,d.jsx)("div",{className:"error-banner",children:i.general}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const n=(()=>{const e={};return s.name?s.name.length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",s.email?/\S+@\S+\.\S+/.test(s.email)||(e.email="Email is invalid"):e.email="Email is required",s.password?s.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",e})();if(Object.keys(n).length>0)l(n);else{u(!0);try{await new Promise(e=>setTimeout(e,1500));const e={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),email:s.email,name:s.name,avatar:"https://ui-avatars.com/api/?name=".concat(s.name,"&background=667eea&color=fff"),plan:"free",recordingsCount:0,storageUsed:0,maxStorage:5120,emailVerified:!1,createdAt:Date.now()};(await ft.sendVerificationEmail(e)).success?(localStorage.setItem("nebula_pending_user",JSON.stringify(e)),t(e,{requiresVerification:!0})):l({general:"Failed to send verification email. Please try again."})}catch(a){console.error("Registration error:",a),l({general:"Registration failed. Please try again."})}finally{u(!1)}}},className:"auth-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"name",children:"Full name"}),(0,d.jsx)("input",{type:"text",id:"name",name:"name",value:s.name,onChange:v,className:i.name?"error":"",placeholder:"Enter your full name",disabled:o}),i.name&&(0,d.jsx)("span",{className:"error-text",children:i.name})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"email",children:"Email address"}),(0,d.jsx)("input",{type:"email",id:"email",name:"email",value:s.email,onChange:v,className:i.email?"error":"",placeholder:"Enter your email",disabled:o}),i.email&&(0,d.jsx)("span",{className:"error-text",children:i.email})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"password",children:"Password"}),(0,d.jsx)("input",{type:"password",id:"password",name:"password",value:s.password,onChange:v,className:i.password?"error":"",placeholder:"Create a password",disabled:o}),i.password&&(0,d.jsx)("span",{className:"error-text",children:i.password})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm password"}),(0,d.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:s.confirmPassword,onChange:v,className:i.confirmPassword?"error":"",placeholder:"Confirm your password",disabled:o}),i.confirmPassword&&(0,d.jsx)("span",{className:"error-text",children:i.confirmPassword})]}),(0,d.jsx)("div",{className:"form-options",children:(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",required:!0}),(0,d.jsx)("span",{className:"checkmark"}),"I agree to the Terms of Service and Privacy Policy"]})}),(0,d.jsx)("button",{type:"submit",className:"auth-button primary",disabled:o,children:o?(0,d.jsxs)("div",{className:"loading-spinner-small",children:[(0,d.jsx)(x,{size:20,color:"#ffffff",animated:!0}),"Creating account..."]}):"Create account"})]}),(0,d.jsx)("div",{className:"auth-footer",children:(0,d.jsxs)("p",{children:["Already have an account?"," ",(0,d.jsx)("button",{onClick:n,className:"link-button",children:"Sign in"})]})}),h&&(0,d.jsx)(dt,{onClose:()=>m(!1)})]})},vt=e=>{let{email:t,onVerified:n,onClose:s}=e;const[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[h,m]=(0,a.useState)("");(0,a.useEffect)(()=>{const e=window.location.hash;if(e.includes("verify-email")){const n=new URLSearchParams(e.split("?")[1]),a=n.get("token"),s=n.get("email");a&&s===t&&p(a)}},[t]);const p=async e=>{const a=await ft.verifyEmail(t,e);a.success?(n(),window.location.hash=""):m(a.error)},f=async()=>{i(!0),o(""),m("");try{const e=await ft.resendVerificationEmail(t);e.success?o(e.isDemoMode?"Verification link sent! Check browser console for demo mode link.":"Verification email sent! Please check your inbox."):o(e.error)}catch(e){o("Failed to resend email. Please try again.")}finally{i(!1)}},g=async()=>{if(!c.trim())return void m("Please enter a verification code");m("");const e=ft.getStoredVerifications()[t];if(!e)return void m("No verification found");const a=await ft.verifyEmail(t,e.token);a.success?n():m(a.error)};return(0,z.createPortal)((0,d.jsx)("div",{className:"verification-overlay",children:(0,d.jsxs)("div",{className:"verification-modal",children:[(0,d.jsxs)("div",{className:"verification-header",children:[(0,d.jsx)(x,{size:48,color:"#667eea",animated:!0}),(0,d.jsx)("h2",{children:"Verify your email"}),(0,d.jsx)("p",{children:"We've sent a verification link to"}),(0,d.jsx)("strong",{className:"email-display",children:t})]}),(0,d.jsxs)("div",{className:"verification-body",children:[(0,d.jsx)("div",{className:"verification-icon",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})}),(0,d.jsxs)("div",{className:"verification-instructions",children:[(0,d.jsx)("h3",{children:"Check your inbox"}),(0,d.jsxs)("ol",{children:[(0,d.jsxs)("li",{children:["Open the email we sent to ",(0,d.jsx)("strong",{children:t})]}),(0,d.jsx)("li",{children:"Click the verification link in the email"}),(0,d.jsx)("li",{children:"You'll be automatically redirected"})]})]}),h&&(0,d.jsxs)("div",{className:"verification-error",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),h]}),l&&(0,d.jsx)("div",{className:"verification-message ".concat(l.includes("Failed")?"error":"success"),children:l}),(0,d.jsx)("div",{className:"verification-divider",children:(0,d.jsx)("span",{children:"or"})}),(0,d.jsxs)("div",{className:"manual-verification",children:[(0,d.jsx)("label",{htmlFor:"manual-code",children:"Enter verification code manually:"}),(0,d.jsxs)("div",{className:"code-input-group",children:[(0,d.jsx)("input",{type:"text",id:"manual-code",placeholder:"Enter code from email",value:c,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&g()}),(0,d.jsx)("button",{onClick:g,className:"verify-button",disabled:!c.trim(),children:"Verify"})]})]}),(0,d.jsxs)("div",{className:"verification-actions",children:[(0,d.jsx)("button",{onClick:f,disabled:r,className:"resend-button",children:r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"spinner-small"}),"Sending..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"})}),"Resend verification email"]})}),(0,d.jsx)("button",{onClick:()=>{console.warn("\u26a0\ufe0f Email verification skipped (demo mode)"),n()},className:"skip-button",children:"Skip (Demo Mode)"})]}),(0,d.jsx)("div",{className:"verification-help",children:(0,d.jsxs)("p",{children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"Didn't receive the email? Check your spam folder or"," ",(0,d.jsx)("button",{onClick:f,className:"inline-link",children:"resend it"})]})})]}),(0,d.jsx)("button",{className:"close-button",onClick:s,children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})}),document.body)},xt=e=>{let{onAuthenticated:t}=e;const[n,s]=(0,a.useState)(!0),[r,i]=(0,a.useState)(null),[l,o]=(0,a.useState)(!1);return(0,d.jsxs)("div",{className:"auth-container",children:[(0,d.jsxs)("div",{className:"auth-background",children:[(0,d.jsx)("div",{className:"auth-overlay"}),(0,d.jsxs)("div",{className:"floating-elements",children:[(0,d.jsx)("div",{className:"floating-element element-1"}),(0,d.jsx)("div",{className:"floating-element element-2"}),(0,d.jsx)("div",{className:"floating-element element-3"}),(0,d.jsx)("div",{className:"floating-element element-4"}),(0,d.jsx)("div",{className:"floating-element element-5"})]})]}),(0,d.jsx)("div",{className:"theme-toggle-container",children:(0,d.jsx)(me,{})}),(0,d.jsx)("div",{className:"auth-content",children:n?(0,d.jsx)(ut,{onLogin:e=>{localStorage.setItem("nebulaUser",JSON.stringify(e)),t(e)},onSwitchToRegister:()=>s(!1)}):(0,d.jsx)(gt,{onRegister:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).requiresVerification?(i(e),o(!0)):(localStorage.setItem("nebulaUser",JSON.stringify(e)),t(e))},onSwitchToLogin:()=>s(!0)})}),l&&r&&(0,d.jsx)(vt,{email:r.email,onVerified:()=>{if(r){const e=c(c({},r),{},{emailVerified:!0,verifiedAt:Date.now()});localStorage.setItem("nebulaUser",JSON.stringify(e)),localStorage.removeItem("nebula_pending_user"),o(!1),i(null),t(e)}},onClose:()=>{o(!1),s(!0)}})]})};class bt extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t||{componentStack:"No stack trace available"}})}render(){return this.state.hasError?(0,d.jsx)("div",{className:"error-boundary",children:(0,d.jsxs)("div",{className:"error-content",children:[(0,d.jsx)(x,{size:64,color:"#dc2626"}),(0,d.jsx)("h2",{children:"Oops! Something went wrong"}),(0,d.jsx)("p",{children:"The screen recorder encountered an unexpected error."}),"            ",(0,d.jsx)("div",{className:"error-details",children:(0,d.jsxs)("details",{children:[(0,d.jsx)("summary",{children:"Error Details (for debugging)"}),this.state.error&&(0,d.jsx)("pre",{children:this.state.error.toString()}),this.state.errorInfo&&this.state.errorInfo.componentStack&&(0,d.jsx)("pre",{children:this.state.errorInfo.componentStack}),(!this.state.errorInfo||!this.state.errorInfo.componentStack)&&(0,d.jsx)("pre",{children:"No additional error information available"})]})}),(0,d.jsxs)("div",{className:"error-actions",children:[(0,d.jsx)("button",{onClick:()=>window.location.reload(),className:"reload-btn",children:"Reload App"}),(0,d.jsx)("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"retry-btn",children:"Try Again"})]})]})}):this.props.children}}const jt=bt,yt=e=>{let{onComplete:t}=e;const[n,s]=(0,a.useState)(0),[r,i]=(0,a.useState)("Initializing..."),[l,o]=(0,a.useState)(!0),[c,u]=(0,a.useState)(0),{theme:h}=ue(),m=[{text:"Initializing Nebula...",duration:800},{text:"Loading components...",duration:600},{text:"Checking browser support...",duration:700},{text:"Setting up recording engine...",duration:900},{text:"Ready to capture!",duration:500}],p=[{icon:"\ud83c\udfac",text:"Screen & Webcam Recording"},{icon:"\u2702\ufe0f",text:"Advanced Video Editor"},{icon:"\ud83e\udd16",text:"AI-Powered Features"},{icon:"\u2601\ufe0f",text:"Cloud Storage"}];return(0,a.useEffect)(()=>{const e=setInterval(()=>{u(e=>(e+1)%p.length)},2e3);let n=0,a=0;const r=setInterval(()=>{n+=15*Math.random()+5,n>100&&(n=100),s(n);const e=n/100*m.length,l=Math.min(Math.floor(e),m.length-1);l!==a&&(a=l,i(m[a].text)),n>=100&&(clearInterval(r),setTimeout(()=>{o(!1),setTimeout(()=>{t()},800)},500))},100);return()=>{clearInterval(r),clearInterval(e)}},[t,p.length]),(0,d.jsxs)("div",{className:"splash-screen ".concat(l?"":"splash-exit"," ").concat(h),children:[(0,d.jsxs)("div",{className:"splash-background",children:[(0,d.jsx)("div",{className:"starfield",children:[...Array(100)].map((e,t)=>(0,d.jsx)("div",{className:"star",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s"),animationDuration:"".concat(2+3*Math.random(),"s")}},t))}),(0,d.jsxs)("div",{className:"gradient-waves",children:[(0,d.jsx)("div",{className:"wave wave-1"}),(0,d.jsx)("div",{className:"wave wave-2"}),(0,d.jsx)("div",{className:"wave wave-3"})]}),(0,d.jsx)("div",{className:"nebula-gradient"})]}),(0,d.jsxs)("div",{className:"splash-content",children:[(0,d.jsxs)("div",{className:"logo-container",children:[(0,d.jsx)("div",{className:"logo-backdrop"}),(0,d.jsx)("div",{className:"logo-glow",children:(0,d.jsx)(x,{size:140,color:"dark"===h?"#818cf8":"#667eea",animated:!0,className:"splash-logo"})}),(0,d.jsxs)("div",{className:"orbital-rings",children:[(0,d.jsx)("div",{className:"ring ring-1",children:(0,d.jsx)("div",{className:"ring-dot"})}),(0,d.jsx)("div",{className:"ring ring-2",children:(0,d.jsx)("div",{className:"ring-dot"})}),(0,d.jsx)("div",{className:"ring ring-3",children:(0,d.jsx)("div",{className:"ring-dot"})})]})]}),(0,d.jsxs)("div",{className:"brand-text",children:[(0,d.jsx)("h1",{className:"app-name",children:"Nebula Screen Capture"}),(0,d.jsx)("p",{className:"app-tagline",children:"Professional Recording Made Simple"})]}),(0,d.jsx)("div",{className:"feature-showcase",children:p.map((e,t)=>(0,d.jsxs)("div",{className:"feature-item ".concat(t===c?"active":""),children:[(0,d.jsx)("span",{className:"feature-icon",children:e.icon}),(0,d.jsx)("span",{className:"feature-text",children:e.text})]},t))}),(0,d.jsxs)("div",{className:"loading-section",children:[(0,d.jsxs)("div",{className:"progress-container",children:[(0,d.jsxs)("div",{className:"progress-bar",children:[(0,d.jsx)("div",{className:"progress-fill",style:{width:"".concat(n,"%")}}),(0,d.jsx)("div",{className:"progress-shine"})]}),(0,d.jsxs)("div",{className:"progress-text",children:[Math.round(n),"%"]})]}),(0,d.jsxs)("div",{className:"loading-text",children:[(0,d.jsx)("span",{className:"loading-step",children:r}),(0,d.jsxs)("div",{className:"loading-dots",children:[(0,d.jsx)("span",{}),(0,d.jsx)("span",{}),(0,d.jsx)("span",{})]})]})]})]}),(0,d.jsxs)("div",{className:"splash-footer",children:[(0,d.jsx)("div",{className:"version-info",children:"v1.0.0"}),(0,d.jsx)("div",{className:"copyright",children:"\xa9 2025 Nebula Team"})]})]})},wt=()=>{const[e,t]=(0,a.useState)(null),[n,s]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=e=>{e.preventDefault(),t(e),setTimeout(()=>s(!0),3e3)};return window.addEventListener("beforeinstallprompt",e),window.matchMedia("(display-mode: standalone)").matches&&s(!1),()=>window.removeEventListener("beforeinstallprompt",e)},[]);return sessionStorage.getItem("installPromptDismissed")?null:n?(0,d.jsx)("div",{className:"install-prompt",children:(0,d.jsxs)("div",{className:"install-prompt-content",children:[(0,d.jsx)("button",{className:"install-prompt-close",onClick:()=>{s(!1),sessionStorage.setItem("installPromptDismissed","true")},"aria-label":"Close",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),(0,d.jsx)("div",{className:"install-prompt-icon",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"})})}),(0,d.jsxs)("div",{className:"install-prompt-text",children:[(0,d.jsx)("h3",{children:"Install Nebula Screen Capture"}),(0,d.jsx)("p",{children:"Add to your home screen for quick access and offline use!"})]}),(0,d.jsx)("button",{className:"install-prompt-button",onClick:async()=>{if(!e)return;e.prompt();const{outcome:n}=await e.userChoice;console.log("User response to the install prompt: ".concat(n)),t(null),s(!1)},children:"Install App"})]})}):null},St=()=>{const[e,t]=(0,a.useState)(!1),[n,s]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,n="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;t(e||n);sessionStorage.getItem("iosNoticeDismissed")&&s(!0)},[]);const r=()=>{s(!0),sessionStorage.setItem("iosNoticeDismissed","true")};return!e||n?null:(0,d.jsx)("div",{className:"ios-notice",children:(0,d.jsxs)("div",{className:"ios-notice-content",children:[(0,d.jsx)("button",{className:"ios-notice-close",onClick:r,"aria-label":"Dismiss notice",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),(0,d.jsx)("div",{className:"ios-notice-icon",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),(0,d.jsxs)("div",{className:"ios-notice-text",children:[(0,d.jsx)("h3",{children:"iPhone/iPad Limitation"}),(0,d.jsx)("p",{children:"Unfortunately, iOS Safari doesn't support screen recording in browsers due to Apple restrictions. All browsers on iOS (including Chrome and Firefox) are affected by this limitation."}),(0,d.jsxs)("div",{className:"ios-notice-alternatives",children:[(0,d.jsx)("strong",{children:"Alternatives:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Use iOS native screen recording (Control Center \u2192 Record button)"}),(0,d.jsx)("li",{children:"Access this app on Android, Mac, Windows, or Linux"}),(0,d.jsx)("li",{children:"Mirror your iPhone to a computer and record there"})]})]}),(0,d.jsx)("p",{className:"ios-notice-footer",children:(0,d.jsx)("small",{children:"We'll support iOS immediately when Apple enables the Screen Capture API in Safari."})})]}),(0,d.jsx)("button",{className:"ios-notice-learn-more",onClick:r,children:"Got it, thanks!"})]})})};const Nt=()=>{window.self!==window.top&&(console.warn("App loaded in iframe - potential clickjacking attempt"),document.body.style.display="none",window.top.location=window.self.location)},kt=e=>{if("string"!==typeof e)return!1;return![/<script[^>]*>.*?<\/script>/gi,/javascript:/gi,/on\w+\s*=/gi,/<iframe/gi,/<object/gi,/<embed/gi].some(t=>t.test(e))},Ct=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={timestamp:(new Date).toISOString(),event:e,details:t,userAgent:navigator.userAgent,url:window.location.href};try{const e=JSON.parse(sessionStorage.getItem("security_logs")||"[]");e.push(n),e.length>100&&e.shift(),sessionStorage.setItem("security_logs",JSON.stringify(e))}catch(a){console.error("Failed to log security event:",a)}};"undefined"!==typeof window&&Nt();new class{constructor(){this.checks=[],this.warnings=[],this.errors=[]}async runAllChecks(){console.log("\ud83d\udd12 Running Security Integrity Checks..."),this.checkCSP(),this.checkSecurityHeaders(),this.checkLocalStorage(),this.checkSessionStorage(),this.checkCookies(),this.checkXSS(),this.checkProtocol(),this.checkContentType(),await this.checkSubresourceIntegrity(),this.checkFrameAncestors(),this.checkMixedContent();const e={passed:this.checks.filter(e=>e.passed).length,warnings:this.warnings.length,errors:this.errors.length,checks:this.checks,warningsList:this.warnings,errorsList:this.errors};return console.log("\u2705 Security Check Results:",e),e.errors.length>0&&(console.error("\u274c Security Errors Found:",e.errorsList),Ct("integrity_check_failed",{errors:e.errorsList})),e.warnings.length>0&&console.warn("\u26a0\ufe0f Security Warnings:",e.warningsList),e}checkCSP(){const e=document.querySelector('meta[http-equiv="Content-Security-Policy"]');if(!e)return this.errors.push("CSP meta tag missing"),void this.checks.push({name:"CSP Configuration",passed:!1});const t=e.getAttribute("content"),n=["default-src","script-src","style-src","frame-ancestors"].filter(e=>!t.includes(e));n.length>0?(this.warnings.push("CSP missing directives: ".concat(n.join(", "))),this.checks.push({name:"CSP Configuration",passed:!1})):this.checks.push({name:"CSP Configuration",passed:!0}),t.includes("upgrade-insecure-requests")||this.warnings.push("CSP should include upgrade-insecure-requests")}checkSecurityHeaders(){const e={"X-Frame-Options":document.querySelector('meta[http-equiv="X-Frame-Options"]'),"X-Content-Type-Options":document.querySelector('meta[http-equiv="X-Content-Type-Options"]'),"X-XSS-Protection":document.querySelector('meta[http-equiv="X-XSS-Protection"]')};Object.entries(e).forEach(e=>{let[t,n]=e;n?this.checks.push({name:"Header: ".concat(t),passed:!0}):(this.warnings.push("".concat(t," header missing")),this.checks.push({name:"Header: ".concat(t),passed:!1}))})}checkLocalStorage(){try{const e=["password","secret","token","apiKey","api_key"],t=Object.keys(localStorage).filter(t=>e.some(e=>t.toLowerCase().includes(e)));t.length>0?(this.warnings.push("Potential sensitive data in localStorage: ".concat(t.join(", "))),this.checks.push({name:"LocalStorage Security",passed:!1})):this.checks.push({name:"LocalStorage Security",passed:!0})}catch(e){this.warnings.push("Cannot access localStorage")}}checkSessionStorage(){try{const e=["password","secret","apiKey"],t=Object.keys(sessionStorage).filter(t=>e.some(e=>t.toLowerCase().includes(e)));t.length>0?(this.warnings.push("Sensitive data in sessionStorage: ".concat(t.join(", "))),this.checks.push({name:"SessionStorage Security",passed:!1})):this.checks.push({name:"SessionStorage Security",passed:!0})}catch(e){this.warnings.push("Cannot access sessionStorage")}}checkCookies(){0!==document.cookie.length?"https:"===window.location.protocol?this.checks.push({name:"Cookie Security",passed:!0}):(this.warnings.push("Cookies should only be used over HTTPS"),this.checks.push({name:"Cookie Security",passed:!1})):this.checks.push({name:"Cookie Security",passed:!0})}checkXSS(){let e=!0;['<script>alert("XSS")<\/script>','javascript:alert("XSS")','<img src=x onerror=alert("XSS")>'].forEach(t=>{kt(t)&&(e=!1)}),e?this.checks.push({name:"XSS Protection",passed:!0}):(this.errors.push("XSS protection not working correctly"),this.checks.push({name:"XSS Protection",passed:!1}))}checkProtocol(){"https:"===window.location.protocol||"localhost"===window.location.hostname?this.checks.push({name:"HTTPS Protocol",passed:!0}):(this.errors.push("Site should be served over HTTPS"),this.checks.push({name:"HTTPS Protocol",passed:!1}))}checkContentType(){const e=document.querySelector("meta[charset]");e&&"utf-8"===e.getAttribute("charset").toLowerCase()?this.checks.push({name:"Charset Configuration",passed:!0}):(this.warnings.push("Charset should be UTF-8"),this.checks.push({name:"Charset Configuration",passed:!1}))}async checkSubresourceIntegrity(){const e=Array.from(document.querySelectorAll("script[src]")).filter(e=>{const t=e.getAttribute("src");return t&&(t.startsWith("http://")||t.startsWith("https://"))}),t=Array.from(document.querySelectorAll('link[rel="stylesheet"][href]')).filter(e=>{const t=e.getAttribute("href");return t&&(t.startsWith("http://")||t.startsWith("https://"))}),n=[];e.forEach(e=>{e.hasAttribute("integrity")||n.push("Script: ".concat(e.getAttribute("src")))}),t.forEach(e=>{e.hasAttribute("integrity")||n.push("Stylesheet: ".concat(e.getAttribute("href")))}),n.length>0?(this.warnings.push("Missing SRI: ".concat(n.join(", "))),this.checks.push({name:"Subresource Integrity",passed:!1})):this.checks.push({name:"Subresource Integrity",passed:!0})}checkFrameAncestors(){try{window.self!==window.top?(this.errors.push("Page is being framed - possible clickjacking attack"),this.checks.push({name:"Frame Protection",passed:!1})):this.checks.push({name:"Frame Protection",passed:!0})}catch(e){this.checks.push({name:"Frame Protection",passed:!0})}}checkMixedContent(){if("https:"===window.location.protocol){const e=[];document.querySelectorAll('img[src^="http:"]').forEach(t=>{e.push("Image: ".concat(t.src))}),document.querySelectorAll('script[src^="http:"]').forEach(t=>{e.push("Script: ".concat(t.src))}),document.querySelectorAll('link[href^="http:"]').forEach(t=>{e.push("Stylesheet: ".concat(t.href))}),e.length>0?(this.errors.push("Mixed content detected: ".concat(e.join(", "))),this.checks.push({name:"Mixed Content Protection",passed:!1})):this.checks.push({name:"Mixed Content Protection",passed:!0})}else this.checks.push({name:"Mixed Content Protection",passed:!0})}};const Mt=function(){const[e,t]=(0,a.useState)(null),[n,s]=(0,a.useState)(!0),[r,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{console.log=()=>{},console.warn=()=>{},console.error=()=>{};const e=()=>{(window.outerWidth-window.innerWidth>160||window.outerHeight-window.innerHeight>160)&&Ct("devtools_detected",{timestamp:Date.now()})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{const e=localStorage.getItem("nebulaUser");if(e)try{t(JSON.parse(e))}catch(n){console.error("Error parsing saved user data:",n),localStorage.removeItem("nebulaUser"),Ct("corrupted_user_data",{error:n.message})}s(!1)},[]);const l=()=>{i(!1)};return r?(0,d.jsx)(he,{children:(0,d.jsx)(yt,{onComplete:l})}):n?(0,d.jsx)("div",{className:"App loading-app",children:(0,d.jsx)("div",{className:"loading-content",children:(0,d.jsx)("div",{className:"loading-spinner",children:"Loading..."})})}):(0,d.jsx)(he,{children:(0,d.jsx)("div",{className:"App",children:(0,d.jsxs)(jt,{children:[e?(0,d.jsx)(ct,{user:e,onLogout:()=>{localStorage.removeItem("nebulaUser"),t(null)}}):(0,d.jsx)(xt,{onAuthenticated:e=>{t(e)}}),(0,d.jsx)(wt,{}),(0,d.jsx)(St,{})]})})})},zt=e=>{e&&e instanceof Function&&n.e(206).then(n.bind(n,206)).then(t=>{let{getCLS:n,getFID:a,getFCP:s,getLCP:r,getTTFB:i}=t;n(e),a(e),s(e),r(e),i(e)})},Et=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Tt(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}const Pt={"default-src":["'self'"],"script-src":["'self'","'unsafe-inline'","blob:"],"style-src":["'self'","'unsafe-inline'"],"img-src":["'self'","data:","blob:","https://ui-avatars.com"],"media-src":["'self'","blob:","mediastream:"],"font-src":["'self'","data:"],"connect-src":["'self'","https://*.github.io","https://api.github.com"],"worker-src":["'self'","blob:"],"frame-ancestors":["'none'"],"base-uri":["'self'"],"form-action":["'self'"],"object-src":["'none'"],"upgrade-insecure-requests":[]},Rt=()=>Object.entries(Pt).map(e=>{let[t,n]=e;return 0===n.length?t:"".concat(t," ").concat(n.join(" "))}).join("; "),Lt=(["camera=(self)","microphone=(self)","display-capture=(self)","geolocation=()","payment=()","usb=()"].join(", "),Rt(),()=>{const e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("meta");t.httpEquiv="Content-Security-Policy",t.content=Rt(),e.appendChild(t);const n=document.createElement("meta");n.httpEquiv="X-Content-Type-Options",n.content="nosniff",e.appendChild(n);const a=document.createElement("meta");a.name="referrer",a.content="strict-origin-when-cross-origin",e.appendChild(a)}),Dt=()=>{const e=document.querySelectorAll("script[src]"),t=Array.from(e).every(e=>!!e.src.startsWith(window.location.origin)||e.hasAttribute("integrity"));return t||console.warn("Some external scripts lack integrity checks"),t},At=()=>"https:"===window.location.protocol||"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,Ft=()=>{Lt(),Dt(),At()||console.warn("App should be served over HTTPS in production");{const e=()=>{};console.log=e,console.info=e,console.warn=e,console.debug=e}window.addEventListener("error",e=>{e.message&&e.message.includes("SecurityError")&&console.error("Security Error detected:",e.message)});{const e=()=>{const e=window.outerWidth-window.innerWidth>160,t=window.outerHeight-window.innerHeight>160;(e||t)&&console.error("DevTools detected - monitoring for security")};window.addEventListener("resize",e),e()}};Ft();s.createRoot(document.getElementById("root")).render((0,d.jsx)(a.StrictMode,{children:(0,d.jsx)(Mt,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("","/service-worker.js");Et?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):Tt(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):Tt(t,e)})}}({onSuccess:()=>console.log("App is ready for offline use!"),onUpdate:e=>{console.log("New version available! Please refresh."),window.confirm("New version available! Reload to update?")&&e&&e.waiting&&(e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())}}),zt()})();